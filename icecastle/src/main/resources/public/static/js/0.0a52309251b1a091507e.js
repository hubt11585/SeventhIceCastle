webpackJsonp([0],{"+Urf":function(t,e){},"+WlS":function(t,e){},"+dCm":function(t,e,a){"use strict";e.a={data:function(){return{autoHeight:0}},methods:{re_layout:function(t,e,a){var n=this;this.$nextTick(function(){var s=document.getElementById(t)?document.getElementById(t).offsetHeight:0,i=document.getElementById(e)?document.getElementById(e).offsetHeight:0,o="number"==typeof a?a:0;n.autoHeight=0==i?s-65:s-i-o})}}}},"+ntr":function(t,e){},"+y6H":function(t,e){},"+yq9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("QTaZ"),s=a("3dxc"),i=a("Q5rI"),o=a("pMtO"),r=a("lbHh"),l=a.n(r),c={mixins:[a("+dCm").a],data:function(){var t=this,e=[{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"center"},{title:"产品名称",key:"fund_name",ellipsis:!0,align:"center"},{title:"托管人名称",key:"custodian_name",ellipsis:!0,align:"center"},{title:"银行账户名称",key:"bank_account_name",ellipsis:!0,align:"center"},{title:"银行账号",key:"bank_account_no",width:150,ellipsis:!0,align:"center"},{title:"账户用途",key:"account_class",ellipsis:!0,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.account_class,t.accountClassList))},exportRender:function(e,a){return Object(i._1)(e,t.accountClassList)}},{title:"余额",key:"account_cur_balance",ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.account_cur_balance))}},{title:"更新时间",key:"input_time",width:100,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.R)(0,a.input_time))}}];return{split:.15,accountCashModel:!1,accountCashSingleModel:!1,accountCashList:[],dataQuery:{fundId:"-1",queryDate:l.a.get("CurrSysDate")},accountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"托管账户"},{code:"3",text:"三方存管账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}],pageSizeOpts:[25,50,75,100],accountCashcolumns:e,accountCash:{fund_id:"",fund_code:"",fund_name:"",custodial_no:"",custodian_name:"",bank_account_name:"",bank_account_no:"",account_class:"",bank_account_id:0,account_cur_balance:"",input_time:"",transfer_type:"",curr_date:""},numberValidRule:[{test:/^[0-9]*$/,message:"只能输入数字"}]}},watch:{accountCashModel:function(t){t?this.openMask():this.closeMask()},accountCashSingleModel:function(t){t?this.openMask():this.closeMask()}},computed:{queryDate:{get:function(){return this.dataQuery.queryDate?Object(i.R)(this.dataQuery.queryDate):Object(i.R)(l.a.get("CurrSysDate"))},set:function(t){this.dataQuery.queryDate=Object(i.Q)(t)}}},created:function(){},mounted:function(){this.reLayout()},methods:{reLayout:function(){this.re_layout("full-h-wrapper-on-relatedcashreport","inner-on-relatedcashreport",60)},fundClick:function(t){t&&(this.dataQuery.fundId=t.code,this.$refs.datagridaccountCash.dataChange(1))},cashModify:function(){var t=this,e=this.dataQuery.fundId,a=this.dataQuery.queryDate,n=l.a.get("CurrSysDate");return"-1"==e?(this.openMask(),void this.$alert("请选择具体的产品信息","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):a<n?(this.openMask(),void this.$alert("不允许调整小于当日的账户余额","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void(0!=this.$refs.datagridaccountCash.$refs.gridContent.getSelection().length?this.cashModifySingle():this.cashModifyMul(e,a))},cashModifySingle:function(){var t=this;this.accountCashList=[],this.accountCash={};var e=this.$refs.datagridaccountCash.$refs.gridContent.getSelection(),a=e[0].account_class,n=e[0].transfer_type;return"1"!=a&&"2"!=a?(this.openMask(),void this.$alert("只允许修改托管户和普通银行账户的账户余额","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):"2"!=a||"1"!=n&&"4"!=n?(this.accountCash=e[0],void(this.accountCashSingleModel=!0)):(this.openMask(),void this.$alert("不允许修改划款模式为电子直连的托管户账户余额","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))},cashModifyMul:function(t,e){var a=this;Object(o.a)(t,e).then(function(t){1==t.data.success?(a.accountCashList=t.data.data,0==t.data.data.length?(a.openMask(),a.$alert("没有可以调整资金的银行账户","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})):a.accountCashModel=!0):(a.openMask(),a.$alert("资金调整失败","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}))}).catch(function(t){a.openMask(),a.$alert("资金调整发生异常","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})})},cashQuery:function(){this.$refs.datagridaccountCash.dataChange(1)},cashExport:function(){this.$refs.datagridaccountCash.exportCsv({filename:"关联方余额报表",original:!1})},ModifySingleCancle:function(){this.accountCashSingleModel=!1},ModifySingleOK:function(){var t=this;this.accountCashList[0]=this.accountCash,Object(o.h)(this.accountCashList).then(function(e){e&&(1==e.data.success?(t.$alert("资金调整成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.accountCashSingleModel=!1}}).then(function(){t.accountCashSingleModel=!1}),t.cashQuery()):t.$alert("资金调整失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.accountCashSingleModel=!1}}).then(function(){t.accountCashSingleModel=!1}))})},ModifyCancle:function(){this.accountCashModel=!1},ModifyOK:function(){var t=this;Object(o.h)(this.accountCashList).then(function(e){e&&(1==e.data.success?(t.$alert("资金调整成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.accountCashModel=!1}}).then(function(){t.accountCashModel=!1}),t.cashQuery()):t.$alert("资金调整失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.accountCashModel=!1}}).then(function(){t.accountCashModel=!1}))})},onSplitMoving:function(){this.$refs.datagridaccountCash.handleResize()}},name:"Check",components:{HDatagrid:s.a,HOtherFundTree:n.a}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMoving},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-relatedcashreport"},slot:"right"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.dataQuery}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.cashQuery}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashModify}},[t._v("调整")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashExport}},[t._v("导出")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagridaccountCash",staticStyle:{"margin-top":"10px"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:t.autoHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.dataQuery,columns:t.accountCashcolumns,url:"/cashcheck/relatedCash/relatedCashReport.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"800",height:"400",title:"资金调整","mask-closable":!1,inline:""},model:{value:t.accountCashModel,callback:function(e){t.accountCashModel=e},expression:"accountCashModel"}},[t._l(t.accountCashList,function(e){return a("div",[a("h-form",{ref:"accountCashForm",refInFor:!0,attrs:{cols:"3","label-width":80}},[a("h-form-item",{attrs:{label:"账户名称:"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:e.bank_account_name,callback:function(a){t.$set(e,"bank_account_name",a)},expression:"data.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行账号:"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:e.bank_account_no,callback:function(a){t.$set(e,"bank_account_no",a)},expression:"data.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"金额:",required:"",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"9",type:"money",divided:"",placeholder:"请输入"},model:{value:e.account_cur_balance,callback:function(a){t.$set(e,"account_cur_balance",a)},expression:"data.account_cur_balance"}})],1)],1)],1)}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.ModifyCancle}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.ModifyOK}},[t._v("确定")])],1)],2),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300",height:"160",title:"资金调整","mask-closable":!1,inline:""},model:{value:t.accountCashSingleModel,callback:function(e){t.accountCashSingleModel=e},expression:"accountCashSingleModel"}},[a("div",[a("h-form",{attrs:{cols:"1","label-width":80}},[a("h-form-item",{attrs:{label:"账户名称:"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.accountCash.bank_account_name,callback:function(e){t.$set(t.accountCash,"bank_account_name",e)},expression:"accountCash.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行账号:"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.accountCash.bank_account_no,callback:function(e){t.$set(t.accountCash,"bank_account_no",e)},expression:"accountCash.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"金额:",required:"",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"9",type:"money",divided:"",placeholder:"请输入"},model:{value:t.accountCash.account_cur_balance,callback:function(e){t.$set(t.accountCash,"account_cur_balance",e)},expression:"accountCash.account_cur_balance"}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.ModifySingleCancle}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.ModifySingleOK}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("f3Tf")},"data-v-39a88983",null);e.default=d.exports},"/ltC":function(t,e){},"1BUM":function(t,e){},"1l3G":function(t,e){},"1th5":function(t,e){},"2LNm":function(t,e){},"2i+O":function(t,e){},"3VHE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferApprove",data:function(){return{}},components:{approve:a("71k0").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("approve",{attrs:{pageType:"2"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},"3dxc":function(t,e,a){"use strict";var n=a("woOf"),s=a.n(n),i=a("5/bi");var o={methods:{dispatch:function(t,e,a){for(var n=this.$parent||this.$root,s=n.$options.name;n&&(!s||s!==t);)(n=n.$parent)&&(s=n.$options.name);n&&n.$emit.apply(n,[e].concat(a))},broadcast:function(t,e,a){(function t(e,a,n){this.$children.forEach(function(s){s.$options.name===e?s.$emit.apply(s,[a].concat(n)):t.apply(s,[e,a].concat([n]))})}).call(this,t,e,a)}}},r=a("Q5rI"),l={name:"HDatagrid",data:function(){return{tData:[],total:0,columndata:this.getMockData(),showColumns:this.getTargetKeys(),showColumnsTmp:"",dataInfo:{},pageInfo:{pageNo:1,pageSize:100},current:1,transProps:{key:"key",label:"title"},showLayout:!1,hasToolBar:!0,loadingData:!1}},mixins:[o],props:{gridName:String,title:String,gridData:Object,columns:Array,border:{type:Boolean,default:!0},size:{type:String,default:"small"},stripe:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},width:[Number,String],height:[Number,String],canDrag:{type:Boolean,default:!0},disabledHover:{type:Boolean,default:!1},highlightRow:{type:Boolean},rowClassName:Function,onDataText:String,rowSelect:{type:Boolean,defalut:!1},noFilteredDataText:String,onRowClick:{type:Function,default:function(){return""}},onRowDbClick:{type:Function,default:function(){return""}},onCurrentChange:{type:Function,default:function(){return""}},onCurrentChangeCancel:{type:Function,default:function(){return""}},onSelect:{type:Function,default:function(){return""}},onSelectCancel:{type:Function,default:function(){return""}},onSelectAll:{type:Function,default:function(){return""}},onSelectChange:{type:Function,default:function(){return""}},onSortChange:{type:Function,default:function(){return""}},onExpand:{type:Function,default:function(){return""}},pageSize:Number,placement:{type:String,default:"top"},pageSizeOpts:Array,simple:Boolean,showTotal:{type:Boolean,default:!0},showElevator:{type:Boolean,default:!0},showSizer:{type:Boolean,default:!0},className:String,styles:Object,hasPage:{type:Boolean,default:!1},getDataFunc:{type:Boolean,default:!1},url:String,bindForm:Object,autoLoad:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},property:{type:Object,default:function(){return{total:"total",rows:"rows",pageNo:"pageNo",pageSize:"pageSize",responseType:"data"}}}},watch:{pageSize:{handler:function(t){this.pageInfo.pageSize=t},immediate:!0},gridData:{handler:function(t,e){t&&t[this.property.rows]&&t[this.property.rows].length>0?this.tData=t[this.property.rows]:this.tData=[],this.hasPage&&(t&&t[this.property.total]?this.total=t[this.property.total]:this.tData=0)},deep:!0},loading:function(t){this.loadingData=t},showLayout:function(t){t?this.openMask():this.closeMask()},isSidebarExpand:{handler:function(t){this.$refs.gridContent.handleResize()}}},computed:{validColumns:function(){var t=this;if(this.gridName){var e=this.columns.filter(function(t){return"1"==t.fixedLayout});if(this.showColumns)for(var a=function(a){e.push(t.columns.filter(function(e){return e.key==t.showColumns[a]})[0])},n=0;n<this.showColumns.length;n++)a(n);return e}return this.columns},autoHeight:function(){return this.total>this.pageInfo.pageSize?this.height-40:this.height},showPage:function(){return this.total>this.pageInfo.pageSize},isSidebarExpand:function(){return this.$store.state.app.sidebar.opened}},methods:{getMockData:function(){var t,e=[];t=this.columns.filter(function(t){return!t.fixedLayout||t.fixedLayout.indexOf("1")<0});for(var a=0;a<t.length;a++)e.push({key:t[a].key,label:t[a].title});return e},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(t){return t.key})},renderMethod:function(t){return t.label},handleChange:function(t){this.showColumns=t},upDownMove:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].key);this.showColumns=e},openLayout:function(){this.showLayout=!0},submitLayout:function(){var t=this;this.showColumnsTmp=this.showColumns.join(","),Object(r.Y)({datagridName:this.gridName,showColumnStr:this.showColumnsTmp}).then(function(e){e.data&&"0"==e.data.code?t.showLayout=!1:t.$alert("调整布局失败","错误",{confirmButtonText:"确定",type:"error"})})},handleCancel:function(){this.showLayout=!1},getPageNo:function(){return this.pageInfo.pageNo},getPageSize:function(){return this.pageInfo.pageSize},getDataListByUrl:function(){var t=this,e={};if(this.loadingData=!0,this.hasPage){e.pageNo=this.pageInfo.pageNo,e.pageSize=this.pageInfo.pageSize,s()(e,this.bindForm);var a=this;i.a.post(this.url,e).then(function(e){var n=e.data;n&&(t.loadingData=!1,t.tData=n.list?n.list:[],t.total=n.total,a.$nextTick(function(){a.dispatch("curpage","successDatagridLoad",this.tData,this.total)}),SSObservable.publish("re_layout"))})}else{e.page_index=1,e.page_size=1e3,s()(e,this.bindForm);var n=this;i.a.post(this.url,e).then(function(e){var a=e.data.rows?e.data.rows:e.data.data;a&&(t.loadingData=!1,t.tData=a,t.$emit("getDataForDatagrid",t.tData),n.$nextTick(function(){n.dispatch("curpage","successDatagridLoad")}),SSObservable.publish("re_layout"))})}},clearData:function(){this.tData=[],this.total=0,this.current=1,this.pageInfo.pageNo=1,this.pageInfo.pageSize=100},setGridData:function(){this.gridData[this.property.rows]&&(this.tData=this.gridData[this.property.rows]),this.hasPage&&this.gridData[this.property.total]&&(this.total=this.gridData[this.property.total])},getDataList:function(){this.url?this.getDataListByUrl():this.getDataFunc?this.hasPage?this.$emit("get-data",this.pageInfo):this.$emit("get-data"):this.setGridData()},dataChange:function(t){t&&(this.pageInfo.pageNo=t,this.current=t),this.getDataList()},pageSizeChange:function(t){this.pageInfo.pageSize=t,this.current=1,this.pageInfo.pageNo=1,this.getDataList()},toggleTableSelect:function(t){this.$refs.gridContent.selectType?this.$refs.gridContent.toggleSelect(t):this.$alert("仅支持表格多选","提示",{confirmButtonText:"确定",type:"warning"})},exportCsv:function(t){this.$refs.gridContent.exportCsv(t)},changeGrid:function(t){var e=this,a=t;a&&Object(r.H)(a).then(function(t){if(t.data&&"0"==t.data.code){var a=t.data.data;e.showColumns=a?a.split(","):[]}})},handleResize:function(){this.$refs.gridContent.handleResize()}},created:function(){var t=this;this.gridName&&Object(r.H)(this.gridName).then(function(e){if(e.data&&"0"==e.data.code){var a=e.data.data;t.showColumns=a?a.split(","):[]}}),this.autoLoad?this.getDataList():this.gridData&&this.setGridData(),this.$slots.toolbar||(this.hasToolBar=!1)},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-datagrid"},[t.title?a("div",{staticClass:"h-datagrid-title"},[a("h4",[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.hasToolBar?a("div",{staticClass:"h-datagrid-toolbar"},[t._t("toolbar")],2):t._e(),t._v(" "),a("h-table",{ref:"gridContent",attrs:{data:t.tData,bodyAlgin:"right",headAlgin:"left",columns:t.validColumns,border:t.border,size:t.size,stripe:t.stripe,"show-header":t.showHeader,width:t.width,height:t.autoHeight,canDrag:t.canDrag,loading:t.loadingData,"disabled-hover":t.disabledHover,"highlight-row":t.highlightRow,"row-class-name":t.rowClassName,"no-data-text":t.onDataText,"no-filtered-data-text":t.noFilteredDataText,"row-select":t.rowSelect},on:{"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDbClick,"on-current-change":t.onCurrentChange,"on-current-change-cancle":t.onCurrentChangeCancel,"on-select":t.onSelect,"on-select-cancel":t.onSelectCancel,"on-select-all":t.onSelectAll,"on-selection-change":t.onSelectChange,"on-sort-change":t.onSortChange,"on-expand":t.onExpand}}),t._v(" "),t.hasPage?a("h-page",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],ref:"gridPage",attrs:{current:t.current,total:t.total,"page-size":t.pageSize,placement:t.placement,simple:t.simple,"show-total":t.showTotal,"show-elevator":t.showElevator,"show-sizer":t.showSizer,pageSizeOpts:t.pageSizeOpts,"class-name":t.className,styles:t.styles},on:{"on-change":t.dataChange,"on-page-size-change":t.pageSizeChange}}):t._e(),t._v(" "),t.gridName?a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"490px"},model:{value:t.showLayout,callback:function(e){t.showLayout=e},expression:"showLayout"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("布局")])]),t._v(" "),a("h-transfer",{attrs:{titles:["隐藏列","显示列"],data:t.columndata,"target-keys":t.showColumns,"render-format":t.renderMethod},on:{"on-right-drag":t.upDownMove,"on-change":t.handleChange}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.submitLayout}},[t._v("保存")]),t._v(" "),a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1):t._e()],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("OA4p")},null,null);e.a=u.exports},"48yI":function(t,e){},"4ZjR":function(t,e){},"4ir4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("QTaZ"),s=a("3dxc"),i=a("7mwo"),o=a("Q5rI"),r={name:"bondSettleMgnt",components:{HDatagrid:s.a,HOtherFundTree:n.a,BondSettleMgntTab:i.default},data:function(){var t=this;return{split:.15,mainQueryForm:{fundIds:"",queryType:"",keyword:""},mainHeight:0,queryTypeList:[],pageSizeOpts:[25,50,75,100],tab:"",detailColumns4SQS:[{fixedLayout:"1",key:"select",type:"selection",width:30,align:"left"},{fixedLayout:"1",title:"成交编号",key:"deal_no",ellipsis:!0,align:"left"},{title:"业务类别",key:"busin_type",ellipsis:!0,sortable:!0,align:"left",width:120,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.busin_type,t.sqsBusinTypeList))}},{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"left"},{title:"产品名称",key:"fund_name",ellipsis:!0,sortable:!0,align:"left"},{title:"指令状态",key:"settle_ins_status",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row,s=n.settle_ins_status;return"1"===n.cop_busin_class?"3"===n.clear_agent_code_cn?s=Object(o._1)(n.settle_ins_status,t.chinabondInsStatus):"4"===n.clear_agent_code_cn&&(s=Object(o._1)(n.settle_ins_status,t.shclearingInsStatus)):"4"===n.cop_busin_class?s=Object(o._1)(n.settle_ins_status,t.zdshInsStatus):n.cop_busin_class,e("span",{},s)}},{title:"合同状态",key:"settle_cont_status",ellipsis:!0,sortable:!0,align:"left"},{title:"划款状态",key:"transfer_fund_status",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row,s=n.transfer_fund_status;return"-"!==s&&(s=Object(o._1)(n.transfer_fund_status,t.transferFundStatusList)),e("span",{},s)}},{title:"清算机构",key:"clear_agent_code_cn",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.clear_agent_code_cn,t.clearAgentList))}},{title:"清算方式",key:"clear_type",ellipsis:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.clear_type,t.clearTypeList))}},{title:"首期结算金额",key:"settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_balance))}},{title:"首期结算日期",key:"cash_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.cash_settle_date))}},{title:"首期结算方式",key:"first_settle_type",ellipsis:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.first_settle_type,t.settleTypeList))}},{title:"到期结算金额",key:"expire_settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row,n=Object(o.h)(a.expire_settle_balance);return"N/A"===n?"":t("span",{style:{fontWeight:"bold"}},n)}},{title:"到期结算日期",key:"expire_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.expire_settle_date))}},{title:"到期结算方式",key:"expire_settle_type",ellipsis:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.expire_settle_type,t.settleTypeList))}},{title:"托管人",key:"fund_trust_bank",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_trust_bank,t.bankList))}},{title:"买方持有人简称",key:"buy_holder_name",ellipsis:!0,align:"left",width:120},{title:"卖方持有人简称",key:"sale_holder_name",ellipsis:!0,align:"left",width:120},{title:"买方状态",key:"buy_status_name",ellipsis:!0,align:"left"},{title:"卖方状态",key:"sale_status_name",ellipsis:!0,align:"left"},{title:"证券代码",key:"report_code",ellipsis:!0,align:"left"},{title:"证券名称",key:"stock_name",ellipsis:!0,align:"left"}],detailColumns4ZZD:[{fixedLayout:"1",key:"select",type:"selection",width:30,align:"left"},{fixedLayout:"1",title:"成交编号",key:"deal_no",ellipsis:!0,align:"left"},{title:"业务类别",key:"busin_type",ellipsis:!0,sortable:!0,align:"left",width:120,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.busin_type,t.zzdBusinTypeList))}},{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"left"},{title:"产品名称",key:"fund_name",ellipsis:!0,sortable:!0,align:"left"},{title:"指令状态",key:"settle_ins_status",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row,s=n.settle_ins_status;return"1"===n.cop_busin_class?"3"===n.clear_agent_code_cn?s=Object(o._1)(n.settle_ins_status,t.chinabondInsStatus):"4"===n.clear_agent_code_cn&&(s=Object(o._1)(n.settle_ins_status,t.shclearingInsStatus)):"4"===n.cop_busin_class?s=Object(o._1)(n.settle_ins_status,t.zdshInsStatus):n.cop_busin_class,e("span",{},s)}},{title:"合同状态",key:"settle_cont_status",ellipsis:!0,sortable:!0,align:"left"},{title:"划款状态",key:"transfer_fund_status",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row,s=n.transfer_fund_status;return"-"!==s&&(s=Object(o._1)(n.transfer_fund_status,t.transferFundStatusList)),e("span",{},s)}},{title:"清算机构",key:"clear_agent_code_cn",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.clear_agent_code_cn,t.clearAgentList))}},{title:"首期结算金额",key:"settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_balance))}},{title:"首期结算日期",key:"cash_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.cash_settle_date))}},{title:"首期结算方式",key:"first_settle_type",ellipsis:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.first_settle_type,t.settleTypeList))}},{title:"到期结算金额",key:"expire_settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row,n=Object(o.h)(a.expire_settle_balance);return"N/A"===n?"":t("span",{style:{fontWeight:"bold"}},n)}},{title:"到期结算日期",key:"expire_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.expire_settle_date))}},{title:"到期结算方式",key:"expire_settle_type",ellipsis:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.expire_settle_type,t.settleTypeList))}},{title:"托管人",key:"fund_trust_bank",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_trust_bank,t.bankList))}},{title:"对手方简称",key:"traderival_name",ellipsis:!0,align:"left",width:80}],detailColumns4ZDSH:[{fixedLayout:"1",key:"select",type:"selection",width:30,align:"left"},{fixedLayout:"1",title:"成交编号",key:"deal_no",ellipsis:!0,align:"left"},{title:"业务类别",key:"busin_type",ellipsis:!0,sortable:!0,align:"left",width:120,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.busin_type,t.zdshBusinTypeList))}},{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"left"},{title:"产品名称",key:"fund_name",ellipsis:!0,sortable:!0,align:"left"},{title:"指令状态",key:"settle_ins_status",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row,s=n.settle_ins_status;return"1"===n.cop_busin_class?"3"===n.clear_agent_code_cn?s=Object(o._1)(n.settle_ins_status,t.chinabondInsStatus):"4"===n.clear_agent_code_cn&&(s=Object(o._1)(n.settle_ins_status,t.shclearingInsStatus)):"4"===n.cop_busin_class?s=Object(o._1)(n.settle_ins_status,t.zdshInsStatus):n.cop_busin_class,e("span",{},s)}},{title:"合同状态",key:"settle_cont_status",ellipsis:!0,sortable:!0,align:"left"},{title:"划款状态",key:"transfer_fund_status",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row,s=n.transfer_fund_status;return"-"!==s&&(s=Object(o._1)(n.transfer_fund_status,t.transferFundStatusList)),e("span",{},s)}},{title:"清算机构",key:"clear_agent_code_cn",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.clear_agent_code_cn,t.clearAgentList))}},{title:"申请编号",key:"zdsh_apply_no",ellipsis:!0,align:"left",width:140},{title:"实际收付",key:"settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_balance))}},{title:"成交数量",key:"settle_amount",width:100,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_amount))}},{title:"托管人",key:"fund_trust_bank",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_trust_bank,t.bankList))}},{title:"交收日期",key:"cash_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.cash_settle_date))}},{title:"上海股东代码",key:"stockholder_id",ellipsis:!0,align:"left",width:120},{title:"备付金账号",key:"ta_account",ellipsis:!0,align:"left",width:120},{title:"证券代码",key:"report_code",ellipsis:!0,align:"left",width:80},{title:"附加说明",key:"remark",ellipsis:!0,align:"left"}],detailColumns4ZDSZ:[{fixedLayout:"1",key:"select",type:"selection",width:30,align:"left"},{fixedLayout:"1",title:"成交编号",key:"deal_no",ellipsis:!0,align:"left"},{title:"业务类别",key:"busin_type",ellipsis:!0,sortable:!0,align:"left",width:120,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.busin_type,t.zdszBusinTypeList))}},{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"left"},{title:"产品名称",key:"fund_name",ellipsis:!0,sortable:!0,align:"left"},{title:"指令状态",key:"settle_ins_status",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row,s=n.settle_ins_status;return"1"===n.cop_busin_class?"3"===n.clear_agent_code_cn?s=Object(o._1)(n.settle_ins_status,t.chinabondInsStatus):"4"===n.clear_agent_code_cn&&(s=Object(o._1)(n.settle_ins_status,t.shclearingInsStatus)):"4"===n.cop_busin_class?s=Object(o._1)(n.settle_ins_status,t.zdshInsStatus):n.cop_busin_class,e("span",{},s)}},{title:"合同状态",key:"settle_cont_status",ellipsis:!0,sortable:!0,align:"left"},{title:"划款状态",key:"transfer_fund_status",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row,s=n.transfer_fund_status;return"-"!==s&&(s=Object(o._1)(n.transfer_fund_status,t.transferFundStatusList)),e("span",{},s)}},{title:"清算机构",key:"clear_agent_code_cn",ellipsis:!0,sortable:!0,align:"left",width:80,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.clear_agent_code_cn,t.clearAgentList))}},{title:"收付净额",key:"settle_balance",width:120,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_balance))}},{title:"成交数量",key:"settle_amount",width:100,ellipsis:!0,sortable:!0,sortMethod:o.a,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.settle_amount))}},{title:"托管人",key:"fund_trust_bank",ellipsis:!0,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_trust_bank,t.bankList))}},{title:"交收日期",key:"cash_settle_date",ellipsis:!0,sortable:!0,align:"left",width:100,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.cash_settle_date))}},{title:"深圳股东代码",key:"stockholder_id",ellipsis:!0,align:"left",width:120},{title:"备付金账号",key:"ta_account",ellipsis:!0,align:"left",width:120},{title:"证券代码",key:"report_code",ellipsis:!0,align:"left",width:80}],shclearingInsStatus:[],chinabondInsStatus:[],zdshInsStatus:[],transferFundStatusList:[],clearAgentList:[],bankList:[],clearTypeList:[{code:"1",text:"全额结算"},{code:"2",text:"净额结算"}],settleTypeList:[],zdshBusinTypeList:[{code:"601",text:"现券交易"},{code:"605",text:"现券交易"},{code:"611",text:"现券交易"},{code:"619",text:"协议回购首期"},{code:"613",text:"协议回购到期"},{code:"614",text:"协议回购到期续做（前期合约了结）"},{code:"615",text:"协议回购到期续做（合约新开）"}],zdszBusinTypeList:[{code:"JY01",text:"现券交易"},{code:"XYCS",text:"协议回购首期"},{code:"XYDQ",text:"协议回购到期"},{code:"XYXZ",text:"协议回购续做"}],sqsBusinTypeList:[{code:"4",text:"现券交易"},{code:"5",text:"债券远期"},{code:"8",text:"债券借贷"},{code:"9",text:"质押式回购"},{code:"10",text:"买断式回购"}],zzdBusinTypeList:[{code:"BT00",text:"债券分销"},{code:"BT01",text:"现券交易"},{code:"BT02",text:"质押式回购"},{code:"BT03",text:"买断式回购"},{code:"BT04",text:"债券远期"},{code:"BT05",text:"债券借贷"},{code:"BT23",text:"质押式回购到期"},{code:"BT24",text:"买断式回购到期"},{code:"BT25",text:"债券借贷到期"},{code:"320",text:"现券交易"},{code:"341",text:"质押式回购"},{code:"331",text:"买断式回购"}]}},mounted:function(){var t=this;Object(o.t)(91140).then(function(e){return t.shclearingInsStatus=e.data}),Object(o.t)(91137).then(function(e){return t.chinabondInsStatus=e.data}),Object(o.t)(91228).then(function(e){return t.zdshInsStatus=e.data}),Object(o.t)(90571).then(function(e){return t.transferFundStatusList=e.data}),Object(o.t)(610309).then(function(e){return t.clearAgentList=e.data}),Object(o.t)(40334).then(function(e){return t.settleTypeList=e.data}),Object(o.j)("1").then(function(e){return t.bankList=e.data}),this.reLayout()},activated:function(){var t=this;Object(o.j)("1").then(function(e){return t.bankList=e.data}),this.refreshTable(),SSObservable.subscribe("moduleHeightChange",this.reLayout)},deactivated:function(){SSObservable.unsubscribe("moduleHeightChange",this.reLayout)},methods:{onSplitMoving:function(){this.resizeTable()},reLayout:function(){var t=document.getElementById("full-h-wrapper-on-bondsettlemgnt")?document.getElementById("full-h-wrapper-on-bondsettlemgnt").offsetHeight:0;this.mainHeight=t-190},fundClick:function(t){if(!t)return this.mainQueryForm.fundIds="",void this.refreshTable();this.mainQueryForm.fundIds=t.code,this.refreshTable()},refreshTable:function(){this.reLayout(),this.tab?"1"===this.tab?(this.mainQueryForm.queryType="1",this.$refs.bondSettleMgnt4SQS.refresh()):"2"===this.tab?(this.mainQueryForm.queryType="2",this.$refs.bondSettleMgnt4ZZD.refresh()):"3"===this.tab?(this.mainQueryForm.queryType="3",this.$refs.bondSettleMgnt4ZDSH.refresh()):"4"===this.tab&&(this.mainQueryForm.queryType="4",this.$refs.bondSettleMgnt4ZDSZ.refresh()):(this.mainQueryForm.queryType="1",this.$refs.bondSettleMgnt4SQS.refresh())},resizeTable:function(){this.tab?"1"===this.tab?this.$refs.bondSettleMgnt4SQS.handleResize():"2"===this.tab?this.$refs.bondSettleMgnt4ZZD.handleResize():"3"===this.tab?this.$refs.bondSettleMgnt4ZDSH.handleResize():"4"===this.tab&&this.$refs.bondSettleMgnt4ZDSZ.handleResize():this.$refs.bondSettleMgnt4SQS.handleResize()},tabChange:function(t,e){"上清所"===t.label?this.tab="1":"中债登"===t.label?this.tab="2":"PROP"===t.label?this.tab="3":"DCOM"===t.label&&(this.tab="4"),this.refreshTable()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMoving},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{showAll:!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-bondsettlemgnt"},slot:"right"},[a("el-tabs",{attrs:{"tab-position":"top"},on:{"tab-click":t.tabChange}},[a("el-tab-pane",{attrs:{label:"上清所"}},[a("BondSettleMgntTab",{ref:"bondSettleMgnt4SQS",attrs:{queryType:"1",mainHeight:t.mainHeight,detailColumns:t.detailColumns4SQS,mainQueryForm:t.mainQueryForm}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"中债登"}},[a("BondSettleMgntTab",{ref:"bondSettleMgnt4ZZD",attrs:{queryType:"2",mainHeight:t.mainHeight,detailColumns:t.detailColumns4ZZD,mainQueryForm:t.mainQueryForm}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"PROP"}},[a("BondSettleMgntTab",{ref:"bondSettleMgnt4ZDSH",attrs:{queryType:"3",mainHeight:t.mainHeight,detailColumns:t.detailColumns4ZDSH,mainQueryForm:t.mainQueryForm}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"DCOM"}},[a("BondSettleMgntTab",{ref:"bondSettleMgnt4ZDSZ",attrs:{queryType:"4",mainHeight:t.mainHeight,detailColumns:t.detailColumns4ZDSZ,mainQueryForm:t.mainQueryForm}})],1)],1)],1)])],1)},staticRenderFns:[]},c=a("VU/8")(r,l,!1,null,null,null);e.default=c.exports},"5Na9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l=a("QTaZ"),c={name:"transferTemplate",components:{FundChooseMsgBox:a("tq1/").a,HOtherFundTree:l.a,HDatagrid:n.a},data:function(){var t=this;return{split:.18,autoHeight:0,pageSizeOpts:[25,50,75,100],fundIdList:[],businClassList:[],bankList:[],stampList:[],stampInfoList:[],copBusinFlagList:[],copBusinFlag:[],showTemplateDialog:!1,showResult:!1,showBusinFlag:!1,actionType:"",trust_type:"",uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",fileList:[],errorData:[],trustFundList:[],multTrustFundList:[],allBusinFlagList:[],templateColumns:[{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{title:"编号",key:"serial_no",width:80,hiddenCol:!0,ellipsis:!0,align:"right"},{title:"产品",key:"fund_name",align:"left",ellipsis:!0,width:150},{title:"业务分类",key:"cop_busin_class_list",align:"left",width:150,ellipsis:!0,render:function(e,a){for(var n="",i=a.row.cop_busin_class_list.split(","),o=0;o<i.length;o++)n+=Object(s._1)(i[o],t.businClassList)+",";return e("span",{},n=n.substring(0,n.length-1))}},{title:"业务标志",key:"cop_busin_flag_list",align:"left",width:150,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._2)(n.cop_busin_flag_list,t.allBusinFlagList))}},{title:"托管人",key:"custodial_no",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},0==n.custodial_no?"自营":Object(s._0)(n.custodial_no,t.bankList))}},{title:"划款单模板",key:"file_name",align:"left",ellipsis:!0},{title:"公司签章",key:"stamp_id",align:"left",width:100,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_id,t.stampList))}},{title:"签章2",key:"stamp_src2",align:"left",width:70,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_src2,t.stampInfoList))}},{title:"签章3",key:"stamp_src3",align:"left",width:70,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_src3,t.stampInfoList))}},{title:"签章4",key:"stamp_src4",align:"left",width:70,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_src4,t.stampInfoList))}},{title:"签章5",key:"stamp_src5",align:"left",width:70,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_src5,t.stampInfoList))}},{title:"备注",key:"remark",align:"left",width:100,ellipsis:!0},{title:"划款单",align:"left",width:130,ellipsis:!0,render:function(e,a){var n=a.row;if(n.file_name)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.previewPDF(n.serial_no)}}},"预览"),e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadBySerialNo(n.serial_no)}}},"下载")]);return e("span",{},"-")}}],templateColums:[{width:80,type:"index",title:"序号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}],trustTypeList:[{code:"1",text:"自营"},{code:"2",text:"托管"}],queryForm:{fundId:""},uploadData:{fileType:"4",fundId:""},templateInfo:{serial_no:"",fund_id:"",custodial_no:"",file_id:"",cop_busin_class_list:"",cop_busin_flag_list:"-1",file_name:"",stamp_id:"",stamp_src1:"",stamp_src2:"",stamp_src3:"",stamp_src4:"",stamp_src5:"",remark:""}}},activated:function(){var t=this;Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundIdList=e.data)}),Object(s.J)(3).then(function(e){e.data&&e.data.length>0&&(t.stampList=e.data)}),Object(s.j)("1").then(function(e){return t.bankList=e.data.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})})},watch:{showTemplateDialog:function(t){t?this.openMask():(this.fileList=[],this.closeMask())},copBusinFlag:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.templateInfo.cop_busin_flag_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.templateInfo.cop_busin_flag_list=t;else{var a=t.split(",");this.templateInfo.cop_busin_flag_list=this.removeArr(a,"-1")}this.copBusinFlag=this.templateInfo.cop_busin_flag_list}},mounted:function(){var t=this;Object(s.t)(90723).then(function(e){return t.stampInfoList=e.data.filter(function(t){return"1"!=t.code})}),Object(s.t)(90523).then(function(e){return t.businClassList=e.data}),Object(s.p)("","",!0).then(function(e){t.allBusinFlagList=[{code:"-1",text:"全部"}],e&&e.data&&(t.allBusinFlagList=t.allBusinFlagList.concat(e.data))}),this.re_layout()},methods:{refresh:function(){this.$refs.datagrid.dataChange(1)},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-35},fundClick:function(t){t&&(this.queryForm.fundId=t.code,this.$refs.datagrid.dataChange(1))},templateAdd:function(){var t=this;this.fileList=[],this.$refs.templateForm.resetFields(),this.templateInfo={serial_no:null,fund_id:"",cop_busin_class_list:"",cop_busin_flag_list:"-1",file_name:null,file_id:"",transfer_template_path:"",remark:"",stamp_id:"",stamp_src1:"",stamp_src2:"",stamp_src3:"",stamp_src4:"",stamp_src5:"",custodial_no:"",fund_name:""},this.copBusinFlag=this.templateInfo.cop_busin_flag_list,this.queryForm.fundId?this.templateInfo.fund_id=this.queryForm.fundId:this.templateInfo.fund_id=this.fundIdList[0].code,Object(s.w)("/common/getFundInfo.json?fundId="+this.templateInfo.fund_id).then(function(e){"1"==e.data.fund_settle_type||"4"==e.data.fund_settle_type?t.trust_type="1":t.trust_type="2",t.trustTypeChange(t.trust_type)}),this.showTemplateDialog=!0,this.actionType="add"},templateModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.transferTemplateDbClick(e[0])},transferTemplateDbClick:function(t){this.fileList=[{name:t.file_name}],this.templateInfo=t,"0"==t.custodial_no?(this.trust_type="1",this.trustTypeChange(this.trust_type),this.templateInfo.custodial_no=t.custodial_no.toString()):t.custodial_no?(this.trust_type="2",this.trustTypeChange(this.trust_type),this.templateInfo.custodial_no=t.custodial_no.toString()):this.templateInfo.custodial_no="",this.copBusinFlag=this.templateInfo.cop_busin_flag_list,this.templateInfo.fund_id=t.fund_id.toString(),t.stamp_id&&(this.templateInfo.stamp_id=t.stamp_id.toString()),this.showTemplateDialog=!0,this.actionType="modify"},templateDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确认要删除这条记录吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,n;(a=e[0].serial_no,n=e[0].transfer_template_path,r.a.post("/systemmgnt/template/deleteTemplate.json",{serialNo:a,path:n})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},cancelTemplate:function(){this.showTemplateDialog=!1},saveTemplate:function(){var t,e=this,a=!0;(this.$refs.templateForm.validate(function(t){return a=a&&t}),this.templateInfo.fund_id)?this.templateInfo.file_name?a?("1"==this.trust_type&&(this.templateInfo.custodial_no="0"),"add"==this.actionType?(t=this.templateInfo,r.a.post("/systemmgnt/template/insertFixTemplate.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showTemplateDialog=!1}}).then(function(){e.showTemplateDialog=!1}),e.refresh()):"1120002"==t.data.code?(e.showTemplateDialog=!1,e.showResult=!0,e.errorData=t.data.data,e.errorData.total=e.templateInfo.fund_id.split(",").length,e.errorData.fail=t.data.data.length,e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):function(t){return r.a.post("/systemmgnt/template/modifyFixTemplate.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})}(this.templateInfo).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showTemplateDialog=!1}}).then(function(){e.showTemplateDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})):this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"}):this.$alert("划款单模板没有上传,请重新检查!","错误",{confirmButtonText:"确定",type:"error"}):this.$alert("产品没有维护,请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},firstChange:function(t){t==this.templateInfo.stamp_src3&&(this.templateInfo.stamp_src2=t,this.templateInfo.stamp_src3=""),t==this.templateInfo.stamp_src4&&(this.templateInfo.stamp_src2=t,this.templateInfo.stamp_src4=""),t==this.templateInfo.stamp_src5&&(this.templateInfo.stamp_src2=t,this.templateInfo.stamp_src5="")},secondChange:function(t){var e=this;t==this.templateInfo.stamp_src2&&this.templateInfo.stamp_src3&&this.templateInfo.stamp_src2&&this.$confirm("签章3不能和签章2一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src3=""}).catch(function(){e.templateInfo.stamp_src3=""}),t==this.templateInfo.stamp_src4&&(this.templateInfo.stamp_src3=t,this.templateInfo.stamp_src4=""),t==this.templateInfo.stamp_src5&&(this.templateInfo.stamp_src3=t,this.templateInfo.stamp_src5="")},thirdChange:function(t){var e=this;t==this.templateInfo.stamp_src2&&this.templateInfo.stamp_src4&&this.templateInfo.stamp_src2&&this.$confirm("签章4不能和签章2一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src4=""}).catch(function(){e.templateInfo.stamp_src4=""}),t==this.templateInfo.stamp_src3&&this.templateInfo.stamp_src4&&this.templateInfo.stamp_src3&&this.$confirm("签章4不能和签章3一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src4=""}).catch(function(){e.templateInfo.stamp_src4=""}),t==this.templateInfo.stamp_src5&&(this.templateInfo.stamp_src4=t,this.templateInfo.stamp_src5="")},forthChange:function(t){var e=this;t==this.templateInfo.stamp_src2&&this.templateInfo.stamp_src5&&this.templateInfo.stamp_src2&&this.$confirm("签章5不能和签章2一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src5=""}).catch(function(){e.templateInfo.stamp_src5=""}),t==this.templateInfo.stamp_src3&&this.templateInfo.stamp_src5&&this.templateInfo.stamp_src3&&this.$confirm("签章5不能和签章3一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src5=""}).catch(function(){e.templateInfo.stamp_src5=""}),t==this.templateInfo.stamp_src4&&this.templateInfo.stamp_src5&&this.templateInfo.stamp_src4&&this.$confirm("签章5不能和签章4一样","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.templateInfo.stamp_src5=""}).catch(function(){e.templateInfo.stamp_src5=""})},fileUploaded:function(t,e,a){"0"==t.code?1==a.length?(this.templateInfo.file_id=t.data,this.templateInfo.file_name=a[0].name):2==a.length?(this.templateInfo.file_id=t.data,this.templateInfo.file_name=a[1].name,a.splice(0,1)):(this.templateInfo.file_id="",this.templateInfo.file_name=""):(this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error"}),a.splice(a.length-1,1))},fileRemoved:function(t,e){this.templateInfo.file_name=e.reduce(function(t,e){return t+","+e.response.data},"").replace(",","")},choseFundList:function(){var t=document.getElementById("full-h-wrapper").offsetHeight;this.$refs.templateMsgBox.showMsgBox(this.templateInfo.fund_id,t,"1",this.trust_type)},saveFundInfo:function(t){this.templateInfo.fund_id=t},previewPDF:function(t){var e="/cop-web/static/plugins/pdfjs/generic/web/viewer.html?file="+encodeURIComponent(window.LOCAL_CONFIG.API_HOME+"/file/downloadFixTemplate.json?serialNo="+t);window.open(e,"划款单预览","width=800,height=600").focus()},downloadBySerialNo:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/downloadFixTemplate.json?serialNo="+t)},onSplitMove:function(){this.$refs.datagrid.handleResize()},trustTypeChange:function(t){var e=this;Object(s._5)(t).then(function(t){"add"==e.actionType?e.multTrustFundList=t.data.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}):e.trustFundList=t.data,!Object(s._1)(e.templateInfo.fund_id,t.data)&&t.data&&(e.templateInfo.fund_id=t.data[0].code)}),"2"==t&&this.templateInfo.custodial_no&&0==this.templateInfo.custodial_no&&(this.bankList?this.templateInfo.custodial_no=this.bankList[0].value:this.templateInfo.custodial_no="")},businClassChange:function(t){var e=this;t.length>1||0==t.length?(this.copBusinFlagList=[{value:"-1",label:"全部"}],this.showBusinFlag=!1,this.templateInfo.cop_busin_flag_list="-1"):(Object(s.p)(t.join(","),"",!0).then(function(t){t&&t.data&&(e.copBusinFlagList=[{value:"-1",label:"全部"}],e.copBusinFlagList=e.copBusinFlagList.concat(t.data.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}))),Object(s._2)(e.templateInfo.cop_busin_flag_list,e.copBusinFlagList)||(e.templateInfo.cop_busin_flag_list="-1")}),this.showBusinFlag=!0),this.copBusinFlag=this.templateInfo.cop_busin_flag_list},removeArr:function(t,e){for(var a=0;a<t.length;a++)t[a]==e&&t.splice(a,1);return t}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-transfer-template full-h"},[a("h-split",{attrs:{min:"50",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{"show-all":!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.templateAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.templateModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.templateDelete}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.queryForm,"auto-load":!1,"on-row-db-click":t.transferTemplateDbClick,columns:t.templateColumns,url:"/systemmgnt/template/templateList.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500","mask-closable":!1},model:{value:t.showTemplateDialog,callback:function(e){t.showTemplateDialog=e},expression:"showTemplateDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增划款单模板")]):a("span",[t._v("修改划款单模板")])]),t._v(" "),a("h-form",{ref:"templateForm",attrs:{model:t.templateInfo,"label-width":90}},[a("h-form-item",{attrs:{required:"",label:"托管方式"}},[a("h-select",{attrs:{filterable:"",clearable:!1},on:{"on-change":t.trustTypeChange},model:{value:t.trust_type,callback:function(e){t.trust_type=e},expression:"trust_type"}},t._l(t.trustTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),"add"==t.actionType?a("h-form-item",{attrs:{showMessage:"add"==t.actionType,required:"add"==t.actionType,label:"产品",prop:"fund_id"}},[a("div",[a("h-simple-select",{staticStyle:{width:"315px"},attrs:{autoPlacement:"",checkToHead:"",isString:"",multiple:"",filterable:"",showBottom:"",isSelectFilter:""},model:{value:t.templateInfo.fund_id,callback:function(e){t.$set(t.templateInfo,"fund_id",e)},expression:"templateInfo.fund_id"}},[a("h-select-block",{attrs:{data:t.multTrustFundList}})],1),t._v(" "),a("h-button",{staticStyle:{float:"right",height:"28px","margin-top":"3px"},attrs:{type:"primary",size:"small"},on:{click:t.choseFundList}},[t._v("选择")])],1)]):t._e(),t._v(" "),"modify"==t.actionType?a("h-form-item",{attrs:{showMessage:"add"==t.actionType,required:"modify"==t.actionType,label:"产品",prop:"fund_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:t.templateInfo.fund_id,callback:function(e){t.$set(t.templateInfo,"fund_id",e)},expression:"templateInfo.fund_id"}},t._l(t.trustFundList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务分类",prop:"cop_busin_class_list"}},[a("h-select",{attrs:{hideMult:"",multiple:"",isString:"",filterable:"",showBottom:""},on:{"on-change":t.businClassChange},model:{value:t.templateInfo.cop_busin_class_list,callback:function(e){t.$set(t.templateInfo,"cop_busin_class_list",e)},expression:"templateInfo.cop_busin_class_list"}},t._l(t.businClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showBusinFlag,expression:"showBusinFlag"}],attrs:{required:t.showBusinFlag,label:"业务标志",prop:"cop_busin_flag_list"}},[a("h-simple-select",{attrs:{multiple:"",isString:"",filterable:"",checkToHead:"",showBottom:""},model:{value:t.copBusinFlag,callback:function(e){t.copBusinFlag=e},expression:"copBusinFlag"}},[a("h-select-block",{attrs:{data:t.copBusinFlagList}})],1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==t.trust_type,expression:"trust_type == '2'"}],attrs:{required:"2"==t.trust_type,label:"托管人",prop:"custodial_no"}},[a("h-simple-select",{attrs:{filterable:""},model:{value:t.templateInfo.custodial_no,callback:function(e){t.$set(t.templateInfo,"custodial_no",e)},expression:"templateInfo.custodial_no"}},[a("h-select-block",{attrs:{data:t.bankList}})],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"划款单模板",prop:"file_name"}},[a("h-input",{attrs:{disabled:""},model:{value:t.templateInfo.file_name,callback:function(e){t.$set(t.templateInfo,"file_name",e)},expression:"templateInfo.file_name"}})],1),t._v(" "),a("h-form-item",[a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{drag:"",action:t.uploadUrl,data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"on-remove":t.fileRemoved,accept:".pdf,.hct",limit:2,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),t._v(" "),a("h-form-item",{attrs:{label:"公司签章",prop:"stamp_id"}},[a("h-select",{attrs:{filterable:""},model:{value:t.templateInfo.stamp_id,callback:function(e){t.$set(t.templateInfo,"stamp_id",e)},expression:"templateInfo.stamp_id"}},t._l(t.stampList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"签章2",prop:"stamp_src2"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.firstChange},model:{value:t.templateInfo.stamp_src2,callback:function(e){t.$set(t.templateInfo,"stamp_src2",e)},expression:"templateInfo.stamp_src2"}},t._l(t.stampInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"签章3",prop:"stamp_src3"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.secondChange},model:{value:t.templateInfo.stamp_src3,callback:function(e){t.$set(t.templateInfo,"stamp_src3",e)},expression:"templateInfo.stamp_src3"}},t._l(t.stampInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"签章4",prop:"stamp_src4"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.thirdChange},model:{value:t.templateInfo.stamp_src4,callback:function(e){t.$set(t.templateInfo,"stamp_src4",e)},expression:"templateInfo.stamp_src4"}},t._l(t.stampInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"签章5",prop:"stamp_src5"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.forthChange},model:{value:t.templateInfo.stamp_src5,callback:function(e){t.$set(t.templateInfo,"stamp_src5",e)},expression:"templateInfo.stamp_src5"}},t._l(t.stampInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"备注",prop:"remark"}},[a("h-input",{model:{value:t.templateInfo.remark,callback:function(e){t.$set(t.templateInfo,"remark",e)},expression:"templateInfo.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelTemplate}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveTemplate}},[t._v("确认")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新增结果")])]),t._v(" "),a("div",[t._v("一共新增"+t._s(t.errorData.total)+"条划款单模板配置，失败了"+t._s(t.errorData.fail)+"条，以下是具体的错误原因：")]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.templateColums}})],1),t._v(" "),a("fund-choose-msg-box",{ref:"templateMsgBox",on:{saveFundInfo:t.saveFundInfo}})],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("nWTj"),a("HoYU")},null,null);e.default=d.exports},"5ZLY":function(t,e){},"5jfH":function(t,e){},"5mNl":function(t,e){},"6Vkd":function(t,e,a){"use strict";var n=a("Q5rI"),s={name:"TADetailTable",data:function(){return{height1:this.height,height2:0,tableData:[],tableData1:[]}},props:{height:{type:Number}},methods:{formatter:function(t,e,a,s){return Object(n.h)(a)},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e){if("cash_settle_date"!==t.property&&"curr_date"!==t.property){var i=a.map(function(e){return Number(e[t.property])});i.every(function(t){return isNaN(t)})?s[e]="N/A":(s[e]=i.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),s[e]=Object(n.h)(s[e]))}}else s[e]="总计"}),s},arraySpanMethod:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;if(0===e)return 0==a||6==a?[1,6]:[0,0]},setData:function(t){var e=[{pre:"中登上海"}],a=[{pre:"中登深圳"}],n=[{pre:"自建TA"}];t.forEach(function(t){"1"==t.ta_type?n.push(t):"2"==t.ta_type?e.push(t):a.push(t)}),n.length>1?(this.tableData=n,this.tableData1=[]):1==e.length&&1==a.length?(this.tableData=[],this.tableData1=[]):(this.tableData=e.length>1?e:a,this.tableData1=e.length>1?a:[]),this.tableData&&this.tableData1.length>0?(this.height1=this.height/2,this.height2=this.height/2):(this.height1=this.height,this.height2=0)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":t.height1,data:t.tableData,border:"",colspan:"1","show-summary":"",size:"small","span-method":t.arraySpanMethod,"summary-method":t.getSummaries}},[a("el-table-column",{attrs:{prop:"pre",resizable:!1,width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agency_name",resizable:!1,label:"销售商",align:"center",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"net_amount",resizable:!1,align:"right",label:"申赎轧差净额","header-align":"center",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchase_amount",resizable:!1,label:"申购金额","header-align":"center",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"redemption_amount",resizable:!1,label:"赎回金额","header-align":"center",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"profit_amount",resizable:!1,label:"分红金额","header-align":"center",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"cash_settle_date",resizable:!1,label:"交收日期","header-align":"center",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{prop:"curr_date",resizable:!1,label:"确认日期","header-align":"center",align:"right"}})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:t.tableData1.length>1,expression:"tableData1.length>1"}],staticStyle:{width:"100%"},attrs:{"max-height":t.height2,data:t.tableData1,border:"",size:"small","show-summary":"","show-header":!1,"span-method":t.arraySpanMethod,"summary-method":t.getSummaries}},[a("el-table-column",{attrs:{prop:"pre",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"agency_name",label:"销售商",align:"center",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"net_amount",label:"申赎轧差净额",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchase_amount",label:"申购金额",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"redemption_amount",label:"赎回金额",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"profit_amount",label:"分红金额",align:"right",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"cash_settle_date",resizable:!1,label:"交收日期","header-align":"center",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{prop:"curr_date",resizable:!1,label:"确认日期","header-align":"center",align:"right"}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("bQmD")},"data-v-8541605c",null);e.a=o.exports},"6ZZc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),i=a("5/bi");function o(){return i.a.post("/systemmgnt/systemparameter.json")}function r(t){return i.a.post("/systemmgnt/sysParamPassword.json",{sysParamNo:t})}var l=a("Q5rI"),c={name:"systemparameter",data:function(){return{keys:[],szt_pwd:"",approveRuleModel:"",systemParamGroupListLeft:[],systemParamGroupListRight:[],systemParamGroup:{}}},mounted:function(){var t=this;Object(l.z)().then(function(e){return t.keys=e.data}),o().then(function(e){t.systemParamGroupListLeft=[],t.systemParamGroupListRight=[];for(var a=Math.ceil(e.data.length/2),n=function(a){for(var n=e.data[a],s=e.data[a].parameterList,i=function(e){if(1==s[e].showType)"1"==s[e].param_value?n.parameterList[e].booleanParamValue=!0:n.parameterList[e].booleanParamValue=!1;else if(10==s[e].showType&&s[e].param_value){var a=s[e].param_value.split("-");n.parameterList[e].beginTime=a[0],n.parameterList[e].endTime=a[1]}else 7==s[e].showType?r(s[e].sysparam_no).then(function(t){var a=[];a.push(t.data[1]),a.push(t.data[2]),a.push(t.data[3]),n.parameterList[e].param_value=Object(l.c)(t.data[0],a)}):3==s[e].showType&&(s[e].param_value?n.parameterList[e].paramValueList=s[e].param_value.split(","):n.parameterList[e].paramValueList=[]);10016==s[e].sysparam_no&&(t.approveRuleModel=s[e].param_value)},o=0;o<s.length;o++)i(o);t.systemParamGroupListLeft.push(n)},s=0;s<=a;s++)n(s);var i=function(a){for(var n=e.data[a],s=e.data[a].parameterList,i=function(t){if(1==s[t].showType)"1"==s[t].param_value?n.parameterList[t].booleanParamValue=!0:n.parameterList[t].booleanParamValue=!1;else if(10==s[t].showType&&s[t].param_value){var e=s[t].param_value.split("-");n.parameterList[t].beginTime=e[0],n.parameterList[t].endTime=e[1]}else 7==s[t].showType?r(s[t].sysparam_no).then(function(e){var a=[];a.push(e.data[1]),a.push(e.data[2]),a.push(e.data[3]),n.parameterList[t].param_value=Object(l.c)(e.data[0],a)}):3==s[t].showType&&(s[t].param_value?n.parameterList[t].paramValueList=s[t].param_value.split(","):n.parameterList[t].paramValueList=[])},o=0;o<s.length;o++)i(o);t.systemParamGroupListRight.push(n)};for(s=a+1;s<e.data.length;s++)i(s)})},methods:{systemSubmit:function(){var t=this;this.systemParamGroup.parameterList=[];var e,a=!1;(this.systemParamGroupListLeft.forEach(function(e){e.parameterList.forEach(function(e){3==e.showType?e.paramValueList&&e.paramValueList.length>0?e.param_value=e.paramValueList.join(","):e.param_value="":1==e.showType?1==e.booleanParamValue?e.param_value="1":e.param_value="0":7==e.showType?e.param_value=Object(l.e)(e.param_value,t.keys):10==e.showType&&(e.param_value=e.beginTime+"-"+e.endTime),10027!=e.sysparam_no||e.param_value||(t.openMask(),t.$alert("存档路径不能为空，请填写路径!","提示",{confirmButtonText:"确定",type:"warning",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),a=!0),t.systemParamGroup.parameterList.push(e)})}),this.systemParamGroupListRight.forEach(function(e){e.parameterList.forEach(function(e){3==e.showType?e.paramValueList&&e.paramValueList.length>0?e.param_value=e.paramValueList.join(","):e.param_value="":1==e.showType?1==e.booleanParamValue?e.param_value="1":e.param_value="0":7==e.showType?e.param_value=Object(l.e)(e.param_value,t.keys):10==e.showType&&(e.param_value=e.beginTime+"-"+e.endTime),10027!=e.sysparam_no||e.param_value||(t.openMask(),t.$alert("存档路径不能为空，请填写路径!","提示",{confirmButtonText:"确定",type:"warning",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),a=!0),t.systemParamGroup.parameterList.push(e)})}),a)?this.systemReset():(this.waitTime(),(e={dic_no:0,show_title:"",title_name:"",parameterList:this.systemParamGroup.parameterList},i.a.post("/systemmgnt/parameProcess.json",e,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})).then(function(e){e.data&&e.data.success?(t.openMask(),t.$alert("系统参数修改成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.systemReset()):(t.openMask(),t.$alert("修改系统参数失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))}))},systemReset:function(){var t=this;o().then(function(e){t.systemParamGroupListLeft=[],t.systemParamGroupListRight=[];for(var a=Math.ceil(e.data.length/2),n=function(a){for(var n=e.data[a],s=e.data[a].parameterList,i=function(e){if(1==s[e].showType)"1"==s[e].param_value?n.parameterList[e].booleanParamValue=!0:n.parameterList[e].booleanParamValue=!1;else if(10==s[e].showType&&s[e].param_value){var a=s[e].param_value.split("-");n.parameterList[e].beginTime=a[0],n.parameterList[e].endTime=a[1]}else 7==s[e].showType?r(s[e].sysparam_no).then(function(t){var a=[];a.push(t.data[1]),a.push(t.data[2]),a.push(t.data[3]),n.parameterList[e].param_value=Object(l.c)(t.data[0],a)}):3==s[e].showType&&(s[e].param_value?n.parameterList[e].paramValueList=s[e].param_value.split(","):n.parameterList[e].paramValueList=[]);10016==s[e].sysparam_no&&(t.approveRuleModel=s[e].param_value)},o=0;o<s.length;o++)i(o);t.systemParamGroupListLeft.push(n)},s=0;s<=a;s++)n(s);var i=function(a){for(var n=e.data[a],s=e.data[a].parameterList,i=function(t){if(1==s[t].showType)"1"==s[t].param_value?n.parameterList[t].booleanParamValue=!0:n.parameterList[t].booleanParamValue=!1;else if(10==s[t].showType&&s[t].param_value){var e=s[t].param_value.split("-");n.parameterList[t].beginTime=e[0],n.parameterList[t].endTime=e[1]}else 7==s[t].showType?r(s[t].sysparam_no).then(function(e){var a=[];a.push(e.data[1]),a.push(e.data[2]),a.push(e.data[3]),n.parameterList[t].param_value=Object(l.c)(e.data[0],a)}):3==s[t].showType&&(s[t].param_value?n.parameterList[t].paramValueList=s[t].param_value.split(","):n.parameterList[t].paramValueList=[])},o=0;o<s.length;o++)i(o);t.systemParamGroupListRight.push(n)};for(s=a+1;s<e.data.length;s++)i(s)})},coverFormat1:function(t){this.coverFormat(t,this.systemParamGroupListLeft),this.coverFormat(t,this.systemParamGroupListRight)},coverFormat2:function(t){this.coverFormat(t,this.systemParamGroupListLeft),this.coverFormat(t,this.systemParamGroupListRight)},coverFormat:function(t,e){var a=this,n=t.split(".");if(n[0]>100){for(var s=0;s<e.length;s++)if(6==e[s].show_title)for(var i=0;i<e[s].parameterList.length;i++)10014==e[s].parameterList[i].sysparam_no&&e[s].parameterList[i].param_value>100?e[s].parameterList[i].param_value=100:10015==e[s].parameterList[i].sysparam_no&&e[s].parameterList[i].param_value>100&&(e[s].parameterList[i].param_value=100)}else if(-1!=n[0].indexOf("-"))for(var o=0;o<e.length;o++)if(6==e[o].show_title)for(var r=0;r<e[o].parameterList.length;r++)10014==e[o].parameterList[r].sysparam_no&&-1!=e[o].parameterList[r].param_value.indexOf("-")?(this.openMask(),this.$alert("其他备付金比例不能为负数","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}),e[o].parameterList[r].param_value=0):10015==e[o].parameterList[r].sysparam_no&&-1!=e[o].parameterList[r].param_value.indexOf("-")&&(this.openMask(),this.$alert("债券备付金比例不能为负数","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}),e[o].parameterList[r].param_value=0)},waitTime:function(){this.waitTimeFunc(this.systemParamGroupListLeft),this.waitTimeFunc(this.systemParamGroupListRight)},waitTimeFunc:function(t){for(var e=this,a=0;a<t.length;a++)if(6==t[a].show_title)for(var n=0;n<t[a].parameterList.length;n++)if(10023==t[a].parameterList[n].sysparam_no){var s=t[a].parameterList[n].param_value;if(s<5)return t[a].parameterList[n].param_value=5,this.openMask(),void this.$alert("电子直连查询日终余额等待时间需在5-60分钟之间","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});if(s>60)return t[a].parameterList[n].param_value=60,this.openMask(),void this.$alert("电子直连查询日终余额等待时间需在5-60分钟之间","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})}},approveRuleChange:function(t){var e=this;this.approveRuleModel!==t&&i.a.post("/systemmgnt/countUnFinishTransfer.json").then(function(t){t&&"0"!=t.data.code&&e.$confirm(t.data.msg,"确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){for(var t=0;t<e.systemParamGroupListLeft.length;t++){var a=e.systemParamGroupListLeft[t];if("2"==a.show_title){for(var n=a.parameterList,s=0;s<n.length;s++)if(10016==n[s].sysparam_no){n[s].param_value=e.approveRuleModel;break}break}}})})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-systemparameter"},[a("h-row",{staticClass:"content"},[a("h-col",{attrs:{span:"11"}},[a("h-form",{attrs:{cols:"1","label-width":120}},[a("h-row",t._l(t.systemParamGroupListLeft,function(e){return a("h-col",{key:e.show_title,staticClass:"border_item",attrs:{span:"22"}},[a("p",{staticClass:"title",staticStyle:{"margin-bottom":"10px"}},[a("h-icon",{staticStyle:{margin:"0 5px 0 0"},attrs:{name:"navicon-round"}}),t._v(" "),a("label",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e.title_name))])],1),t._v(" "),t._l(e.parameterList,function(e){return a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:10032!=e.sysparam_no&&10022!=e.sysparam_no,expression:"systemParam.sysparam_no != 10032 && systemParam.sysparam_no != 10022 "}],key:"cop0"+e.sysparam_no,staticClass:"form_item",attrs:{"label-wrap":e.param_name.length>9,id:e.sysparam_no,label:e.param_name}},[1==e.showType?a("div",[a("div",[a("h-switch",{attrs:{size:"small"},model:{value:e.booleanParamValue,callback:function(a){t.$set(e,"booleanParamValue",a)},expression:"systemParam.booleanParamValue"}})],1)]):2==e.showType?a("div",[10016==e.sysparam_no?a("div",[a("h-radio-group",{attrs:{type:"button"},on:{"on-change":t.approveRuleChange},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(e){return a("h-radio",{key:e.code,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1):a("div",[a("h-radio-group",{attrs:{type:"button"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(e){return a("h-radio",{key:e.code,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1)]):3==e.showType?a("div",[a("h-checkbox-group",{model:{value:e.paramValueList,callback:function(a){t.$set(e,"paramValueList",a)},expression:"systemParam.paramValueList"}},t._l(e.itemList,function(t){return a("h-checkbtn",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):4==e.showType?a("div",[a("h-select",{staticClass:"input_attr",attrs:{filterable:""},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):5==e.showType?a("div",[a("h-select",{staticClass:"input_attr",attrs:{hideMult:"",isString:"",filterable:"",multiple:"",showBottom:""},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):6==e.showType&&"1"==e.modify_flag?a("div",[10007==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#DATE:日期")]),t._v(" "),a("p",[t._v("#STOCKCODE:证券代码")]),t._v(" "),a("p",[t._v("#STOCKNAME:证券名称")]),t._v(" "),a("p",[t._v("#SELFBANKNAME:本方托管人")]),t._v(" "),a("p",[t._v("#FUNDCODE:产品代码")]),t._v(" "),a("p",[t._v("#FUNDNAME:产品名称")]),t._v(" "),a("p",[t._v("#BUSINFLAG:业务标志")])])],1)],1):10008==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("保单号：#POLICY")])])],1)],1):10024==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#DATE:日期")]),t._v(" "),a("p",[t._v("#STOCKCODE:证券代码")]),t._v(" "),a("p",[t._v("#STOCKNAME:证券名称")]),t._v(" "),a("p",[t._v("#COMBINO:组合编号")]),t._v(" "),a("p",[t._v("#COMBINAME:组合名称")]),t._v(" "),a("p",[t._v("#FUNDCODE:产品代码")]),t._v(" "),a("p",[t._v("#FUNDNAME:产品名称")]),t._v(" "),a("p",[t._v("#ALLOCID:指令序号")]),t._v(" "),a("p",[t._v("#ALLOCMODIFY:修改次序")])])],1)],1):10033==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("1、日期宏:YYYYMMDD、")]),t._v(" "),a("p",[t._v("YYYYMM、YYMMDD、YYYY、")]),t._v(" "),a("p",[t._v("YYMM、MMDD等(前面没有#)")])])],1)],1):10034==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("1、日期宏:YYYYMMDD、")]),t._v(" "),a("p",[t._v("YYYYMM、YYMMDD、YYYY、")]),t._v(" "),a("p",[t._v("YYMM、MMDD等(前面没有#)")])])],1)],1):10047==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#FUND_NAME:产品名称")]),t._v(" "),a("p",[t._v("#CURR_DATE:当前日期")])])],1)],1):10014==e.sysparam_no?a("div",[a("h-typefield",{staticClass:"input_attr",attrs:{integerNum:"3",suffixNum:"6",type:"money",placeholder:"请填写比例"},on:{"on-keyup":t.coverFormat1},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1):10015==e.sysparam_no?a("div",[a("h-typefield",{staticClass:"input_attr",attrs:{integerNum:"3",suffixNum:"6",type:"money",placeholder:"请填写比例"},on:{"on-keyup":t.coverFormat2},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1):10023==e.sysparam_no?a("div",[a("h-input",{staticClass:"input_attr",on:{"on-blur":t.waitTime},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("分钟")])])],1):10027==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#YYYYMMDD:日期")]),t._v(" "),a("p",[t._v("#YEAR:年份")]),t._v(" "),a("p",[t._v("#MONTH:月份")]),t._v(" "),a("p",[t._v("#BUSINESS:业务")]),t._v(" "),a("p",[t._v("#PRODUCT:产品")])])],1)],1):a("div",[a("h-input",{staticClass:"input_attr",model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1)]):6==e.showType&&"0"==e.modify_flag?a("div",[a("span",[t._v(t._s(e.param_value))])]):7==e.showType?a("div",[a("h-input",{directives:[{name:"attrdel",rawName:"v-attrdel:title",arg:"title"}],staticClass:"input_attr",attrs:{type:"password",maxlength:20},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):8==e.showType&&"1"==e.modify_flag?a("div",[a("h-date-picker",{staticClass:"input_attr",attrs:{placeholder:"选择日期"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):9==e.showType?a("div",[a("h-time-picker",{staticClass:"input_attr",attrs:{format:"HH:mm:ss"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):10==e.showType?a("div",[a("h-row",[a("h-col",{staticStyle:{width:"33%","margin-right":"1.5%"},attrs:{span:"4"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"systemParam.beginTime"}})],1),t._v(" "),a("h-col",{staticStyle:{width:"2.5%"},attrs:{span:"1"}},[t._v("-")]),t._v(" "),a("h-col",{staticStyle:{width:"33%"},attrs:{span:"4"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"systemParam.endTime"}})],1)],1)],1):10==e.showType?a("div",[a("h-input",{directives:[{name:"attrdel",rawName:"v-attrdel:title",arg:"title"}],staticClass:"input_attr",attrs:{type:"password",maxlength:20},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):t._e()])})],2)}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"11"}},[a("h-form",{attrs:{cols:"1","label-width":120}},[a("h-row",t._l(t.systemParamGroupListRight,function(e){return a("h-col",{key:e.show_title,staticClass:"border_item",attrs:{span:"22"}},[a("p",{staticClass:"title",staticStyle:{"margin-bottom":"10px"}},[a("h-icon",{staticStyle:{margin:"0 5px 0 0"},attrs:{name:"navicon-round"}}),t._v(" "),a("label",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e.title_name))])],1),t._v(" "),t._l(e.parameterList,function(e){return a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:10032!=e.sysparam_no&&10022!=e.sysparam_no,expression:"systemParam.sysparam_no != 10032 && systemParam.sysparam_no != 10022 "}],key:"cop2"+e.sysparam_no,staticClass:"form_item",attrs:{"label-wrap":e.param_name.length>9,id:e.sysparam_no,label:e.param_name}},[1==e.showType?a("div",[a("div",[a("h-switch",{attrs:{size:"small"},model:{value:e.booleanParamValue,callback:function(a){t.$set(e,"booleanParamValue",a)},expression:"systemParam.booleanParamValue"}})],1)]):2==e.showType?a("div",[a("h-radio-group",{attrs:{type:"button"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(e){return a("h-radio",{key:e.code,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1):3==e.showType?a("div",[a("h-checkbox-group",{model:{value:e.paramValueList,callback:function(a){t.$set(e,"paramValueList",a)},expression:"systemParam.paramValueList"}},t._l(e.itemList,function(t){return a("h-checkbtn",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):4==e.showType?a("div",[a("h-select",{staticClass:"input_attr",attrs:{filterable:""},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):5==e.showType?a("div",[a("h-select",{staticClass:"input_attr",attrs:{hideMult:"",isString:"",filterable:"",multiple:"",showBottom:""},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},t._l(e.itemList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1):6==e.showType&&"0"==e.modify_flag?a("div",[a("span",[t._v(t._s(e.param_value))])]):6==e.showType&&"1"==e.modify_flag?a("div",[10007==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#DATE:日期")]),t._v(" "),a("p",[t._v("#STOCKCODE:证券代码")]),t._v(" "),a("p",[t._v("#STOCKNAME:证券名称")]),t._v(" "),a("p",[t._v("#SELFBANKNAME:本方托管人")]),t._v(" "),a("p",[t._v("#FUNDCODE:产品代码")]),t._v(" "),a("p",[t._v("#FUNDNAME:产品名称")]),t._v(" "),a("p",[t._v("#BUSINFLAG:业务标志")])])],1)],1):10008==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("保单号：#POLICY")])])],1)],1):10024==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#DATE:日期")]),t._v(" "),a("p",[t._v("#STOCKCODE:证券代码")]),t._v(" "),a("p",[t._v("#STOCKNAME:证券名称")]),t._v(" "),a("p",[t._v("#COMBINO:组合编号")]),t._v(" "),a("p",[t._v("#COMBINAME:组合名称")]),t._v(" "),a("p",[t._v("#FUNDCODE:产品代码")]),t._v(" "),a("p",[t._v("#FUNDNAME:产品名称")]),t._v(" "),a("p",[t._v("#ALLOCID:指令序号")]),t._v(" "),a("p",[t._v("#ALLOCMODIFY:修改次序")])])],1)],1):10033==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("1、日期宏:YYYYMMDD、")]),t._v(" "),a("p",[t._v("YYYYMM、YYMMDD、YYYY、")]),t._v(" "),a("p",[t._v("YYMM、MMDD等(前面没有#)")])])],1)],1):10034==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("1、日期宏:YYYYMMDD、")]),t._v(" "),a("p",[t._v("YYYYMM、YYMMDD、YYYY、")]),t._v(" "),a("p",[t._v("YYMM、MMDD等(前面没有#)")])])],1)],1):10047==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#FUND_NAME:产品名称")]),t._v(" "),a("p",[t._v("#CURR_DATE:当前日期")])])],1)],1):10014==e.sysparam_no?a("div",[a("h-typefield",{staticClass:"input_attr",attrs:{integerNum:"3",suffixNum:"6",type:"money",placeholder:"请填写比例"},on:{"on-keyup":t.coverFormat1},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1):10015==e.sysparam_no?a("div",[a("h-typefield",{staticClass:"input_attr",attrs:{integerNum:"3",suffixNum:"6",type:"money",placeholder:"请填写比例"},on:{"on-keyup":t.coverFormat2},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1):10023==e.sysparam_no?a("div",[a("h-input",{staticClass:"input_attr",on:{"on-blur":t.waitTime},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("分钟")])])],1):10027==e.sysparam_no?a("div",[a("h-poptip",{staticClass:"cop-poptip input_attr",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("#YYYYMMDD:日期")]),t._v(" "),a("p",[t._v("#YEAR:年份")]),t._v(" "),a("p",[t._v("#MONTH:月份")]),t._v(" "),a("p",[t._v("#BUSINESS:业务")]),t._v(" "),a("p",[t._v("#PRODUCT:产品")])])],1)],1):a("div",[a("h-input",{staticClass:"input_attr",model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1)]):7==e.showType?a("div",[a("h-input",{directives:[{name:"attrdel",rawName:"v-attrdel:title",arg:"title"}],staticClass:"input_attr",attrs:{type:"password",maxlength:20},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):8==e.showType&&"1"==e.modify_flag?a("div",[a("h-date-picker",{staticClass:"input_attr",attrs:{placeholder:"选择日期"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):9==e.showType?a("div",[a("h-time-picker",{staticClass:"input_attr",attrs:{format:"HH:mm:ss"},model:{value:e.param_value,callback:function(a){t.$set(e,"param_value",a)},expression:"systemParam.param_value"}})],1):10==e.showType?a("div",[a("h-row",[a("h-col",{staticStyle:{width:"33%","margin-right":"1.5%"},attrs:{span:"4"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"systemParam.beginTime"}})],1),t._v(" "),a("h-col",{staticStyle:{width:"2.5%"},attrs:{span:"1"}},[t._v("-")]),t._v(" "),a("h-col",{staticStyle:{width:"33%"},attrs:{span:"4"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"systemParam.endTime"}})],1)],1)],1):t._e()])})],2)}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"2"}})],1),t._v(" "),a("div",{staticClass:"systemProBtn"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.systemSubmit}},[t._v("提交")]),t._v(" "),a("h-button",{attrs:{type:"ghost"},on:{click:t.systemReset}},[t._v("重置")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("PrpQ"),a("5mNl")},"data-v-b80b6162",null);e.default=d.exports},"71k0":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),i=a("3dxc"),o=a("22iY"),r=a("Q5rI"),l=a("Hhn/"),c=a("Q0Ca"),u=a("HmOp"),d=a("N/wp"),f=a("fb3d"),p=a("jV6A"),h=a("lbHh"),_=a.n(h),m=a("+dCm"),b=a("npUS"),v=a("Yv4f"),g=a("DudF"),y=a("6Vkd"),k=a("ZTu0"),w=a("K+nL"),C=a("d+lO"),x=a("foEa"),I=a("se30"),T={name:"approve",mixins:[m.a],data:function(){var t=this;return{showDealType:!1,dealType:"1",dealTypeList:[{code:"1",text:"划款"}],autoHeight:0,single:!1,sortingField:"",split:.15,showReportCode:"",showRival:"",showClearAgent:"",sysDate:"",bankBalance:"",dvpBalance:"",dvpSum:"",dvpTrans:!1,rivalLoading:!1,rivalComplete:!1,showAgency:!1,useTemplateFlag:!1,bankCorporateLink:!1,quickFlagList:[],IntoSHQList:[{code:20116,text:"托管户调入上清DVP"},{code:30110,text:"中债DVP调入上清DVP"}],OutFromSHQList:[{code:10070,text:"上清DVP调入托管户"}],IntoZZList:[{code:20117,text:"托管户调入中债DVP"},{code:30008,text:"上清DVP调入中债DVP"}],agentCodeList:[{code:"3",text:"中债登"},{code:"4",text:"上清所"}],OutFromZZList:[{code:10071,text:"中债DVP调入托管户"}],accountStyle:{borderColor:"#d3d3d3",height:"230px"},trusteeStyle:{height:"230px"},fundCashList:[],businCashList:[],acctBalanceList:[],trustAcctList:[],dataSourceList:[],templateColumns:[{key:"template_name",title:"模板名称",align:"left"},{key:"fund_name",title:"产品名称",align:"left"},{key:"cop_busin_class",title:"业务分类",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cop_busin_class,t.businClassList))}},{key:"cop_busin_caption",title:"业务标志",align:"left"},{key:"cash_direction",title:"划款方向",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cash_direction,t.cashDirectionList))}},{key:"remark",title:"模板说明",align:"left"}],queryTemp:{name:null,cop_busin_class:null,cop_busin_flag:null,fundIds:null,cash_direction:null},showTemplateList:!1,showTemplate:!1,templateInfo:{serial_no:"",template_name:"",remark:""},activeName:["2","3"],detailForm:{transfer_ins_id:null,transfer_ins_modify:null},inAcct:{fullName:"",bank_account_no:"",bank_account_id:"",bic_code:"",bank_account_name:"",pay_no:"",province_code:"",city_no:"",original_bank_account_id:"",rival_code:""},numberValidRule:[{test:/^[A-Za-z0-9()-]+$/,message:"账号格式不正确"}],outAcct:{fullName:"",bank_account_no:"",bank_account_id:"",bic_code:"",bank_account_name:"",pay_no:"",original_bank_account_id:"",rival_code:""},macroInfo:{},getMacro:!1,getAcct:!1,clearAgentList:[{code:"1",text:"中登上海"},{code:"2",text:"中登深圳"},{code:"3",text:"中债登"},{code:"4",text:"上清所"}],transferInfo:{require_pay_date:null,require_pay_time:null,fund_id:null,transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,cop_busin_flag:"",settle_balance:"",rival_code:"",issuer_code:"",rival_name:"",invest_type:"",approve_officer:"",settle_ment:"",original_transfer_purpose:"",stock_name:"",report_code:"",seat_id:"",stockholder_id:"",settle_amount:"",deposit_limit_time:"",deposit_limit_time_unit:"",remark:"",apply_price:"",transfer_merge_flag:"",traderival_name:"",deal_no:"",withdrawal_date:"",currency_no:""},settleBalanceQuick:"",custodial_no:"",transfer_type:"",transferInfo4Temp:{template_name:"",remark:""},queryForm:{fundIds:"",keyword:"",businClass:"",showToday:"0",pageType:this.pageType},uploadData:{fileType:"2",fundId:""},uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",pageSizeOpts:[25,50,75,100],item:{},businClassTreeAll:[],businClassTree:[],showDialog:!1,errorColumns:[{width:80,key:"id",title:"序号",align:"center"},{width:307,key:"err",title:"错误信息",align:"center"}],actionType:null,flowColumns:[{width:60,type:"index",title:"序号",align:"center"},{width:100,key:"operator_name",title:"操作员",align:"left"},{title:"审批节点",key:"node_name",width:100,align:"left",ellipsis:!0,render:function(t,e){var a,n=e.row;switch(n.node_name){case"approve":a="经办";break;case"settle":a="交收";break;default:a=n.node_name}return t("span",{},a)}},{width:100,key:"transfer_flow_flag",title:"操作说明",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.transfer_flow_flag,t.transferFlagList))}},{width:150,key:"exec_date",title:"操作时间",align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.exec_date,a.exec_time))}},{key:"remark",title:"备注",align:"left"}],businColumns:[{fixedLayout:"1",title:"序号",key:"transfer_ins_id",align:"left",ellipsis:!0},{title:"加急",key:"urgent_flag",width:35,align:"center",render:function(t,e){return"1"===e.row.urgent_flag?t("span",{style:{fontWeight:"bold",color:"red",fontSize:"18px"}},"!"):t("span","")}},{title:"指令来源",key:"data_source",width:80,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.data_source,t.dataSourceList))}},{title:"产品名称",key:"fund_name",width:150,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"产品名称",field:"fund_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_name"),t.sortingField="fund_name"}}})}},{title:"外部产品名称",key:"product_name",width:100,align:"left",ellipsis:!0},{title:"外部指令序号",key:"daily_instruction_no",align:"left",width:100,ellipsis:!0},{title:"指令生成时间",key:"input_date",align:"left",width:135,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.input_date,a.input_time))}},{title:"审批状态",key:"node_name",width:90,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(c.nodeNameDesc)(a.node_name))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"审批状态",field:"node_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"node_name"),t.sortingField="node_name"}}})}},{title:"合同状态",key:"cash_settle_status",align:"left",width:130,sortable:!0,ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"合同状态",field:"cash_settle_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_status"),t.sortingField="cash_settle_status"}}})}},{title:"划款状态",key:"transfer_fund_status",align:"left",width:90,sortable:!0,ellipsis:!0,render:function(e,a){var n=a.row;return n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0?e("span",{},"-"):e("span",{},Object(r._1)(n.transfer_fund_status,t.transferFundStatusList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"划款状态",field:"transfer_fund_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"transfer_fund_status"),t.sortingField="transfer_fund_status"}}})}},{title:"清算机构",key:"clear_agent_code_cn",align:"left",width:90,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.clear_agent_code_cn,t.clearAgentList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"清算机构",field:"clear_agent_code_cn",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"clear_agent_code_cn"),t.sortingField="clear_agent_code_cn"}}})}},{key:"market_no",width:95,title:"交易市场",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.market_no,t.marketList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交易市场",field:"market_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"market_no"),t.sortingField="market_no"}}})}},{title:"成交/合同编号",key:"deal_no",width:120,sortable:!0,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"成交/合同编号",field:"deal_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"deal_no"),t.sortingField="deal_no"}}})}},{title:"到期成交编号",key:"deal_no_end",width:120,align:"left",ellipsis:!0},{title:"续做成交编号",key:"deal_no_new",width:120,align:"left",ellipsis:!0},{title:"申请编号",key:"zdsh_apply_no",width:120,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"申请编号",field:"zdsh_apply_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"zdsh_apply_no"),t.sortingField="zdsh_apply_no"}}})}},{title:"结算金额",key:"settle_balance",ellipsis:!0,width:140,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(r.h)(a.settle_balance))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"结算金额",field:"settle_balance",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"settle_balance",!0),t.sortingField="settle_balance"}}})}},{title:"币种",key:"currency_no",width:60,sortable:!0,ellipsis:!0,align:"left",render:function(t,e){var a,n=e.row;switch(n.currency_no){case"CNY":a="人民币";break;case"USD":a="美元";break;default:a=n.currency_no}return t("span",{},a)}},{title:"起息日",key:"fee_begin_date",width:100,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.fee_begin_date))}},{title:"到期日",width:100,key:"fee_end_date",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.fee_end_date))}},{title:"证券代码",key:"report_code",width:90,sortable:!0,ellipsis:!0,align:"left"},{title:"证券名称",width:100,key:"stock_name",ellipsis:!0,align:"left"},{title:"资金方向",key:"cash_direction",width:95,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cash_direction,t.cashDirectionList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"资金方向",field:"cash_direction",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_direction"),t.sortingField="cash_direction"}}})}},{title:"业务标志",key:"cop_busin_caption",width:130,sortable:!0,ellipsis:!0,align:"left",renderHeader:function(e,a){return e("Sortheader",{props:{title:"业务标志",field:"cop_busin_caption",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cop_busin_caption"),t.sortingField="cop_busin_caption"}}})}},{title:"附件",key:"bill_name",width:50,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return"1"===a.transfer_merge_flag?t("span",{},Object(l.o)(a)):a.bill_name?t("Icon",{props:{name:"document"}}):t("span",{},"-")}},{title:"结算方式",key:"settle_ment",align:"left",width:80,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.settle_ment,t.settleMentList))}},{title:"托管人",key:"fund_trust_bank",align:"left",width:100,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.fund_trust_bank,t.bankInfoList))}},{title:"对手方",width:140,key:"rival_name",ellipsis:!0,align:"left"},{title:"交收日期",key:"cash_settle_date",sortable:!0,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.cash_settle_date))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交收日期",field:"cash_settle_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_date"),t.sortingField="cash_settle_date"}}})}},{title:"投资类型",key:"invest_type",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.invest_type,t.investTypeList))}},{title:"原始划款事由",key:"original_transfer_purpose",ellipsis:!0,align:"left"},{title:"外部划款序号",key:"out_transfer_id",ellipsis:!0,align:"left"},{title:"交易员",key:"trade_operator_name",ellipsis:!0,align:"left"},{title:"申购价格（元/股）",key:"apply_price",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(r.h)(a.apply_price))}},{title:"交易端备注",key:"transfer_trade_remark",ellipsis:!0,align:"left"},{title:"指令端备注",key:"transfer_instr_remark",ellipsis:!0,align:"left"},{title:"TA明细",key:"taDetail",width:80,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return"21"!=n.cop_busin_class?e("span",{},"-"):e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showTADetail(n.fund_id,n.cop_busin_flag,n.cash_settle_date)}}},"查看")])}},{title:"划款单",key:"file_id",width:130,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;if(n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0)return e("span",{},"-");if("1"!=n.transfer_fund_status)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){n.file_id?t.previewPDF(n.file_id):t.previewTransfer(n.transfer_ins_id,n.transfer_ins_modify)}}},"预览")]);return e("span",{},"-")}},{title:"销售机构",key:"agency_code",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(r._0)(n.agency_code,t.agencyList))}}],transferStatusList:[],transferFlagList:[],transferFundStatusList:[],businGroup:[],showRivalContact:!1,selfAcct:{bank_fax:"",bank_mail:"",bank_phone:"",sh_fdb_account:"",sz_fdb_account:"",currency_no:""},rivalAcct:{bank_fax:"",bank_mail:"",bank_phone:""},outAcctList:[],inAcctList:[],cityTree:[],bankList:[],bankInfoList:[],canModifyConf:"",rivalContactFlags:"",businFlagList:[],classFlagList:[],businClassList:[],copBusinFlagList:[],fileList:[],cashDirectionList:[{code:"0",text:"不变化"},{code:"1",text:"入款"},{code:"2",text:"出款"}],settleMentList:[{code:"1",text:"见款付券"},{code:"2",text:"见券付款"},{code:"3",text:"券款对付"},{code:"6",text:"券券对付"},{code:"8",text:"返券付费解券"},{code:"9",text:"券费对付"}],marketList:[],investTypeList:[],currencyList:[],fundList:[],rivalList:[],agencyList:[],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],operatorList:[],miniTrans:!1,seatList:[{seatId:"",fee:""}],pickerOptions:{disabledDate:function(t){return!1}},issuerComplete:!1,issuerList:[],depositTimeUnitList:[],bankPhoneRule:[{test:/^(\d{3,4}-\d{7,8}$)|(1[0-9]{10})$/,message:"电话格式不正确"}],bankMailRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确"}],canSpecialApprove:"",specialApproveWorkerList:[],showTADialog:!1,showBTADialog:!1,TAModel:"",selectionTipVisible:!1,selections:[]}},props:{pageType:{type:String,default:""}},components:{TransferDetailDialog:I.a,TADetailTable:y.a,FullScreenLoading:v.a,ImportDialog:d.default,ImportDialog4BTA:f.default,FundTree:u.a,HDatagrid:i.a,ImportAccountTransfer:b.a,CommTreeGrid:g.a,SimpleTreeGrid:w.a,DetailPanel:C.default,SelectionTip:x.default},watch:{"transferInfo.data_source":function(t){var e=this.transferInfo.require_pay_date;this.pickerOptions="2"==t?{disabledDate:function(t){return Object(r.Q)(t)!=e}}:{disabledDate:function(t){return!1}}},"transferInfo.cop_busin_flag":function(t){switch("7"==this.transferInfo.cop_busin_class&&this.rivalContactFlags.indexOf(t.toString())>=0?this.showRivalContact=!0:(this.showRivalContact=!1,this.rivalAcct={bank_fax:"",bank_mail:"",bank_phone:""}),this.transferInfo.cop_busin_class){case"1":"add"==this.actionType&&(this.transferInfo.settle_ment=20020==t?"1":"3"),this.showRival=!1,this.showReportCode=20020==t,20117==t||10071==t||30008==t?(this.showClearAgent=!1,this.transferInfo.clear_agent_code_cn="3"):10070==t||20116==t||30110==t?(this.showClearAgent=!1,this.transferInfo.clear_agent_code_cn="4"):this.showReportCode?this.showReportCode&&(this.showClearAgent=!1):this.showClearAgent=!0;break;case"4,5,6":case"4":case"5":case"6":this.transferInfo.clear_agent_code_cn="",this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1;break;case"9":this.transferInfo.clear_agent_code_cn="",this.showRival=!1,this.showReportCode=20017==t||20047==t||20049==t||20126==t||20128==t||20050==t||20051==t||20139==t||20140==t||10053==t||10054==t||10098==t||10099==t,this.showClearAgent=!1;break;case"7":case"20":default:this.transferInfo.clear_agent_code_cn="",this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1}},acctOptionsParam:{handler:function(t,e){var a=this;t.fundId&&t.businClass&&t.businFlag?(Object(l.f)(t).then(function(t){if(t.data.success){if(a.inAcctList=t.data.data.inAccountList,a.outAcctList=t.data.data.outAccountList,a.transferInfo.cash_direction=t.data.data.cash_direction,a.transferInfo.rival_code="",a.outAcctList&&a.outAcctList.length>0?("i"!=a.outAcctList[0].account_class&&"7"!=a.outAcctList[0].account_class||(a.transferInfo.rival_code=a.outAcctList[0].rival_code),"d"==a.outAcctList[0].account_class&&(a.transferInfo.rival_code=a.outAcctList[0].issuer_code),"modify"==a.actionType||"detail"==a.actionType||a.useTemplateFlag?e.fundId&&e.businClass&&e.businFlag&&s()(a.outAcct,a.outAcctList[0]):(a.outAcct={fullName:a.outAcctList[0].fullName,bank_account_no:a.outAcctList[0].bank_account_no,bank_account_name:a.outAcctList[0].bank_account_name,bank_account_id:a.outAcctList[0].bank_account_id,bic_code:a.outAcctList[0].bic_code,sub_bank_no:a.outAcctList[0].sub_bank_no,pay_no:a.outAcctList[0].pay_no,city_no:a.outAcctList[0].city_no,province_code:a.outAcctList[0].province_code,rival_code:a.outAcctList[0].rival_code},!a.showRivalContact||"f"!=a.outAcctList[0].account_class&&"d"!=a.outAcctList[0].account_class&&"h"!=a.outAcctList[0].account_class||(a.rivalAcct.bank_phone=a.outAcctList[0].bank_phone,a.rivalAcct.bank_fax=a.outAcctList[0].bank_fax,a.rivalAcct.bank_mail=a.outAcctList[0].bank_mail))):a.getAcct&&(a.outAcct={}),a.inAcctList&&a.inAcctList.length>0){"i"!=a.inAcctList[0].account_class&&"7"!=a.inAcctList[0].account_class||(a.transferInfo.rival_code=a.inAcctList[0].rival_code),"d"==a.inAcctList[0].account_class&&(a.transferInfo.rival_code=a.inAcctList[0].issuer_code);var n=a.inAcctList[0];n.bank_account_no==a.outAcct.bank_account_no&&a.inAcctList.length>1&&"2"==n.account_class&&(n=a.inAcctList[1]),"modify"==a.actionType||"detail"==a.actionType||a.useTemplateFlag?e.fundId&&e.businClass&&e.businFlag&&s()(a.inAcct,n):(a.inAcct={fullName:n.fullName,bank_account_no:n.bank_account_no,bank_account_name:n.bank_account_name,bank_account_id:n.bank_account_id,bic_code:n.bic_code,sub_bank_no:n.sub_bank_no,pay_no:n.pay_no,city_no:n.city_no,province_code:n.province_code,rival_code:n.rival_code},!a.showRivalContact||"f"!=n.account_class&&"d"!=n.account_class&&"h"!=n.account_class||(a.rivalAcct.bank_phone=n.bank_phone,a.rivalAcct.bank_fax=n.bank_fax,a.rivalAcct.bank_mail=n.bank_mail))}else a.getAcct&&(a.inAcct={});1==t.data.data.bankCorporateLink?a.bankCorporateLink=!0:a.bankCorporateLink=!1}}),"1"==this.transferInfo.cop_busin_class&&"20017"==this.transferInfo.cop_busin_flag?(this.showClearAgent=!0,this.showReportCode=!1,this.transferInfo.settle_ment="3"):"9"==this.transferInfo.cop_busin_class&&"20017"==this.transferInfo.cop_busin_flag&&(this.showClearAgent=!1,this.showReportCode=!0),this.businFlagChange(this.transferInfo.cop_busin_class,this.transferInfo.cop_busin_flag),this.updateCurrency()):(this.outAcctList=[],this.inAcctList=[],this.outAcct={bank_account_no:"",bic_code:"",bank_account_name:"",pay_no:""},this.inAcct={bank_account_no:"",bic_code:"",bank_account_name:"",pay_no:""},this.payDateTime=this.sysDate)},deep:!0},macroParam:function(t,e){if("f"==this.inAcct.account_class||"f"==this.outAcct.account_class){if(this.getMacro&&t.fundId&&null!==this.custodial_no&&""!==this.custodial_no&&t.businClass&&t.businFlag&&t.inAccId&&t.outAccId){if(t.fundId===e.fundId&&t.businClass===e.businClass&&t.businFlag===e.businFlag&&t.agentCode===e.agentCode&&t.payTime===e.payTime&&t.inAccId===e.inAccId&&t.outAccId===e.outAccId&&t.custodialNo===e.custodialNo&&t.settleBalance===e.settleBalance+".00")return;this.refreshMacro()}}else if(this.getMacro&&t.fundId&&null!==this.custodial_no&&""!==this.custodial_no&&t.businClass&&t.businFlag){if(t.fundId===e.fundId&&t.businClass===e.businClass&&t.businFlag===e.businFlag&&t.agentCode===e.agentCode&&t.payTime===e.payTime&&t.custodialNo===e.custodialNo&&t.settleBalance===e.settleBalance+".00")return;this.refreshMacro()}},showDialog:function(t){var e=this;t?("add"==this.actionType?Object(r.n)().then(function(t){e.openMask(),e.businClassTree=t.data,""!=e.queryForm.businClass&&(e.copBusinFlagList=e.businClassTree.filter(function(t){return t.value==e.queryForm.businClass})[0].children)}):Object(l.i)({businClass:this.transferInfo.cop_busin_class,cashDirection:this.transferInfo.cash_direction,businFlag:this.transferInfo.cop_busin_flag}).then(function(t){e.openMask(),e.copBusinFlagList=t.data;var a=e.transferInfo.cop_busin_class;"4"!=e.transferInfo.cop_busin_class&&"5"!=e.transferInfo.cop_busin_class&&"6"!=e.transferInfo.cop_busin_class||(a="4,5,6"),e.businClassTree=e.businClassTreeAll.filter(function(t){return t.value==a}),e.businClassTree[0].children=t.data}).catch(function(t){console.log(t)}),this.activeName=["2","3"]):(this.getMacro=!1,this.getAcct=!1,this.showRival=!1,this.showAgency=!1,this.dvpSum="",this.businClassFlag=[],this.outAcct={bank_account_no:"",bic_code:"",bank_account_name:"",pay_no:""},this.inAcct={bank_account_no:"",bic_code:"",bank_account_name:"",pay_no:""},this.transferInfo={fund_id:"",require_pay_date:"",require_pay_time:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:"",cop_busin_class:"",settle_balance:"",rival_code:"",invest_type:""},this.outAcctList=[],this.inAcctList=[],this.fileList=[],this.seatList=[{seatId:"",fee:""}],this.selfAcct={bank_fax:"",bank_mail:"",bank_phone:"",sh_fdb_account:"",sz_fdb_account:"",currency_no:""},this.bankCorporateLink=!1,this.$refs.transForm0.resetFields(),this.$refs.transForm.resetFields(),this.$refs.outAcctForm.resetFields(),this.$refs.inAcctForm.resetFields(),this.$refs.rivalContactForm.resetFields(),this.closeMask())},miniTrans:function(t){t?this.openMask():this.closeMask()},showTemplateList:function(t){if(t){var e=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper-on-transfer-approve").offsetHeight-e-200,this.openMask()}else this.closeMask()}},activated:function(){var t=this;Object(r.K)(10005).then(function(e){e.data.success&&(t.canModifyConf=e.data.data)}),Object(r.K)(10066).then(function(e){e.data.success&&(t.rivalContactFlags=e.data.data)}),Object(r.K)(10038).then(function(e){e.data.success&&(t.canSpecialApprove=e.data.data)}),Object(r.K)(10058).then(function(e){e.data.success&&(t.TAModel=e.data.data)}),Object(r.n)().then(function(e){t.businClassTree=e.data,t.businClassTreeAll=e.data,""!=t.queryForm.businClass&&(t.copBusinFlagList=t.businClassTree.filter(function(e){return e.value==t.queryForm.businClass})[0].children)}),Object(r.j)().then(function(e){return t.bankList=e.data}),Object(r.j)("1").then(function(e){return t.bankInfoList=e.data}),Object(r.w)("/common/fundName.json",{transfer_flag:1,fund_status:[1]}).then(function(e){return t.fundList=e.data}),Object(r.i)("").then(function(e){return t.agencyList=e.data.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})})},mounted:function(){var t=this;Object(r.t)("businFlag").then(function(e){return t.businFlagList=e.data}),Object(r.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(r.t)(90522).then(function(e){return t.transferFlagList=e.data}),Object(r.t)(90537).then(function(e){return t.transferStatusList=e.data}),Object(r.t)(90571).then(function(e){return t.transferFundStatusList=e.data}),Object(r.t)(90523).then(function(e){return t.businClassList=e.data}),Object(r.t)(60137).then(function(e){return t.depositTimeUnitList=e.data}),Object(r.q)().then(function(e){return t.cityTree=e.data}),this.rivalScroll(0),this.issuerScroll(0),Object(r.t)(610400).then(function(e){return t.marketList=e.data}),Object(r.t)(610406).then(function(e){var a=e.data;a.forEach(function(t){"CNY"==t.code&&(t.text="元")}),t.currencyList=a}),Object(r.t)(91064).then(function(e){return t.investTypeList=e.data}),Object(r.N)().then(function(e){return t.operatorList=e.data}),this.sysDate=Object(r.T)(_.a.get("CurrSysDate")+"150000"),Object(l.j)().then(function(e){e.data.rows&&e.data.rows.length>0?(t.specialApproveWorkerList=e.data.rows,t.specialApproveWorkerList.unshift({begin_date:"0",end_date:"0",operator_name:"全部",operator_no:-1,workgroup_id:0})):t.specialApproveWorkerList=[]}),this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",108),this.fixElPopoverBug(),SSObservable.subscribe("ToggleSidebar",function(e){console.log("ToggleSidebar"),t.$refs.datagrid.handleResize()})},computed:{showAcctCity:function(){return this.transferInfo.cop_busin_flag&&"CMBCCNBS"==this.outAcct.bic_code&&"1"==this.transfer_type&&"3"!=this.transferInfo.settle_ment&&20135!=this.transferInfo.cop_busin_flag&&20074!=this.transferInfo.cop_busin_flag&&20116!=this.transferInfo.cop_busin_flag&&10070!=this.transferInfo.cop_busin_flag&&30008!=this.transferInfo.cop_busin_flag&&30110!=this.transferInfo.cop_busin_flag&&20117!=this.transferInfo.cop_busin_flag&&10071!=this.transferInfo.cop_busin_flag||this.bankCorporateLink},provinceCity:{get:function(){return[this.inAcct.province_code,this.inAcct.city_no]},set:function(t){this.inAcct.province_code=t[0],this.inAcct.city_no=t[1]}},outProvinceCity:{get:function(){return[this.outAcct.province_code,this.outAcct.city_no]},set:function(t){this.outAcct.province_code=t[0],this.outAcct.city_no=t[1]}},upBalance:function(){return Object(r._3)(this.transferInfo.settle_balance)},acctOptionsParam:function(){return{fundId:this.transferInfo.fund_id,businClass:this.transferInfo.cop_busin_class,businFlag:this.transferInfo.cop_busin_flag,agentCode:this.transferInfo.clear_agent_code_cn,settleMent:this.transferInfo.settle_ment,reportCode:this.transferInfo.report_code,agencyCode:this.transferInfo.agency_code,custodialNo:this.custodial_no}},macroParam:function(){return{fundId:this.transferInfo.fund_id,businClass:this.transferInfo.cop_busin_class,businFlag:this.transferInfo.cop_busin_flag,agentCode:this.transferInfo.clear_agent_code_cn,settleBalance:this.transferInfo.settle_balance,payTime:this.transferInfo.require_pay_date,inAccId:this.inAcct.original_bank_account_id?this.inAcct.original_bank_account_id:this.inAcct.bank_account_id,outAccId:this.outAcct.original_bank_account_id?this.outAcct.original_bank_account_id:this.outAcct.bank_account_id,custodialNo:this.custodial_no,rivalCode:this.transferInfo.rival_code}},businClassFlag:{get:function(){if(this.showTemplateList)return[this.queryTemp.cop_busin_class,this.queryTemp.cop_busin_flag];var t=this.transferInfo.cop_busin_class;return"4"!=this.transferInfo.cop_busin_class&&"5"!=this.transferInfo.cop_busin_class&&"6"!=this.transferInfo.cop_busin_class||(t="4,5,6"),[t,this.transferInfo.cop_busin_flag]},set:function(t){this.showTemplateList?(this.queryTemp.cop_busin_class=t[0],this.queryTemp.cop_busin_flag=t[1]):(this.transferInfo.cop_busin_class=t[0],this.transferInfo.cop_busin_flag=t[1])}},beginDate:{get:function(){return Object(r.R)(this.transferInfo.fee_begin_date)},set:function(t){this.transferInfo.fee_begin_date=Object(r.Q)(t)}},payDateTime:{get:function(){return this.transferInfo.require_pay_date||this.transferInfo.require_pay_time?Object(r.R)(this.transferInfo.require_pay_date,this.transferInfo.require_pay_time):this.sysDate},set:function(t){this.transferInfo.require_pay_date=Object(r.Q)(t),this.transferInfo.require_pay_time=Object(r.Q)(t,"hhmmss")}},endDate:{get:function(){return Object(r.R)(this.transferInfo.fee_end_date)},set:function(t){this.transferInfo.fee_end_date=Object(r.Q)(t)}},gridName:function(){var t="approveGrid";return"1"===this.pageType?t="transferMakeGrid":"2"===this.pageType&&(t="approveGrid"),t}},methods:{showCity:r.Z,showText:r._1,parseDateString:r.R,formatMoney:r.h,previewPDF:function(t){var e="/cop-web/static/plugins/pdfjs/generic/web/viewer.html?file="+encodeURIComponent(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t);window.open(e,"划款单预览","width=800,height=600").focus()},previewTransfer:function(t,e){var a=this;Object(l.n)({transferId:t,modifyId:e}).then(function(t){t.data.success?a.previewPDF(t.data.data):a.$alert(t.data.msg,"提示",{confirmButtonText:"确定",type:"error"})})},showTADetail:function(t,e,a){var n=this,s="";s="30066,30067,30068".indexOf(e)>=0?"1":"30087,30088,40002".indexOf(e)>=0?"2":"3",Object(k.a)({fundId:t,settleDate:a,taType:s}).then(function(t){t.data.success&&n.$refs.taDetailTable.setData(t.data.data)}),this.showTADialog=!0},addSeatFee:function(){this.seatList.length<=19?this.seatList.push({seatId:"",fee:""}):this.$alert("最多只能添加20个席位","提示",{confirmButtonText:"确定",type:"warning"})},delSeatFee:function(t){this.seatList.splice(t,1),this.feeChange()},feeChange:function(){if(this.seatList&&this.seatList.length>0){var t=0;this.seatList.forEach(function(e){e.fee&&(t+=parseFloat(e.fee))}),this.transferInfo.settle_balance=t}},fundChanged:function(t){var e=this;"detail"!=this.actionType&&(this.$set(this.acctOptionsParam,"fundId",t),t&&""!=t&&t.indexOf(",")<0&&(Object(r.v)(t).then(function(t){if(t.data.success){e.macroInfo.fund_code=t.data.data.fund_code,e.macroInfo.fund_name=t.data.data.fund_name,e.macroInfo.sz_ta_account=t.data.data.sz_ta_account,e.macroInfo.sh_ta_account=t.data.data.sh_ta_account,e.macroInfo.stockholder_id=t.data.data.stockholder_id,e.macroInfo.stockholder_id_sz=t.data.data.stockholder_id_sz;var a=t.data.data.accountList.filter(function(t){return 5==t.account_class});a&&a.length>0&&(e.macroInfo.sq_holder_account=a[0].holder_account);var n=t.data.data.accountList.filter(function(t){return 6==t.account_class});n&&n.length>0&&(e.macroInfo.zz_holder_account=n[0].holder_account)}}),"add"==this.actionType&&(Object(l.p)({fundId:t,accountClass:"2"}).then(function(t){t.data.success&&(t.data.data&&t.data.data.length>0?(e.selfAcct=t.data.data[0],e.transfer_type=t.data.data[0].transfer_type,e.custodial_no=t.data.data[0].custodial_no):(e.transfer_type=null,e.custodial_no=null))}),this.updateCurrency())))},updateCurrency:function(){"modify"!=this.actionType&&(null==this.transferInfo.cop_busin_class||"8"!=this.transferInfo.cop_busin_class?this.transferInfo.currency_no="CNY":null!=this.selfAcct.currency_no&&""!=this.selfAcct.currency_no?this.transferInfo.currency_no=this.selfAcct.currency_no:this.transferInfo.currency_no="CNY")},outAcctChanged:function(t){var e=this;if(t&&t.length>128)return this.outAcct.fullName="",void this.$alert("长度不能超过128!","提示",{confirmButtonText:"确定",type:"info"});var a=this.outAcctList.filter(function(e){return e.fullName==t});a.length>0?(this.outAcct.bank_account_id=a[0].bank_account_id,this.outAcct.bic_code=a[0].bic_code,this.outAcct.bank_account_name=a[0].bank_account_name,this.outAcct.bank_account_no=a[0].bank_account_no,this.outAcct.pay_no=a[0].pay_no,this.outAcct.sub_bank_no=a[0].sub_bank_no,this.outAcct.account_class=a[0].account_class,this.outAcct.province_code=a[0].province_code,this.outAcct.city_no=a[0].city_no,this.outAcct.account_class=a[0].account_class,"i"!=a[0].account_class&&"7"!=a[0].account_class||(this.transferInfo.rival_code=a[0].rival_code),"d"==a[0].account_class&&(this.transferInfo.rival_code=a[0].issuer_code),"2"==a[0].account_class?(this.custodial_no=a[0].custodial_no,this.transfer_type=a[0].transfer_type,this.selfAcct.bank_phone=a[0].bank_phone,this.selfAcct.bank_fax=a[0].bank_fax,this.selfAcct.bank_mail=a[0].bank_mail,this.selfAcct.sh_fdb_account=a[0].sh_fdb_account,this.selfAcct.sz_fdb_account=a[0].sz_fdb_account,this.selfAcct.currency_no=a[0].currency_no):"f"==a[0].account_class?(this.macroParam.outAccId=a[0].bank_account_id,Object(l.h)(this.macroParam).then(function(t){if(t.data){var a={postscript:t.data.postscript,purpose:t.data.purpose,remark:t.data.remark};a.postscript&&a.postscript.length>0&&(e.transferInfo.transfer_postscript=Object(r.V)(e.transferInfo,e.macroInfo,a.postscript,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct)),a.purpose&&a.purpose.length>0&&(e.transferInfo.transfer_purpose=Object(r.V)(e.transferInfo,e.macroInfo,a.purpose,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct)),a.remark&&a.remark.length>0&&(e.transferInfo.transfer_remark=Object(r.V)(e.transferInfo,e.macroInfo,a.remark,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct))}})):!this.showRivalContact||"f"!=a[0].account_class&&"d"!=a[0].account_class&&"h"!=a[0].account_class||(this.rivalAcct.bank_phone=a[0].bank_phone,this.rivalAcct.bank_fax=a[0].bank_fax,this.rivalAcct.bank_mail=a[0].bank_mail)):this.outAcct={bank_account_no:"",bic_code:null,bank_account_name:t,fullName:t,pay_no:""}},inAcctChanged:function(t){var e=this;if(t&&t.length>128)return this.inAcct.bank_account_name="",void this.$alert("长度不能超过128!","提示",{confirmButtonText:"确定",type:"info"});var a=this.inAcctList.filter(function(e){return e.fullName==t});a.length>0?(this.inAcct.bank_account_id=a[0].bank_account_id,this.inAcct.bic_code=a[0].bic_code,this.inAcct.bank_account_no=a[0].bank_account_no,this.inAcct.bank_account_name=a[0].bank_account_name,this.inAcct.pay_no=a[0].pay_no,this.inAcct.sub_bank_no=a[0].sub_bank_no,this.inAcct.account_class=a[0].account_class,this.inAcct.province_code=a[0].province_code,this.inAcct.city_no=a[0].city_no,"i"!=a[0].account_class&&"7"!=a[0].account_class||(this.transferInfo.rival_code=a[0].rival_code),"d"==a[0].account_class&&(this.transferInfo.rival_code=a[0].issuer_code),"2"==a[0].account_class?(this.custodial_no=a[0].custodial_no,this.transfer_type=a[0].transfer_type,this.selfAcct.bank_phone=a[0].bank_phone,this.selfAcct.bank_fax=a[0].bank_fax,this.selfAcct.bank_mail=a[0].bank_mail,this.selfAcct.sh_fdb_account=a[0].sh_fdb_account,this.selfAcct.sz_fdb_account=a[0].sz_fdb_account):"f"==a[0].account_class?(this.macroParam.inAccId=a[0].bank_account_id,Object(l.h)(this.macroParam).then(function(t){if(t.data){var a={postscript:t.data.postscript,purpose:t.data.purpose,remark:t.data.remark};a.postscript&&a.postscript.length>0&&(e.transferInfo.transfer_postscript=Object(r.V)(e.transferInfo,e.macroInfo,a.postscript,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct)),a.purpose&&a.purpose.length>0&&(e.transferInfo.transfer_purpose=Object(r.V)(e.transferInfo,e.macroInfo,a.purpose,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct)),a.remark&&a.remark.length>0&&(e.transferInfo.transfer_remark=Object(r.V)(e.transferInfo,e.macroInfo,a.remark,e.businClassList,e.businFlagList,e.clearAgentList,e.settleMentList,e.depositTimeUnitList,e.selfAcct))}})):!this.showRivalContact||"f"!=a[0].account_class&&"d"!=a[0].account_class&&"h"!=a[0].account_class||(this.rivalAcct.bank_phone=a[0].bank_phone,this.rivalAcct.bank_fax=a[0].bank_fax,this.rivalAcct.bank_mail=a[0].bank_mail)):this.inAcct={bank_account_no:"",bic_code:null,bank_account_name:t,fullName:t,pay_no:""}},refreshMacro:function(){var t=this,e=void 0;"4,5,6"==this.transferInfo.cop_busin_class&&Object(r.o)(null,this.transferInfo.cop_busin_flag).then(function(t){e=t.data.data.cop_busin_class}),Object(l.h)(this.macroParam).then(function(a){if(a.data){var n={postscript:a.data.postscript,purpose:a.data.purpose,remark:a.data.remark},i={};s()(i,t.transferInfo),"4,5,6"==i.cop_busin_class&&(i.cop_busin_class=e),n.purpose&&n.purpose.length>0&&(t.transferInfo.transfer_purpose=Object(r.V)(i,t.macroInfo,n.purpose,t.businClassList,t.businFlagList,t.clearAgentList,t.settleMentList,t.depositTimeUnitList,t.selfAcct)),n.postscript&&n.postscript.length>0&&(t.transferInfo.transfer_postscript=Object(r.V)(i,t.macroInfo,n.postscript,t.businClassList,t.businFlagList,t.clearAgentList,t.settleMentList,t.depositTimeUnitList,t.selfAcct)),n.remark&&n.remark.length>0&&(t.transferInfo.transfer_remark=Object(r.V)(i,t.macroInfo,n.remark,t.businClassList,t.businFlagList,t.clearAgentList,t.settleMentList,t.depositTimeUnitList,t.selfAcct))}})},openTempDialog:function(){this.inAcct.bank_account_no&&!this.inAcct.bank_account_name||!this.inAcct.bank_account_no&&this.inAcct.bank_account_name?this.$alert("保存模板时,入款账户账户名称和银行账号若有一项填写,则必须都填写","错误",{confirmButtonText:"确定",type:"error"}):this.outAcct.bank_account_no&&!this.outAcct.bank_account_name||!this.outAcct.bank_account_no&&this.outAcct.bank_account_name?this.$alert("保存模板时,出款账户账户名称和银行账号若有一项填写,则必须都填写","错误",{confirmButtonText:"确定",type:"error"}):this.showTemplate=!0},userTemplate:function(t){var e=this;if(!t.serial_no){var a=this.$refs.templateLstData.$refs.gridContent.getSelection();if(1!=a.length)return void this.$alert("请选中一个模板","错误",{confirmButtonText:"确定",type:"error"});t=a[0]}this.getMacro=!1,this.getAcct=!1,this.showTemplateList=!1,this.transferInfo=t,this.transferInfo.fund_id=t.fund_id.toString(),this.transferInfo.cop_busin_flag=t.cop_busin_flag?t.cop_busin_flag.toString():"",this.transferInfo.self_bank_account_id&&Object(l.l)(this.transferInfo.self_bank_account_id).then(function(t){t.data.success&&(e.outAcct=t.data.data,e.outAcct.fullName=t.data.data.bank_account_name,e.selfAcct={bank_phone:e.outAcct.bank_phone,bank_fax:e.outAcct.bank_fax,bank_mail:e.outAcct.bank_mail})}),this.transferInfo.rival_bank_account_id&&Object(l.l)(this.transferInfo.rival_bank_account_id).then(function(t){t.data.success&&(e.inAcct=t.data.data,e.inAcct.fullName=t.data.data.bank_account_name)}),this.businFlagChange(this.transferInfo.cop_busin_class,this.transferInfo.cop_busin_flag),this.actionType="add",this.queryForm.businClass="",this.businClassChanged(),this.useTemplateFlag=!0,this.showDialog=!0},deleteTemplate:function(){var t=this,e=this.$refs.templateLstData.$refs.gridContent.getSelection();1==e.length?this.$confirm("确认删除该模板？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.e)(e[0].serial_no).then(function(e){e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success"}),t.refreshTemplateList()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error"})})}):this.$alert("请选中一个模板","错误",{confirmButtonText:"确定",type:"error"})},listTempDialog:function(){this.showTemplateList=!0,this.refreshTemplateList()},refreshTemplateList:function(){this.$refs.templateLstData.dataChange()},saveTemplate:function(){var t=this,e=!0;if(this.$refs.tempForm.validate(function(t){return e=e&&t}),e){var a={};if(s()(a,this.transferInfo),a.template_name=this.transferInfo4Temp.template_name,a.remark=this.transferInfo4Temp.remark,a.selfAcct=this.outAcct,a.rivalAcct=this.inAcct,"1"==a.cash_direction?(a.rivalAcct.bank_fax=this.selfAcct.bank_fax,a.rivalAcct.bank_mail=this.selfAcct.bank_mail,a.rivalAcct.bank_phone=this.selfAcct.bank_phone,a.selfAcct.bank_fax=this.rivalAcct.bank_fax,a.selfAcct.bank_mail=this.rivalAcct.bank_mail,a.selfAcct.bank_phone=this.rivalAcct.bank_phone):(a.selfAcct.bank_fax=this.selfAcct.bank_fax,a.selfAcct.bank_mail=this.selfAcct.bank_mail,a.selfAcct.bank_phone=this.selfAcct.bank_phone,a.rivalAcct.bank_fax=this.rivalAcct.bank_fax,a.rivalAcct.bank_mail=this.rivalAcct.bank_mail,a.rivalAcct.bank_phone=this.rivalAcct.bank_phone),a.custodian_bank_no=this.custodial_no,"22"===this.transferInfo.cop_busin_class&&"20061"===this.transferInfo.cop_busin_flag&&this.seatList&&this.seatList.length>0){var n="",i="";this.seatList.forEach(function(t){n=n+t.seatId+",",i=i+t.fee+","}),a.seat_id_list=n.substring(0,n.length-1),a.fee_list=i.substring(0,i.length-1)}Object(l.t)(a).then(function(e){e.data.success?(t.showDialog=!1,t.showTemplate=!1,t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}else this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},saveTransfer:function(t,e){var a=this,n=!0;if(t?(this.transferInfo.settle_balance=this.settleBalanceQuick,this.$refs.quickForm.validate(function(t){return n=n&&t})):(this.$refs.transForm0.validate(function(t){return n=n&&t}),this.$refs.transForm.validate(function(t){return n=n&&t}),this.$refs.outAcctForm.validate(function(t){return n=n&&t}),this.$refs.inAcctForm.validate(function(t){return n=n&&t}),this.$refs.seatListForm&&this.$refs.seatListForm.length>0&&this.$refs.seatListForm.forEach(function(t){t.validate(function(t){return n=n&&t})}),this.$refs.selfAcctForm.validate(function(t){return n=n&&t})),this.transferInfo.require_pay_date&&this.transferInfo.require_pay_time)if(n)if(this.transferInfo.cop_busin_class&&this.transferInfo.cop_busin_flag&&this.outAcct.fullName&&this.inAcct.fullName)if(this.transferInfo.settle_balance<=0)this.$alert("划款金额必须大于0!","错误",{confirmButtonText:"确定",type:"error"});else if("30006"==this.transferInfo.cop_busin_flag&&this.outAcct.bank_account_id==this.inAcct.bank_account_id)this.$alert("银行账户内转业务出入款账户不能一致！","错误",{confirmButtonText:"确定",type:"error"});else{var i={};if(s()(i,this.transferInfo),i.selfAcct=this.outAcct,i.rivalAcct=this.inAcct,"1"==i.cash_direction?(i.rivalAcct.bank_fax=this.selfAcct.bank_fax,i.rivalAcct.bank_mail=this.selfAcct.bank_mail,i.rivalAcct.bank_phone=this.selfAcct.bank_phone,i.selfAcct.bank_fax=this.rivalAcct.bank_fax,i.selfAcct.bank_mail=this.rivalAcct.bank_mail,i.selfAcct.bank_phone=this.rivalAcct.bank_phone):(i.selfAcct.bank_fax=this.selfAcct.bank_fax,i.selfAcct.bank_mail=this.selfAcct.bank_mail,i.selfAcct.bank_phone=this.selfAcct.bank_phone,i.rivalAcct.bank_fax=this.rivalAcct.bank_fax,i.rivalAcct.bank_mail=this.rivalAcct.bank_mail,i.rivalAcct.bank_phone=this.rivalAcct.bank_phone),i.custodian_bank_no=this.custodial_no,"22"===this.transferInfo.cop_busin_class&&"20061"===this.transferInfo.cop_busin_flag&&this.seatList&&this.seatList.length>0){var o="",r="";this.seatList.forEach(function(t){o=o+t.seatId+",",r=r+t.fee+","}),i.seat_id_list=o.substring(0,o.length-1),i.fee_list=r.substring(0,r.length-1)}var c=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});i.commitFlag=e,Object(l.u)(i).then(function(t){t.data.success?(c.close(),a.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){a.handleCancel()}}).then(function(){a.handleCancel()}),a.refreshFundTree()):(c.close(),a.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.handleCancel()}}).then(function(){a.handleCancel()}))}).catch(function(t){c.close(),a.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.handleCancel()}}).then(function(){a.handleCancel()})})}else this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"});else this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"});else this.$alert("付款时间不能为空!","错误",{confirmButtonText:"确定",type:"error"})},quickSend:function(t){this.selfAcct={bank_fax:"",bank_mail:"",bank_phone:"",sh_fdb_account:"",sz_fdb_account:"",currency_no:""},this.$refs.quickForm.resetFields(),this.$refs.transForm0.resetFields(),this.$refs.transForm.resetFields(),this.$refs.outAcctForm.resetFields(),this.$refs.inAcctForm.resetFields(),this.miniTrans=!0,this.actionType="add",this.transferInfo.fund_id=this.queryForm.fundIds,this.transferInfo.cop_busin_class="1",this.bankBalance=this.trustAcctList[0].ACCOUNT_CUR_BALANCE,5==t?(this.dvpBalance=this.acctBalanceList[0].ACCOUNT_CUR_BALANCE,this.dvpSum=this.businCashList[0].AMOUNT,this.transferInfo.clear_agent_code_cn="4"):(this.dvpBalance=this.acctBalanceList[1].ACCOUNT_CUR_BALANCE,this.dvpSum=this.businCashList[1].AMOUNT,this.transferInfo.clear_agent_code_cn="3"),this.businFlagChange(this.transferInfo.cop_busin_class,this.transferInfo.cop_busin_flag);var e=parseFloat(this.dvpBalance)+parseFloat(this.dvpSum);e>=0?(this.transferInfo.settle_balance=e,this.settleBalanceQuick=e,"5"==t?(this.quickFlagList=this.OutFromSHQList,this.transferInfo.cop_busin_flag=10070):(this.quickFlagList=this.OutFromZZList,this.transferInfo.cop_busin_flag=10071)):(this.transferInfo.settle_balance=-e,this.settleBalanceQuick=-e,"5"==t?(this.quickFlagList=this.IntoSHQList,this.transferInfo.cop_busin_flag=20116):(this.quickFlagList=this.IntoZZList,this.transferInfo.cop_busin_flag=20117))},clickDaySettle:function(t,e){var a={};e?(this.queryForm.showToday="1",this.$refs.treeFund.showToday="1"):(this.queryForm.showToday="0",this.$refs.treeFund.showToday="0"),a.code=this.queryForm.fundIds,this.fundClick(a),this.refreshFundTree()},fundClick:function(t){var e=this;if(!t)return this.businGroup=[{cop_busin_class:"",dic_name:"全部",count:0}],this.queryForm.fundIds="",void this.refreshTable();if(this.queryForm.fundIds=t.code,""==this.queryForm.businClass)this.$refs.datagrid.changeGrid(this.gridName);else{var a=this.gridName+"-"+this.queryForm.businClass;this.$refs.datagrid.changeGrid(a.replace(/[,]/g,""))}Object(l.g)({fundId:t.code,isSettle:!1,showToday:this.queryForm.showToday,pageType:this.pageType}).then(function(t){t.data.success&&t.data.data.length>0&&(e.businGroup=t.data.data)}),this.refreshTable(),t.code.indexOf(",")<0&&(this.queryTemp.fundIds=t.code,Object(o.d)(t.code,_.a.get("CurrSysDate")).then(function(t){e.acctBalanceList=[],e.trustAcctList=[],t.data.forEach(function(t){"2"==t.ACCOUNT_CLASS?e.trustAcctList.push({ACCOUNT_CLASS:t.ACCOUNT_CLASS,BANK_ACCOUNT_NAME:t.BANK_ACCOUNT_NAME+"余额"+Object(r.S)(t.INPUT_TIME),ACCOUNT_CUR_BALANCE:t.ACCOUNT_CUR_BALANCE}):e.acctBalanceList.push({ACCOUNT_CLASS:t.ACCOUNT_CLASS,BANK_ACCOUNT_NAME:t.BANK_ACCOUNT_NAME+"余额"+Object(r.S)(t.INPUT_TIME),ACCOUNT_CUR_BALANCE:t.ACCOUNT_CUR_BALANCE})})}),Object(o.f)(t.code,_.a.get("CurrSysDate")).then(function(t){e.fundCashList=t.data,e.getBusinCashList()}))},businClassChanged:function(){if(0==this.queryForm.businClass&&(this.queryForm.businClass=""),this.getBusinCashList(),""==this.queryForm.businClass)this.$refs.datagrid.changeGrid(this.gridName);else{var t=this.gridName+"-"+this.queryForm.businClass;this.$refs.datagrid.changeGrid(t.replace(/[,]/g,""))}this.refreshTable(),this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",108)},getBusinCashList:function(){switch(this.queryForm.businClass){case"1":this.businCashList=this.fundCashList.filter(function(t){return 4==t.CASHTYPEID||5==t.CASHTYPEID||9==t.CASHTYPEID});break;case"4,5,6":this.businCashList=this.fundCashList.filter(function(t){return 6==t.CASHTYPEID||7==t.CASHTYPEID});break;case"7":this.businCashList=this.fundCashList.filter(function(t){return 2==t.CASHTYPEID});break;case"8":this.businCashList=this.fundCashList.filter(function(t){return 3==t.CASHTYPEID});break;case"9":this.businCashList=this.fundCashList.filter(function(t){return 1==t.CASHTYPEID});break;default:this.businCashList=[]}},rowClick:function(t){var e=this.$refs.datagrid.getSelection();0===e.length?(this.item={},this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",108)):(this.item=Object(p.a)(e[0]),this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",76)),this.selectionTipVisible=e.length>0},handleSelectChange:function(t){var e=this.$refs.datagrid.getSelection();1===e.length?(this.item=Object(p.a)(e[0]),this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",76)):(this.item={},this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",108))},showDetail:function(t){this.$refs.detailDialog.showTransferDetail(t)},refreshFundTree:function(){this.$refs.treeFund.handleOK()},refreshTable:function(t){t?this.$refs.datagrid.dataChange():this.$refs.datagrid.dataChange(1),this.item={},this.re_layout("full-h-wrapper-on-transfer-approve","inner-on-transfer-approve",108)},handleCancel:function(){this.showDialog=!1,this.showTemplateList=!1,this.miniTrans=!1},handleTemplateCancel:function(){this.showTemplate=!1},handleCommand:function(t){"3"===t?this.handleUnion():"1"===t||"2"===t?this.openImport(t):"4"===t||"5"===t?this.handleUrgentFlag(t):"6"===t?this.handleApprove(7):"7"===t&&this.changeDealType()},changeDealType:function(){var t=this,e=this.$refs.datagrid.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请先选择指令","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):"0"===e[0].transfer_merge_flag&&e[0].transfer_ins_batch_no&&parseInt(e[0].transfer_ins_batch_no)>0?(this.openMask(),void this.$alert("轧差后的子指令无法修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void(this.showDealType=!0)},saveDealType:function(){var t=this,e=this.$refs.datagrid.getSelection();Object(l.s)({transferList:e,param:this.dealType}).then(function(e){t.openMask(),e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.showDealType=!1,t.refreshFundTree()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})},openImport:function(t){"2"===this.TAModel&&"1"===t?this.showBTADialog=!0:this.$refs.importDialog.showDialog(t)},handleAdd:function(t){var e=this;this.getMacro=!0,this.getAcct=!0,this.queryForm.fundIds.indexOf(",")>=0?this.transferInfo.fund_id=this.queryForm.fundIds.split(",")[0]:this.transferInfo.fund_id=this.queryForm.fundIds,this.payDateTime=this.sysDate,this.showDialog=!0,this.actionType="add","8"==this.queryForm.businClass||"21"==this.queryForm.businClass||"22"==this.queryForm.businClass||"23"==this.queryForm.businClass?this.transferInfo.invest_type="":this.transferInfo.invest_type="1",t?this.miniTrans=!1:""!=this.queryForm.businClass?(this.copBusinFlagList=[],setTimeout(function(){e.copBusinFlagList=e.businClassTree.filter(function(t){return t.value==e.queryForm.businClass})[0].children},500),this.transferInfo.cop_busin_class=this.queryForm.businClass,this.dvpSum="",this.transferInfo.cop_busin_flag=""):this.transferInfo.cop_busin_class=null,this.useTemplateFlag=!1,this.$refs.datagrid.updateGridHeight()},handleModify:function(){var t=this;this.getMacro=!1,this.getAcct=!1;var e=this.$refs.datagrid.getSelection();if(1!=e.length)return this.openMask(),void this.$alert("请选中一条指令","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if("0"===e[0].transfer_merge_flag&&e[0].transfer_ins_batch_no&&parseInt(e[0].transfer_ins_batch_no)>0)return this.openMask(),void this.$alert("轧差后的子指令无法修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if("approve"!=e[0].node_name)return this.openMask(),void this.$alert("指令已提交审批无法修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if(this.actionType="modify",this.transferInfo=e[0],this.transfer_type=e[0].transfer_type,this.custodial_no=this.transferInfo.fund_trust_bank,Object(l.m)({transferInsId:e[0].transfer_ins_id,transferInsModify:e[0].transfer_ins_modify}).then(function(a){a.data.success&&(a.data.data.outAcct&&(t.outAcct=a.data.data.outAcct,t.outAcct.fullName=t.outAcct.bank_account_name,"1"==e[0].cash_direction?(t.rivalAcct.bank_fax=a.data.data.outAcct.bank_fax,t.rivalAcct.bank_mail=a.data.data.outAcct.bank_mail,t.rivalAcct.bank_phone=a.data.data.outAcct.bank_phone):(t.selfAcct.bank_fax=a.data.data.outAcct.bank_fax,t.selfAcct.bank_mail=a.data.data.outAcct.bank_mail,t.selfAcct.bank_phone=a.data.data.outAcct.bank_phone,t.selfAcct.sh_fdb_account=t.transferInfo.sh_fdb_account,t.selfAcct.sz_fdb_account=t.transferInfo.sz_fdb_account)),a.data.data.inAcct&&(t.inAcct=a.data.data.inAcct,t.inAcct.fullName=t.inAcct.bank_account_name,"1"==e[0].cash_direction?(t.selfAcct.bank_fax=a.data.data.inAcct.bank_fax,t.selfAcct.bank_mail=a.data.data.inAcct.bank_mail,t.selfAcct.bank_phone=a.data.data.inAcct.bank_phone,t.selfAcct.sh_fdb_account=t.transferInfo.sh_fdb_account,t.selfAcct.sz_fdb_account=t.transferInfo.sz_fdb_account):(t.rivalAcct.bank_fax=a.data.data.inAcct.bank_fax,t.rivalAcct.bank_mail=a.data.data.inAcct.bank_mail,t.rivalAcct.bank_phone=a.data.data.inAcct.bank_phone)),1==a.data.data.bankCorporateLink?t.bankCorporateLink=!0:t.bankCorporateLink=!1)}),this.seatList=[],"22"===this.transferInfo.cop_busin_class&&"20061"===this.transferInfo.cop_busin_flag)if(this.transferInfo.seat_id_list&&this.transferInfo.fee_list){var a=this.transferInfo.seat_id_list.split(","),n=this.transferInfo.fee_list.split(",");a.forEach(function(e,a){t.seatList.push({seatId:e,fee:n[a]})})}else this.seatList=[{seatId:"",fee:[]}];this.transferInfo.cop_busin_class;"4"!=this.transferInfo.cop_busin_class&&"5"!=this.transferInfo.cop_busin_class&&this.transferInfo.cop_busin_class,this.showDialog=!0,this.loadFiles(this.transferInfo.bill_name)},onCompleteLoad:function(){0!=this.getMacro||"modify"!=this.actionType&&"add"!=this.actionType||(this.getMacro=!0),0!=this.getAcct||"modify"!=this.actionType&&"add"!=this.actionType||(this.getAcct=!0)},loadFiles:function(t){var e=this;t&&Object(r.u)(t,"2").then(function(t){t.data.success&&t.data.data.forEach(function(t){return e.fileList.push({name:t.file_name,response:{data:t.file_id}})}),e.transferInfo.bill_name=e.fileList.reduce(function(t,e){return t+","+e.response.data},"").replace(",","")})},handleUnionAll:function(){var t=this.$refs.datagrid.datas;this.union(t,"确定轧差列表当前页的所有指令?",0)},handleUnion:function(){var t=this.$refs.datagrid.getSelection();this.union(t,"确定轧差所选指令?",0)},union:function(t,e,a){var n=this;return t.length<2?(this.openMask(),void this.$alert("至少需要两条指令才能轧差","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})):(t=Object(r.g)(t,this)).length<=0?void 0:t.length<2?(this.openMask(),void this.$alert("轧差后的子指令不能操作","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})):void(1===a?(this.openMask(),this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.x)({transferList:t}).then(function(t){t.data.success?(n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),n.refreshFundTree()):n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})}).catch(function(t){n.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})})}).catch(function(){n.closeMask()})):Object(l.x)({transferList:t}).then(function(t){t.data.success?(n.openMask(),n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),n.refreshFundTree()):(n.openMask(),n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}))}).catch(function(t){n.openMask(),n.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})}))},handleUnionExclude:function(){var t=this,e=this.$refs.datagrid.getSelection();if(!e||0===e.length)return this.openMask(),void this.$alert("请先选中至少一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});Object(l.y)({transferList:e,ignore:!1}).then(function(a){if(t.openMask(),a.data.success)t.$alert(a.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshFundTree();else if("1120002"===a.data.code||"1120010"===a.data.code){var n=t.$createElement,s=[];a.data.msg.split(";").forEach(function(t){t&&t.length>1&&s.push({id:t.split(":")[0],err:t.split(":")[1]})}),"1120002"===a.data.code?t.$msgbox({title:"注意",message:n("p",null,[n("span",null,"存在异常的指令，是否剔除并继续？"),n("h-table",{style:"width: 100%",props:{columns:t.errorColumns,data:s,height:300}})]),closeOnClickModal:!1,showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(a,n,s){"confirm"===a?(Object(l.y)({transferList:e,ignore:!0}).then(function(e){if(e.data.success)t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshFundTree();else if("1120010"===e.data.code){var a=t.$createElement,n=[];e.data.msg.split(";").forEach(function(t){t&&t.length>1&&n.push({id:t.split(":")[0],err:t.split(":")[1]})}),t.$msgbox({title:"错误",message:a("p",null,[a("span",null,"以下指令剔除时发生错误"),a("h-table",{style:"width: 100%",props:{columns:t.errorColumns,data:n,height:300}})]),closeOnClickModal:!1,confirmButtonText:"确定",beforeClose:function(t,e,a){a()}}).then(function(e){t.closeMask()}).catch(function(){t.closeMask()})}else t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}).catch(function(e){t.openMask(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}),s()):s()}}).then(function(e){t.closeMask()}).catch(function(){t.closeMask()}):t.$msgbox({title:"错误",message:n("p",null,[n("span",null,"以下指令剔除时发生错误"),n("h-table",{style:"width: 100%",props:{columns:t.errorColumns,data:s,height:300}})]),closeOnClickModal:!1,confirmButtonText:"确定",beforeClose:function(t,e,a){a()}}).then(function(e){t.closeMask()}).catch(function(){t.closeMask()})}else t.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}).catch(function(e){t.openMask(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})},doApprove:function(t,e){var a=[];a.push(t),this.approve(e,a)},approve:function(t,e,a){var n=this;if(!e&&0==(e=this.$refs.datagrid.getSelection()).length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()});(e=Object(r.g)(e,this)).length<=0||(this.$refs.screenLoading.open(),Object(l.q)("/cashsettle/approveOpetate.json",{transferList:e,flowFlag:t,ignore:!1,remark:a,param:this.pageType}).then(function(s){if(n.$refs.screenLoading.close(),s.data.success)"1120004"==s.data.code?(n.openMask(),n.$alert(s.data.msg,"成功",{confirmButtonText:"确定",type:"info",callback:function(t){n.closeMask(),n.handleCancel()}}).then(function(){n.closeMask(),n.handleCancel()}),n.refreshFundTree()):(n.openMask(),n.$alert(s.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask(),n.handleCancel()}}).then(function(){n.closeMask(),n.handleCancel()}),n.refreshFundTree());else if("1120002"==s.data.code){n.openMask();var i=n.$createElement,o=[];s.data.msg.split(";").forEach(function(t){t&&t.length>1&&o.push({id:t.split(":")[0],err:t.split(":")[1]})}),n.$msgbox({title:"注意",message:i("p",null,[i("span",null,"存在异常的指令，是否剔除并继续？"),i("h-table",{style:"width: 100%",props:{columns:n.errorColumns,data:o,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(s,i,o){"confirm"===s?(Object(l.q)("/cashsettle/approveOpetate.json",{transferList:e,flowFlag:t,ignore:!0,remark:a,param:n.pageType}).then(function(t){t.data.success?(n.openMask(),n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask(),n.handleCancel()}}).then(function(){n.closeMask(),n.handleCancel()}),n.refreshFundTree()):(n.openMask(),n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}))}).catch(function(t){}),o()):o()}}).then(function(t){n.closeMask()}).catch(function(){n.closeMask()})}else n.openMask(),n.$alert(s.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})}).catch(function(t){n.$refs.screenLoading.close()}))},handleApprove:function(t,e){var a=this,n=void 0;if(e?(n=[]).push(this.transferInfo):n=this.$refs.datagrid.getSelection(),0==n.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()});if(!((n=Object(r.g)(n,this)).length<=0)){var s="";switch(t){case 7:s="作废";break;case 9:s="驳回";break;case-8:s="无需审批直接通过"}var i="确定"+s+"所选指令?";"1"===this.pageType&&9===t?this.approve(t,n,""):(this.openMask(),this.$prompt(i+"请填入原因并确认：","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var s=e.value;return a.approve(t,n,s)}).catch(function(){a.closeMask()}).catch(function(){a.closeMask()}))}},fileUploaded:function(t,e,a){var n=this;if(t.code&&"0"==t.code)this.transferInfo.bill_name=a.reduce(function(t,e){return t+","+e.response.data},"").replace(",","");else{if(!t.data)return this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error"}),void a.splice(a.length-1,1);Object(r.x)(this.transferInfo.fund_id).then(function(t){if(t.data&&"0"==t.data.code){var e=t.data.data;n.$confirm(e+"产品未维护公司签章，无法对于成交单进行加盖公司签章，是否继续上传?","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(function(){n.transferInfo.bill_name=a.reduce(function(t,e){return t+","+e.response.data},"").replace(",","")}).catch(function(){a.splice(a.length-1,1)})}else n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}},beforeUpload:function(t){"1"==this.transferInfo.cop_busin_class?this.uploadData.fundId=this.transferInfo.fund_id:this.uploadData.fundId=""},fileRemoved:function(t,e){this.transferInfo.bill_name=e.reduce(function(t,e){return t+","+e.response.data},"").replace(",","")},exceedLimit:function(){this.$alert("最多上传20个附件","错误",{confirmButtonText:"确定",type:"error"})},downloadFile:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=2&fileId="+t.response.data)},rivalScroll:function(t){var e=this;if(t<=1){var a=this.rivalList.length/50;Object(r.G)(a,50).then(function(t){e.rivalList=e.rivalList.concat(t.data.list),t.data.hasNextPage||(e.rivalComplete=!0)})}},rivalQuery:function(t){var e=this;this.rivalLoading=!0,Object(r.G)(0,50,t).then(function(t){e.rivalList=t.data.list,e.rivalLoading=!1,t.data.hasNextPage||(e.rivalComplete=!0)})},issuerScroll:function(t){var e=this;if(t<=1){var a=this.issuerList.length/50;Object(r.y)(a,50).then(function(t){e.issuerList=e.issuerList.concat(t.data.list),t.data.hasNextPage||(e.issuerComplete=!0)})}},issuerQuery:function(t){var e=this;Object(r.y)(0,50,t).then(function(t){e.issuerList=t.data.list,t.data.hasNextPage||(e.issuerComplete=!0)})},rivalChange:function(t){var e=this;"7"!=this.transferInfo.cop_busin_class&&t?this.rivalList.forEach(function(a){a.code==t&&(e.transferInfo.rival_name=a.text)}):"7"==this.transferInfo.cop_busin_class&&t&&this.issuerList.forEach(function(a){a.code==t&&(e.transferInfo.rival_name=a.text)})},uploadExcel:function(){this.$refs.importAccountTransfer.showDialog("3",this.queryForm.businClass)},openLayout:function(){this.$refs.datagrid.openLayout()},handleUrgentFlag:function(t){var e=this,a=this.$refs.datagrid.getSelection();if(null==a||0===a.length)return this.openMask(),void this.$alert("请先选中至少一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});(a=Object(r.g)(a,this)).length<=0||Object(l.r)({transferList:a,param:t}).then(function(t){t.data.success?(e.openMask(),e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refreshFundTree()):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))}).catch(function(t){e.openMask(),e.$alert(t,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})})},rowClassName:function(t){return"9"===t.transfer_flow_flag||"5"===t.transfer_fund_status||"1"!=t.transfer_merge_flag&&0==t.settle_balance?"alert-table-red-row":""},businClassChang:function(t){"8"==t[0]||"21"==t[0]||"22"==t[0]||"23"==t[0]?this.transferInfo.invest_type="":this.transferInfo.invest_type="1"},onBTAClose:function(){this.showBTADialog=!1,this.refreshFundTree()},businFlagChange:function(t,e){var a=this;Object(r.o)(t,e).then(function(t){"add"==a.actionType&&(t.data&&"0"==t.data.code?a.payDateTime=Object(r.T)(_.a.get("CurrSysDate")+t.data.data.require_pay_time):a.payDateTime=a.sysDate),"7"==a.transferInfo.cop_busin_class?"d"==t.data.data.account_out_class_list||"d"==t.data.data.account_in_class_list?(a.showRival=!1,a.showAgency=!1):"h"!=t.data.data.account_out_class_list&&"h"!=t.data.data.account_in_class_list||(a.showRival=!1,a.showAgency=!0):a.showAgency=!1})},onSplitMove:function(){this.$refs.datagrid.handleResize()},onSelectionChange:function(t){this.selectionTipVisible=t.length>0,this.selections=t,SSObservable.publish("onresize"),SSObservable.publish("re_layout")}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page transfer-approve full-h"},[a("h-split",{attrs:{min:"130",max:"900"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("fund-tree",{ref:"treeFund",attrs:{onFundClick:t.fundClick,showAll:!0,showToDo:!0,"query-url":"/common/fundListWithCount.json",pageType:t.pageType}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px",position:"relative"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-transfer-approve"},slot:"right"},[a("div",[a("h-tabs",{attrs:{size:"small"},on:{"on-click":t.businClassChanged},model:{value:t.queryForm.businClass,callback:function(e){t.$set(t.queryForm,"businClass",e)},expression:"queryForm.businClass"}},t._l(t.businGroup,function(t,e){return a("h-tab-pane",{key:e,attrs:{name:t.cop_busin_class,label:t.dic_name+"("+t.count+")"}})}),1)],1),t._v(" "),a("div",{staticClass:"buttons-ctrl"},[a("div",{staticClass:"buttons-ctr2"},[a("h-button-group",["1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:9==t.queryForm.businClass,expression:"queryForm.businClass==9"}],on:{click:function(e){return t.openImport("2")}}},[t._v("中签文件导入")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:21==t.queryForm.businClass,expression:"queryForm.businClass==21"}],on:{click:function(e){return t.openImport("1")}}},[t._v("TA导入")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:function(e){return t.handleAdd(!1)}}},[t._v("新增")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:function(e){return t.approve(8)}}},[t._v("提交")]):t._e(),t._v(" "),"2"===t.pageType?a("h-button",{on:{click:function(e){return t.approve(8)}}},[t._v("通过")]):t._e(),t._v(" "),"2"===t.pageType?a("h-button",{on:{click:function(e){return t.handleApprove(9)}}},[t._v("驳回")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:t.handleModify}},[t._v("修改")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:""==t.queryForm.businClass||"4,5,6"==t.queryForm.businClass||"1"==t.queryForm.businClass||"21"==t.queryForm.businClass,expression:"queryForm.businClass==''||queryForm.businClass=='4,5,6'||queryForm.businClass=='1'||queryForm.businClass=='21'"}],on:{click:t.handleUnion}},[t._v("轧差")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:""==t.queryForm.businClass||"4,5,6"==t.queryForm.businClass||"1"==t.queryForm.businClass||"21"==t.queryForm.businClass,expression:"queryForm.businClass==''||queryForm.businClass=='4,5,6'||queryForm.businClass=='1'||queryForm.businClass=='21'"}],on:{click:function(e){return t.handleApprove(9)}}},[t._v("取消轧差")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:""==t.queryForm.businClass||"4,5,6"==t.queryForm.businClass||"1"==t.queryForm.businClass||"21"==t.queryForm.businClass,expression:"queryForm.businClass==''||queryForm.businClass=='4,5,6'||queryForm.businClass=='1'||queryForm.businClass=='21'"}],on:{click:t.handleUnionExclude}},[t._v("剔除轧差")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{directives:[{name:"show",rawName:"v-show",value:""==t.queryForm.businClass||"4,5,6"==t.queryForm.businClass||"1"==t.queryForm.businClass||"21"==t.queryForm.businClass,expression:"queryForm.businClass==''||queryForm.businClass=='4,5,6'||queryForm.businClass=='1'||queryForm.businClass=='21'"}],on:{click:t.handleUnionAll}},[t._v("全部轧差")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:t.listTempDialog}},[t._v("模板")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:function(e){return t.handleApprove(-8)}}},[t._v("无需审批")]):t._e(),t._v(" "),"1"===t.pageType?a("h-button",{on:{click:t.uploadExcel}},[t._v("指令导入")]):t._e(),t._v(" "),"1"===t.pageType?a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"ghost",size:"mini"}},[t._v("\n                              ...\n                          ")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["1"===t.pageType||"2"===t.pageType?a("el-dropdown-item",{attrs:{command:"6"}},[t._v("作废")]):t._e(),t._v(" "),""==t.queryForm.businClass?a("el-dropdown-item",{attrs:{command:"2"}},[t._v("中签文件导入")]):t._e(),t._v(" "),""==t.queryForm.businClass?a("el-dropdown-item",{attrs:{command:"1"}},[t._v("TA导入")]):t._e(),t._v(" "),a("el-dropdown-item",{attrs:{command:"4"}},[t._v("加急")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"5"}},[t._v("取消加急")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"7"}},[t._v("修改处理方式")])],1)],1):t._e()],1),t._v(" "),a("h-checkbox-group",{staticClass:"hcheckbox-group-ctr"},["1"===t.pageType?a("h-checkbtn",{on:{"on-click":t.clickDaySettle}},[a("span",{staticStyle:{color:"#1388E6"}},[t._v("只显示当日交收")])]):t._e()],1)],1),t._v(" "),a("h-button-group",[a("h-button",{on:{click:t.openLayout}},[a("h-icon",{staticClass:"iconfont icon-ziduanxuanze1"}),t._v("  布局")],1)],1)],1),t._v(" "),a("SimpleTreeGrid",{ref:"datagrid",attrs:{fundData:t.queryForm,columns:t.businColumns,onRowClick:t.rowClick,onRowDbClick:t.showDetail,"row-class-name":t.rowClassName,pageSize:100,pageSizeOpts:t.pageSizeOpts,"grid-name":t.gridName,url:"/cashsettle/approve/transferUnApproveList.json"},on:{selectionChange:t.onSelectionChange}}),t._v(" "),t.selectionTipVisible?a("selection-tip",{attrs:{selections:t.selections}}):t._e(),t._v(" "),""!=t.queryForm.fundIds&&t.queryForm.fundIds.indexOf(",")<0||t.item.transfer_ins_id?a("div",{staticClass:"wrapper mt10",attrs:{id:"inner-on-transfer-approve"}},[t._e(),t._v(" "),t._e(),t._v(" "),a("detail-panel",{attrs:{businClass:t.queryForm.businClass,businFlagList:t.businFlagList,trustAcctList:t.trustAcctList,acctBalanceList:t.acctBalanceList,businCashList:t.businCashList,queryForm:t.queryForm,item:t.item,from:"approve"},on:{quickSend:t.quickSend}})],1):t._e()],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"1040",top:"24","mask-closable":!1,footerHide:!0,scrollable:""},nativeOn:{click:function(e){return t.onCompleteLoad(e)}},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增指令")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改指令")]):t._e(),t._v(" "),"detail"==t.actionType?a("span",[t._v("指令详情")]):t._e()]),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom",staticStyle:{"border-color":"#d3d3d3"}},[a("header",{staticClass:"headline pl5"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("业务类型")])]),t._v(" "),a("h-form",{ref:"transForm0",attrs:{model:t.transferInfo,"label-width":100,cols:"3"}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType,filterable:""},on:{"on-change":t.fundChanged},model:{value:t.transferInfo.fund_id,callback:function(e){t.$set(t.transferInfo,"fund_id",e)},expression:"transferInfo.fund_id"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),""==t.queryForm.businClass?a("h-form-item",{attrs:{required:"",label:"业务标志"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("3")<0||"21"==t.transferInfo.cop_busin_class||"9"==t.transferInfo.cop_busin_class||"4"==t.transferInfo.cop_busin_class||"5"==t.transferInfo.cop_busin_class||"6"==t.transferInfo.cop_busin_class||"1"==t.transferInfo.transfer_merge_flag),size:"mini",options:t.businClassTree,filterable:""},on:{"expand-change":t.businClassChang},model:{value:t.businClassFlag,callback:function(e){t.businClassFlag=e},expression:"businClassFlag"}})],1):t._e(),t._v(" "),""!=t.queryForm.businClass&&""===t.dvpSum?a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("3")<0||"21"==t.transferInfo.cop_busin_class||"9"==t.transferInfo.cop_busin_class||"4"==t.transferInfo.cop_busin_class||"5"==t.transferInfo.cop_busin_class||"6"==t.transferInfo.cop_busin_class||"1"==t.transferInfo.transfer_merge_flag),clearable:!1,filterable:""},model:{value:t.transferInfo.cop_busin_flag,callback:function(e){t.$set(t.transferInfo,"cop_busin_flag",e)},expression:"transferInfo.cop_busin_flag"}},t._l(t.copBusinFlagList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),""!=t.queryForm.businClass&&""!==t.dvpSum?a("h-form-item",{attrs:{required:"",label:"业务标志"}},[a("h-select",{attrs:{clearable:!1,filterable:""},model:{value:t.transferInfo.cop_busin_flag,callback:function(e){t.$set(t.transferInfo,"cop_busin_flag",e)},expression:"transferInfo.cop_busin_flag"}},t._l(t.quickFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),t.showClearAgent?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{required:"",label:"清算机构",prop:"clear_agent_code_cn"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag},model:{value:t.transferInfo.clear_agent_code_cn,callback:function(e){t.$set(t.transferInfo,"clear_agent_code_cn",e)},expression:"transferInfo.clear_agent_code_cn"}},t._l(t.agentCodeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"投资类型",prop:"invest_type"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.invest_type,callback:function(e){t.$set(t.transferInfo,"invest_type",e)},expression:"transferInfo.invest_type"}},t._l(t.investTypeList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),t.showReportCode?a("h-form-item",{attrs:{label:"证券代码",prop:"report_code"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag},model:{value:t.transferInfo.report_code,callback:function(e){t.$set(t.transferInfo,"report_code",e)},expression:"transferInfo.report_code"}})],1):t._e(),t._v(" "),t.showAgency?a("h-form-item",{attrs:{label:"销售机构",prop:"agency_code"}},[a("h-simple-select",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,filterable:""},model:{value:t.transferInfo.agency_code,callback:function(e){t.$set(t.transferInfo,"agency_code",e)},expression:"transferInfo.agency_code"}},[a("h-select-block",{attrs:{data:t.agencyList}})],1)],1):t._e(),t._v(" "),t.showRival?a("h-form-item",{attrs:{label:"对手方",prop:"rival_code"}},["add"==t.actionType&&"7"!=t.transferInfo.cop_busin_class?a("h-select",{attrs:{isComputed:t.rivalComplete,filterable:"",remote:"","remote-method":t.rivalQuery,loading:t.rivalLoading},on:{"on-scroll":t.rivalScroll,"on-change":t.rivalChange},model:{value:t.transferInfo.rival_code,callback:function(e){t.$set(t.transferInfo,"rival_code",e)},expression:"transferInfo.rival_code"}},t._l(t.rivalList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1):t._e(),t._v(" "),"add"==t.actionType&&"7"==t.transferInfo.cop_busin_class?a("h-select",{attrs:{isComputed:t.issuerComplete,filterable:"",remote:"","remote-method":t.issuerQuery},on:{"on-scroll":t.issuerScroll,"on-change":t.rivalChange},model:{value:t.transferInfo.rival_code,callback:function(e){t.$set(t.transferInfo,"rival_code",e)},expression:"transferInfo.rival_code"}},t._l(t.issuerList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1):t._e(),t._v(" "),"add"!=t.actionType?a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.rival_name,callback:function(e){t.$set(t.transferInfo,"rival_name",e)},expression:"transferInfo.rival_name"}}):t._e()],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用起始日期",prop:"fee_begin_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}})],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用结束日期",prop:"fee_end_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e(),t._v(" "),null!=t.canSpecialApprove&&"1"===t.canSpecialApprove?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"特殊审批人",prop:"approve_officer"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.approve_officer,callback:function(e){t.$set(t.transferInfo,"approve_officer",e)},expression:"transferInfo.approve_officer"}},t._l(t.specialApproveWorkerList,function(t,e){return a("h-option",{key:e,attrs:{label:t.operator_name,value:t.operator_no}})}),1)],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.stock_name?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"证券名称",prop:"stock_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.stock_name,callback:function(e){t.$set(t.transferInfo,"stock_name",e)},expression:"transferInfo.stock_name"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.market_no?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"交易市场",prop:"market_no"}},[a("h-select",{attrs:{disabled:"",filterable:""},model:{value:t.transferInfo.market_no,callback:function(e){t.$set(t.transferInfo,"market_no",e)},expression:"transferInfo.market_no"}},t._l(t.marketList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e()],1),t._v(" "),t._l(t.seatList,function(e,n){return"22"==t.transferInfo.cop_busin_class&&"20061"==t.transferInfo.cop_busin_flag?a("h-form",{key:n,ref:"seatListForm",refInFor:!0,attrs:{"label-width":100,cols:"3",model:e}},[a("h-row",[a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"席位号"+(n+1),required:"",prop:"seatId"}},[a("h-input",{attrs:{type:"text",maxlength:6,placeholder:"请输入",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag},model:{value:e.seatId,callback:function(a){t.$set(e,"seatId",a)},expression:"item.seatId"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"佣金费"+(n+1),required:"",prop:"fee"}},[a("h-typefield",{attrs:{type:"money",placeholder:"请输入",divided:"",integerNum:"12",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag},on:{"on-blur":t.feeChange},model:{value:e.fee,callback:function(a){t.$set(e,"fee",a)},expression:"item.fee"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),"detail"!=t.actionType?a("h-col",{attrs:{span:"8"}},[a("h-icon",n<=0?{staticClass:"pointer pl10",attrs:{name:"addition",size:"20",color:"#11a0f8"},on:{"on-click":t.addSeatFee}}:{staticClass:"pointer pl10",attrs:{name:"offline",size:"20",color:"#11a0f8"},on:{"on-click":function(e){return t.delSeatFee(n)}}})],1):t._e()],1)],1):t._e()})],2),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom pt10 pb10",staticStyle:{"border-color":"#d3d3d3"}},[a("h-row",[a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("出")])]),t._v(" "),a("h-form",{ref:"outAcctForm",attrs:{model:t.outAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,size:"small",filterable:"","allow-create":"",title:t.outAcct.fullName},on:{change:t.outAcctChanged},model:{value:t.outAcct.fullName,callback:function(e){t.$set(t.outAcct,"fullName",e)},expression:"outAcct.fullName"}},t._l(t.outAcctList,function(t,e){return a("el-option",{key:e,attrs:{label:t.fullName,value:t.fullName}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no",validRules:t.numberValidRule}},[a("h-input",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,maxlength:32,title:t.outAcct.bank_account_no},model:{value:t.outAcct.bank_account_no,callback:function(e){t.$set(t.outAcct,"bank_account_no",e)},expression:"outAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,showTitle:"",filterable:""},model:{value:t.outAcct.bic_code,callback:function(e){t.$set(t.outAcct,"bic_code",e)},expression:"outAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"开户行"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,autosize:{minRows:1,maxRows:2},title:t.outAcct.sub_bank_no},model:{value:t.outAcct.sub_bank_no,callback:function(e){t.$set(t.outAcct,"sub_bank_no",e)},expression:"outAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,maxlength:32,title:t.outAcct.pay_no},model:{value:t.outAcct.pay_no,callback:function(e){t.$set(t.outAcct,"pay_no",e)},expression:"outAcct.pay_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"开户城市",prop:"city_no"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,options:t.cityTree,filterable:""},model:{value:t.outProvinceCity,callback:function(e){t.outProvinceCity=e},expression:"outProvinceCity"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("入")])]),t._v(" "),a("h-form",{ref:"inAcctForm",attrs:{model:t.inAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,size:"small",filterable:"","allow-create":"",title:t.inAcct.fullName},on:{change:t.inAcctChanged},model:{value:t.inAcct.fullName,callback:function(e){t.$set(t.inAcct,"fullName",e)},expression:"inAcct.fullName"}},t._l(t.inAcctList,function(t,e){return a("el-option",{key:e,attrs:{label:t.fullName,value:t.fullName}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no",validRules:t.numberValidRule}},[a("h-input",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,maxlength:32,title:t.inAcct.bank_account_no},model:{value:t.inAcct.bank_account_no,callback:function(e){t.$set(t.inAcct,"bank_account_no",e)},expression:"inAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,showTitle:"",filterable:""},model:{value:t.inAcct.bic_code,callback:function(e){t.$set(t.inAcct,"bic_code",e)},expression:"inAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"开户行"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,autosize:{minRows:1,maxRows:2},title:t.inAcct.sub_bank_no},model:{value:t.inAcct.sub_bank_no,callback:function(e){t.$set(t.inAcct,"sub_bank_no",e)},expression:"inAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.bankCorporateLink,label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,maxlength:32,title:t.inAcct.pay_no},model:{value:t.inAcct.pay_no,callback:function(e){t.$set(t.inAcct,"pay_no",e)},expression:"inAcct.pay_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:t.showAcctCity,label:"开户城市",prop:"city_no"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:"detail"==t.actionType||"modify"==t.actionType&&"1"==t.transferInfo.transfer_merge_flag,options:t.cityTree,filterable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.trusteeStyle,attrs:{span:"8"}},[a("header",{staticClass:"headline pl10 pr10"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("联系信息")])]),t._v(" "),a("h-form",{ref:"selfAcctForm",attrs:{model:t.selfAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.selfAcct.bank_phone,callback:function(e){t.$set(t.selfAcct,"bank_phone",e)},expression:"selfAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"邮箱",prop:"bank_mail",validRules:t.bankMailRule}},[a("el-input",{attrs:{placeholder:"多个邮箱请用英文逗号隔开",size:"small",type:"textarea",maxlength:"1024",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.selfAcct.bank_mail},model:{value:t.selfAcct.bank_mail,callback:function(e){t.$set(t.selfAcct,"bank_mail",e)},expression:"selfAcct.bank_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.selfAcct.bank_fax,callback:function(e){t.$set(t.selfAcct,"bank_fax",e)},expression:"selfAcct.bank_fax"}})],1)],1),t._v(" "),a("h-form",{directives:[{name:"show",rawName:"v-show",value:t.showRivalContact,expression:"showRivalContact"}],ref:"rivalContactForm",attrs:{model:t.rivalAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{label:"基金公司电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.rivalAcct.bank_phone,callback:function(e){t.$set(t.rivalAcct,"bank_phone",e)},expression:"rivalAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"基金公司邮箱",validRules:t.bankMailRule,prop:"bank_mail"}},[a("el-input",{attrs:{placeholder:"多个邮箱请用英文逗号隔开",size:"small",type:"textarea",maxlength:"1024",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.rivalAcct.bank_mail},model:{value:t.rivalAcct.bank_mail,callback:function(e){t.$set(t.rivalAcct,"bank_mail",e)},expression:"rivalAcct.bank_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"基金公司传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.rivalAcct.bank_fax,callback:function(e){t.$set(t.rivalAcct,"bank_fax",e)},expression:"rivalAcct.bank_fax"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"block-in-box pt10 pb10"},[a("h-row",[a("h-col",{staticStyle:{"border-color":"#d3d3d3"},attrs:{span:"16","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("划款信息")])]),t._v(" "),a("h-form",{ref:"transForm",attrs:{model:t.transferInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"10"}},[a("h-form-item",{attrs:{required:"",label:"划款金额",prop:"settle_balance"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("划款金额")]),t._v(" "),a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:"",disabled:"detail"==t.actionType||"modify"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("1")<0||"1"==t.transferInfo.transfer_merge_flag)||"22"==t.transferInfo.cop_busin_class&&"20061"==t.transferInfo.cop_busin_flag},model:{value:t.transferInfo.settle_balance,callback:function(e){t.$set(t.transferInfo,"settle_balance",e)},expression:"transferInfo.settle_balance"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"2"}},[a("h-form-item",{attrs:{"label-width":2}},[a("h-select",{staticStyle:{height:"28px"},attrs:{required:"",disabled:"detail"==t.actionType||"8"!=t.transferInfo.cop_busin_class||"modify"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("4")<0||"1"==t.transferInfo.transfer_merge_flag)||"add"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("4")<0),filterable:"",clearable:!1},model:{value:t.transferInfo.currency_no,callback:function(e){t.$set(t.transferInfo,"currency_no",e)},expression:"transferInfo.currency_no"}},t._l(t.currencyList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"付款时间"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("付款时间")]),t._v(" "),a("el-date-picker",{attrs:{size:"mini",disabled:"detail"==t.actionType||"modify"==t.actionType&&(null==t.canModifyConf||t.canModifyConf.indexOf("2")<0||"1"==t.transferInfo.transfer_merge_flag),clearable:!1,"picker-options":t.pickerOptions,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期"},model:{value:t.payDateTime,callback:function(e){t.payDateTime=e},expression:"payDateTime"}})],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"大写金额"}},[a("h-input",{attrs:{disabled:""},model:{value:t.upBalance,callback:function(e){t.upBalance=e},expression:"upBalance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款事由",prop:"transfer_purpose"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,lengthByByte:"",maxlength:1024},model:{value:t.transferInfo.transfer_purpose,callback:function(e){t.$set(t.transferInfo,"transfer_purpose",e)},expression:"transferInfo.transfer_purpose"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,lengthByByte:"",maxlength:1024},model:{value:t.transferInfo.transfer_postscript,callback:function(e){t.$set(t.transferInfo,"transfer_postscript",e)},expression:"transferInfo.transfer_postscript"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款备注",prop:"transfer_remark"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,lengthByByte:"",maxlength:1024},model:{value:t.transferInfo.transfer_remark,callback:function(e){t.$set(t.transferInfo,"transfer_remark",e)},expression:"transferInfo.transfer_remark"}})],1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"8","class-name":"pl10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("附件")])]),t._v(" "),a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{disabled:"detail"==t.actionType||"1"==t.transferInfo.transfer_merge_flag,drag:"",multiple:"",action:t.uploadUrl,data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"before-upload":t.beforeUpload,"on-remove":t.fileRemoved,"on-preview":t.downloadFile,"on-exceed":t.exceedLimit,accept:".pdf,.doc,.xls,.xlsx,.docx,.png,.jpg,.jpeg,.bmp",limit:20,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType,expression:"actionType=='detail'"}],model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"collapse-icon-l"}),t._v(" "),a("span",{staticClass:"collapse-title"},[t._v("指令操作明细")])]),t._v(" "),a("h-datagrid",{ref:"flowData",attrs:{stripe:"",autoLoad:!1,"highlight-row":"",columns:t.flowColumns,bindForm:t.detailForm,url:"/cashsettle/transferFlow.json"}})],2)],1),t._v(" "),a("div",{staticClass:"flex-row-end"},[a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"add"==t.actionType,expression:"actionType=='add'"}],staticClass:"ml10",attrs:{type:"error"},on:{click:t.openTempDialog}},[t._v("存为模板\n            ")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"primary"},on:{click:function(e){return t.saveTransfer(!1)}}},[t._v("保存\n            ")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"primary"},on:{click:function(e){return t.saveTransfer(!1,!0)}}},[t._v("保存并提交\n            ")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType&&"2"==t.pageType,expression:"actionType=='detail'&&pageType=='2'"}],staticClass:"ml10",attrs:{type:"error"},on:{click:function(e){return t.handleApprove(9,!0)}}},[t._v("驳回\n          ")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType,expression:"actionType=='detail'"}],staticClass:"ml10",attrs:{type:"primary"},on:{click:function(e){return t.doApprove(t.transferInfo,8)}}},["2"==t.pageType?a("span",[t._v("通过")]):t._e(),t._v(" "),"1"==t.pageType?a("span",[t._v("提交")]):t._e()])],1)],1),t._v(" "),a("h-msgBox",{staticClass:"customMsgBox",attrs:{title:"保存模板"},model:{value:t.showTemplate,callback:function(e){t.showTemplate=e},expression:"showTemplate"}},[a("h-form",{ref:"tempForm",attrs:{cols:"1","label-width":80,model:t.transferInfo4Temp}},[a("h-form-item",{attrs:{required:"",label:"模板名称",prop:"template_name"}},[a("h-input",{attrs:{maxlength:30},model:{value:t.transferInfo4Temp.template_name,callback:function(e){t.$set(t.transferInfo4Temp,"template_name",e)},expression:"transferInfo4Temp.template_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"模板说明"}},[a("h-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:300},model:{value:t.transferInfo4Temp.remark,callback:function(e){t.$set(t.transferInfo4Temp,"remark",e)},expression:"transferInfo4Temp.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleTemplateCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveTemplate}},[t._v("确认")])],1)],1),t._v(" "),a("h-msgBox",{staticClass:"customMsgBox",attrs:{width:"500px",title:"快速划款"},model:{value:t.miniTrans,callback:function(e){t.miniTrans=e},expression:"miniTrans"}},[a("h-form",{ref:"quickForm",attrs:{model:t.transferInfo,"label-width":110}},[a("h-form-item",{attrs:{required:"",label:"产品",prop:"fund_id"}},[a("h-select",{attrs:{filterable:""},model:{value:t.transferInfo.fund_id,callback:function(e){t.$set(t.transferInfo,"fund_id",e)},expression:"transferInfo.fund_id"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("h-select",{attrs:{clearable:!1,filterable:""},model:{value:t.transferInfo.cop_busin_flag,callback:function(e){t.$set(t.transferInfo,"cop_busin_flag",e)},expression:"transferInfo.cop_busin_flag"}},t._l(t.quickFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{staticClass:"tr",attrs:{label:"托管户余额"}},[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v(t._s(t.formatMoney(t.bankBalance))+" 元")])]),t._v(" "),"4"==t.transferInfo.clear_agent_code_cn?a("h-form-item",{staticClass:"tr",attrs:{label:"上清DVP余额"}},[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v(t._s(t.formatMoney(t.dvpBalance))+" 元")])]):t._e(),t._v(" "),"3"==t.transferInfo.clear_agent_code_cn?a("h-form-item",{staticClass:"tr",attrs:{label:"中债DVP余额"}},[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v(t._s(t.formatMoney(t.dvpBalance))+" 元")])]):t._e(),t._v(" "),"4"==t.transferInfo.clear_agent_code_cn?a("h-form-item",{staticClass:"tr",attrs:{label:"上清DVP轧差金额"}},[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v(t._s(t.formatMoney(t.dvpSum))+"元")])]):t._e(),t._v(" "),"3"==t.transferInfo.clear_agent_code_cn?a("h-form-item",{staticClass:"tr",attrs:{label:"中债DVP轧差金额"}},[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v(t._s(t.formatMoney(t.dvpSum))+"元")])]):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"划款金额",prop:"settle_balance"}},[a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:""},model:{value:t.settleBalanceQuick,callback:function(e){t.settleBalanceQuick=e},expression:"settleBalanceQuick"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("p",{staticClass:"pointer",staticStyle:{"font-size":"14px","line-height":"28px",color:"#11a0f8",float:"left"},on:{click:function(e){return t.handleAdd(!0)}}},[t._v("详情 >>")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveTransfer(!0)}}},[t._v("确定")])],1)],1),t._v(" "),a("h-msgBox",{staticClass:"customMsgBox",attrs:{width:"1200px",title:"应用模板"},model:{value:t.showTemplateList,callback:function(e){t.showTemplateList=e},expression:"showTemplateList"}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{size:"mini",inline:!0,model:t.queryTemp}},[a("el-form-item",{attrs:{label:"产品"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryTemp.fundIds,callback:function(e){t.$set(t.queryTemp,"fundIds",e)},expression:"queryTemp.fundIds"}},t._l(t.fundList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"业务标志"}},[a("el-cascader",{attrs:{options:t.businClassTreeAll,filterable:"",clearable:"",props:{checkStrictly:!0}},model:{value:t.businClassFlag,callback:function(e){t.businClassFlag=e},expression:"businClassFlag"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出入款方向"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.queryTemp.cash_direction,callback:function(e){t.$set(t.queryTemp,"cash_direction",e)},expression:"queryTemp.cash_direction"}},t._l(t.cashDirectionList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{model:{value:t.queryTemp.name,callback:function(e){t.$set(t.queryTemp,"name",e)},expression:"queryTemp.name"}})],1),t._v(" "),a("el-form-item",[a("h-button",{attrs:{type:"primary"},on:{click:t.refreshTemplateList}},[t._v("查询")])],1)],1),t._v(" "),a("h-datagrid",{ref:"templateLstData",attrs:{stripe:"",hasPage:"",autoLoad:!1,onRowDbClick:t.userTemplate,"highlight-row":"",columns:t.templateColumns,bindForm:t.queryTemp,height:t.autoHeight,pageSize:50,url:"/cashsettle/input/templateList.json"}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.userTemplate}},[t._v("打开")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.deleteTemplate}},[t._v("删除")])],1)],1),t._v(" "),a("h-msgBox",{staticClass:"customMsgBox",attrs:{width:"800px",title:"TA明细"},model:{value:t.showTADialog,callback:function(e){t.showTADialog=e},expression:"showTADialog"}},[a("TADetailTable",{ref:"taDetailTable",staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{height:500}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),a("import-dialog",{ref:"importDialog",attrs:{"on-import-success":t.refreshFundTree}}),t._v(" "),a("import-account-transfer",{ref:"importAccountTransfer",attrs:{"on-import-success":t.refreshFundTree}}),t._v(" "),a("full-screen-loading",{ref:"screenLoading"}),t._v(" "),t.showBTADialog?a("div",[a("ImportDialog4BTA",{attrs:{msgBoxShow:t.showBTADialog,fundList:t.fundList},on:{onBTAClose:t.onBTAClose}})],1):t._e(),t._v(" "),a("TransferDetailDialog",{ref:"detailDialog"}),t._v(" "),a("h-msgBox",{staticClass:"customMsgBox",attrs:{width:"350px",title:"修改处理方式"},model:{value:t.showDealType,callback:function(e){t.showDealType=e},expression:"showDealType"}},[a("h-form",{attrs:{cols:"1","label-width":100}},[a("h-form-item",{attrs:{label:"指令处理方式",prop:"dealType"}},[a("h-select",{attrs:{clearable:!1},model:{value:t.dealType,callback:function(e){t.dealType=e},expression:"dealType"}},t._l(t.dealTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.showDealType=!1}}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveDealType}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")(T,F,!1,function(t){a("XI5C"),a("VE+C"),a("1l3G"),a("XqWy")},null,null);e.default=L.exports},"7Gxt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("lbHh"),i=a.n(s),o={name:"systemLogQuery",data:function(){var t=this,e=[{title:"序号",key:"serial_no",sortable:!0,width:80,align:"right"},{title:"操作类型",key:"check_type",width:70,align:"left",render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.check_type,t.checkTypeList))}},{title:"操作项",key:"remark",ellipsis:!0,width:160,align:"left",render:function(t,e){var a=e.row,n=t("span",{},a.remark);return t("el-tooltip",{props:{trigger:"hover",effect:"light",placement:"top-start",openDelay:400,content:a.remark,popperClass:"tooltipclass"}},[n])}},{title:"操作人",key:"operator_no",width:150,sortable:!0,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.operator_no,t.operatorList))}},{title:"操作时间",key:"input_date",sortable:!0,width:135,ellipsis:!0,align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.input_date,a.input_time))}},{title:"操作菜单名称",key:"menu_name",width:120,align:"left",ellipsis:!0},{title:"操作内容",key:"modify_desc",align:"left",ellipsis:!0,render:function(t,e){return e.row.modify_desc?t("span",{},decodeURIComponent(e.row.modify_desc)):""}}];return{queryForm:{operatorNo:"",beginDate:i.a.get("CurrSysDate"),endDate:i.a.get("CurrSysDate")},checkTypeList:[],operatorList:[],sysDate:i.a.get("CurrSysDate"),autoHeight:0,pageSizeOpts:[25,50,75,100],dataColumns:e,isScrollBar:{marginTop:"10px",overflow:"auto",maxHeight:""},currentSystemLog:{}}},components:{HDatagrid:a("3dxc").a},props:{},computed:{inputDate:{get:function(){return[this.queryForm.beginDate?Object(n.R)(this.queryForm.beginDate):this.sysDate,this.queryForm.endDate?Object(n.R)(this.queryForm.endDate):this.sysDate]},set:function(t){this.queryForm.beginDate=Object(n.Q)(t[0]),this.queryForm.endDate=Object(n.Q)(t[1])}}},activated:function(){this.refresh()},created:function(){var t=this;Object(n.t)(10054).then(function(e){return t.checkTypeList=e.data}),Object(n.N)().then(function(e){e.data&&e.data.length>0&&(t.operatorList=e.data)}).catch(function(t){console.log(t)})},methods:{refresh:function(){if(this.queryForm.beginDate&&this.queryForm.endDate&&(Object(n.T)(this.queryForm.endDate)-Object(n.T)(this.queryForm.beginDate))/864e5>30)return void this.$alert("查询日期间隔不能大于30天","错误",{confirmButtonText:"确定",type:"error"});this.$refs.datagrid.dataChange(1),this.clearData()},clearData:function(){this.currentSystemLog={},this.$nextTick(this.re_layout)},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight;t>e/2&&(this.isScrollBar.maxHeight=e/2+"px",t=e/2),this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-70},handleCurrentChange:function(){this.currentSystemLog={};var t=this.$refs.datagrid.$refs.gridContent.getSelection();1===t.length&&(this.currentSystemLog=t[0]),this.$nextTick(this.re_layout)},handleUnselect:function(){this.clearData()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-systemlog",attrs:{id:"full-h-wrapper"}},[a("h-row",{staticStyle:{"margin-bottom":"0px"},attrs:{id:"systemLogForm"}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"操作人"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.operatorNo,callback:function(e){t.$set(t.queryForm,"operatorNo",e)},expression:"queryForm.operatorNo"}},t._l(t.operatorList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"操作日期"}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.inputDate,callback:function(e){t.inputDate=e},expression:"inputDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticClass:"mt10",staticStyle:{"margin-top":"0px"},attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.dataColumns,bindForm:t.queryForm,onCurrentChange:t.handleCurrentChange,onCurrentChangeCancel:t.handleUnselect,url:"/reportmgnt/systemLogQuery/page.json"}}),t._v(" "),t.currentSystemLog.modify_desc?a("div",{staticClass:"systemlog-detail",style:t.isScrollBar,attrs:{id:"wrapper-0"}},[a("div",{staticClass:"wrapper"},[t.currentSystemLog.modify_desc?a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("操作内容")])]):t._e(),t._v(" "),t.currentSystemLog.modify_desc?a("h-row",t._l(t.currentSystemLog.modify_desc.split(";"),function(e,n){return a("h-col",{key:n,staticClass:"inner",attrs:{span:"6"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v(t._s(decodeURIComponent(e.split(":")[0])))]),t._v(" "),a("div",{staticClass:"value",attrs:{title:decodeURIComponent(e.split(":")[1])}},[t._v("\n                            "+t._s(decodeURIComponent(e.split(":")[1]))+"\n                        ")])])])}),1):t._e()],1)]):t._e()],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("DD4c"),a("LA/8"),a("PwFc"),a("tHz+")},null,null);e.default=l.exports},"7mwo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("5/bi");var o={name:"bondSettleMgntTab",components:{HDatagrid:n.a},data:function(){return{pageSizeOpts:[25,50,75,100],sumColumns:[{title:"汇总",key:"sum_text",width:100,ellipsis:!0,align:"left"},{title:"上清所",key:"sqs_amt_count",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;if("轧差金额（元）"===a.sum_text){var n=Object(s.h)(a.sqs_amt_count);return parseFloat(n)<0?t("span",{style:{fontWeight:"bold",color:"red"}},n):t("span",{style:{fontWeight:"bold"}},n)}return t("span",{},a.sqs_amt_count)}},{title:"中债登",key:"zzd_amt_count",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;if("轧差金额（元）"===a.sum_text){var n=Object(s.h)(a.zzd_amt_count);return parseFloat(n)<0?t("span",{style:{fontWeight:"bold",color:"red"}},n):t("span",{style:{fontWeight:"bold"}},n)}return t("span",{},a.zzd_amt_count)}},{title:"PROP",key:"prop_amt_count",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;if("轧差金额（元）"===a.sum_text){var n=Object(s.h)(a.prop_amt_count);return parseFloat(n)<0?t("span",{style:{fontWeight:"bold",color:"red"}},n):t("span",{style:{fontWeight:"bold"}},n)}return t("span",{},a.prop_amt_count)}},{title:"DCOM",key:"dcom_amt_count",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;if("轧差金额（元）"===a.sum_text){var n=Object(s.h)(a.dcom_amt_count);return parseFloat(n)<0?t("span",{style:{fontWeight:"bold",color:"red"}},n):t("span",{style:{fontWeight:"bold"}},n)}return t("span",{},a.dcom_amt_count)}}],sumData:{rows:[{sum_text:"轧差金额（元）",sqs_amt_count:"0",zzd_amt_count:"0",prop_amt_count:"0",dcom_amt_count:"0"},{sum_text:"业务笔数（笔）",sqs_amt_count:"0",zzd_amt_count:"0",prop_amt_count:"0",dcom_amt_count:"0"}]}}},props:{mainHeight:{type:Number},queryType:{type:String,default:""},detailColumns:{type:Array,default:[]},mainQueryForm:{fundIds:"",queryType:"",keyword:""}},watch:{},computed:{gridName:function(){var t="bondSettleMgnt-1";return"1"===this.queryType?t="bondSettleMgnt-1":"2"===this.queryType?t="bondSettleMgnt-2":"3"===this.queryType?t="bondSettleMgnt-3":"4"===this.queryType&&(t="bondSettleMgnt-4"),t}},methods:{refresh:function(){var t,e=this;this.$refs.maindatagrid.dataChange(1),this.$refs.sumdatagrid.handleResize(),(t={fundIds:this.mainQueryForm.fundIds,queryType:this.queryType},i.a.post("/cashmgnt/bondSettleMgnt/queryAmountCount.json",t)).then(function(t){t.data.success?e.setSumData(t.data.data):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))})},handleResize:function(){this.$refs.maindatagrid.handleResize(),this.$refs.sumdatagrid.handleResize()},trialClick:function(){var t=this,e=this.$refs.maindatagrid.$refs.gridContent.getSelection();if(0===e.length)return this.openMask(),void this.$alert("请先选中至少一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});var a=[{sqs_amt_count:0,zzd_amt_count:0,prop_amt_count:0,dcom_amt_count:0},{sqs_amt_count:0,zzd_amt_count:0,prop_amt_count:0,dcom_amt_count:0}];e.forEach(function(t){"1"===t.cop_busin_class&&"4"===t.clear_agent_code_cn?(a[0].sqs_amt_count+=("1"===t.cash_direction?1:-1)*parseFloat(t.settle_balance),a[1].sqs_amt_count+=1):"1"===t.cop_busin_class&&"3"===t.clear_agent_code_cn?(a[0].zzd_amt_count+=("1"===t.cash_direction?1:-1)*parseFloat(t.settle_balance),a[1].zzd_amt_count+=1):"4"===t.cop_busin_class||"6"===t.cop_busin_class?(a[0].prop_amt_count+=("1"===t.cash_direction?1:-1)*parseFloat(t.settle_balance),a[1].prop_amt_count+=1):"5"===t.cop_busin_class&&(a[0].dcom_amt_count+=("1"===t.cash_direction?1:-1)*parseFloat(t.settle_balance),a[1].dcom_amt_count+=1)}),a[0].sqs_amt_count=parseFloat(a[0].sqs_amt_count).toFixed(2),a[0].zzd_amt_count=parseFloat(a[0].zzd_amt_count).toFixed(2),a[0].prop_amt_count=parseFloat(a[0].prop_amt_count).toFixed(2),a[0].dcom_amt_count=parseFloat(a[0].dcom_amt_count).toFixed(2),this.setSumData(a)},setSumData:function(t){this.sumData.rows[0].sqs_amt_count=t[0].sqs_amt_count,this.sumData.rows[0].zzd_amt_count=t[0].zzd_amt_count,this.sumData.rows[0].prop_amt_count=t[0].prop_amt_count,this.sumData.rows[0].dcom_amt_count=t[0].dcom_amt_count,this.sumData.rows[1].sqs_amt_count=t[1].sqs_amt_count,this.sumData.rows[1].zzd_amt_count=t[1].zzd_amt_count,this.sumData.rows[1].prop_amt_count=t[1].prop_amt_count,this.sumData.rows[1].dcom_amt_count=t[1].dcom_amt_count},openLayout:function(){this.$refs.maindatagrid.openLayout()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-row",{staticClass:"full-h"},[a("h-col",{staticClass:"full-h"},[a("h-button-group",[a("h-button",{staticClass:"custom-button",attrs:{icon:"play"},on:{click:t.trialClick}},[t._v("试算")])],1),t._v(" "),a("h-button-group",{staticStyle:{float:"right","border-right":"solid 0",color:"transparent"}},[a("h-button",{on:{click:t.openLayout}},[a("h-icon",{staticClass:"iconfont icon-ziduanxuanze1"}),t._v("  布局\n                ")],1)],1),t._v(" "),a("h-datagrid",{ref:"maindatagrid",staticStyle:{"margin-top":"10px",overflow:"hidden"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:t.mainHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.detailColumns,bindForm:t.mainQueryForm,url:"/cashmgnt/bondSettleMgnt/queryBondSettleMgntList.json","auto-load":!1,"grid-name":t.gridName}}),t._v(" "),a("h-datagrid",{ref:"sumdatagrid",staticStyle:{"margin-top":"1px",overflow:"hidden"},attrs:{"highlight-row":"",stripe:"",columns:t.sumColumns,gridData:t.sumData}})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("uYps")},"data-v-6e8dddba",null);e.default=l.exports},"8DhI":function(t,e,a){"use strict";e.a=function(t,e){return n.a.post("/check/getCheckDetail.json",{checkId:t,objectType:e})},e.b=function(t,e,a,s){return n.a.post("/check/submitReview.json",{checkIds:t,isPass:e,objectType:a,remark:s})};var n=a("5/bi")},"8WfP":function(t,e){},"9Toe":function(t,e){},"9anW":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l={name:"interfaceFile",components:{HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],showInterfaceFileDialog:!1,fileNameList:[],noneEleBankList:[],fileCheckTypeList:[],impStageList:[],actionType:"",fileList:[],uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",interfaceFileColumns:[{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{title:"文件类型",key:"file_type",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.file_type,t.fileTypeList))}},{title:"文件名",key:"file_name",ellipsis:!0,align:"left",render:function(e,a){var n=a.row,i=Object(s._1)(n.file_name,t.noneEleBankList);return i||(i=n.file_name),e("span",{},i)}},{title:"文件路径",key:"file_path",ellipsis:!0,align:"left"},{title:"文件检查类型",key:"filecheck_type",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.filecheck_type,t.fileCheckTypeList))}},{title:"导入阶段",key:"cop_imp_stage",ellipsis:!0,align:"left",render:function(e,a){var n=a.row,i="";if(n.cop_imp_stage)for(var o=n.cop_imp_stage.split(","),r=0;r<o.length;r++)i+=Object(s._1)(o[r],t.impStageList)+",";return e("span",{},i.substring(0,i.length-1))}}],fileTypeList:[{code:"5",text:"估值对账文件"},{code:"6",text:"TA接口文件"},{code:"E",text:"银行余额文件"},{code:"F",text:"网下申购文件"}],uploadData:{fileType:"6",fundId:""},interfaceFileInfo:{file_type:"",file_name:"",file_path:"",ftp_file_name:"",filecheck_type:"",cop_imp_stage:"",file_id:""},remark:""}},watch:{showInterfaceFileDialog:function(t){t?this.openMask():this.closeMask()},"interfaceFileInfo.file_type":function(t){switch(t){case"E":this.fileNameList=this.noneEleBankList,this.interfaceFileInfo.file_name&&!isNaN(this.interfaceFileInfo.file_name)||(this.interfaceFileInfo.file_name=this.noneEleBankList[0].code);break;case"F":this.fileNameList=[{code:"网下申购文件",test:"网下申购文件"}],this.interfaceFileInfo.file_name="网下申购文件";break;case"6":this.fileNameList=[{code:"自建TA文件",text:"自建TA文件"},{code:"中登TA文件",text:"中登TA文件"}],"add"==this.actionType&&(this.interfaceFileInfo.file_name="自建TA文件");break;case"5":this.fileNameList=[],"add"==this.actionType&&(this.interfaceFileInfo.file_name="GZ#FUNDCODE.dbf"),this.remark="只允许导入产品层的估值对账文件";break;default:this.fileNameList=[]}}},mounted:function(){var t=this;Object(s.t)(810029).then(function(e){return t.fileCheckTypeList=e.data}),Object(s.t)(90754).then(function(e){return t.impStageList=e.data}),Object(s.D)().then(function(e){return t.noneEleBankList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90},refresh:function(){this.$refs.datagrid.dataChange(1)},addInterfaceFile:function(){this.actionType="add",this.interfaceFileInfo={file_type:"5",file_name:"",file_path:"",ftp_file_name:"",filecheck_type:"3",cop_imp_stage:"",file_id:""},this.$refs.interfaceFileForm.resetFields(),this.fileList=[],this.showInterfaceFileDialog=!0},modifyInterfaceFile:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.interfaceFileDbClick(e[0])},interfaceFileDbClick:function(t){if(this.interfaceFileInfo=t,t.file_path&&"E"==t.file_type){var e=t.file_path.split("/"),a=e[e.length-1].split("-");this.interfaceFileInfo.ftp_file_name=a[a.length-1],this.fileList=[{name:this.interfaceFileInfo.ftp_file_name}]}this.showInterfaceFileDialog=!0,this.actionType="modify"},deleteInterfaceFile:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确认要删除这条记录吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,n;(a=e[0].file_type,n=e[0].file_name,r.a.post("/systemmgnt/interfaceFile/deleteInterfaceFile.json",{fileType:a,fileName:n})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},cancelInterfaceFile:function(){this.showInterfaceFileDialog=!1},saveInterfaceFile:function(){var t,e=this,a=!0;(this.$refs.interfaceFileForm.validate(function(t){return a=a&&t}),"E"!=this.interfaceFileInfo.file_type||this.interfaceFileInfo.ftp_file_name||(a=!1),a)?"add"==this.actionType?(t=this.interfaceFileInfo,r.a.post("/systemmgnt/interfaceFile/addInterfaceFile.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){e.openMask(),t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showInterfaceFileDialog=!1}}).then(function(){e.showInterfaceFileDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):function(t){return r.a.post("/systemmgnt/interfaceFile/updateInterfaceFile.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})}(this.interfaceFileInfo).then(function(t){e.openMask(),t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showInterfaceFileDialog=!1}}).then(function(){e.showInterfaceFileDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})},fileUploaded:function(t,e,a){"0"==t.code?1==a.length?(this.interfaceFileInfo.file_id=t.data,this.interfaceFileInfo.ftp_file_name=a[0].name):2==a.length?(this.interfaceFileInfo.file_id=t.data,this.interfaceFileInfo.ftp_file_name=a[1].name,a.splice(0,1)):(this.interfaceFileInfo.file_id="",this.interfaceFileInfo.ftp_file_name=""):(this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error"}),a.splice(a.length-1,1))},fileRemoved:function(t,e){this.interfaceFileInfo.file_id="",this.interfaceFileInfo.ftp_file_name="",this.fileList=[]}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[a("h-row",{staticClass:"full-h"},[a("h-col",{staticClass:"full-h"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.addInterfaceFile}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.modifyInterfaceFile}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.deleteInterfaceFile}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-sync"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.interfaceFileColumns,"on-row-db-click":t.interfaceFileDbClick,url:"/systemmgnt/interfaceFile/InterfaceFile.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showInterfaceFileDialog,callback:function(e){t.showInterfaceFileDialog=e},expression:"showInterfaceFileDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增接口文件配置")]):a("span",[t._v("修改接口文件配置")])]),t._v(" "),a("h-form",{ref:"interfaceFileForm",attrs:{model:t.interfaceFileInfo,"label-width":100}},[a("h-form-item",{attrs:{label:"文件类型",required:"",prop:"file_type"}},[a("h-select",{attrs:{disabled:"modify"==t.actionType,filterable:"",clearable:!1},model:{value:t.interfaceFileInfo.file_type,callback:function(e){t.$set(t.interfaceFileInfo,"file_type",e)},expression:"interfaceFileInfo.file_type"}},t._l(t.fileTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),"6"==t.interfaceFileInfo.file_type||"F"==t.interfaceFileInfo.file_type||"E"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"文件名",prop:"file_name"}},[a("h-select",{attrs:{disabled:"modify"==t.actionType||"F"==t.interfaceFileInfo.file_type,filterable:"E"==t.interfaceFileInfo.file_type},model:{value:t.interfaceFileInfo.file_name,callback:function(e){t.$set(t.interfaceFileInfo,"file_name",e)},expression:"interfaceFileInfo.file_name"}},t._l(t.fileNameList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"5"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"文件名",prop:"file_name"}},[a("h-input",{attrs:{disabled:"modify"==t.actionType},model:{value:t.interfaceFileInfo.file_name,callback:function(e){t.$set(t.interfaceFileInfo,"file_name",e)},expression:"interfaceFileInfo.file_name"}})],1):t._e(),t._v(" "),"E"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"上传文件名",prop:"ftp_file_name"}},[a("h-input",{attrs:{disabled:""},model:{value:t.interfaceFileInfo.ftp_file_name,callback:function(e){t.$set(t.interfaceFileInfo,"ftp_file_name",e)},expression:"interfaceFileInfo.ftp_file_name"}})],1):t._e(),t._v(" "),"5"==t.interfaceFileInfo.file_type||"F"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"文件路径",prop:"file_path"}},[a("h-input",{model:{value:t.interfaceFileInfo.file_path,callback:function(e){t.$set(t.interfaceFileInfo,"file_path",e)},expression:"interfaceFileInfo.file_path"}})],1):t._e(),t._v(" "),"6"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"文件路径",prop:"file_path"}},[a("h-poptip",{staticClass:"cop-poptip-interfacefile",attrs:{trigger:"hover",placement:"right"}},[a("h-input",{model:{value:t.interfaceFileInfo.file_path,callback:function(e){t.$set(t.interfaceFileInfo,"file_path",e)},expression:"interfaceFileInfo.file_path"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("支持的宏定义")])]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("日期宏：YYYYMMDD、YYYYMMDD-、")]),t._v(" "),a("p",[t._v("YYYYMM、YYMMDD、YYYY、YYMM、")]),t._v(" "),a("p",[t._v("MMDD等（前面没有#）")])])],1)],1):t._e(),t._v(" "),"E"==t.interfaceFileInfo.file_type?a("h-form-item",[a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{drag:"",action:t.uploadUrl,data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"on-remove":t.fileRemoved,accept:".xls,.xlsx",limit:2,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1):t._e(),t._v(" "),"E"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{required:"",label:"文件检查类型",prop:"filecheck_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.interfaceFileInfo.filecheck_type,callback:function(e){t.$set(t.interfaceFileInfo,"filecheck_type",e)},expression:"interfaceFileInfo.filecheck_type"}},t._l(t.fileCheckTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"E"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{label:"导入阶段",prop:"cop_imp_stage"}},[a("h-select",{attrs:{showBottom:"",hideMult:"",isString:"",multiple:"",filterable:""},model:{value:t.interfaceFileInfo.cop_imp_stage,callback:function(e){t.$set(t.interfaceFileInfo,"cop_imp_stage",e)},expression:"interfaceFileInfo.cop_imp_stage"}},t._l(t.impStageList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"5"==t.interfaceFileInfo.file_type?a("h-form-item",{attrs:{label:"备注",prop:"remark"}},[a("h-input",{attrs:{disabled:"",type:"textarea"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1):t._e()],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelInterfaceFile}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveInterfaceFile}},[t._v("确定")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("eY2A"),a("+Urf")},null,null);e.default=u.exports},"9dja":function(t,e){},AJAJ:function(t,e){},AJqZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("NYxO"),o=a("jV6A"),r=a("22iY"),l=a("Q5rI"),c={props:{value:{type:Boolean,default:!1},actionType:{type:String,default:"edit"},fundInfo:{type:Object,default:null}},data:function(){return{visible:!1,codeRule:[{test:/^[0-9a-zA-Z]+$/,message:"只能输入字母和数字"}],bankPhoneRule:[{test:/^(\d{3,4}-\d{7,8}$)|(1[0-9]{10})$/,message:"电话格式不正确"}],bankFaxRule:[{test:/^\d{3,4}-\d{7,8}$/,message:"传真格式不正确"}],mailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确"}],multiMailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?([,][\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?)*/,message:"邮箱格式不正确"}],ruleValidate:{bank_account_no:[{pattern:/^[A-Za-z0-9()-]{0,32}$/,message:"账号格式不正确",trigger:"blur"},{pattern:/^[A-Za-z0-9()-]{0,32}$/,message:"账号格式不正确",trigger:"change"}],bank_mail:[{pattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确",trigger:"blur"},{pattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确",trigger:"change"}]},showCustodialAccount:!0,accountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"托管账户"},{code:"3",text:"三方存管账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}],selfAccountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"自营账户"},{code:"3",text:"三方存管账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}],uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",uploadData:{fileType:"1",fundId:""},fileList:[],newFundInfo:{fundId:"",fund_name:"",fund_code:"",actual_code:"",fund_mgr_operator:"",fund_status:"1",fund_trust_bank:"",fund_type:"",establish_date:"",expire_date:"",interbank_id:"",paper_no:"",stockholder_id:"",stockholder_id_sz:"",object_code:"",sh_ta_account:"",sz_ta_account:"",transfer_flag:"1",file_name:"",fund_mail:"",fund_mail_pwd:"",fund_accountant:"",ta_settle_type:"",fund_settle_type:"",trust_flag:"",accountList:[{account_class:"2",bank_account_status:"1"}],sub_fund_code_list:""},keys:[],item:{},taMode:"1",stampList:[]}},computed:s()({},Object(i.e)({fundTypeList:function(t){return t.dict.dict_610087},fundSettleTypes:function(t){return t.dict.dict_90531},taSettleTypes:function(t){return t.dict.dict_90530},dataSourceList:function(t){return t.dict.dict_90528},accountTypeList:function(t){return t.dict.dict_60058},accountStatusList:function(t){return t.dict.dict_200008},currencyNoList:function(t){return t.dict.dict_610406},bankFuturesTypeList:function(t){return t.dict.dict_90532},taMatchTypeList:function(t){return t.dict.dict_91386},operatorList:function(t){return t.dict.operatorList},bankList:function(t){return t.dict.bankList},trustBankList:function(t){return t.dict.trustBankList},agencyList:function(t){return t.dict.agencyList},brokerList:function(t){return t.dict.brokerList},cityTree:function(t){return t.dict.cityTree}}),{title:function(){var t="",e=this.actionType;return"add"===e&&(t="新增产品"),"edit"===e&&(t="修改产品"),"detail"===e&&(t="产品详情"),t},isDisabled:function(){return"detail"===this.actionType}}),watch:{value:{handler:function(t){this.visible=t},immediate:!0},visible:{handler:function(t){this.$emit("input",t),t?this.showFundInfo():(this.showCustodialAccount=!0,this.$refs.newFundForm.resetFields(),"add"==this.actionType&&this.$refs.newFundAcctForm[0].resetFields())}},actionType:{handler:function(t){}},fundInfo:{handler:function(t){t&&this.showFundInfo()}}},created:function(){},mounted:function(){var t=this;Object(l.z)().then(function(e){return t.keys=e.data})},activated:function(){var t=this;Object(l.K)(10058).then(function(e){return t.taMode=e.data.data}),Object(l.J)(3).then(function(e){e.data&&e.data.length>0&&(t.stampList=e.data)})},methods:{showFundInfo:function(){if("edit"===this.actionType){this.newFundInfo=Object(o.a)(this.fundInfo),null===this.newFundInfo.fund_trust_bank&&(this.newFundInfo.fund_trust_bank=""),null===this.newFundInfo.fund_mgr_operator&&(this.newFundInfo.fund_mgr_operator=""),null===this.newFundInfo.fund_accountant&&(this.newFundInfo.fund_accountant=""),this.newFundInfo.accountList=[],this.newFundInfo.establish_date_str=Object(l.R)(this.newFundInfo.establish_date),this.newFundInfo.expire_date_str=Object(l.R)(this.newFundInfo.expire_date),this.newFundInfo.fund_mail_pwd&&(this.newFundInfo.fund_mail_pwd=Object(l.c)(this.newFundInfo.fund_mail_pwd,this.keys)),this.newFundInfo.fund_mail&&(this.newFundInfo.fund_mail=this.newFundInfo.fund_mail.trim());var t=void 0;for(t in this.newFundInfo)t&&"string"==typeof this.newFundInfo[t]&&(this.newFundInfo[t]=this.newFundInfo[t].trim())}"add"===this.actionType&&this.resetInputFundInfo()},newAccount:function(){this.newFundInfo.accountList.push({account_class:"2",bank_account_status:"1"})},custodialNoChanged:function(t){var e=this;Object(r.g)(t).then(function(a){if(a.data.data){var n=a.data.data.custodialorg.bic_code;e.newFundInfo.accountList.forEach(function(e,a,s){if(null!=e.custodial_no&&e.custodial_no==t){var i=e;i.bic_code=n,s.splice(a,1,i)}})}})},codechange:function(t){this.newFundInfo.accountList.forEach(function(t,e,a){console.log(t)})},acctFundClassChanged:function(t){"5"==t.account_class?t.bic_code="SHCLEARH":"6"==t.account_class?t.bic_code="CHINABOND":t.bic_code=""},removeAccount:function(t){this.newFundInfo.accountList=this.newFundInfo.accountList.filter(function(e,a){return t!==a})},maintainDVP:function(){if(""!=this.newFundInfo.interbank_id&&"add"===this.actionType){for(var t=this.newFundInfo.accountList,e=!1,a=0;a<t.length;a++)-1==this.newFundInfo.accountList[a].account_class.indexOf("5")&&-1==this.newFundInfo.accountList[a].account_class.indexOf("6")||(e=!0);e||this.$alert("需要新增DVP账户","提示",{confirmButtonText:"确定",type:"info"})}},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this,e=!0;if(this.$refs.newFundForm.validate(function(t){e=e&&t}),this.$refs.newFundAcctForm.forEach(function(t){t.validate(function(t){e=e&&t})}),e){if(this.newFundInfo.accountList.forEach(function(t){t.provinceCity&&t.provinceCity.length>1&&(t.province_code=t.provinceCity[0],t.city_no=t.provinceCity[1])}),this.newFundInfo.fund_mail_pwd=Object(l.e)(this.newFundInfo.fund_mail_pwd,this.keys),this.newFundInfo.establish_date=Object(l.Q)(this.newFundInfo.establish_date_str),this.newFundInfo.expire_date=Object(l.Q)(this.newFundInfo.expire_date_str),parseInt(this.newFundInfo.expire_date)<parseInt(this.newFundInfo.establish_date))return void this.$alert("结束日期不能小于成立日期","错误",{confirmButtonText:"确定",type:"error"});Object(r.m)(this.newFundInfo).then(function(e){e.data&&"0"===e.data.code?t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success"}).then(function(){t.visible=!1,t.newFundInfo.fundId&&"edit"==t.actionType?t.$emit("refreshFund",{code:t.newFundInfo.fundId}):t.$emit("fundAdded")}):e.data&&"1120010"===e.data.code?t.visible=!1:t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"}).then(function(){t.newFundInfo.fund_mail_pwd=Object(l.c)(t.newFundInfo.fund_mail_pwd,t.keys)})})}else this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},resetInputFundInfo:function(){this.newFundInfo={fund_name:"",fund_code:"",actual_code:"",fund_mgr_operator:"",fund_status:"1",fund_trust_bank:"",fund_type:"",establish_date:"",expire_date:"",interbank_id:"",paper_no:"",stockholder_id:"",stockholder_id_sz:"",object_code:"",sh_ta_account:"",sz_ta_account:"",transfer_flag:"1",file_name:"",fund_mail:"",fund_mail_pwd:"",fund_accountant:"",ta_settle_type:"",fund_settle_type:"",trust_flag:"",accountList:[{account_class:"2",bank_account_status:"1"}],ta_match_type:"1"}},fileUploaded:function(t,e,a){if("0"==t.code){for(;a.length>1;)a.shift();this.newFundInfo.file_id=t.data,this.newFundInfo.file_name=e.name}else this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error"}),a.splice(a.length-1,1)},fundSettleTypeChange:function(t){this.showCustodialAccount="1"!=t&&"4"!=t}},components:{}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-manager-fund-dialog"},[a("h-msg-box",{staticClass:"customMsgBox",attrs:{"mask-closable":!1,width:"1300",scrollable:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.title))])]),t._v(" "),a("h-form",{ref:"newFundForm",attrs:{model:t.newFundInfo,"label-width":120,cols:"4"}},[a("h-row",[a("h-col",{attrs:{span:"6"}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_name"}},[a("h-input",{attrs:{maxlength:16,disabled:t.isDisabled},model:{value:t.newFundInfo.fund_name,callback:function(e){t.$set(t.newFundInfo,"fund_name",e)},expression:"newFundInfo.fund_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"产品全称",prop:"fund_caption"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newFundInfo.fund_caption,callback:function(e){t.$set(t.newFundInfo,"fund_caption",e)},expression:"newFundInfo.fund_caption"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"产品代码",prop:"fund_code",validRules:t.codeRule}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newFundInfo.fund_code,callback:function(e){t.$set(t.newFundInfo,"fund_code",e)},expression:"newFundInfo.fund_code"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"实际产品代码",prop:"actual_code",validRules:t.codeRule}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newFundInfo.actual_code,callback:function(e){t.$set(t.newFundInfo,"actual_code",e)},expression:"newFundInfo.actual_code"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"产品类型",prop:"fund_type"}},[a("h-select",{attrs:{filterable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.fund_type,callback:function(e){t.$set(t.newFundInfo,"fund_type",e)},expression:"newFundInfo.fund_type"}},t._l(t.fundTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"产品状态",prop:"fund_status"}},[a("h-select",{attrs:{disabled:t.isDisabled},model:{value:t.newFundInfo.fund_status,callback:function(e){t.$set(t.newFundInfo,"fund_status",e)},expression:"newFundInfo.fund_status"}},[a("h-option",{key:"1",attrs:{value:"1",label:"正常"}}),t._v(" "),a("h-option",{key:"2",attrs:{value:"2",label:"注销"}}),t._v(" "),a("h-option",{key:"3",attrs:{value:"3",label:"冻结"}})],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"托管结算模式",prop:"fund_settle_type"}},[a("h-select",{attrs:{filterable:"",disabled:t.isDisabled},on:{"on-change":t.fundSettleTypeChange},model:{value:t.newFundInfo.fund_settle_type,callback:function(e){t.$set(t.newFundInfo,"fund_settle_type",e)},expression:"newFundInfo.fund_settle_type"}},t._l(t.fundSettleTypes,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"6"}},[a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type,expression:"newFundInfo.fund_settle_type != '1' && newFundInfo.fund_settle_type != '4'"}],attrs:{required:"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type,label:"托管人",prop:"fund_trust_bank"}},[a("h-select",{attrs:{filterable:"",clearable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.fund_trust_bank,callback:function(e){t.$set(t.newFundInfo,"fund_trust_bank",e)},expression:"newFundInfo.fund_trust_bank"}},t._l(t.trustBankList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"TA金额交收模式",prop:"ta_settle_type"}},[a("h-select",{attrs:{filterable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.ta_settle_type,callback:function(e){t.$set(t.newFundInfo,"ta_settle_type",e)},expression:"newFundInfo.ta_settle_type"}},t._l(t.taSettleTypes,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"银行间ID",prop:"interbank_id"}},[a("h-typefield",{attrs:{type:"money",integerNum:"10",suffixNum:"0",placeholder:"请输入数字",disabled:t.isDisabled},on:{"on-blur":t.maintainDVP},model:{value:t.newFundInfo.interbank_id,callback:function(e){t.$set(t.newFundInfo,"interbank_id",e)},expression:"newFundInfo.interbank_id"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"上海股东代码",prop:"stockholder_id"}},[a("h-input",{attrs:{maxlength:20,disabled:t.isDisabled},model:{value:t.newFundInfo.stockholder_id,callback:function(e){t.$set(t.newFundInfo,"stockholder_id",e)},expression:"newFundInfo.stockholder_id"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"深圳股东代码",prop:"stockholder_id_sz"}},[a("h-input",{attrs:{maxlength:20,disabled:t.isDisabled},model:{value:t.newFundInfo.stockholder_id_sz,callback:function(e){t.$set(t.newFundInfo,"stockholder_id_sz",e)},expression:"newFundInfo.stockholder_id_sz"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"深圳配售对象编码",prop:"object_code"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newFundInfo.object_code,callback:function(e){t.$set(t.newFundInfo,"object_code",e)},expression:"newFundInfo.object_code"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"TA深圳备付金账号",prop:"sz_ta_account"}},[a("h-input",{attrs:{maxlength:128,disabled:t.isDisabled},model:{value:t.newFundInfo.sz_ta_account,callback:function(e){t.$set(t.newFundInfo,"sz_ta_account",e)},expression:"newFundInfo.sz_ta_account"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"6"}},[a("h-form-item",{attrs:{label:"TA上海备付金账号",prop:"sh_ta_account"}},[a("h-input",{attrs:{maxlength:128,disabled:t.isDisabled},model:{value:t.newFundInfo.sh_ta_account,callback:function(e){t.$set(t.newFundInfo,"sh_ta_account",e)},expression:"newFundInfo.sh_ta_account"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"是否划款",prop:"transfer_flag"}},[a("h-select",{attrs:{disabled:t.isDisabled},model:{value:t.newFundInfo.transfer_flag,callback:function(e){t.$set(t.newFundInfo,"transfer_flag",e)},expression:"newFundInfo.transfer_flag"}},[a("h-option",{key:"1",attrs:{value:"1",label:"是"}}),t._v(" "),a("h-option",{key:"0",attrs:{value:"0",label:"否"}})],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"划款单编号",prop:"paper_no"}},[a("h-typefield",{attrs:{type:"money",integerNum:"10",suffixNum:"0",placeholder:"请输入数字",disabled:t.isDisabled},model:{value:t.newFundInfo.paper_no,callback:function(e){t.$set(t.newFundInfo,"paper_no",e)},expression:"newFundInfo.paper_no"}})],1),t._v(" "),1==t.taMode?a("h-form-item",{attrs:{label:"特约销售机构",prop:"agency_code",title:"TA净赎回单独出指令"}},[a("h-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",multiple:"",isString:"",clearable:""},model:{value:t.newFundInfo.out_agency_code_list,callback:function(e){t.$set(t.newFundInfo,"out_agency_code_list",e)},expression:"newFundInfo.out_agency_code_list"}},t._l(t.agencyList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),1==t.taMode?a("h-form-item",{attrs:{label:"TA轧差模式",prop:"ta_match_type",required:""}},[a("h-select",{model:{value:t.newFundInfo.ta_match_type,callback:function(e){t.$set(t.newFundInfo,"ta_match_type",e)},expression:"newFundInfo.ta_match_type"}},t._l(t.taMatchTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{label:"投资经理",prop:"fund_mgr_operator"}},[a("h-select",{attrs:{filterable:"",clearable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.fund_mgr_operator,callback:function(e){t.$set(t.newFundInfo,"fund_mgr_operator",e)},expression:"newFundInfo.fund_mgr_operator"}},t._l(t.operatorList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"主办会计",prop:"fund_accountant"}},[a("h-select",{attrs:{filterable:"",clearable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.fund_accountant,callback:function(e){t.$set(t.newFundInfo,"fund_accountant",e)},expression:"newFundInfo.fund_accountant"}},t._l(t.operatorList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"6"}},[a("h-form-item",{attrs:{label:"产品邮箱",prop:"fund_mail",validRules:t.mailValidRule}},[a("h-input",{attrs:{maxlength:128},model:{value:t.newFundInfo.fund_mail,callback:function(e){t.$set(t.newFundInfo,"fund_mail",e)},expression:"newFundInfo.fund_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"邮箱密码",prop:"fund_mail_pwd"}},[a("h-input",{directives:[{name:"attrdel",rawName:"v-attrdel:title",arg:"title"}],attrs:{maxlength:56,type:"password",disabled:t.isDisabled},model:{value:t.newFundInfo.fund_mail_pwd,callback:function(e){t.$set(t.newFundInfo,"fund_mail_pwd",e)},expression:"newFundInfo.fund_mail_pwd"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"成立日期",prop:"establish_date"}},[a("h-date-picker",{attrs:{format:"yyyyMMdd",type:"date",placeholder:"选择日期",disabled:t.isDisabled},model:{value:t.newFundInfo.establish_date_str,callback:function(e){t.$set(t.newFundInfo,"establish_date_str",e)},expression:"newFundInfo.establish_date_str"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"结束日期",prop:"expire_date"}},[a("h-date-picker",{attrs:{format:"yyyyMMdd",type:"date",placeholder:"选择日期",disabled:t.isDisabled},model:{value:t.newFundInfo.expire_date_str,callback:function(e){t.$set(t.newFundInfo,"expire_date_str",e)},expression:"newFundInfo.expire_date_str"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"文件",prop:"file_name"}},[a("div",[a("h-input",{staticStyle:{width:"120px"},attrs:{disabled:""},model:{value:t.newFundInfo.file_name,callback:function(e){t.$set(t.newFundInfo,"file_name",e)},expression:"newFundInfo.file_name"}}),t._v(" "),a("el-upload",{staticClass:"upload-demo",staticStyle:{float:"right"},attrs:{action:t.uploadUrl,data:t.uploadData,"with-credentials":"",accept:".pdf,.doc,.xls,.xlsx,.docx,.png,.jpg,.jpeg,.bmp","on-success":t.fileUploaded,"show-file-list":!1,limit:2,"file-list":t.fileList}},[a("el-button",{attrs:{size:"mini",type:"ghost"}},[t._v("上传")])],1)],1)]),t._v(" "),a("h-form-item",{attrs:{label:"子产品代码",prop:"sub_fund_code_list"}},[a("h-input",{attrs:{maxlength:128,placeholder:"多个产品代码请用英文逗号隔开"},model:{value:t.newFundInfo.sub_fund_code_list,callback:function(e){t.$set(t.newFundInfo,"sub_fund_code_list",e)},expression:"newFundInfo.sub_fund_code_list"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"公司签章",prop:"stamp_id"}},[a("h-select",{attrs:{filterable:"",clearable:"",disabled:t.isDisabled},model:{value:t.newFundInfo.stamp_id,callback:function(e){t.$set(t.newFundInfo,"stamp_id",e)},expression:"newFundInfo.stamp_id"}},t._l(t.stampList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1)],1)],1)],1),t._v(" "),"add"===t.actionType?a("h3",[a("el-button-group",[a("el-button",{attrs:{type:"ghost",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.newAccount()}}},[t._v("新增账户")])],1)],1):t._e(),t._v(" "),"add"===t.actionType?a("h-row",{attrs:{gutter:5}},t._l(t.newFundInfo.accountList,function(e,n){return a("h-col",{key:n,attrs:{span:"12"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"30px"},attrs:{slot:"header"},slot:"header"},[a("label",[t._v("账户用途")]),t._v(" "),t.showCustodialAccount?a("el-select",{staticStyle:{width:"40%","margin-left":"20px"},attrs:{filterable:""},on:{change:function(a){return t.acctFundClassChanged(e)}},model:{value:e.account_class,callback:function(a){t.$set(e,"account_class",a)},expression:"item.account_class"}},t._l(t.accountClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1):t._e(),t._v(" "),t.showCustodialAccount?t._e():a("el-select",{staticStyle:{width:"40%","margin-left":"20px"},attrs:{filterable:""},on:{change:function(a){return t.acctFundClassChanged(e)}},model:{value:e.account_class,callback:function(a){t.$set(e,"account_class",a)},expression:"item.account_class"}},t._l(t.selfAccountClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1),t._v(" "),a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{padding:"7px 5px"},attrs:{type:"ghost",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.removeAccount(n)}}})],1)],1),t._v(" "),a("h-form",{ref:"newFundAcctForm",refInFor:!0,attrs:{"label-width":100,model:e,rules:t.ruleValidate}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.account_class&&"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type,expression:"item.account_class == '2' && newFundInfo.fund_settle_type != '1' && newFundInfo.fund_settle_type != '4'"}],attrs:{required:"2"==e.account_class&&"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type,label:"托管人",prop:"custodial_no"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.custodialNoChanged},model:{value:e.custodial_no,callback:function(a){t.$set(e,"custodial_no",a)},expression:"item.custodial_no"}},t._l(t.trustBankList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"==e.account_class,expression:"item.account_class == '2'"}],attrs:{required:"2"==e.account_class,label:"币种",prop:"currency_no"}},[a("h-select",{attrs:{filterable:"",setDefSelect:!0,clearable:!1},model:{value:e.currency_no,callback:function(a){t.$set(e,"currency_no",a)},expression:"item.currency_no"}},t._l(t.currencyNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.bank_account_name,callback:function(a){t.$set(e,"bank_account_name",a)},expression:"item.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{maxlength:32},model:{value:e.bank_account_no,callback:function(a){t.$set(e,"bank_account_no",a)},expression:"item.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户状态",prop:"bank_account_status"}},[a("h-select",{attrs:{transfer:!0,filterable:""},model:{value:e.bank_account_status,callback:function(a){t.$set(e,"bank_account_status",a)},expression:"item.bank_account_status"}},t._l(t.accountStatusList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"8"==e.account_class?a("h-form-item",{attrs:{required:"",label:"期货公司",prop:"broker_id"}},[a("h-select",{attrs:{transfer:!0,filterable:""},model:{value:e.broker_id,callback:function(a){t.$set(e,"broker_id",a)},expression:"item.broker_id"}},t._l(t.brokerList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"8"==e.account_class?a("h-form-item",{attrs:{required:"",label:"银期方式",prop:"bank_futures_type"}},[a("h-select",{attrs:{transfer:!0,filterable:""},model:{value:e.bank_futures_type,callback:function(a){t.$set(e,"bank_futures_type",a)},expression:"item.bank_futures_type"}},t._l(t.bankFuturesTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"8"==e.account_class?a("div",["2"==e.bank_futures_type||"4"==e.bank_futures_type?a("h-form-item",{attrs:{required:"",label:"期货中间账户",prop:"futures_mid_account"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.futures_mid_account,callback:function(a){t.$set(e,"futures_mid_account",a)},expression:"item.futures_mid_account"}})],1):t._e()],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"2"==e.account_class&&("1"==t.newFundInfo.fund_settle_type||"4"==t.newFundInfo.fund_settle_type),label:"银行总行",prop:"bic_code"}},[a("h-select",{attrs:{filterable:"",clearable:""},on:{"on-change":t.codechange},model:{value:e.bic_code,callback:function(a){t.$set(e,"bic_code",a)},expression:"item.bic_code"}},t._l(t.bankList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"2"==e.account_class&&("1"==t.newFundInfo.fund_settle_type||"4"==t.newFundInfo.fund_settle_type),label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{maxlength:32},model:{value:e.pay_no,callback:function(a){t.$set(e,"pay_no",a)},expression:"item.pay_no"}})],1),t._v(" "),"8"!=e.account_class?a("h-form-item",{attrs:{required:"2"==e.account_class&&("1"==t.newFundInfo.fund_settle_type||"4"==t.newFundInfo.fund_settle_type),label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.sub_bank_no,callback:function(a){t.$set(e,"sub_bank_no",a)},expression:"item.sub_bank_no"}})],1):t._e(),t._v(" "),"8"==e.account_class&&"2"!=e.bank_futures_type&&"4"!=e.bank_futures_type?a("h-form-item",{attrs:{label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.sub_bank_no,callback:function(a){t.$set(e,"sub_bank_no",a)},expression:"item.sub_bank_no"}})],1):t._e(),t._v(" "),"8"!=e.account_class&&"2"!=e.account_class?a("h-form-item",{attrs:{label:"开户城市"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",options:t.cityTree,filterable:"",clearable:""},model:{value:e.provinceCity,callback:function(a){t.$set(e,"provinceCity",a)},expression:"item.provinceCity"}})],1):t._e(),t._v(" "),"2"!=e.account_class||"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type?t._e():a("h-form-item",{attrs:{required:"2"==e.account_class&&("1"==t.newFundInfo.fund_settle_type||"4"==t.newFundInfo.fund_settle_type),label:"开户城市"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",options:t.cityTree,filterable:"",clearable:""},model:{value:e.provinceCity,callback:function(a){t.$set(e,"provinceCity",a)},expression:"item.provinceCity"}})],1),t._v(" "),"5"==e.account_class||"6"==e.account_class?a("h-form-item",{attrs:{label:"持有人账号",prop:"holder_account"}},[a("h-input",{attrs:{maxlength:32},model:{value:e.holder_account,callback:function(a){t.$set(e,"holder_account",a)},expression:"item.holder_account"}})],1):t._e(),t._v(" "),"1"==e.account_class||"3"==e.account_class?a("h-form-item",{attrs:{label:"联系人",prop:"bank_linkman"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.bank_linkman,callback:function(a){t.$set(e,"bank_linkman",a)},expression:"item.bank_linkman"}})],1):t._e()],1),t._v(" "),a("h-col",{attrs:{span:"12"}},["8"!=e.account_class||"2"!=e.bank_futures_type&&"4"!=e.bank_futures_type?t._e():a("h-form-item",{attrs:{label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.sub_bank_no,callback:function(a){t.$set(e,"sub_bank_no",a)},expression:"item.sub_bank_no"}})],1),t._v(" "),"8"==e.account_class?a("div",["3"==e.bank_futures_type||"4"==e.bank_futures_type?a("h-form-item",{attrs:{label:"托管人中间账户",prop:"bank_mid_account"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.bank_mid_account,callback:function(a){t.$set(e,"bank_mid_account",a)},expression:"item.bank_mid_account"}})],1):t._e()],1):t._e(),t._v(" "),"8"==e.account_class||"2"==e.account_class&&"1"!=t.newFundInfo.fund_settle_type&&"4"!=t.newFundInfo.fund_settle_type?a("h-form-item",{attrs:{label:"开户城市"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",options:t.cityTree,filterable:"",clearable:""},model:{value:e.provinceCity,callback:function(a){t.$set(e,"provinceCity",a)},expression:"item.provinceCity"}})],1):t._e(),t._v(" "),"1"!=e.account_class&&"3"!=e.account_class||"2"==e.account_class?a("h-form-item",{attrs:{label:"联系人",prop:"bank_linkman"}},[a("h-input",{attrs:{maxlength:56},model:{value:e.bank_linkman,callback:function(a){t.$set(e,"bank_linkman",a)},expression:"item.bank_linkman"}})],1):t._e(),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{maxlength:32},model:{value:e.bank_phone,callback:function(a){t.$set(e,"bank_phone",a)},expression:"item.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{maxlength:32},model:{value:e.bank_fax,callback:function(a){t.$set(e,"bank_fax",a)},expression:"item.bank_fax"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"邮箱",prop:"bank_mail"}},[a("h-input",{attrs:{maxlength:128,placeholder:"多个邮箱请用英文逗号隔开"},model:{value:e.bank_mail,callback:function(a){t.$set(e,"bank_mail",a)},expression:"item.bank_mail"}})],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"备注",prop:"remark"}},[a("h-input",{attrs:{type:"textarea"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}})],1)],1)],1)],1)],1)],1)}),1):t._e(),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("pbAc")},null,null);e.default=d.exports},AV50:function(t,e){},B3Fx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferSend",data:function(){return{}},components:{settle:a("FvFU").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("settle",{attrs:{pageType:"3"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},B6iw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lbHh"),s=a.n(n),i={name:"hello",data:function(){return{url:""}},created:function(){var t;t=this.$route.meta.param.indexOf("?")>-1?"&oplusAaa=":"?oplusAaa=",this.$route.meta.param.indexOf("/workflow/")>-1?this.url=window.LOCAL_CONFIG.WORKFLOW_HOME+this.$route.meta.param+t+s.a.get("Admin-Token"):this.url=window.LOCAL_CONFIG.API_HOME+this.$route.meta.param+t+s.a.get("Admin-Token")},watch:{$route:function(t,e){var a="";t.meta.param&&(a=t.meta.param.indexOf("?")>-1?"&oplusAaa=":"?oplusAaa=",this.$route.meta.param.indexOf("/workflow/")>-1?this.url=window.LOCAL_CONFIG.WORKFLOW_HOME+this.$route.meta.param+a+s.a.get("Admin-Token"):this.url=window.LOCAL_CONFIG.API_HOME+this.$route.meta.param+a+s.a.get("Admin-Token"))}},mounted:function(){var t=document.getElementById("show-iframe"),e=document.getElementsByClassName("app-main")[0].clientWidth,a=document.documentElement.clientHeight-document.getElementsByClassName("h-topbar-wrapper")[0].clientHeight-document.getElementsByClassName("h-navbar-wrapper")[0].clientHeight-45;this.$nextTick(function(){t&&(t.style.width=e+"px",t.style.height=a+"px")});var n=this;window.addEventListener("resize",function(){var t=document.getElementById("show-iframe"),e=document.getElementsByClassName("app-main")[0].clientWidth,a=document.documentElement.clientHeight-document.getElementsByClassName("h-topbar-wrapper")[0].clientHeight-document.getElementsByClassName("h-navbar-wrapper")[0].clientHeight-45;n.$nextTick(function(){t&&(t.style.width=e+"px",t.style.height=a+"px")})})}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"accept-container full-h"},[e("iframe",{staticClass:"full-h",attrs:{id:"show-iframe",frameborder:"0",name:"showHere",scrolling:"auto",src:this.url}})])},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("wTN1")},null,null);e.default=r.exports},BAt2:function(t,e){},"C/Gi":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("eUNJ"),s=a("3dxc"),i=a("IWLE"),o=a("Q5rI"),r=a("X8Gq"),l=a("lbHh"),c=a.n(l),u={name:"accCashQuery",components:{HDatagrid:s.a,BankTree:n.a,accCashFlowQueryMsgBox:i.a},data:function(){var t=this;return{loading:!1,split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],showCashQueryDialog:!1,showMultipleQueryDialog:!1,fundIdList:[],bankNoList:[],bankAccountNameList:[],bankAccountNoList:[],queryStatusList:[],sysDate:c.a.get("CurrSysDate"),accCashColumns:[{title:"托管人查询序号",key:"query_id",align:"center",hiddenCol:!0},{title:"日期",key:"curr_date",align:"center",sortable:!0,ellipsis:!0},{title:"托管人编号",key:"custodial_no",align:"center",ellipsis:!0,sortable:!0},{title:"托管人名称",key:"custodian_name",align:"center",ellipsis:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"银行账号",key:"bank_account_no",align:"center",ellipsis:!0},{title:"账户名称",key:"bank_account_name",align:"center",ellipsis:!0},{title:"账户编号",key:"bank_account_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"余额",key:"account_cur_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.account_cur_balance))}},{title:"查询状态",key:"query_status",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.query_status,t.queryStatusList))}},{title:"备注",key:"remark",align:"center",ellipsis:!0}],multipleCashColumns:[{type:"selection",width:45,align:"left"},{title:"托管人查询序号",key:"query_id",align:"center",hiddenCol:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品代码",key:"fund_code",align:"center",ellipsis:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"托管人编号",key:"custodial_no",align:"center",ellipsis:!0,sortable:!0},{title:"托管人名称",key:"custodian_name",align:"center",ellipsis:!0},{title:"银行账号",key:"bank_account_no",align:"center",ellipsis:!0},{title:"账户名称",key:"bank_account_name",align:"center",ellipsis:!0},{title:"账户编号",key:"bank_account_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"查询状态",key:"query_status",align:"center",ellipsis:!0,render:function(e,a){var n=a.row,s=Object(o._1)(n.query_status,t.queryStatusList);return s||(s="未查询"),e("span",{},s)}}],queryForm:{queryDate:c.a.get("CurrSysDate"),custodialNo:""},multipleBindForm:{queryDateBatch:"",queryTypeBatch:""},cashQueryInfo:{fund_id:"",custodial_no:"",bank_account_name:"",bank_account_no:"",queryDate:"",queryType:"1"},cashQueryType:"",cashMsgBoxShow:!1}},watch:{showCashQueryDialog:function(t){t?this.openMask():this.closeMask()},showMultipleQueryDialog:function(t){t?this.openMask():this.closeMask()}},computed:{queryDate:{get:function(){return this.queryForm.queryDate?Object(o.R)(this.queryForm.queryDate):Object(o.R)(this.sysDate)},set:function(t){this.queryForm.queryDate=Object(o.Q)(t)}}},mounted:function(){var t=this;Object(o.t)(90520).then(function(e){return t.queryStatusList=e.data}),this.re_layout()},activated:function(){var t=this;Object(o.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data})},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-40},refresh:function(){this.$refs.datagrid.dataChange(1)},cashRefresh:function(){this.cashMsgBoxShow=!0,this.cashQueryType="1",this.$refs.accCashQueryMsg.resetCashFlowQueryForm()},multipleRefresh:function(){this.multipleBindForm.queryDateBatch=Object(o.Q)(this.sysDate),this.multipleBindForm.queryTypeBatch="1",this.$refs.multiplecashdatagrid.dataChange(1),this.showMultipleQueryDialog=!0,this.loading=!1},multipleCancel:function(){this.showMultipleQueryDialog=!1},multipleSave:function(){var t=this,e=this.$refs.multiplecashdatagrid.$refs.gridContent.getSelection();if(0!=e.length){for(var a="",n=0;n<e.length;n++)a+=e[n].fund_id+","+e[n].custodial_no+","+e[n].bank_account_no+","+e[n].query_id+"|";a=a.substring(0,a.length-1),this.loading=!0,Object(r.b)(this.multipleBindForm.queryTypeBatch,this.multipleBindForm.queryDateBatch,a).then(function(e){e&&200==e.status?1==e.data.success?(t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showMultipleQueryDialog=!1}}).then(function(){t.showMultipleQueryDialog=!1}),t.refresh()):(t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"}),t.showMultipleQueryDialog=!1):(t.$alert("批量查询失败","错误",{confirmButtonText:"确定",type:"error"}),t.showMultipleQueryDialog=!1)})}else this.$alert("请选择要查询的记录","错误",{confirmButtonText:"确定",type:"error"})},bankClick:function(t){t&&(t.code.toString().split(",").length>1&&(t.code=""),this.queryForm.custodialNo=t.code,this.$refs.datagrid.dataChange(1))},onCashClose:function(){this.cashMsgBoxShow=!1},onCashRefresh:function(){this.refresh()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("bank-tree",{ref:"bankTree",attrs:{onBankClick:t.bankClick,showAll:!0,"query-url":"/common/treeElcBank.json"}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px",float:"left"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{clearable:!1,type:"date",placeholder:"选择日期"},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashRefresh}},[t._v("余额查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.multipleRefresh}},[t._v("批量查询")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{overflow:"hidden"},attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.accCashColumns,bindForm:t.queryForm,url:"/reportmgnt/accCash/accCashQuery.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"800",height:"400","mask-closable":!1},model:{value:t.showMultipleQueryDialog,callback:function(e){t.showMultipleQueryDialog=e},expression:"showMultipleQueryDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("余额批量查询")])]),t._v(" "),a("h-row",[a("h-col",[a("h-datagrid",{ref:"multiplecashdatagrid",attrs:{height:"355",stripe:"",hasPage:"","highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.multipleBindForm,columns:t.multipleCashColumns,url:"/reportmgnt/accBatchQuery.json"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.multipleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.multipleSave}},[t._v("确定")])],1)],1),t._v(" "),a("accCashFlowQueryMsgBox",{ref:"accCashQueryMsg",attrs:{msgBoxShow:t.cashMsgBoxShow,queryType:t.cashQueryType,includeSelfRun:!1},on:{onCashFlowClose:t.onCashClose,onOutRefresh:t.onCashRefresh}})],1)},staticRenderFns:[]};var f=a("VU/8")(u,d,!1,function(t){a("G3E2")},"data-v-0cb52658",null);e.default=f.exports},CZwq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("NYxO"),o=a("3dxc"),r=a("Q5rI"),l=a("8DhI"),c=a("RCPB"),u={name:"review",data:function(){return{autoHeight:0,pageSizeOpts:[25,50,75,100],queryCheck:{checkStatus:"1",inputOperator:null,objectType:1},showSelfSupport:!1,showFund:!1,fundInfo:{fund_id:null,fund_name:"",fund_code:"",fund_mgr_operator:"",fund_status:"",fund_trust_bank:"",fund_type:"",establish_date:"",expire_date:"",interbank_id:"",paper_no:"",stockholder_id:"",object_code:"",sh_ta_account:"",sz_ta_account:"",transfer_flag:"",file_name:"",data_source:"",fund_mail:"",fund_accountant:"",ta_settle_type:"",fund_settle_type:"",trust_flag:""},isScrollBar:{marginTop:"10px",overflow:"auto",maxHeight:""},fundStatusList:[{code:"1",text:"正常"},{code:"2",text:"注销"},{code:"3",text:"冻结"}],transferFlagList:[{code:"1",text:"是"},{code:"0",text:"否"}],accountList:[],bankList:[],custodianList:[],currencyNoList:[],operatorList:[],fundTypeList:[],dataSourceList:[],fundSettleTypes:[],taSettleTypes:[],accountTypeList:[],accountStatusList:[],bankFuturesTypeList:[],brokerList:[],cityTree:[],accountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"托管账户"},{code:"3",text:"三方存管账户"},{code:"4",text:"存款账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}]}},activated:function(){this.$refs.reviewTable.refresh()},computed:s()({},Object(i.e)({theme:function(t){return t.theme.theme}}),{modify_desc:function(){return this.showFund?this.fundInfo.modify_desc:this.accountList&&this.accountList.length>0?this.accountList[0].modify_desc:void 0}}),watch:{},created:function(){var t=this;Object(r.t)(610087).then(function(e){return t.fundTypeList=e.data}),Object(r.t)(90531).then(function(e){return t.fundSettleTypes=e.data}),Object(r.t)(90530).then(function(e){return t.taSettleTypes=e.data}),Object(r.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(r.t)(60058).then(function(e){return t.accountTypeList=e.data}),Object(r.t)(200008).then(function(e){return t.accountStatusList=e.data}),Object(r.t)(90532).then(function(e){return t.bankFuturesTypeList=e.data}),Object(r.t)(610406).then(function(e){return t.currencyNoList=e.data}),Object(r.N)().then(function(e){e.data&&e.data.length>0&&(t.operatorList=e.data)}).catch(function(t){console.log(t)}),Object(r.j)().then(function(e){e.data&&e.data.length>0&&(t.bankList=e.data)}).catch(function(t){console.log(t)}),Object(r.j)("1").then(function(e){e.data&&e.data.length>0&&(t.custodianList=e.data)}).catch(function(t){console.log(t)}),Object(r.m)().then(function(e){e.data&&e.data.length>0&&(t.brokerList=e.data)}).catch(function(t){console.log(t)})},mounted:function(){var t=this;Object(r.q)().then(function(e){return t.cityTree=e.data})},components:{ReviewTable:c.a,HDatagrid:o.a},methods:{re_layout:function(){var t=this.$el.querySelector(".account-detail .wrapper"),e=t?t.clientHeight:0,a=this.$el.clientHeight;e>a/2&&(this.isScrollBar.maxHeight=a/2+"px",e=a/2),this.autoHeight=this.$el.offsetHeight-e-70,this.$refs.reviewTable.resizeTable(this.autoHeight)},showText:function(t,e){return Object(r._1)(t,e)},showReal:function(t,e){return"币种"==t?e.replace(/CNY/g,"人民币").replace(/USD/g,"美元"):e},showCity:r.Z,clearData:function(){this.fundInfo={},this.showFund=!1,this.accountList=[],this.$nextTick(this.re_layout)},downloadFile:function(){var t=this;this.fundInfo.file_id?window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=fund&fileId="+this.fundInfo.file_id):(this.openMask(),this.$alert("没有可下载的文件","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))},rowClick:function(t){var e=this;t&&Object(l.a)(t.check_id,t.object_type).then(function(a){a.data&&"0"==a.data.code?(1==t.object_type?(e.showFund=!0,e.fundInfo=a.data.data,e.fundInfo.establish_date=Object(r.R)(a.data.data.establish_date),e.fundInfo.expire_date=Object(r.R)(a.data.data.expire_date),e.accountList=a.data.data.accountList,e.accountList.forEach(function(t){t.city_no&&(t.provinceCity=[t.province_code,t.city_no])})):(e.showFund=!1,e.accountList=[a.data.data],e.accountList.forEach(function(t){t.city_no&&(t.provinceCity=[t.province_code,t.city_no])})),e.$nextTick(e.re_layout)):(e.openMask(),e.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}))}).catch(function(t){})},showAccountClass:function(t,e){return e||(e=this.fundInfo.fund_settle_type),"2"!=t||"1"!=e&&"4"!=e?this.showText(t,this.accountClassList):"自营账户"}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-fundaccount-review",attrs:{id:"review-full-h-wrapper"}},[a("review-table",{ref:"reviewTable",attrs:{"on-selection-change":t.rowClick,"clear-data":t.clearData,"query-check":t.queryCheck}}),t._v(" "),t.showFund||t.accountList.length>0?a("div",{staticClass:"account-detail",style:t.isScrollBar,attrs:{id:"wrapper-review-detail"}},[a("div",{staticClass:"wrapper"},[t.showFund?a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("产品信息")])]):t._e(),t._v(" "),t.showFund?a("h-row",[a("h-col",{attrs:{span:"6","class-name":"inner2"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.fund_name}},[t._v(t._s(t.fundInfo.fund_name))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品全称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.fund_caption}},[t._v(t._s(t.fundInfo.fund_caption))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品代码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.fund_code}},[t._v(t._s(t.fundInfo.fund_code))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("实际产品代码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.actual_code}},[t._v(t._s(t.fundInfo.actual_code))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品类型")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_type,t.fundTypeList)}},[t._v(t._s(t.showText(t.fundInfo.fund_type,t.fundTypeList)))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品状态")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_status,t.fundStatusList)}},[t._v(t._s(t.showText(t.fundInfo.fund_status,t.fundStatusList))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("托管人")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_trust_bank,t.custodianList)}},[t._v(t._s(t.showText(t.fundInfo.fund_trust_bank,t.custodianList)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner2"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("托管结算模式")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_settle_type,t.fundSettleTypes)}},[t._v("\n                            "+t._s(t.showText(t.fundInfo.fund_settle_type,t.fundSettleTypes))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("TA金额交收模式")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.ta_settle_type,t.taSettleTypes)}},[t._v(t._s(t.showText(t.fundInfo.ta_settle_type,t.taSettleTypes))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("深圳配售对象编码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.object_code}},[t._v(t._s(t.fundInfo.object_code))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("上海股东代码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.stockholder_id}},[t._v(t._s(t.fundInfo.stockholder_id))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("TA深圳备付金账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.sz_ta_account}},[t._v(t._s(t.fundInfo.sz_ta_account))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("TA上海备付金账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.sh_ta_account}},[t._v(t._s(t.fundInfo.sh_ta_account))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner2"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行间ID")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.interbank_id}},[t._v(t._s(t.fundInfo.interbank_id))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("是否划款")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.transfer_flag,t.transferFlagList)}},[t._v(t._s(t.showText(t.fundInfo.transfer_flag,t.transferFlagList))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("划款单编号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.paper_no}},[t._v(t._s(t.fundInfo.paper_no))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品来源")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.data_source,t.dataSourceList)}},[t._v(t._s(t.showText(t.fundInfo.data_source,t.dataSourceList))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品邮箱")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.fund_mail}},[t._v(t._s(t.fundInfo.fund_mail))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("文件")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.file_name}},[t._v(t._s(t.fundInfo.file_name))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.fundInfo.file_id,expression:"fundInfo.file_id"}],staticClass:"ml5",attrs:{size:"mini",type:"ghost"},on:{click:t.downloadFile}},[t._v("下载\n                        ")])],1)]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner2"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("主办会计")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_accountant,t.operatorList)}},[t._v(t._s(t.showText(t.fundInfo.fund_accountant,t.operatorList))+"\n                        ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("投资经理")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.fundInfo.fund_mgr_operator,t.operatorList)}},[t._v(t._s(t.showText(t.fundInfo.fund_mgr_operator,t.operatorList)))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("成立日期")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.establish_date}},[t._v(t._s(t.fundInfo.establish_date))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("结束日期")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.expire_date}},[t._v(t._s(t.fundInfo.expire_date))])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("公司签章")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundInfo.stamp_name}},[t._v(t._s(t.fundInfo.stamp_name))])])])],1):t._e(),t._v(" "),a("h-row",{attrs:{gutter:4}},t._l(t.accountList,function(e){return a("h-col",{key:e.bank_account_id,staticClass:"mt6",attrs:{span:"6"}},[a("div",[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title flex-grow"},[t._v(t._s(e.bank_account_name))])]),t._v(" "),a("div",{staticClass:"inner2"},[e.account_class?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户用途")]),t._v(" "),t.showSelfSupport?t._e():a("div",{staticClass:"value",attrs:{title:t.showAccountClass(e.account_class,e.fund_settle_type)}},[t._v(t._s(t.showAccountClass(e.account_class,e.fund_settle_type))+"\n                                ")])]):t._e(),t._v(" "),e.bic_code?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.bic_code,t.bankList)}},[t._v(t._s(t.showText(e.bic_code,t.bankList)))])]):t._e(),t._v(" "),e.bank_account_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.bank_account_no}},[t._v(t._s(e.bank_account_no))])]):t._e(),t._v(" "),e.sub_bank_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户行名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.sub_bank_no}},[t._v(t._s(e.sub_bank_no))])]):t._e(),t._v(" "),e.pay_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.pay_no}},[t._v(t._s(e.pay_no))])]):t._e(),t._v(" "),e.bank_account_type?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户类型：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.bank_account_type,t.accountTypeList)}},[t._v("\n                                    "+t._s(t.showText(e.bank_account_type,t.accountTypeList))+"\n                                ")])]):t._e(),t._v(" "),e.provinceCity?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户城市 ：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showCity(e.provinceCity,t.cityTree)}},[t._v(t._s(t.showCity(e.provinceCity,t.cityTree))+"\n                                ")])]):t._e(),t._v(" "),e.custodial_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("托管人 ：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.custodial_no,t.custodianList)}},[t._v(t._s(t.showText(e.custodial_no,t.custodianList))+"\n                                ")])]):t._e(),t._v(" "),e.currency_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("币种 ：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.currency_no,t.currencyNoList)}},[t._v(t._s(t.showText(e.currency_no,t.currencyNoList))+"\n                                ")])]):t._e(),t._v(" "),e.holder_account?a("div",{staticClass:"item"},["5"==e.account_class?a("div",{staticClass:"label"},[t._v("上清持有人账号：\n                                ")]):a("div",{staticClass:"label"},[t._v("中债持有人账号：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.holder_account}},[t._v(t._s(e.holder_account))])]):t._e(),t._v(" "),e.broker_id?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("期货公司：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.broker_id.toString(),t.brokerList)}},[t._v("\n                                    "+t._s(t.showText(e.broker_id.toString(),t.brokerList))+"\n                                ")])]):t._e(),t._v(" "),e.bank_futures_type?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银期方式：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(e.bank_futures_type,t.bankFuturesTypeList)}},[t._v("\n                                    "+t._s(t.showText(e.bank_futures_type,t.bankFuturesTypeList))+"\n                                ")])]):t._e(),t._v(" "),e.futures_mid_account?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("期货中间账户：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.futures_mid_account}},[t._v(t._s(e.futures_mid_account))])]):t._e(),t._v(" "),e.bank_mid_account?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("托管人中间账户：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:e.bank_mid_account}},[t._v(t._s(e.bank_mid_account))])]):t._e()])])])}),1),t._v(" "),t.modify_desc?a("header",{staticClass:"headline mt10 pt10 border-dashed-top"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("变更内容")])]):t._e(),t._v(" "),t.modify_desc?a("h-row",t._l(t.modify_desc.split(";"),function(e,n){return a("h-col",{key:n,staticClass:"inner2",attrs:{span:"6"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v(t._s(decodeURIComponent(e.split(":")[0])))]),t._v(" "),a("div",{staticClass:"value",attrs:{title:decodeURIComponent(e.split(":")[1])}},[t._v(t._s(t.showReal(decodeURIComponent(e.split(":")[0]),decodeURIComponent(e.split(":")[1]))))])])])}),1):t._e()],1)]):t._e()],1)},staticRenderFns:[]};var f=a("VU/8")(u,d,!1,function(t){a("vbRs")},null,null);e.default=f.exports},D1OY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("NYxO"),o=a("HmOp"),r=a("Q5rI"),l=a("22iY"),c=a("npUS"),u=a("LSxO"),d=a("KAd0"),f=a("AJqZ"),p=a("XmPu"),h={name:"fundaccount",data:function(){return{keys:[],manageFundDialogVisible:!1,manageAccountDialogVisible:!1,fundTrustBanks:[],fundTypes:[],fundStatuses:[],dataSource:"",keyword:"",funds:[],curFund:null,curFundAccounts:[],curAccount:null,actionType:"add",fundListSearchCondition:null,fundListTableHeight:0,accountListTableHeight:0,accountListSearchCondition:null,fundId:null,fundIdList:[],fundSheetHeadersColumns:[this.getFundSheetHeadersColumns()],fundSheetTableData:[[]],accountSheetHeadersColumns:[this.getAccountSheetHeaderColumns()],accountSheetTableData:[[]],fundSettleType:"",synTypeByB45:!1,split:.15,split2:.5}},computed:s()({},Object(i.e)({fundTypeList:function(t){return t.dict.dict_610087},fundSettleTypes:function(t){return t.dict.dict_90531},taSettleTypes:function(t){return t.dict.dict_90530},dataSourceList:function(t){return t.dict.dict_90528},accountTypeList:function(t){return t.dict.dict_60058},accountStatusList:function(t){return t.dict.dict_200008},bankFuturesTypeList:function(t){return t.dict.dict_90532},accountClassList:function(t){return t.dict.dict_90525},fundStatusList:function(t){return t.dict.dict_40002},isFlagList:function(t){return t.dict.dict_610001},taMatchTypeList:function(t){return t.dict.dict_91386},operatorList:function(t){return t.dict.operatorList},bankList:function(t){return t.dict.bankList},trustBankList:function(t){return t.dict.trustBankList},currencyNoList:function(t){return t.dict.dict_610406},agencyList:function(t){return t.dict.agencyList},brokerList:function(t){return t.dict.brokerList},cityTree:function(t){return t.dict.cityTree}})),watch:{},activated:function(){var t=this;this.updateTablesHeight(),Object(r.j)("1").then(function(e){t.setTrustBankList(e.data)}),Object(r.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundIdList=e.data)}),Object(r.K)("10065").then(function(e){e.data&&("2"==e.data.data?t.synTypeByB45=!1:t.synTypeByB45=!0)}),SSObservable.subscribe("moduleHeightChange",this.updateTablesHeight),this.onSearchFunds()},deactivated:function(){SSObservable.unsubscribe("moduleHeightChange",this.updateTablesHeight)},mounted:function(){var t=this;this.getNecessaryDatas(),setTimeout(function(){t.updateTablesHeight()},100),this.onSearchFunds()},methods:s()({},Object(i.d)({setDict610087:"DICT_610087",setDict_90531:"DICT_90531",setDict_90530:"DICT_90530",setDict_90528:"DICT_90528",setDict_60058:"DICT_60058",setDict_200008:"DICT_200008",setDict_90532:"DICT_90532",setDict_90525:"DICT_90525",setDict_91386:"DICT_91386",setDict_40002:"DICT_40002",setDict_610001:"DICT_610001",setDict_610406:"DICT_610406",setOperatorList:"OPERATOR_LIST",setBankList:"BANK_LIST",setTrustBankList:"TRUST_BANK_LIST",setAgencyList:"AGENCY_LIST",setBrokerList:"BROKER_LIST",setCityTree:"CITY_TREE"}),{getNecessaryDatas:function(){var t=this;Object(r.t)(610087).then(function(e){t.setDict610087(e.data)}),Object(r.t)(610406).then(function(e){t.setDict_610406(e.data)}),Object(r.t)(90531).then(function(e){t.setDict_90531(e.data)}),Object(r.t)(90530).then(function(e){t.setDict_90530(e.data)}),Object(r.t)(90528).then(function(e){t.setDict_90528(e.data)}),Object(r.t)(60058).then(function(e){t.setDict_60058(e.data)}),Object(r.t)(200008).then(function(e){t.setDict_200008(e.data)}),Object(r.t)(90532).then(function(e){t.setDict_90532(e.data)}),Object(r.t)(90525).then(function(e){t.setDict_90525(e.data)}),Object(r.t)(91386).then(function(e){t.setDict_91386(e.data)}),Object(r.t)(91386).then(function(e){t.setDict_91386(e.data)}),Object(r.t)(40002).then(function(e){t.setDict_40002(e.data)}),Object(r.t)(610001).then(function(e){t.setDict_610001(e.data)}),Object(r.N)().then(function(e){t.setOperatorList(e.data)}),Object(r.j)().then(function(e){t.setBankList(e.data)}),Object(r.i)().then(function(e){t.setAgencyList(e.data)}),Object(r.m)().then(function(e){t.setBrokerList(e.data)}),Object(r.q)().then(function(e){t.setCityTree(e.data)}),Object(r.z)().then(function(e){t.keys=e.data})},onSearchFunds:function(){this.fundListSearchCondition={fundTrustBanks:this.fundTrustBanks.join(","),fundTypes:this.fundTypes.join(","),fundStatuses:this.fundStatuses.join(","),dataSource:this.dataSource,keyword:this.keyword},this.refreshAccountList(null)},handleFundSelected:function(t){this.curFund=t,this.fundSettleType=t.fund_settle_type,this.refreshAccountList(t.fund_id)},refreshAccountList:function(t){var e=this;Object(l.h)(t).then(function(t){e.curFundAccounts=t.data.list})},showFundDetail:function(t){this.actionType="edit",this.curFund=t,this.curFund.fundIds=this.fundId,this.manageFundDialogVisible=!0},addFund:function(){this.actionType="add",this.manageFundDialogVisible=!0},editFund:function(){var t=this.$refs.fundList.$refs.fundContent.getSelection();0!=t.length?this.showFundDetail(t[0]):this.$alert("请选择一个产品","错误",{confirmButtonText:"确定",type:"error"})},delFund:function(){var t=this,e=this.$refs.fundList.$refs.fundContent.getSelection();0!=e.length?(this.openMask(),this.$confirm("确认要删除该产品吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.b)(e[0].fund_id).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.onSearchFunds()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})):this.$alert("请选择一个产品","错误",{confirmButtonText:"确定",type:"error"})},disableFund:function(){var t=this,e=this.$refs.fundList.$refs.fundContent.getSelection();0!=e.length?(this.openMask(),this.$confirm("确认要冻结该产品吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.c)(e[0].fund_id).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.onSearchFunds()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})):this.$alert("请选择一个产品","错误",{confirmButtonText:"确定",type:"error"})},onFundAdded:function(){this.onSearchFunds()},synFund:function(){var t=this;Object(l.n)().then(function(e){e.data&&"0"===e.data.code?(t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.onSearchFunds()):(t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))})},uploadExcel:function(){this.$refs.importAccountTransfer.showDialog("1",null)},showAccountDetail:function(t){this.actionType="edit",this.curAccount=t,this.manageAccountDialogVisible=!0},newAccount:function(){null!==this.curFund?(this.actionType="add",this.manageAccountDialogVisible=!0):this.alert("请选择一个产品","error")},delAccount:function(){var t=this,e=this.$refs.accountList.getSelections();if(0!==e.length){var a="";e.forEach(function(t){a=a+t.bank_account_id+","}),a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认要删除该账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.a)(a,t.curFund.fund_id).then(function(e){e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshAccountList(t.curFund.fund_id)):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})}else this.alert("请选择至少一个账户进行删除","error")},editAccount:function(){var t=this.$refs.accountList.getSelections();0===t.length||t.length>1?this.alert("请选择一个账户进行编辑","error"):(this.curAccount=t[0],null==this.curAccount.bic_code&&(this.curAccount.bic_code=""),this.actionType="edit",this.manageAccountDialogVisible=!0)},alert:function(t,e){var a=this;this.openMask(),this.$alert(t,"错误",{confirmButtonText:"确定",type:e,callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})},handleSplitMove:function(){this.updateTablesHeight()},updateTablesHeight:function(){var t=this;this.$nextTick(function(){var e=t.$refs.rightContent.clientHeight,a=t.$refs.accountToolbar.clientHeight,n=t.$refs.fundToolbar.clientHeight;t.fundListTableHeight=e*t.split2-n,t.accountListTableHeight=e-t.fundListTableHeight-n-a-40})},downloadFunds:function(){var t=this,e=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(r.P)(this.fundTrustBanks.join(","),this.fundTypes.join(","),1,null,this.fundStatuses.join(","),this.dataSource,this.keyword).then(function(a){e.close(),a&&a.data&&a.data.list.length>0?(t.fundSheetTableData=[a.data.list],t.$nextTick(function(){t.$refs.fundRecordExportBtn.$el.click()})):a&&a.data&&0==a.data.list.length?t.$alert("暂无导出数据!","错误",{confirmButtonText:"确定",type:"error"}):t.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(a){e.close(),t.$alert(a,"错误",{confirmButtonText:"确定",type:"error"})})},downloadAccounts:function(){var t=this,e=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(l.i)(this.fundTrustBanks.join(","),this.fundTypes.join(","),this.fundStatuses.join(","),this.dataSource,this.keyword).then(function(a){e.close(),a&&a.data.data?(t.accountSheetTableData=[a.data.data],t.$nextTick(function(){t.$refs.accountRecordExportBtn.$el.click()})):t.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(a){e.close(),t.$alert(a,"错误",{confirmButtonText:"确定",type:"error"})})},getFundSheetHeadersColumns:function(){var t=this;return[{title:"产品名称",key:"fund_name"},{title:"产品全称",key:"fund_caption"},{title:"产品代码",key:"fund_code"},{title:"实际产品代码",key:"actual_code"},{title:"产品类型",key:"fund_type",exportRender:function(e,a){return Object(r._1)(e,t.fundTypeList)}},{title:"产品状态",key:"fund_status",exportRender:function(e,a){return Object(r._1)(e,t.fundStatusList)}},{title:"托管人",key:"fund_trust_bank",exportRender:function(e,a){return Object(r._1)(e,t.trustBankList)}},{title:"托管结算模式",key:"fund_settle_type",exportRender:function(e,a){return Object(r._1)(e,t.fundSettleTypes)}},{title:"TA金额交收模式",key:"ta_settle_type",exportRender:function(e,a){return Object(r._1)(e,t.taSettleTypes)}},{title:"银行间ID",key:"interbank_id"},{title:"上海股东代码",key:"stockholder_id"},{title:"深圳股东代码",key:"stockholder_id_sz"},{title:"深圳配售对象编码",key:"object_code"},{title:"TA深圳备付金账号",key:"sz_ta_account"},{title:"TA上海备付金账号",key:"sh_ta_account"},{title:"是否划款",key:"transfer_flag",exportRender:function(e,a){return Object(r._1)(e,t.isFlagList)}},{title:"划款单编号",key:"paper_no"},{title:"特约销售机构",key:"out_agency_code_list",exportRender:function(e,a){return Object(r._2)(e,t.agencyList)}},{title:"TA轧差模式",key:"ta_match_type",exportRender:function(e,a){return Object(r._1)(e,t.taMatchTypeList)}},{title:"投资经理",key:"fund_mgr_operator",exportRender:function(e,a){return Object(r._1)(e,t.operatorList)}},{title:"主办会计",key:"fund_accountant",exportRender:function(e,a){return Object(r._1)(e,t.operatorList)}},{title:"产品邮箱",key:"fund_mail"},{title:"成立日期",key:"establish_date"},{title:"结束日期",key:"expire_date"},{title:"子产品代码",key:"sub_fund_code_list"},{title:"指令来源",key:"data_source",exportRender:function(e,a){return Object(r._1)(e,t.dataSourceList)}}]},getAccountSheetHeaderColumns:function(){var t=this;return[{title:"产品名称",key:"fund_id",exportRender:function(e,a){return Object(r._1)(e,t.fundIdList)}},{title:"账户用途",key:"account_class",exportRender:function(e,a){return Object(r._1)(e,t.accountClassList)}},{title:"账户名称",key:"bank_account_name"},{title:"银行账号",key:"bank_account_no"},{title:"开户行名称",key:"sub_bank_no"},{title:"银行总行",key:"bic_code",exportRender:function(e,a){return Object(r._1)(e,t.bankList)}},{title:"托管人",key:"custodial_no",exportRender:function(e,a){return Object(r._1)(e,t.trustBankList)}},{title:"币种",key:"currency_no",exportRender:function(e,a){return Object(r._1)(e,t.currencyNoList)}},{title:"大额支付号",key:"pay_no"},{title:"期货公司",key:"broker_id",exportRender:function(e,a){return Object(r._1)(e,t.brokerList)}},{title:"银期方式",key:"bank_futures_type",exportRender:function(e,a){return Object(r._1)(e,t.bankFuturesTypeList)}},{title:"持有人账号",key:"holder_account"},{title:"托管人传真",key:"bank_fax"},{title:"托管人邮箱",key:"bank_mail"},{title:"账户状态",key:"bank_account_status",exportRender:function(e,a){return Object(r._1)(e,t.accountStatusList)}}]}}),components:{FundTree:o.a,ImportAccountTransfer:c.a,ManageFundDialog:f.default,ManageAccountDialog:p.default,FundList:u.default,AccountList:d.default}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-fundaccount"},[a("div",{ref:"rightContent",staticClass:"right-content",attrs:{slot:"right"},slot:"right"},[a("h-row",[a("h-col",[a("h-form",{ref:"searchToolbar",attrs:{cols:"5"}},[a("h-form-item",{attrs:{label:"托管人","label-width":50}},[a("h-select",{staticClass:"select",attrs:{filterable:"",multiple:"",collapseTags:"",showBottom:""},model:{value:t.fundTrustBanks,callback:function(e){t.fundTrustBanks=e},expression:"fundTrustBanks"}},t._l(t.trustBankList,function(e){return a("h-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"产品类型","label-width":80}},[a("h-select",{staticClass:"select",attrs:{filterable:"",multiple:"",collapseTags:"",showBottom:""},model:{value:t.fundTypes,callback:function(e){t.fundTypes=e},expression:"fundTypes"}},t._l(t.fundTypeList,function(e){return a("h-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"产品状态","label-width":80}},[a("h-select",{staticClass:"select",attrs:{multiple:"",collapseTags:""},model:{value:t.fundStatuses,callback:function(e){t.fundStatuses=e},expression:"fundStatuses"}},t._l(t.fundStatusList,function(e){return a("h-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"产品来源","label-width":80}},[a("h-select",{staticClass:"select",attrs:{filterable:"",collapseTags:""},model:{value:t.dataSource,callback:function(e){t.dataSource=e},expression:"dataSource"}},t._l(t.dataSourceList,function(e){return a("h-option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.text))])}),1)],1),t._v(" "),a("h-form-item",{attrs:{"label-width":20}},[a("h-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSearchFunds}},[t._v("查询")])],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("h-file-export",{attrs:{sheetType:"table",fileName:"产品查询导出",sheetNames:["产品查询"],sheetHeaders:t.fundSheetHeadersColumns,sheetTableData:t.fundSheetTableData}},[a("h-button",{ref:"fundRecordExportBtn",attrs:{icon:"undo"}},[t._v("导出")])],1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("h-file-export",{attrs:{sheetType:"table",fileName:"账户查询导出",sheetNames:["账户查询"],sheetHeaders:t.accountSheetHeadersColumns,sheetTableData:t.accountSheetTableData}},[a("h-button",{ref:"accountRecordExportBtn",attrs:{icon:"undo"}},[t._v("导出")])],1)],1)],1)],1)],1),t._v(" "),a("h-split",{attrs:{mode:"vertical",min:"200",max:"200"},on:{"on-moving":t.handleSplitMove},model:{value:t.split2,callback:function(e){t.split2=e},expression:"split2"}},[a("div",{staticClass:"fund-list",attrs:{slot:"top"},slot:"top"},[a("div",{ref:"fundToolbar",staticClass:"ctrls"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.addFund}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.editFund}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.delFund}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"t-b-locking"},on:{click:t.disableFund}},[t._v("冻结")]),t._v(" "),t.synTypeByB45?a("h-button",{attrs:{icon:"loop"},on:{click:t.synFund}},[t._v("同步")]):t._e(),t._v(" "),a("h-button",{attrs:{icon:"undo"},on:{click:t.downloadFunds}},[t._v("导出")])],1),t._v(" "),a("h-input",{staticStyle:{width:"215px"},attrs:{maxlength:32,placeholder:"输入产品代码或名称搜索"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"search"},nativeOn:{click:function(e){return e.stopPropagation(),t.onSearchFunds(e)}}})],1)])])],1),t._v(" "),a("FundList",{ref:"fundList",attrs:{searchCondition:t.fundListSearchCondition,tableHeight:t.fundListTableHeight},on:{fundSelected:t.handleFundSelected,fundDetail:t.showFundDetail}})],1),t._v(" "),a("div",{attrs:{slot:"bottom"},slot:"bottom"},[a("div",{ref:"accountToolbar",staticClass:"account-ctrls"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.newAccount}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.editAccount}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.delAccount}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.uploadExcel}},[t._v("导入")]),t._v(" "),a("h-button",{attrs:{icon:"undo"},on:{click:t.downloadAccounts}},[t._v("导出")])],1)],1),t._v(" "),a("div",{staticClass:"account-list"},[a("AccountList",{ref:"accountList",attrs:{accounts:t.curFundAccounts,tableHeight:t.accountListTableHeight,fundSettleType:t.fundSettleType},on:{accountDetail:t.showAccountDetail}})],1)])])],1),t._v(" "),a("ManageFundDialog",{attrs:{actionType:t.actionType,fundInfo:t.curFund},on:{fundAdded:t.onFundAdded,refreshFund:t.onSearchFunds},model:{value:t.manageFundDialogVisible,callback:function(e){t.manageFundDialogVisible=e},expression:"manageFundDialogVisible"}}),t._v(" "),a("ManageAccountDialog",{attrs:{actionType:t.actionType,fundInfo:t.curFund,accountInfo:t.curAccount},on:{refreshAccount:t.refreshAccountList},model:{value:t.manageAccountDialogVisible,callback:function(e){t.manageAccountDialogVisible=e},expression:"manageAccountDialogVisible"}}),t._v(" "),a("ImportAccountTransfer",{ref:"importAccountTransfer",attrs:{"on-import-success":t.onSearchFunds}})],1)},staticRenderFns:[]};var m=a("VU/8")(h,_,!1,function(t){a("+ntr")},null,null);e.default=m.exports},DD4c:function(t,e){},DItW:function(t,e){},DUoD:function(t,e){},DudF:function(t,e,a){"use strict";var n=a("BO1k"),s=a.n(n),i=a("7+uW"),o=a("jV6A"),r=a("vNF5"),l=a("Q5rI"),c={name:"Sortctrl",props:{title:{type:String,default:""},field:{type:String,default:""},sortingField:{type:String,default:"none"}},data:function(){return{status:"none"}},methods:{sortBy:function(t){t===this.status?this.status="none":this.status=t,this.$emit("sort",this.status)},switchSort:function(){var t=["none","asc","desc"],e=t.indexOf(this.status)+1;e=e>t.length-1?0:e,this.$emit("sort",t[e]),this.status=t[e]}},components:{}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-sortheader"},[a("div",{staticClass:"title",on:{click:t.switchSort}},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"ctrls"},[a("i",{staticClass:"up iconfont icon-android-arrow-dropup",class:{active:"asc"===t.status&&t.field===t.sortingField},on:{click:function(e){return t.sortBy("asc")}}}),t._v(" "),a("i",{staticClass:"down iconfont icon-android-arrow-dropdo",class:{active:"desc"===t.status&&t.field===t.sortingField},on:{click:function(e){return t.sortBy("desc")}}})])])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("XbB3")},null,null).exports,f=a("woOf"),p=a.n(f),h={endRow:0,firstPage:0,hasNextPage:!1,hasPreviousPage:!1,isFirstPage:!1,isLastPage:!1,lastPage:0,list:[{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:null,cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"0",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"approve",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37696",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37695",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"11",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18678",transfer_ins_modify:"1",transfer_ins_status:"2",transfer_instance_id:"002.4222184",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4222644",transfer_trade_remark:null,transfer_type:"4",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:null,cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"0",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"approve",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37694",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37693",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"11",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"18678",transfer_ins_id:"18677",transfer_ins_modify:"1",transfer_ins_status:"2",transfer_instance_id:"002.4222173",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4222638",transfer_trade_remark:null,transfer_type:"4",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:null,cash_direction:"2",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"分销买入",cop_busin_class:"1",cop_busin_flag:"20017",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"0",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"approve",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:"1222",require_pay_date:"20090109",require_pay_time:"150000",rival_account:"220",rival_account_name:"110",rival_bank:null,rival_bank_account_id:"37631",rival_bank_no:null,rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:null,rival_pay_no:"112",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1021",self_account_name:"托管账户",self_bank:"中国农业银行",self_bank_account_id:"37630",self_bank_no:"2",self_city_no:null,self_open_bank:"托管银行",self_pay_no:"1100",self_province_code:null,settle_amount:"200",settle_balance:"2000",settle_ment:"3",stock_name:"2222",stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18644",transfer_ins_modify:"1",transfer_ins_status:"2",transfer_instance_id:"002.4147269",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:"344",transfer_purpose:"2333",transfer_remark:null,transfer_task_id:"4147271",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:null,cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"0",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"approve",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37560",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37559",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"233",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18612",transfer_ins_modify:"1",transfer_ins_status:"7",transfer_instance_id:"002.4111804",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4111858",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:"1025",cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"1",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"复核",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37509",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37508",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"11",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18598",transfer_ins_modify:"1",transfer_ins_status:"2",transfer_instance_id:"9998.4111226",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4111522",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:"1022",cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:null,cop_busin_caption:"增加现金",cop_busin_class:"22",cop_busin_flag:"10056",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"1",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:null,mail_send_status:"1",market_no:"6",node_name:"approve",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"2222",rival_account_name:"2222",rival_bank:null,rival_bank_account_id:"37485",rival_bank_no:null,rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:null,rival_pay_no:"2222",rival_province_code:null,seat_id:"SEAT6",seat_id_list:null,self_account:"20190506",self_account_name:"费用账户1",self_bank:"中国工商银行",self_bank_account_id:"37484",self_bank_no:"1",self_city_no:null,self_open_bank:"工商开户行",self_pay_no:"6677788999",self_province_code:null,settle_amount:null,settle_balance:"299",settle_ment:null,stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18588",transfer_ins_modify:"2",transfer_ins_status:"2",transfer_instance_id:"9998.4016303",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:"233",transfer_remark:"122",transfer_task_id:"4111436",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:"1020,1021",cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"1",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"复核",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37483",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37482",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"11",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18587",transfer_ins_modify:"2",transfer_ins_status:"2",transfer_instance_id:"9998.4016286",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4111560",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null},{apply_price:null,approve_officer:null,bank_fax:null,bank_linkman:null,bank_mail:"1360476474@qq.com",bank_phone:null,bic_code:"ABOCCNBJ",bill_name:null,cash_direction:"1",cash_settle_date:"20090109",cash_settle_status:null,clear_agent_code_cn:"4",cop_busin_caption:"上清DVP调入托管户",cop_busin_class:"1",cop_busin_flag:"10070",daily_instruction_no:null,data_source:"1",deal_no:null,deposit_limit_time:null,deposit_limit_time_unit:null,elec_transfer_status:"1",fax_send_status:"1",fee_begin_date:null,fee_end_date:null,fee_list:null,file_id:null,file_send_status:"0",fund_code:"20190307",fund_id:"900000031",fund_name:"划款单测试-ry",fund_trust_bank:"2",input_date:"20090109",invest_type:"1",mail_send_status:"1",market_no:"5",node_name:"复核",original_transfer_purpose:null,out_transfer_id:null,remark:null,report_code:null,require_pay_date:"20090109",require_pay_time:"150000",rival_account:"1021",rival_account_name:"托管账户",rival_bank:"中国农业银行",rival_bank_account_id:"37475",rival_bank_no:"2",rival_city_no:null,rival_code:null,rival_name:null,rival_open_bank:"托管银行",rival_pay_no:"1100",rival_province_code:null,seat_id:"SEAT5",seat_id_list:null,self_account:"1024",self_account_name:"上清账户",self_bank:"中国农业银行",self_bank_account_id:"37474",self_bank_no:"2",self_city_no:null,self_open_bank:"中央结算",self_pay_no:"1100",self_province_code:null,settle_amount:null,settle_balance:"111",settle_ment:"3",stock_name:null,stockholder_id:null,trade_operator_name:null,traderival_name:null,transfer_busin_relative_no:null,transfer_cancel_status:"1",transfer_fund_status:"2",transfer_ins_batch_no:"0",transfer_ins_id:"18585",transfer_ins_modify:"1",transfer_ins_status:"2",transfer_instance_id:"9998.4016156",transfer_instr_remark:null,transfer_merge_flag:"0",transfer_postscript:null,transfer_purpose:null,transfer_remark:null,transfer_task_id:"4223776",transfer_trade_remark:null,transfer_type:"3",withdrawal_date:null}],navigatePages:0,navigatepageNums:null,nextPage:0,orderBy:null,pageNum:1,pageSize:100,pages:0,prePage:0,size:0,startRow:0,total:8},_=(h={data:h},a("5/bi")),m=a("Q0Ca"),b={getShowColumn:function(t){return Object(l.H)(t)},getDatas:function(t,e,a,n){var s={pageNo:a,pageSize:n};return p()(s,e),_.a.post(t,s)},makeTreeData:function(t){var e=[],a=!0,n=!1,i=void 0;try{for(var o,r=s()(t);!(a=(o=r.next()).done);a=!0){var l=o.value;if(0===e.length)e.push(l);else{var c=this.findDataById(e,l.transfer_ins_batch_no);c?(c.children||(c.children=[]),c.children.push(l)):e.push(l)}}}catch(t){n=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}return e},makeDataChecked:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function t(a){var n=!0,i=!1,o=void 0;try{for(var r,l=s()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.checked=e,c.children&&c.children.length>0&&t(c.children)}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}(t),t},makeDataCheckedWithoutExcepts:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function t(n){var i=!0,o=!1,r=void 0;try{for(var l,c=s()(n);!(i=(l=c.next()).done);i=!0){var u=l.value;a.indexOf(u.transfer_ins_id)>=0||(u.checked=e,u.children&&u.children.length>0&&t(u.children))}}catch(t){o=!0,r=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}}(t),t},makeDataExpand:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function t(a){var n=!0,i=!1,o=void 0;try{for(var r,l=s()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.expand=e,c.children&&c.children.length>0&&t(c.children)}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}(t),t},getCheckedDatas:function(t){var e=[];return function t(a){var n=!0,i=!1,o=void 0;try{for(var r,l=s()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.checked&&e.push(c),c.children&&c.children.length>0&&t(c.children)}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}(t),e},findNode:function(t,e,a){if(!t||0===t.length)return null;for(var n=0;n<t.length;n++){if(t[n].transfer_ins_id===e){a.obj=t[n];break}t[n].children&&this.findNode(t[n].children,e,a)}},findDataById:function(t,e){var a={};return this.findNode(t,e,a),a.obj?a.obj:null},findDataById2:function(t,e){var a=!0,n=!1,i=void 0;try{for(var o,r=s()(t);!(a=(o=r.next()).done);a=!0){var l=o.value,c=l.children;if(c&&c.length>0){var u=l.children,d=!0,f=!1,p=void 0;try{for(var h,_=s()(u);!(d=(h=_.next()).done);d=!0){var m=h.value;if(m.transfer_ins_id===e)return m}}catch(t){f=!0,p=t}finally{try{!d&&_.return&&_.return()}finally{if(f)throw p}}}else if(l.transfer_ins_id===e)return l}}catch(t){n=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}return null},flatTreeDatas:function(t){var e=[];return function t(a){var n=!0,i=!1,o=void 0;try{for(var r,l=s()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;e.push(c),c.children&&c.children.length>0&&t(c.children)}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}}(t),e},getFlatIndexById:function(t,e){return this.flatTreeDatas(t).findIndex(function(t){return t.transfer_ins_id===e})},sort:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(["asc","desc"].indexOf(a)<0)return t;return t.sort(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(a,s){var i=a[t],o=s[t];return"number"==typeof i&&"number"==typeof o?e?i-o:o-i:n?(i=parseFloat(i),o=parseFloat(o),e?i-o:o-i):(i+="",o+="",e?i.localeCompare(o):o.localeCompare(i))}}(e,"asc"===a))},getColumnsConfig:function(t){return[{title:"序号",key:"transfer_ins_id",align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"序号",field:"transfer_ins_id",sortingField:t.sortingField},on:{sort:function(e){t.sortAtField(e,"transfer_ins_id")}}})}},{title:"指令来源",key:"data_source",width:80,align:"left",ellipsis:!0,hiddenOther:!0,render:function(t,e){var a=e.row;return t("span",{},Object(m.dataSourceDesc)(a.data_source))}},{title:"产品名称",key:"fund_name",width:100,align:"left",ellipsis:!0},{title:"审批状态",key:"node_name",width:60,align:"left",ellipsis:!0,hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.nodeNameDesc)(e.row.node_name))}},{title:"合同状态",key:"cash_settle_status",align:"left",width:160,sortable:!0,ellipsis:!0},{title:"清算机构",key:"clear_agent_code_cn",align:"left",width:90,ellipsis:!0,hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.clearAgentCodeDesc)(e.row.clear_agent_code_cn))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"清算机构",field:"clear_agent_code_cn",sortingField:t.sortingField},on:{sort:function(e){t.sortAtField(e,"clear_agent_code_cn")}}})}},{key:"market_no",width:80,title:"交易市场",align:"left",hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.marketNoDesc)(e.row.market_no))}},{title:"成交/合同编号",key:"deal_no",width:120,sortable:!0,align:"left",ellipsis:!0},{title:"结算金额",key:"settle_balance",ellipsis:!0,width:140,align:"right",hiddenOther:!0,render:function(t,e){return t("span",{style:{fontWeight:"bold"}},Object(m.formatMoney)(e.row.settle_balance))}},{title:"起息日",key:"fee_begin_date",width:100,ellipsis:!0,align:"right",hiddenOther:!0,render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(a.fee_begin_date))}},{title:"到期日",width:100,key:"fee_end_date",ellipsis:!0,align:"right",hiddenOther:!0,render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(a.fee_end_date))}},{title:"证券代码",key:"report_code",width:90,ellipsis:!0,align:"left"},{title:"证券名称",width:100,key:"stock_name",ellipsis:!0,align:"left"},{title:"资金方向",key:"cash_direction",width:80,sortable:!0,align:"left",hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.cashDirectionDesc)(e.row.cash_direction))}},{title:"业务标志",key:"cop_busin_caption",width:130,sortable:!0,ellipsis:!0,align:"left"},{title:"附件",key:"bill_name",width:50,align:"left",ellipsis:!0,hiddenOther:!0,render:function(t,e){if(e.row.bill_name)return t("Icon",{props:{name:"document"}});return t("span",{},"-")}},{title:"结算方式",key:"settle_ment",align:"left",width:80,ellipsis:!0,hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.settlementDesc)(e.row.settle_ment))}},{title:"托管人",key:"fund_trust_bank",align:"left",width:100,ellipsis:!0,hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.bankDesc)(e.row.fund_trust_bank))}},{title:"对手方",width:100,key:"rival_name",ellipsis:!0,align:"left"},{title:"交收日期",key:"cash_settle_date",sortable:!0,ellipsis:!0,align:"left",hiddenOther:!0,render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(a.cash_settle_date))}},{title:"投资类型",key:"invest_type",ellipsis:!0,align:"left",width:160,hiddenOther:!0,render:function(t,e){return t("span",{},Object(m.investTypeDesc)(e.row.invest_type))}},{title:"原始划款事由",key:"original_transfer_purpose",ellipsis:!0,align:"left"},{title:"外部划款序号",key:"out_transfer_id",ellipsis:!0,align:"left"},{title:"交易员",key:"trade_operator_name",ellipsis:!0,align:"left"},{title:"申购价格（元/股）",key:"apply_price",ellipsis:!0,align:"left"},{title:"交易端备注",key:"transfer_trade_remark",ellipsis:!0,align:"left"},{title:"指令端备注",key:"transfer_instr_remark",ellipsis:!0,align:"left"}]}};i.default.component("Sortheader",i.default.extend(d));var v={props:{headSelection:{type:Boolean,default:!0},isCheckbox:{type:Boolean,default:!0},gridName:{type:String,default:null},columns:{type:Array,default:function(){return[]}},height:{type:Number,default:0},url:{type:String,default:""},fundData:{type:Object,default:function(){}},pageSize:Number,pageSizeOpts:Array,placement:{type:String,default:"top"},onRowClick:{type:Function,default:null},onRowDbClick:{type:Function,default:null},rowClassName:Function,onDataText:String},data:function(){return{datas:[],loading:!1,total:0,pageNo:1,solvedColumns:[],showColumns:this.getTargetKeys(),showColumnsTmp:"",columndata:this.getMockData(),selectedRowDatas:[],sortedDatas:[],sortingField:"",gridNameDetail:"",showLayout:!1,pageInfo:{pageNo:1,pageSize:100}}},computed:{pageCtrlVisible:function(){return this.total>this.pageSize},gridHeight:function(){return this.total>this.pageSize?this.height-40:this.height}},watch:{columns:{handler:function(t){var e=!0,a=!1,n=void 0;try{for(var i,o=s()(t);!(e=(i=o.next()).done);e=!0){var r=i.value;r.render&&(r.hiddenOther=!0)}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}this.solvedColumns=t},immediate:!0},fundData:{handler:function(t){this.pageNo=1,this.getDatas()},immediate:!0},showColumns:{handler:function(t){for(var e=this.columns||[],a=e.filter(function(t){return"1"==t.fixedLayout}),n=function(n){var s=e.filter(function(e){return e.key==t[n]});s&&s.length>0&&a.push(s[0])},i=0;i<t.length;i++)n(i);var o=!0,r=!1,l=void 0;try{for(var c,u=s()(a);!(o=(c=u.next()).done);o=!0){var d=c.value;d.width||(d.width=120),"transfer_ins_id"===d.key&&(a.length<10?delete d.width:d.width=120)}}catch(t){r=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(r)throw l}}this.solvedColumns=a},immediate:!0},pageSize:function(t){this.pageInfo.pageSize=t},pageNo:{handler:function(t){this.getDatas()}}},mounted:function(){},methods:{getMockData:function(){var t,e=[];t=this.columns.filter(function(t){return!t.fixedLayout||t.fixedLayout.indexOf("1")<0});for(var a=0;a<t.length;a++)e.push({key:t[a].key,label:t[a].title});return e},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(t){return t.key})},renderMethod:function(t){return t.label},handleChange:function(t){this.showColumns=t},upDownMove:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].key);this.showColumns=e},getSelection:function(){return Object(o.a)(this.selectedRowDatas)},changeGrid:function(t){var e=this;b.getShowColumn(t).then(function(a){var n=a.data.data;e.showColumns=n?n.split(","):[],e.gridNameDetail=t})},dataChange:function(t){t&&(this.pageNo=t,this.pageInfo.pageNo=t),this.selectedRowDatas=[],this.getDatas()},getDatas:function(){var t=this;this.loading=!0,b.getDatas(this.url,this.fundData,this.pageNo,this.pageInfo.pageSize).then(function(e){t.loading=!1,e.data.list||(e.data.list=[]);var a=Object(o.a)(e.data.list),n=b.makeTreeData(a),s=b.makeDataChecked(n);t.datas=s,t.sortedDatas=Object(o.a)(t.datas),t.total=e.data.total})},handleRowClick:function(t){var e=t[0];b.makeDataCheckedWithoutExcepts(this.sortedDatas,!1,[e.transfer_ins_id]);var a=b.findDataById(this.sortedDatas,e.transfer_ins_id);a.checked=!a.checked,a.checked?(this.selectedRowDatas=[a],this.onRowClick&&this.onRowClick(t)):(this.selectedRowDatas=[],this.onRowClick&&this.onRowClick(null))},handleRowDblClick:function(t){if(this.selectedRowDatas.length>0){var e=!0,a=!1,n=void 0;try{for(var i,o=s()(this.selectedRowDatas);!(e=(i=o.next()).done);e=!0){i.value.checked=!1}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}}var r=b.findDataById(this.sortedDatas,t.transfer_ins_id);r.checked=!0,this.selectedRowDatas=[r],this.onRowClick&&this.onRowClick([t,-1]),this.onRowDbClick&&this.onRowDbClick(t)},onSelectChange:function(t){this.selectedRowDatas=[],b.makeDataChecked(this.sortedDatas,!1);var e=!0,a=!1,n=void 0;try{for(var i,o=s()(t);!(e=(i=o.next()).done);e=!0){var r=i.value.transfer_ins_id,l=b.findDataById(this.sortedDatas,r);l.checked=!0,this.selectedRowDatas.push(l)}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}},onExpand:function(t,e){var a=t.transfer_ins_id,n=b.findDataById(this.sortedDatas,a);n.expand=e,b.makeDataExpand(n.children,!1);var s=b.getFlatIndexById(this.sortedDatas,a);this.solveIcons(s,e)},onSelectAll:function(t){b.makeDataChecked(this.sortedDatas,t),this.selectedRowDatas=t?b.flatTreeDatas(this.sortedDatas):[]},makeDataCheckedBySelections:function(){var t=!0,e=!1,a=void 0;try{for(var n,i=s()(this.selectedRowDatas);!(t=(n=i.next()).done);t=!0){var o=n.value;b.findDataById(this.sortedDatas,o.transfer_ins_id).checked=!0}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}},changePage:function(t){this.pageNo=t},pageSizeChange:function(t){this.pageInfo.pageSize=t,this.pageInfo.pageNo=1,this.getDatas()},openLayout:function(){this.showLayout=!0},submitLayout:function(){var t=this;this.showColumnsTmp=this.showColumns.join(","),Object(l.Y)({datagridName:this.gridNameDetail?this.gridNameDetail:this.gridName,showColumnStr:this.showColumnsTmp}).then(function(e){e.data&&"0"==e.data.code?t.showLayout=!1:t.$alert("调整布局失败","错误",{confirmButtonText:"确定",type:"error"})})},handleCancel:function(){this.showLayout=!1},solveIcons:function(t,e){var a=this.$refs.gridContent.$el.querySelector(".h-editgird-tbody").children[t].querySelector(".h-icon-play_fill");a&&this.$nextTick(function(){e?Object(r.a)(a,"my-minus"):Object(r.a)(a,"my-add")})},sortAtField:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];b.makeDataExpand(this.sortedDatas,!1),"none"===t?(this.sortedDatas=Object(o.a)(this.datas),this.makeDataCheckedBySelections()):this.sortedDatas=b.sort(this.sortedDatas,e,t,a),this.sortingField=e},handleResize:function(){this.$refs.gridContent.handleResize()}},components:{}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-comm-tree-grid"},[a("div",{staticClass:"tree-grid"},[a("h-asyc-tree-gird",{ref:"gridContent",attrs:{columns:t.solvedColumns,data:t.sortedDatas,disableEdit:!0,border:!1,canDrag:!0,height:t.gridHeight,isCheckbox:t.isCheckbox,checkStrictly:!0,"highlight-row":!0,headSelection:t.headSelection,"row-class-name":t.rowClassName,loading:t.loading,size:"small","no-data-text":t.onDataText},on:{"on-row-click":t.handleRowClick,"on-row-dblclick":t.handleRowDblClick,"on-select-change":t.onSelectChange,"on-select-all":t.onSelectAll,"on-expand":t.onExpand}})],1),t._v(" "),t.pageCtrlVisible?a("h-page",{staticClass:"page-ctrl",attrs:{total:t.total,"show-elevator":"","show-total":"","show-sizer":"",placement:t.placement,"page-size":t.pageSize,pageSizeOpts:t.pageSizeOpts},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.changePage}}):t._e(),t._v(" "),t.gridName?a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"490px"},model:{value:t.showLayout,callback:function(e){t.showLayout=e},expression:"showLayout"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("布局")])]),t._v(" "),a("h-transfer",{attrs:{titles:["隐藏列","显示列"],data:t.columndata,"target-keys":t.showColumns,"render-format":t.renderMethod},on:{"on-right-drag":t.upDownMove,"on-change":t.handleChange}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.submitLayout}},[t._v("保存")]),t._v(" "),a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1):t._e()],1)},staticRenderFns:[]};var y=a("VU/8")(v,g,!1,function(t){a("HYrK")},null,null).exports;a.d(e,"a",function(){return y})},DzQm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("QTaZ"),s=a("3dxc"),i=a("Q5rI"),o=a("mvHQ"),r=a.n(o),l=a("5/bi");var c={name:"manage",components:{HDatagrid:s.a,HOtherFundTree:n.a},data:function(){var t=this;return{split:.15,autoHeight:0,dealTypeList:[],copBusinClassList:[],copBusinFlagList:[],showPushDialog:!1,pageSizeOpts:[25,50,75,100],bottomTab:"",bottomColumns:[],bottomUrl:"",liquidateInsColumns:[{title:"勾销指令序号",key:"liquidate_ins_id",align:"left",hiddenCol:!0,ellipsis:!0},{title:"业务分类",key:"cop_busin_class",align:"center",hiddenCol:!0,ellipsis:!0},{title:"业务标志",key:"cop_busin_flag",align:"center",width:100,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cop_busin_flag,t.copBusinFlagList))}},{title:"金额",key:"settle_balance",align:"right",width:110,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.settle_balance))}},{title:"资金方向",key:"cash_direction",align:"left",width:70,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cash_direction,t.cashDirectionList))}},{title:"待交割序号",key:"out_transfer_id",align:"left",ellipsis:!0},{title:"符合匹配规则的银行流水集合",key:"serial_no_list",align:"left",hiddenCol:!0,ellipsis:!0}],statusList:[{code:"0",text:"未处理"},{code:"1",text:"待匹配"},{code:"2",text:"已匹配"},{code:"3",text:"待主推"},{code:"4",text:"已主推"},{code:"5",text:"已过滤"}],liquidateFlowColumns:[{title:"流水号",key:"serial_no",align:"left",hiddenCol:!0,ellipsis:!0},{title:"勾销状态",key:"liquidate_ins_status",align:"left",width:80,sortable:!0,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.liquidate_ins_status,t.statusList))}},{title:"对方账户名",key:"rival_account_name",align:"left",width:120,ellipsis:!0,render:function(t,e){var a=e.row.rival_account_name;return t("span",{attrs:{title:a}},a)}},{title:"对方账号",key:"rival_account_no",width:100,align:"left",ellipsis:!0,render:function(t,e){var a=e.row.rival_account_no;return t("span",{attrs:{title:a}},a)}},{title:"交易金额",key:"trade_balance",width:120,align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.trade_balance))}},{title:"资金方向",key:"cash_direction",align:"left",width:60,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cash_direction,t.cashDirectionList))}},{title:"余额",key:"bank_remain_balance",align:"right",width:100,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.bank_remain_balance))}},{title:"划款摘要",key:"transfer_remark",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.transfer_remark;return t("span",{attrs:{title:a}},a)}},{title:"划款用途",key:"transfer_purpose",align:"left",width:140,ellipsis:!0,render:function(t,e){var a=e.row.transfer_purpose;return t("span",{attrs:{title:a}},a)}},{title:"划款附言",key:"transfer_postscript",align:"left",width:80,ellipsis:!0,render:function(t,e){var a=e.row.transfer_postscript;return t("span",{attrs:{title:a}},a)}}],hasLiquidateColumns:[{title:"产品代码",key:"fund_code",align:"left",ellipsis:!0},{title:"产品名称",key:"fund_name",align:"left",ellipsis:!0},{title:"业务分类",key:"cop_busin_class",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cop_busin_class,t.copBusinClassList))}},{title:"业务标志",key:"cop_busin_flag",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cop_busin_flag,t.copBusinFlagList))}},{title:"交易金额",key:"trade_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.trade_balance))}},{title:"指令金额",key:"settle_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.settle_balance))}},{title:"资金方向",key:"cash_direction",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cash_direction,t.cashDirectionList))}},{title:"划款摘要",key:"transfer_remark",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.transfer_remark;return t("span",{attrs:{title:a}},a)}},{title:"待交割序号",key:"out_transfer_id",align:"left",width:80,ellipsis:!0},{title:"对手方账号",key:"rival_account_no",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.rival_account_no;return t("span",{attrs:{title:a}},a)}},{title:"对手方账户",key:"rival_account_name",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.rival_account_name;return t("span",{attrs:{title:a}},a)}},{title:"划款用途",key:"transfer_purpose",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.transfer_purpose;return t("span",{attrs:{title:a}},a)}},{title:"划款附言",key:"transfer_postscript",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.transfer_postscript;return t("span",{attrs:{title:a}},a)}}],queryFilterForm:{fund_id:""},queryForm:{manage_type:"",fund_code:"",fund_id:""},businFlagList:[],queryFlowForm:{fund_id:"",keyWord:"",serial_no_list:""},pushLiquidateInfo:{serial_no:"",cop_busin_class:"",cop_busin_flag:""},manageList:[{code:"0",text:"勾销"},{code:"1",text:"过滤"}],cashDirectionList:[{code:"1",text:"入款"},{code:"2",text:"出款"}]}},watch:{bottomTab:function(t){var e=this;"2"==t?(this.bottomUrl="/liquidate/flow/filter/page.json",this.bottomColumns=this.liquidateFlowColumns.filter(function(t){return"liquidate_ins_status"!=t.key})):(this.bottomUrl="/liquidate/instruction/finish/page.json",this.bottomColumns=this.hasLiquidateColumns),this.$nextTick(function(){e.$refs.hasLiquidateDatagrid.dataChange(1)})},"queryForm.manage_type":function(t){var e=this;"0"==t?(this.queryFlowForm.fund_id=this.queryForm.fund_id,this.$nextTick(function(){e.$refs.insFlowDatagrid.dataChange(1),e.$refs.insDatagrid.dataChange(1)})):this.$nextTick(function(){e.$refs.fliterDatagrid.dataChange(1)})},showPushDialog:function(t){t?this.openMask():this.closeMask()}},mounted:function(){var t=this;Object(i.t)(90523).then(function(e){return t.copBusinClassList=e.data}),Object(i.t)("businFlag").then(function(e){return t.copBusinFlagList=e.data}),Object(i.t)(91192).then(function(e){return t.dealTypeList=e.data}),this.bottomTab="1",this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-310},fundClick:function(t){t&&(this.queryForm.manage_type||(this.queryForm.manage_type="0"),this.queryForm.fund_code=t.text.split(" ")[0],this.queryFlowForm.fund_id=t.code,this.queryForm.fund_id=t.code,this.queryFilterForm.fund_id=t.code,this.queryFlowForm.serial_no_list="",this.refresh())},match:function(){var t,e,a=this,n=this.$refs.insDatagrid.$refs.gridContent.getSelection(),s=this.$refs.insFlowDatagrid.$refs.gridContent.getSelection();return 0==n.length?(this.openMask(),void this.$alert("请选择一条勾销记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})):0==s.length?(this.openMask(),void this.$alert("请选择一条勾销流水记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})):void(t=n[0].liquidate_ins_id,e=s[0].serial_no,l.a.post("/liquidate/instruction/match.json",{insId:t,flowNo:e})).then(function(t){t.data&&"0"==t.data.code?(a.openMask(),a.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}),a.refresh()):(a.openMask(),a.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}),a.refresh())})},mainPush:function(){var t,e=this,a=this.$refs.insFlowDatagrid.$refs.gridContent.getSelection();if(0==a.length)return this.openMask(),void this.$alert("请选择一条勾销流水记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});a[0].rule_id&&(t=a[0].rule_id,l.a.post("/liquidate/rule/get.json",{ruleId:t})).then(function(t){t.data&&t.data.success&&(e.pushLiquidateInfo.cop_busin_class=t.data.data.cop_busin_class,e.pushLiquidateInfo.cop_busin_flag=t.data.data.cop_busin_flag)}),this.pushLiquidateInfo.serial_no=a[0].serial_no,this.$refs.pushLiquidateForm.resetFields(),this.showPushDialog=!0},cancelFilter:function(){var t,e=this,a=this.$refs.hasLiquidateDatagrid.$refs.gridContent.getSelection();if(0==a.length)return this.openMask(),void this.$alert("请选择一条勾销记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});(t=a[0].serial_no,l.a.post("/liquidate/filter/cancel.json",{flowNo:t})).then(function(t){t.data&&"0"==t.data.code?(e.openMask(),e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh()):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh())})},businClassChange:function(t){var e=this;t&&Object(i.p)(t).then(function(t){return e.businFlagList=t.data})},insRowClick:function(){var t=this.$refs.insDatagrid.$refs.gridContent.getSelection();0===t.length?this.queryFlowForm.serial_no_list="":this.queryFlowForm.serial_no_list=t[0].serial_no_list,this.queryFlowForm.fund_id=this.queryForm.fund_id,this.$refs.insFlowDatagrid.dataChange(1)},insSelectChange:function(){var t=this.$refs.insDatagrid.$refs.gridContent.getSelection();0===t.length?this.queryFlowForm.serial_no_list="":this.queryFlowForm.serial_no_list=t[0].serial_no_list,this.queryFlowForm.fund_id=this.queryForm.fund_id,this.$refs.insFlowDatagrid.dataChange(1)},cancelLiquidate:function(){var t,e=this,a=this.$refs.hasLiquidateDatagrid.$refs.gridContent.getSelection();if(0==a.length)return this.openMask(),void this.$alert("请选择一条已勾销记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});(t={id:a[0].id,status:a[0].liquidate_ins_status},l.a.post("/liquidate/cancel.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return r()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.openMask(),e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh()):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh())})},cancelPushLiquidate:function(){this.showPushDialog=!1},savePushLiquidate:function(){var t,e=this;this.showPushDialog=!1,(t=this.pushLiquidateInfo,l.a.post("/liquidate/flow/push.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return r()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh()):(e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh())})},refreshFlow:function(){this.$refs.insFlowDatagrid.dataChange(1)},refresh:function(){"0"==this.queryForm.manage_type?(this.$refs.insDatagrid.dataChange(1),this.$refs.insFlowDatagrid.dataChange(1)):this.$refs.fliterDatagrid.dataChange(1),this.$refs.hasLiquidateDatagrid.dataChange(1)},rowClassName:function(t){if(this.queryFlowForm.serial_no_list&&-1!=this.queryFlowForm.serial_no_list.indexOf(t.serial_no.toString()))return"flow-table-info-row"},onSplitMove:function(){this.$refs.insDatagrid.handleResize(),this.$refs.insFlowDatagrid.handleResize(),this.$refs.hasLiquidateDatagrid.handleResize()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-row",[a("h-col",[a("h-button-group",["0"==t.queryForm.manage_type?a("h-button",{attrs:{icon:"arrow-swap"},on:{click:t.match}},[t._v("匹配")]):t._e(),t._v(" "),"0"==t.queryForm.manage_type?a("h-button",{attrs:{icon:"t-b-addto"},on:{click:t.mainPush}},[t._v("主推")]):t._e()],1),t._v(" "),"0"==t.queryForm.manage_type?a("h-input",{staticStyle:{float:"right",width:"200px"},attrs:{maxlength:32,placeholder:"请输入关键字"},model:{value:t.queryFlowForm.keyWord,callback:function(e){t.$set(t.queryFlowForm,"keyWord",e)},expression:"queryFlowForm.keyWord"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"search"},nativeOn:{click:function(e){return e.stopPropagation(),t.refreshFlow(e)}}})],1)])]):t._e()],1)],1),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"7"}},[a("h-datagrid",{ref:"insDatagrid",attrs:{stripe:"",hasPage:"","highlight-row":"",height:t.autoHeight,"auto-load":!1,columns:t.liquidateInsColumns,bindForm:t.queryForm,onRowClick:t.insRowClick,onSelectChange:t.insSelectChange,pageSize:100,pageSizeOpts:t.pageSizeOpts,url:"/liquidate/manage/record/page.json"}})],1),t._v(" "),a("h-col",{attrs:{span:"17"}},[a("h-datagrid",{ref:"insFlowDatagrid",attrs:{hasPage:"",stripe:"","highlight-row":"",height:t.autoHeight,"row-class-name":t.rowClassName,"auto-load":!1,columns:t.liquidateFlowColumns,bindForm:t.queryFlowForm,url:"/liquidate/flow/page.json"}})],1)],1),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"5px"},attrs:{"tab-position":"top"},model:{value:t.bottomTab,callback:function(e){t.bottomTab=e},expression:"bottomTab"}},[a("el-tab-pane",{attrs:{label:"已勾销列表",name:"1"}},[a("h-button-group",[a("h-button",{attrs:{icon:"t-b-modify"},on:{click:t.cancelLiquidate}},[t._v("取消勾销")])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已过滤列表",name:"2"}},[a("h-button-group",[a("h-button",{attrs:{icon:"t-b-modify"},on:{click:t.cancelFilter}},[t._v("取消过滤")])],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"hasLiquidateDatagrid",staticStyle:{overflow:"hidden"},attrs:{"has-page":"","highlight-row":"",stripe:"",height:"150",columns:t.bottomColumns,bindForm:t.queryFilterForm,pageSize:100,pageSizeOpts:t.pageSizeOpts,url:t.bottomUrl,"auto-load":!1}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.showPushDialog,callback:function(e){t.showPushDialog=e},expression:"showPushDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("请选择业务标志")])]),t._v(" "),a("h-form",{ref:"pushLiquidateForm",attrs:{model:t.pushLiquidateInfo,"label-width":80}},[a("h-form-item",{attrs:{required:"",label:"业务分类",prop:"cop_busin_class"}},[a("h-select",{on:{"on-change":t.businClassChange},model:{value:t.pushLiquidateInfo.cop_busin_class,callback:function(e){t.$set(t.pushLiquidateInfo,"cop_busin_class",e)},expression:"pushLiquidateInfo.cop_busin_class"}},t._l(t.copBusinClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("h-select",{model:{value:t.pushLiquidateInfo.cop_busin_flag,callback:function(e){t.$set(t.pushLiquidateInfo,"cop_busin_flag",e)},expression:"pushLiquidateInfo.cop_busin_flag"}},t._l(t.businFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelPushLiquidate}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.savePushLiquidate}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("8WfP")},null,null);e.default=d.exports},EHhD:function(t,e){},EyOW:function(t,e){},F2X7:function(t,e){},FrfD:function(t,e){},FvFU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("Hhn/"),o=a("HmOp"),r=a("22iY"),l=a("jV6A"),c=a("lbHh"),u=a.n(c),d=a("+dCm"),f=a("Yv4f"),p=a("DudF"),h=a("K+nL"),_=a("d+lO"),m=a("foEa"),b=a("se30"),v={name:"settle",mixins:[d.a],data:function(){var t=this;return{sortingField:"",split:.15,showRival:"",showReportCode:!1,showAgency:!1,showClearAgent:!1,fundCashList:[],businCashList:[],acctBalanceList:[],trustAcctList:[],dataSourceList:[],agencyList:[],clearAgentList:[{code:"1",text:"中登上海"},{code:"2",text:"中登深圳"},{code:"3",text:"中债登"},{code:"4",text:"上清所"}],detailForm:{transfer_ins_id:null,transfer_ins_modify:null},accountStyle:{borderColor:"#d3d3d3",height:"200px"},trusteeStyle:{height:"200px"},activeName:["2","3"],flowColumns:[{width:60,type:"index",title:"序号",align:"center"},{width:100,key:"operator_name",title:"操作员",align:"left"},{title:"审批节点",key:"node_name",width:100,align:"left",ellipsis:!0,render:function(t,e){var a,n=e.row;switch(n.node_name){case"approve":a="经办";break;case"settle":a="交收";break;default:a=n.node_name}return t("span",{},a)}},{width:100,key:"transfer_flow_flag",title:"操作说明",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_flow_flag,t.transferFlagList))}},{width:150,key:"exec_date",title:"操作时间",align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.exec_date,a.exec_time))}},{key:"remark",title:"备注",align:"left"}],transferStatusList:[],transferFlagList:[],businGroup:[{cop_busin_class:"",dic_name:"全部",count:0}],inAcct:{bank_account_no:"",bic_code:null,province_code:"",city_no:""},outAcct:{bank_account_no:"",bic_code:null},transferInfo:{fund_id:null,sq_holder_account:"",zz_holder_account:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,settle_balance:"",rival_code:"",issuer_code:"",rival_name:"",invest_type:"",approve_officer:"",currency_no:""},errorColumns:[{width:80,key:"id",title:"序号",align:"center"},{width:307,key:"err",title:"错误信息",align:"center"}],queryForm:{fundIds:"",keyword:"",businClass:"",showToday:"0",pageType:this.pageType},uploadData:{fileType:"2"},uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",pageSizeOpts:[25,50,75,100],item:{},businClassTree:[],showDialog:!1,actionType:null,businColumns:[{fixedLayout:"1",title:"序号",key:"transfer_ins_id",align:"left",ellipsis:!0},{title:"加急",key:"urgent_flag",width:35,align:"center",render:function(t,e){return"1"===e.row.urgent_flag?t("span",{style:{fontWeight:"bold",color:"red",fontSize:"18px"}},"!"):t("span","")}},{title:"指令来源",key:"data_source",width:80,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.data_source,t.dataSourceList))}},{title:"产品名称",key:"fund_name",width:150,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"产品名称",field:"fund_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_name"),t.sortingField="fund_name"}}})}},{title:"外部产品名称",key:"product_name",width:100,align:"left",ellipsis:!0},{title:"外部指令序号",key:"daily_instruction_no",align:"left",width:100,ellipsis:!0},{title:"指令生成时间",key:"input_date",align:"left",width:135,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.input_date,a.input_time))}},{title:"划款状态",key:"transfer_fund_status",width:90,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0?e("span",{},"-"):e("span",{},Object(s._1)(n.transfer_fund_status,t.transferFundStatusList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"划款状态",field:"transfer_fund_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"transfer_fund_status"),t.sortingField="transfer_fund_status"}}})}},{title:"指令状态",key:"transfer_ins_status",align:"left",width:135,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_ins_status,t.transferStatusList))}},{title:"合同状态",key:"cash_settle_status",align:"left",width:130,sortable:!0,ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"合同状态",field:"cash_settle_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_status"),t.sortingField="cash_settle_status"}}})}},{title:"清算机构",key:"clear_agent_code_cn",align:"left",width:90,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.clear_agent_code_cn,t.clearAgentList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"清算机构",field:"clear_agent_code_cn",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"clear_agent_code_cn"),t.sortingField="clear_agent_code_cn"}}})}},{key:"market_no",width:95,title:"交易市场",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.market_no,t.marketList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交易市场",field:"market_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"market_no"),t.sortingField="market_no"}}})}},{title:"成交/合同编号",key:"deal_no",width:120,sortable:!0,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"成交/合同编号",field:"deal_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"deal_no"),t.sortingField="deal_no"}}})}},{title:"到期成交编号",key:"deal_no_end",width:120,align:"left",ellipsis:!0},{title:"续做成交编号",key:"deal_no_new",width:120,align:"left",ellipsis:!0},{title:"申请编号",key:"zdsh_apply_no",width:120,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"申请编号",field:"zdsh_apply_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"zdsh_apply_no"),t.sortingField="zdsh_apply_no"}}})}},{title:"结算金额",key:"settle_balance",ellipsis:!0,width:140,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.settle_balance))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"结算金额",field:"settle_balance",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"settle_balance",!0),t.sortingField="settle_balance"}}})}},{title:"币种",key:"currency_no",width:60,sortable:!0,ellipsis:!0,align:"left",render:function(t,e){var a,n=e.row;switch(n.currency_no){case"CNY":a="人民币";break;case"USD":a="美元";break;default:a=n.currency_no}return t("span",{},a)}},{title:"起息日",key:"fee_begin_date",width:100,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.fee_begin_date))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"起息日",field:"fee_begin_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fee_begin_date"),t.sortingField="fee_begin_date"}}})}},{title:"到期日",width:100,key:"fee_end_date",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.fee_end_date))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"到期日",field:"fee_end_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fee_end_date"),t.sortingField="fee_end_date"}}})}},{title:"证券代码",key:"report_code",width:90,sortable:!0,ellipsis:!0,align:"left"},{title:"证券名称",width:100,key:"stock_name",ellipsis:!0,align:"left"},{title:"资金方向",key:"cash_direction",width:95,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.cash_direction,t.cashDirectionList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"资金方向",field:"cash_direction",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_direction"),t.sortingField="cash_direction"}}})}},{title:"业务标志",key:"cop_busin_caption",width:130,sortable:!0,ellipsis:!0,align:"left",renderHeader:function(e,a){return e("Sortheader",{props:{title:"业务标志",field:"cop_busin_caption",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cop_busin_caption"),t.sortingField="cop_busin_caption"}}})}},{title:"附件",key:"bill_name",width:50,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return"1"===a.transfer_merge_flag?t("span",{},Object(i.o)(a)):a.bill_name?t("Icon",{props:{name:"document"}}):t("span",{},"-")}},{title:"附件发送状态",key:"file_send_status",width:100,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.file_send_status,t.sendStatusList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"附件发送状态",field:"file_send_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"file_send_status"),t.sortingField="file_send_status"}}})}},{title:"结算方式",key:"settle_ment",align:"left",width:80,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.settle_ment,t.settleMentList))}},{title:"托管人",key:"fund_trust_bank",align:"left",width:100,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.fund_trust_bank,t.bankInfoList))}},{title:"对手方",width:140,key:"rival_name",ellipsis:!0,align:"left",renderHeader:function(e,a){return e("Sortheader",{props:{title:"对手方",field:"rival_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"rival_name"),t.sortingField="rival_name"}}})}},{title:"交收日期",key:"cash_settle_date",sortable:!0,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.cash_settle_date))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交收日期",field:"cash_settle_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_date"),t.sortingField="cash_settle_date"}}})}},{title:"划款单",key:"file_id",width:130,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;if(n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0)return e("span",{},"-");if(n.file_id)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.previewPDF(n.file_id)}}},"预览"),e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadByFileId(n.file_id)}}},"下载")]);if("1"!=n.transfer_fund_status)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.previewTransfer(n.transfer_ins_id,n.transfer_ins_modify)}}},"预览")]);return e("span",{},"-")}},{title:"投资类型",key:"invest_type",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.invest_type,t.investTypeList))}},{title:"原始划款事由",key:"original_transfer_purpose",ellipsis:!0,align:"left"},{title:"外部划款序号",key:"out_transfer_id",ellipsis:!0,align:"left"},{title:"交易员",key:"trade_operator_name",ellipsis:!0,align:"left"},{title:"申购价格（元/股）",key:"apply_price",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.apply_price))}},{title:"交易端备注",key:"transfer_trade_remark",ellipsis:!0,align:"left"},{title:"指令端备注",key:"transfer_instr_remark",ellipsis:!0,align:"left"},{title:"销售机构",key:"agency_code",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.agency_code,t.agencyList))}}],transferTypeList:[],transferFundStatusList:[],sendStatusList:[{code:"0",text:"无需发送"}],outAcctList:[],inAcctList:[],cityTree:[],bankList:[],bankInfoList:[],businFlagList:[],businClassList:[],copBusinFlagList:[],fileList:[],cashDirectionList:[{code:"0",text:"不变化"},{code:"1",text:"入款"},{code:"2",text:"出款"}],marketList:[],investTypeList:[],currencyList:[],fundList:[],rivalList:[],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],operatorList:[],settleMentList:[{code:"1",text:"见款付券"},{code:"2",text:"见券付款"},{code:"3",text:"DVP"}],agentCodeList:[{code:"3",text:"中债登"},{code:"4",text:"上清所"}],seatList:[{seatId:"",fee:""}],canSpecialApprove:"",specialApproveWorkerList:[],selectionTipVisible:!1,selections:[]}},props:{pageType:{type:String,default:""}},components:{TransferDetailDialog:b.a,FullScreenLoading:f.a,FundTree:o.a,HDatagrid:n.a,CommTreeGrid:p.a,SimpleTreeGrid:h.a,DetailPanel:_.default,SelectionTip:m.default},activated:function(){var t=this;Object(s.K)(10038).then(function(e){e.data.success&&(t.canSpecialApprove=e.data.data)})},mounted:function(){var t=this;Object(s.t)("businFlag").then(function(e){return t.businFlagList=e.data}),Object(s.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(s.t)(90522).then(function(e){return t.transferFlagList=e.data}),Object(s.t)(90537).then(function(e){return t.transferStatusList=e.data}),Object(s.t)(90523).then(function(e){return t.businClassList=e.data}),Object(s.t)(90524).then(function(e){return t.transferTypeList=e.data}),Object(s.t)(90571).then(function(e){return t.transferFundStatusList=e.data}),Object(s.t)(90426).then(function(e){return t.sendStatusList=t.sendStatusList.concat(e.data)}),Object(s.q)().then(function(e){return t.cityTree=e.data}),Object(s.t)(610400).then(function(e){return t.marketList=e.data}),Object(s.t)(91064).then(function(e){return t.investTypeList=e.data}),Object(s.t)(610406).then(function(e){var a=e.data;a.forEach(function(t){"CNY"==t.code&&(t.text="元")}),t.currencyList=a}),Object(s.j)().then(function(e){return t.bankList=e.data}),Object(s.j)("1").then(function(e){return t.bankInfoList=e.data}),Object(s.n)(!0).then(function(e){return t.businClassTree=e.data}),Object(s.N)().then(function(e){return t.operatorList=e.data}),Object(s.i)("").then(function(e){return t.agencyList=e.data}),Object(i.j)().then(function(e){e.data.rows&&e.data.rows.length>0?(t.specialApproveWorkerList=e.data.rows,t.specialApproveWorkerList.unshift({begin_date:"0",end_date:"0",operator_name:"全部",operator_no:-1,workgroup_id:0})):t.specialApproveWorkerList=[]}),this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",76),this.fixElPopoverBug(),SSObservable.subscribe("ToggleSidebar",function(e){console.log("settleToggleSidebar"),t.$refs.datagrid.handleResize()})},watch:{"transferInfo.cop_busin_flag":function(t){switch(this.transferInfo.cop_busin_class){case"1":this.showRival=!1,this.showReportCode=20020==t,20117==t||10071==t||30008==t?this.showClearAgent=!1:10070==t||20116==t||30110==t?this.showClearAgent=!1:this.showReportCode?this.showReportCode&&(this.showClearAgent=!1):this.showClearAgent=!0;break;case"4,5,6":case"4":case"5":case"6":this.transferInfo.clear_agent_code_cn="",this.showRival=10078==t||11010==t,this.showReportCode=!1,this.showClearAgent=!1;break;case"9":this.showRival=10023==t||20018==t||10074==t||10075==t||20130==t||20019==t,this.showReportCode=20017==t||20047==t||20049==t||20126==t||20128==t||20050==t||20051==t||20139==t||20140==t||10053==t||10054==t||10098==t||10099==t,this.showClearAgent=!1;break;case"7":this.showRival=!this.showAgency,this.showReportCode=!1,this.showClearAgent=!1;break;case"20":this.showRival=!0,this.showReportCode=!1,this.showClearAgent=!1;break;default:this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1}},showDialog:function(t){var e=this;t?(this.openMask(),this.activeName=["2","3"],""!=this.queryForm.businClass&&(this.copBusinFlagList=this.businClassTree.filter(function(t){return t.value==e.queryForm.businClass})[0].children)):(this.closeMask(),this.showRival=!1,this.outAcctList=[],this.inAcctList=[],this.fileList=[],this.transferInfo={require_pay_date:null,fund_id:this.queryForm.fundIds,sq_holder_account:"",zz_holder_account:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,settle_balance:"",rival_code:"",invest_type:""},this.$refs.transForm0.resetFields(),this.$refs.transForm.resetFields(),this.$refs.outAcctForm.resetFields(),this.$refs.inAcctForm.resetFields(),this.$refs.selfAcctForm.resetFields())}},computed:{showAcctCity:function(){var t=this.inAcct.province_code;return t?(this.accountStyle.height="235px",this.trusteeStyle.height="235px"):(this.accountStyle.height="200px",this.trusteeStyle.height="200px"),t},provinceCity:{get:function(){return[this.inAcct.province_code,this.inAcct.city_no]},set:function(t){this.inAcct.province_code=t[0],this.inAcct.city_no=t[1]}},upBalance:function(){return Object(s._3)(this.transferInfo.settle_balance)},businClassFlag:{get:function(){if(this.showTemplateList)return[this.queryTemp.cop_busin_class,this.queryTemp.cop_busin_flag];var t=this.transferInfo.cop_busin_class;return"4"!=this.transferInfo.cop_busin_class&&"5"!=this.transferInfo.cop_busin_class&&"6"!=this.transferInfo.cop_busin_class||(t="4,5,6"),[t,this.transferInfo.cop_busin_flag]},set:function(t){this.showTemplateList?(this.queryTemp.cop_busin_class=t[0],this.queryTemp.cop_busin_flag=t[1]):(this.transferInfo.cop_busin_class=t[0],this.transferInfo.cop_busin_flag=t[1])}},payDate:{get:function(){if(null!=this.transferInfo.require_pay_date){var t=this.transferInfo.require_pay_date.toString().split(" "),e=t[0].replace(new RegExp("-","gm"),""),a=t[1];return a=void 0===a?this.transferInfo.require_pay_time:a.replace(new RegExp(":","gm"),""),Object(s.R)(e,a)}return Object(s.R)(this.transferInfo.require_pay_date)},set:function(t){this.transferInfo.require_pay_date=Object(s.Q)(t,"yyyy-MM-dd hh:mm:ss")}},beginDate:{get:function(){return Object(s.R)(this.transferInfo.fee_begin_date)},set:function(t){this.transferInfo.fee_begin_date=Object(s.Q)(t)}},endDate:{get:function(){return Object(s.R)(this.transferInfo.fee_end_date)},set:function(t){this.transferInfo.fee_end_date=Object(s.Q)(t)}},gridName:function(){var t="settleGrid";return"3"===this.pageType?t="settleSendGrid":"4"===this.pageType&&(t="settleGrid"),t}},methods:{showText:s._1,showCity:s.Z,formatMoney:s.h,fundClick:function(t){var e=this;if(!t)return this.businGroup=[{cop_busin_class:"",dic_name:"全部",count:0}],this.queryForm.fundIds="",void this.refreshTable();if(this.queryForm.fundIds=t.code,this.queryForm.showToday=this.$refs.treeFund.getQueryCondition().show_today_flag,this.fundList=this.$refs.treeFund.getFundList(),""==this.queryForm.businClass)this.$refs.datagrid.changeGrid(this.gridName);else{var a=this.gridName+"-"+this.queryForm.businClass;this.$refs.datagrid.changeGrid(a.replace(/[,]/g,""))}Object(i.g)({fundId:t.code,showToday:this.$refs.treeFund.getQueryCondition().show_today_flag,isSettle:!0,pageType:this.pageType}).then(function(t){t.data.success&&t.data.data.length>0&&(e.businGroup=t.data.data)}),t.code.indexOf(",")<0&&(Object(r.d)(t.code,u.a.get("CurrSysDate")).then(function(t){e.acctBalanceList=[],e.trustAcctList=[],t.data.forEach(function(t){"2"==t.ACCOUNT_CLASS?e.trustAcctList.push({ACCOUNT_CLASS:t.ACCOUNT_CLASS,BANK_ACCOUNT_NAME:t.BANK_ACCOUNT_NAME+"余额"+Object(s.S)(t.INPUT_TIME),ACCOUNT_CUR_BALANCE:t.ACCOUNT_CUR_BALANCE}):e.acctBalanceList.push({ACCOUNT_CLASS:t.ACCOUNT_CLASS,BANK_ACCOUNT_NAME:t.BANK_ACCOUNT_NAME+"余额"+Object(s.S)(t.INPUT_TIME),ACCOUNT_CUR_BALANCE:t.ACCOUNT_CUR_BALANCE})})}),Object(r.f)(t.code,u.a.get("CurrSysDate")).then(function(t){e.fundCashList=t.data,e.getBusinCashList()})),this.refreshTable()},parseAcctClass:function(t){switch(t){case"2":return"托管户";case"5":return"上清DVP";case"6":return"中债DVP";default:return""}},batchDown:function(t){var e=this;if(!(t&&t.length||0!=(t=this.$refs.datagrid.getSelection()).length))return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});for(var a=[],n=[],s=0,i=0;i<t.length;i++)t[i].file_id?a.push(t[i].file_id):(s++,n.push(t[i].transfer_ins_id+"\r"));if(a.length>0)for(var o=0;o<a.length;o++)this.downloadOrder(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+a[o]);n.length>0&&(this.openMask(),this.$alert("有"+s+"条指令无对应划款单，其指令序号为："+n,"提示",{confirmButtonText:"确定",type:"warning",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))},downloadOrder:function(t){var e=document.createElement("iframe");e.style.display="none",e.style.height="0",e.src=t,document.body.appendChild(e),setTimeout(function(){e.remove()},6e4)},rowClick:function(t){var e=this.$refs.datagrid.getSelection();0===e.length?(this.item={},this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",108)):(this.item=Object(l.a)(t[0]),this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",76)),this.selectionTipVisible=e.length>0},handleSelectChange:function(t){var e=this.$refs.datagrid.getSelection();1===e.length?(this.item=Object(l.a)(e[0]),this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",76)):(this.item={},this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",108))},loadFiles:function(t){var e=this;t&&Object(s.u)(t,"2").then(function(t){t.data.success&&t.data.data.forEach(function(t){return e.fileList.push({name:t.file_name,response:{data:t.file_id}})}),e.fileList.length>0&&(e.transferInfo.bill_name=e.fileList.reduce(function(t,e){return t.response.data+","+e.response.data}))})},showDetail:function(t){this.$refs.detailDialog.showTransferDetail(t)},businClassChanged:function(){if(0==this.queryForm.businClass&&(this.queryForm.businClass=""),this.getBusinCashList(),""==this.queryForm.businClass)this.$refs.datagrid.changeGrid(this.gridName);else{var t=this.gridName+"-"+this.queryForm.businClass;this.$refs.datagrid.changeGrid(t.replace(/[,]/g,""))}this.refreshTable(),this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",76)},getBusinCashList:function(){switch(this.queryForm.businClass){case"1":this.businCashList=this.fundCashList.filter(function(t){return 4==t.CASHTYPEID||5==t.CASHTYPEID||9==t.CASHTYPEID});break;case"4,5,6":this.businCashList=this.fundCashList.filter(function(t){return 6==t.CASHTYPEID||7==t.CASHTYPEID});break;case"7":this.businCashList=this.fundCashList.filter(function(t){return 2==t.CASHTYPEID});break;case"8":this.businCashList=this.fundCashList.filter(function(t){return 3==t.CASHTYPEID});break;case"9":this.businCashList=this.fundCashList.filter(function(t){return 1==t.CASHTYPEID});break;default:this.businCashList=[]}},refreshFundTree:function(){this.$refs.treeFund.handleOK()},refreshTable:function(t){t?this.$refs.datagrid.dataChange():this.$refs.datagrid.dataChange(1),this.item={},this.re_layout("full-h-wrapper-on-transfer-settle","inner-on-transfer-settle",108)},handleCancel:function(){this.showDialog=!1},cancelTransfer:function(t){var e=this,a=this.$refs.datagrid.getSelection();if(1!=a.length)return this.openMask(),void this.$alert("请先选中一条指令单独撤销","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});if(!((a=Object(s.g)(a,this)).length<=0)){var n="/cashsettle/settle/cancelTransfer.json",o=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(i.q)(n,{transferList:a,ignore:!1,flowFlag:t}).then(function(s){if(o.close(),s.data.success)e.openMask(),e.$alert(s.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refreshFundTree();else if("1120002"==s.data.code&&19===t){e.openMask();"确定已通过线下沟通撤销指令，并重置划款状态？",e.$confirm("确定已通过线下沟通撤销指令，并重置划款状态？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.q)(n,{transferList:a,ignore:!0,flowFlag:t}).then(function(t){t.data.success?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refreshTable(!0)):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})})}).catch(function(){e.closeMask()})}else"1120002"==s.data.code&&13===t?e.$alert("该指令不支持线上撤销","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}):(e.openMask(),e.$alert(s.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))})}},transferSuccess:function(){var t=this,e=this.$refs.datagrid.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});(e=Object(s.g)(e,this)).length<=0||this.$confirm("若已和托管人确认过划款成功，请继续，否则请取消","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(function(){t.doAction("transferSuccess","")}).catch(function(){t.closeMask()})},doAction:function(t,e){var a=this,n=this.$refs.datagrid.getSelection();if(0==n.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()});if(!("sendAttachment"!=t&&(n=Object(s.g)(n,this)).length<=0)){this.$refs.screenLoading.open();var o="/cashsettle/settle/"+t+".json",r=t;Object(i.q)(o,{transferList:n,ignore:!1,param:e}).then(function(t){if(a.$refs.screenLoading.close(),t.data.success)a.showResult(r,t);else if("1120002"==t.data.code){a.openMask();var s=a.$createElement,l=[];t.data.msg.split(";").forEach(function(t){t&&t.length>1&&l.push({id:t.split(":")[0],err:t.split(":")[1]})}),a.$msgbox({title:"注意",message:s("p",null,[s("span",null,"存在异常的指令，是否剔除并继续？"),s("h-table",{style:"width: 100%",props:{columns:a.errorColumns,data:l,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(t,s,l){"confirm"===t?(Object(i.q)(o,{transferList:n,ignore:!0,param:e}).then(function(t){t.data.success?a.showResult(r,t):(a.openMask(),a.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}))}),l()):l()}}).then(function(t){a.closeMask()}).catch(function(){a.closeMask()})}else a.openMask(),a.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})}).catch(function(t){a.$refs.screenLoading.close(),a.openMask(),a.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})})}},showResult:function(t,e){var a=this;if("sendTransfer"===t||"sendAttachment"===t){var n=this.$createElement,s=[],i="";e.data.msg.split(";").forEach(function(e,a){if(0===a){var n=e.split(":")[0],o=e.split(":")[1];i="sendAttachment"===t?"0"==o?"成功 "+n+" 笔":"失败 "+o+" 笔":"成功 "+n+" 笔，失败 "+o+" 笔"}else e&&e.length>1&&s.push({id:e.split(":")[0].replace(new RegExp("&colon","gm"),":").replace(new RegExp("&semicolon","gm"),";"),err:e.split(":")[1].replace(new RegExp("&colon","gm"),":").replace(new RegExp("&semicolon","gm"),";")})}),this.openMask(),this.$msgbox({title:"提示",message:n("p",null,[n("span",null,i),n("h-table",{style:"width: 100%",props:{columns:this.errorColumns,data:s,height:200}})]),closeOnClickModal:!1,confirmButtonText:"确定",beforeClose:function(t,e,a){a()}}).then(function(t){a.closeMask()})}else this.openMask(),this.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()});this.refreshFundTree()},delayTransfer:function(){var t=this,e=this.$refs.datagrid.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if(!((e=Object(s.g)(e,this)).length<=0)){var a="/cashsettle/settle/transferDelay.json";this.openMask(),this.$prompt("请输入交收日期，格式为20181231：","延期交收",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{4}(?:0\d|1[0-2])(?:[0-2]\d|3[01])( (?:[01]\d|2[0-3])\:[0-5]\d\:[0-5]\d)?$/,inputErrorMessage:"日期格式不正确"}).then(function(n){var s=n.value,o={transferList:e,ignore:!1,param:s};Object(i.q)(a,o).then(function(n){if(n.data&&n.data.success)t.$alert(n.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshTable(!0);else if(n.data&&"1120002"===n.data.code){var o=t.$createElement,r=[];n.data.msg.split(";").forEach(function(t){if(t&&t.length>1){var e=t.split(":");r.push({id:e[0],err:e[e.length-1]})}}),t.$msgbox({title:"注意",message:o("p",null,[o("span",null,"存在异常的指令，是否剔除并继续？"),o("h-table",{style:"width: 100%",props:{columns:t.errorColumns,data:r,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(n,o,r){"confirm"===n?(Object(i.q)(a,{transferList:e,ignore:!0,param:s}).then(function(e){e.data.success?(t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshTable(!0)):(t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))}),r()):r()}}).then(function(e){t.closeMask()})}else t.openMask(),t.$alert(n.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}).catch(function(e){t.openMask(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})}},handleCommand:function(t){switch(parseInt(t)){case 100:this.doAction("queryTransfer","");break;case 6:this.delayTransfer();break;case 15:this.settleSuccess(parseInt(t));break;case 19:this.cancelTransfer(parseInt(t));break;default:this.handleTransfer(parseInt(t))}},handleTransferCommand:function(t){this.doAction("sendTransfer",t)},handleFileCommand:function(t){this.doAction("sendAttachment",t)},handleTransfer:function(t,e,a){var n=this;if(!(e&&e.length||0!=(e=this.$refs.datagrid.getSelection()).length))return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()});if(4==t||16==t){if((e=Object(s.f)(e,this)).length<=0)return}else if((e=Object(s.g)(e,this)).length<=0)return;var o="",r="/cashsettle/approveOpetate.json";switch(parseInt(t)){case 4:r="/cashsettle/settle/settleFail.json",o="交收失败";break;case 6:r="/cashsettle/settle/transferDelay.json",o="延期交收";break;case 16:r="/cashsettle/settle/settleFail.json",o="强制交收失败";break;case 7:o="作废";break;case 9:o="驳回";break;case 8:o="审批通过"}var l="确定"+o+"所选指令?";this.openMask(),this.$prompt(l+"请填入原因并确认：","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){var o=s.value;Object(i.q)(r,{transferList:e,flowFlag:t,ignore:!1,remark:o}).then(function(s){if(s.data.success)n.$alert(s.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),a?a.dataChange():n.refreshFundTree();else{var l=n.$createElement,c=[];s.data.msg.split(";").forEach(function(t){if(t&&t.length>1){var e=t.split(":");c.push({id:e[0],err:e[e.length-1]})}}),n.$msgbox({title:"注意",message:l("p",null,[l("span",null,"存在异常的指令，是否剔除并继续？"),l("h-table",{style:"width: 100%",props:{columns:n.errorColumns,data:c,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(s,l,c){"confirm"===s?(Object(i.q)(r,{transferList:e,flowFlag:t,ignore:!0,remark:o}).then(function(t){t.data.success?(n.openMask(),n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),a?a.dataChange():n.refreshFundTree()):(n.openMask(),n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}))}),c()):c()}}).then(function(t){n.closeMask()})}}).catch(function(t){n.openMask(),n.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})})}).catch(function(){n.closeMask()})},settleSuccess:function(t,e,a){var n=this;if(!(e&&e.length||0!=(e=this.$refs.datagrid.getSelection()).length))return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()});var o=Object(s.f)(e,this),r="/cashsettle/settle/settleSuccess.json",l=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(i.q)(r,{transferList:o,flowFlag:t,ignore:!1}).then(function(e){if(l.close(),e.data.success)n.openMask(),n.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),a?a.dataChange():n.refreshFundTree();else{var s=n.$createElement,c=[];e.data.msg.split(";").forEach(function(t){if(t&&t.length>1){var e=t.split(":");c.push({id:e[0],err:e[e.length-1]})}}),n.openMask(),n.$msgbox({title:"注意",message:s("p",null,[s("span",null,"存在异常的指令，是否继续？"),s("h-table",{style:"width: 100%",props:{columns:n.errorColumns,data:c,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(e,s,l){"confirm"===e?(Object(i.q)(r,{transferList:o,flowFlag:t,ignore:!0}).then(function(t){t.data.success?(n.openMask(),n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),a?a.dataChange():n.refreshFundTree()):(n.openMask(),n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}))}),l()):l()}}).then(function(t){n.closeMask()}).catch(function(){n.closeMask()})}}).catch(function(t){n.openMask(),n.$alert("请求失败，请检查登录状态","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})})},fileUploaded:function(t,e,a){this.transferInfo.bill_name=a.reduce(function(t,e){return t.response.data+","+e.response.data})},exceedLimit:function(){this.$alert("最多上传5个附件","错误",{confirmButtonText:"确定",type:"error"})},previewPDF:function(t){var e="/cop-web/static/plugins/pdfjs/generic/web/viewer.html?file="+encodeURIComponent(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t);window.open(e,"划款单预览","width=800,height=600").focus()},previewTransfer:function(t,e){var a=this;Object(i.n)({transferId:t,modifyId:e}).then(function(t){t.data.success?a.previewPDF(t.data.data):a.$alert(t.data.msg,"提示",{confirmButtonText:"确定",type:"error"})})},downloadByFileId:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t)},downloadFile:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=2&fileId="+t.response.data)},openLayout:function(){this.$refs.datagrid.openLayout()},rowClassName:function(t){return"9"===t.transfer_flow_flag||"5"===t.transfer_fund_status||"1"!=t.transfer_merge_flag&&0==t.settle_balance?"alert-table-red-row":""},onSelectionChange:function(t){this.selectionTipVisible=t.length>0,this.selections=t,SSObservable.publish("onresize"),SSObservable.publish("re_layout")}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transfer-settle full-h"},[a("full-screen-loading",{ref:"screenLoading"}),t._v(" "),a("h-split",{attrs:{min:"100",max:"800"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("fund-tree",{ref:"treeFund",attrs:{onFundClick:t.fundClick,showAll:!0,showToDo:!0,"query-url":"/common/fundListWithCount.json","is-settle":!0,pageType:t.pageType}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-transfer-settle"},slot:"right"},[a("div",[a("h-tabs",{attrs:{size:"small"},on:{"on-click":t.businClassChanged},model:{value:t.queryForm.businClass,callback:function(e){t.$set(t.queryForm,"businClass",e)},expression:"queryForm.businClass"}},t._l(t.businGroup,function(t,e){return a("h-tab-pane",{key:e,attrs:{name:t.cop_busin_class,label:t.dic_name+"("+t.count+")"}})}),1)],1),t._v(" "),a("div",{staticClass:"btn-ctrls"},[a("div",["3"===t.pageType?a("h-button-group",[a("h-button",{attrs:{icon:"forward"},on:{click:function(e){return t.doAction("sendTransfer","")}}},[t._v("发送指令")]),t._v(" "),a("el-dropdown",{on:{command:t.handleTransferCommand}},[a("div",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.transferTypeList,function(e){return a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"3"==e.code||"2"==e.code,expression:"item.code == '3' || item.code == '2'"}],key:e.code,attrs:{command:e.code}},[t._v("\n                                    "+t._s(e.text)+"\n                                ")])}),1)],1)],1):t._e(),t._v(" "),"21"!==t.queryForm.businClass?a("h-button-group",[a("h-button",{attrs:{icon:"share1"},on:{click:function(e){return t.doAction("sendAttachment","")}}},[t._v("发送附件")]),t._v(" "),a("el-dropdown",{on:{command:t.handleFileCommand}},[a("div",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.transferTypeList,function(e){return a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:"3"==e.code||"2"==e.code,expression:"item.code == '3' || item.code == '2'"}],key:e.code,attrs:{command:e.code}},[t._v("\n                                "+t._s(e.text)+"\n                            ")])}),1)],1)],1):t._e(),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"right"},on:{click:t.transferSuccess}},[t._v("确认划款成功")]),t._v(" "),"4"===t.pageType?a("h-button",{attrs:{icon:"success"},on:{click:function(e){return t.settleSuccess(3)}}},[t._v("交收成功")]):t._e(),t._v(" "),a("h-button",{attrs:{icon:"undo"},on:{click:function(e){return t.handleTransfer(9)}}},[t._v("驳回")]),t._v(" "),a("h-button",{attrs:{icon:"trash"},on:{click:function(e){return t.handleTransfer(7)}}},[t._v("作废")]),t._v(" "),"3"===t.pageType?a("h-button",{on:{click:t.delayTransfer}},[t._v("延期交收")]):t._e(),t._v(" "),"4"===t.pageType?a("h-button",{attrs:{icon:"t-b-download"},on:{click:t.batchDown}},[t._v("批量下载划款单")]):t._e(),t._v(" "),"4"===t.pageType?a("h-button",{on:{click:function(e){return t.doAction("queryTransfer","")}}},[t._v("查询指令结果")]):t._e(),t._v(" "),"4"===t.pageType?a("h-button",{attrs:{icon:"t-b-tips"},on:{click:function(e){return t.cancelTransfer(13)}}},[t._v("撤销指令")]):t._e(),t._v(" "),"4"===t.pageType?a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"ghost",size:"mini"}},[t._v("\n                                ...\n                            ")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"6"}},[t._v("延期交收")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"4"}},[t._v("交收失败")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"15"}},[t._v("强制交收成功")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"16"}},[t._v("强制交收失败")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"19"}},[t._v("强制撤销指令")])],1)],1):t._e()],1)],1),t._v(" "),a("h-button-group",{staticClass:"btn-layout"},[a("h-button",{on:{click:t.openLayout}},[a("h-icon",{staticClass:"iconfont icon-ziduanxuanze1"}),t._v("  布局")],1)],1)],1),t._v(" "),a("SimpleTreeGrid",{ref:"datagrid",attrs:{height:t.autoHeight,fundData:t.queryForm,columns:t.businColumns,onRowClick:t.rowClick,onRowDbClick:t.showDetail,"row-class-name":t.rowClassName,pageSize:100,pageSizeOpts:t.pageSizeOpts,"grid-name":t.gridName,url:"/cashsettle/settle/transferUnSettleList.json"},on:{selectionChange:t.onSelectionChange}}),t._v(" "),t.selectionTipVisible?a("selection-tip",{staticStyle:{height:"35px"},attrs:{selections:t.selections}}):t._e(),t._v(" "),""!=t.queryForm.fundIds&&t.queryForm.fundIds.indexOf(",")<0||t.item.transfer_ins_id?a("div",{staticClass:"wrapper",attrs:{id:"inner-on-transfer-settle"}},[t._e(),t._v(" "),t._e(),t._v(" "),a("detail-panel",{attrs:{businClass:t.queryForm.businClass,businFlagList:t.businFlagList,trustAcctList:t.trustAcctList,acctBalanceList:t.acctBalanceList,businCashList:t.businCashList,queryForm:t.queryForm,item:t.item,from:"settle"}})],1):t._e()],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"1040",top:"24","mask-closable":!1,footerHide:!0,scrollable:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增指令")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改指令")]):t._e(),t._v(" "),"detail"==t.actionType?a("span",[t._v("指令详情")]):t._e()]),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom",staticStyle:{"border-color":"#d3d3d3"}},[a("header",{staticClass:"headline pl5"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("业务类型")])]),t._v(" "),a("h-form",{ref:"transForm0",attrs:{model:t.transferInfo,"label-width":100,cols:"3"}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.fund_id,callback:function(e){t.$set(t.transferInfo,"fund_id",e)},expression:"transferInfo.fund_id"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),""==t.queryForm.businClass?a("h-form-item",{attrs:{required:"",label:"业务标志"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,size:"mini",options:t.businClassTree},model:{value:t.businClassFlag,callback:function(e){t.businClassFlag=e},expression:"businClassFlag"}})],1):t._e(),t._v(" "),""!=t.queryForm.businClass?a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.cop_busin_flag,callback:function(e){t.$set(t.transferInfo,"cop_busin_flag",e)},expression:"transferInfo.cop_busin_flag"}},t._l(t.copBusinFlagList,function(t,e){return a("h-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),t.showClearAgent?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{required:"",label:"清算机构",prop:"clear_agent_code_cn"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.clear_agent_code_cn,callback:function(e){t.$set(t.transferInfo,"clear_agent_code_cn",e)},expression:"transferInfo.clear_agent_code_cn"}},t._l(t.agentCodeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"投资类型",prop:"invest_type"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.invest_type,callback:function(e){t.$set(t.transferInfo,"invest_type",e)},expression:"transferInfo.invest_type"}},t._l(t.investTypeList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),t.showAgency?a("h-form-item",{attrs:{label:"销售机构",prop:"agency_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType},model:{value:t.transferInfo.agency_code,callback:function(e){t.$set(t.transferInfo,"agency_code",e)},expression:"transferInfo.agency_code"}},t._l(t.agencyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),t.showRival?a("h-form-item",{attrs:{label:"对手方",prop:"rival_code"}},["add"!=t.actionType?a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.rival_name,callback:function(e){t.$set(t.transferInfo,"rival_name",e)},expression:"transferInfo.rival_name"}}):t._e()],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用起始日期",prop:"fee_begin_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}})],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用结束日期",prop:"fee_end_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e(),t._v(" "),null!=t.canSpecialApprove&&"1"===t.canSpecialApprove?a("h-form-item",{attrs:{label:"特殊审批人",prop:"approve_officer"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.approve_officer,callback:function(e){t.$set(t.transferInfo,"approve_officer",e)},expression:"transferInfo.approve_officer"}},t._l(t.specialApproveWorkerList,function(t,e){return a("h-option",{key:e,attrs:{label:t.operator_name,value:t.operator_no}})}),1)],1):t._e(),t._v(" "),"detail"==t.actionType&&t.showReportCode?a("h-form-item",{attrs:{label:"证券代码",prop:"report_code"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.report_code,callback:function(e){t.$set(t.transferInfo,"report_code",e)},expression:"transferInfo.report_code"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.stock_name?a("h-form-item",{attrs:{label:"证券名称",prop:"stock_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.stock_name,callback:function(e){t.$set(t.transferInfo,"stock_name",e)},expression:"transferInfo.stock_name"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.market_no?a("h-form-item",{attrs:{label:"交易市场",prop:"market_no"}},[a("h-select",{attrs:{disabled:"",filterable:""},model:{value:t.transferInfo.market_no,callback:function(e){t.$set(t.transferInfo,"market_no",e)},expression:"transferInfo.market_no"}},t._l(t.marketList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e()],1),t._v(" "),t._l(t.seatList,function(e,n){return"22"==t.transferInfo.cop_busin_class&&"20061"==t.transferInfo.cop_busin_flag?a("h-form",{key:n,ref:"seatListForm",refInFor:!0,attrs:{"label-width":100,cols:"3",model:e}},[a("h-row",[a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"席位号"+(n+1),required:"",prop:"seatId"}},[a("h-input",{attrs:{type:"text",maxlength:6,placeholder:"请输入",disabled:"detail"==t.actionType},model:{value:e.seatId,callback:function(a){t.$set(e,"seatId",a)},expression:"item.seatId"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"佣金费"+(n+1),required:"",prop:"fee"}},[a("h-typefield",{attrs:{type:"money",placeholder:"请输入",bigTips:"",divided:"",integerNum:"12",disabled:"detail"==t.actionType},on:{"on-blur":function(t){}},model:{value:e.fee,callback:function(a){t.$set(e,"fee",a)},expression:"item.fee"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),"detail"!=t.actionType?a("h-col",{attrs:{span:"8"}},[a("h-icon",n<=0?{staticClass:"pointer pl10",attrs:{name:"addition",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}}:{staticClass:"pointer pl10",attrs:{name:"offline",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}})],1):t._e()],1)],1):t._e()})],2),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom pt10 pb10",staticStyle:{"border-color":"#d3d3d3"}},[a("h-row",[a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("出")])]),t._v(" "),a("h-form",{ref:"outAcctForm",attrs:{model:t.outAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,size:"small",filterable:"","allow-create":"",title:t.outAcct.bank_account_name},on:{change:function(t){}},model:{value:t.outAcct.bank_account_name,callback:function(e){t.$set(t.outAcct,"bank_account_name",e)},expression:"outAcct.bank_account_name"}},t._l(t.outAcctList,function(t){return a("el-option",{key:t.bank_account_id,attrs:{label:t.bank_account_name,value:t.bank_account_id}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.bank_account_no},model:{value:t.outAcct.bank_account_no,callback:function(e){t.$set(t.outAcct,"bank_account_no",e)},expression:"outAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.outAcct.bic_code,callback:function(e){t.$set(t.outAcct,"bic_code",e)},expression:"outAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.outAcct.sub_bank_no},model:{value:t.outAcct.sub_bank_no,callback:function(e){t.$set(t.outAcct,"sub_bank_no",e)},expression:"outAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.pay_no},model:{value:t.outAcct.pay_no,callback:function(e){t.$set(t.outAcct,"pay_no",e)},expression:"outAcct.pay_no"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("入")])]),t._v(" "),a("h-form",{ref:"inAcctForm",attrs:{model:t.inAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,size:"small",filterable:"","allow-create":"",title:t.inAcct.bank_account_name},on:{change:function(t){}},model:{value:t.inAcct.bank_account_name,callback:function(e){t.$set(t.inAcct,"bank_account_name",e)},expression:"inAcct.bank_account_name"}},t._l(t.inAcctList,function(t){return a("el-option",{key:t.bank_account_id,attrs:{label:t.bank_account_name,value:t.bank_account_id}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.bank_account_no},model:{value:t.inAcct.bank_account_no,callback:function(e){t.$set(t.inAcct,"bank_account_no",e)},expression:"inAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.inAcct.bic_code,callback:function(e){t.$set(t.inAcct,"bic_code",e)},expression:"inAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.inAcct.sub_bank_no},model:{value:t.inAcct.sub_bank_no,callback:function(e){t.$set(t.inAcct,"sub_bank_no",e)},expression:"inAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.pay_no},model:{value:t.inAcct.pay_no,callback:function(e){t.$set(t.inAcct,"pay_no",e)},expression:"inAcct.pay_no"}})],1),t._v(" "),t.showAcctCity?a("h-form-item",{attrs:{required:"",label:"开户城市",prop:"city_no"}},[a("el-cascader",{attrs:{size:"mini",disabled:"detail"==t.actionType,options:t.cityTree,filterable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1):t._e()],1)],1),t._v(" "),a("h-col",{style:t.trusteeStyle,attrs:{span:"8"}},[a("header",{staticClass:"headline pl10 pr10"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("托管人信息")])]),t._v(" "),a("h-form",{ref:"selfAcctForm",attrs:{model:t.outAcct,"label-width":100}},[a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.outAcct.bank_phone,callback:function(e){t.$set(t.outAcct,"bank_phone",e)},expression:"outAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.outAcct.bank_fax,callback:function(e){t.$set(t.outAcct,"bank_fax",e)},expression:"outAcct.bank_fax"}})],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"邮箱",prop:"bank_mail"}},[a("el-input",{attrs:{size:"small",type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.outAcct.bank_mail},model:{value:t.outAcct.bank_mail,callback:function(e){t.$set(t.outAcct,"bank_mail",e)},expression:"outAcct.bank_mail"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"block-in-box pt10 pb10"},[a("h-row",[a("h-col",{staticStyle:{"border-color":"#d3d3d3"},attrs:{span:"16","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("划款信息")])]),t._v(" "),a("h-form",{ref:"transForm",attrs:{model:t.transferInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"10"}},[a("h-form-item",{attrs:{required:"",label:"划款金额",prop:"settle_balance"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("划款金额")]),t._v(" "),a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:"",disabled:"detail"==t.actionType},model:{value:t.transferInfo.settle_balance,callback:function(e){t.$set(t.transferInfo,"settle_balance",e)},expression:"transferInfo.settle_balance"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"2"}},[a("h-form-item",{attrs:{"label-width":2}},[a("h-select",{staticStyle:{height:"32px"},attrs:{disabled:"detail"==t.actionType,setDefSelect:!0,filterable:""},model:{value:t.transferInfo.currency_no,callback:function(e){t.$set(t.transferInfo,"currency_no",e)},expression:"transferInfo.currency_no"}},t._l(t.currencyList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"付款日期",prop:"require_pay_date"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("付款日期")]),t._v(" "),a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:function(t){}},model:{value:t.payDate,callback:function(e){t.payDate=e},expression:"payDate"}})],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"大写金额"}},[a("h-input",{attrs:{disabled:""},model:{value:t.upBalance,callback:function(e){t.upBalance=e},expression:"upBalance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款事由",prop:"transfer_purpose"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_purpose,callback:function(e){t.$set(t.transferInfo,"transfer_purpose",e)},expression:"transferInfo.transfer_purpose"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_postscript,callback:function(e){t.$set(t.transferInfo,"transfer_postscript",e)},expression:"transferInfo.transfer_postscript"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款备注",prop:"transfer_remark"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_remark,callback:function(e){t.$set(t.transferInfo,"transfer_remark",e)},expression:"transferInfo.transfer_remark"}})],1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"8","class-name":"pl10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("附件")])]),t._v(" "),a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{disabled:"detail"==t.actionType,drag:"",multiple:"",action:t.uploadUrl,data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"on-preview":t.downloadFile,limit:5,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType,expression:"actionType=='detail'"}],model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"collapse-icon-l"}),t._v(" "),a("span",{staticClass:"collapse-title"},[t._v("指令操作明细")])]),t._v(" "),a("h-datagrid",{ref:"flowData",attrs:{stripe:"",autoLoad:!1,"highlight-row":"",columns:t.flowColumns,bindForm:t.detailForm,url:"/cashsettle/transferFlow.json"}})],2)],1),t._v(" "),a("div",{staticClass:"flex-row-end"},[a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"error"},on:{click:function(t){}}},[t._v("存为模板")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"primary"},on:{click:function(t){}}},[t._v("确认")])],1)],1),t._v(" "),a("TransferDetailDialog",{ref:"detailDialog"})],1)},staticRenderFns:[]};var y=a("VU/8")(v,g,!1,function(t){a("4ZjR"),a("YA3s"),a("hldD"),a("jYKc")},null,null);e.default=y.exports},Fzko:function(t,e){},G3E2:function(t,e){},HUcF:function(t,e){},HYrK:function(t,e){},HaNU:function(t,e){},"Hhn/":function(t,e,a){"use strict";e.s=function(t){return i.a.post("/cashsettle/input/saveDealType.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.r=function(t){return i.a.post("/cashsettle/handleUrgentFlag.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.q=function(t,e){return i.a.post(t,e,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.x=function(t){return i.a.post("/cashsettle/approve/unionAll.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.y=function(t){return i.a.post("/cashsettle/approve/unionExclude.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.o=function(t){var e=0;t.bill_name&&(e=t.bill_name.split(",").length);var a=0;t.deal_no&&t.deal_no.indexOf("笔轧差")>0&&(a=t.deal_no.substr(0,t.deal_no.indexOf("笔轧差")));var n=e;0!==a&&(n=n+"/"+a);return n},e.v=function(){return i.a.post("/cashsettle/taQuery.json",{},{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.b=function(){return i.a.post("/cashsettle/btaQuery.json",{},{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.a=function(){return i.a.post("/cashsettle/input/btaImport.json",{},{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.d=function(t){return i.a.post("/cashsettle/input/btaRevokeAndImport.json",t)},e.c=function(t){return i.a.post("/cashsettle/input/btaResetStatus.json",t)},e.t=function(t){return i.a.post("/cashsettle/input/saveTemplate.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.l=function(t){return i.a.get("/cashsettle/input/getTmpAccount.json?id="+t)},e.e=function(t){return i.a.post("/cashsettle/input/deleteTemplate.json",{serialNo:t})},e.f=function(t){return i.a.post("/cashsettle/input/getAcctOptions.json",t)},e.h=function(t){return i.a.post("/cashsettle/input/getCashInfo.json",t)},e.g=function(t){return i.a.post("/common/getBusinClassGroup.json",t)},e.p=function(t){return i.a.post("/fundaccount/account/list.json",t)},e.n=function(t){return i.a.post("/cashsettle/getTransferFile.json",t)},e.u=function(t){return i.a.post("/cashsettle/input/manualCashProcess.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.i=function(t){return i.a.post("/cashsettle/getSameDirectBusinFlag.json",t)},e.j=function(t){return i.a.post("/common/getSpecialApproveWorkerList.json",t)},e.m=function(t){return i.a.post("/reportmgnt/transRecord/getTransferDetail.json",t)},e.w=function(t){return i.a.post("/reportmgnt/transRecord/transRecordList.json",t)},e.k=function(t){return i.a.post("/reportmgnt/transRecord/getStatisticsData.json",t)};var n=a("mvHQ"),s=a.n(n),i=a("5/bi")},HmOp:function(t,e,a){"use strict";var n=a("Q5rI"),s=a("Yjvf"),i=a("n0lz"),o={name:"SwitchIcon",props:{names:{type:Array,default:function(){return[]}}},data:function(){return{hover:!1}},computed:{iconname:function(){return this.hover?this.names[0]:this.names[1]}},methods:{onMouseover:function(){this.hover=!0},onMouseleave:function(){this.hover=!1}},components:{}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"s-switch-icon"},[e("i",{staticClass:"iconfont",class:this.iconname,on:{mouseleave:this.onMouseleave,mouseover:this.onMouseover}})])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("EHhD")},null,null).exports,c={name:"FundTree",components:{HFieldset:i.a,HPanel:s.a,SwitchIcon:l},data:function(){return{showToday:"0",oldId:"",activeNames:["1"],fundTree:[{text:"   加载中              ... ",code:""}],fundTreeTmp:[],filterText:"",showBusinDone:!1,queryConditions:{name:"",default_flag:"0",condition_id:null,keyword:"",data_source:"",fund_id_list:[],fund_status:["1"],fund_type:[],fund_trust_bank:"",transfer_flag:"1",isSettle:this.isSettle,show_busin_done:"1",show_today_flag:"0",pageType:this.pageType},conditionName:"",treeProps:{label:"text",children:"children"},dataQuery:{fundId:""},setQueryMsg:!1,fundTypeList:[],dataSourceList:[],fundList:[],conditionList:[],bankList:[]}},computed:{showDone:{get:function(){return"1"==this.queryConditions.show_busin_done},set:function(t){this.queryConditions.show_busin_done=t?"1":"0"}},isDefault:{get:function(){return"1"==this.queryConditions.default_flag},set:function(t){this.queryConditions.default_flag=t?"1":"0"}}},props:{queryUrl:{type:String,default:"/common/fundName.json"},showToDo:{type:Boolean,default:!1},showAll:{type:Boolean,default:!1},isSettle:{type:Boolean,default:!1},extendButton:{type:Boolean,default:!1},height:[Number,String],onFundClick:{type:Function,default:function(t){}},onFundQuery:{type:Function,default:function(t){}},pageType:{pageType:{type:String,default:""}}},watch:{filterText:function(t){this.$refs.fundTree.filter(t)},setQueryMsg:function(t){t?this.openMask():this.closeMask()}},activated:function(){var t=this;this.handleOK(),Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundList=e.data)}),Object(n.j)("1").then(function(e){e.data&&e.data.length>0&&(t.bankList=e.data)})},created:function(){var t=this;this.loadCondition(),Object(n.t)(610087).then(function(e){e.data&&e.data.length>0&&(t.fundTypeList=e.data)}),Object(n.t)(90528).then(function(e){e.data&&e.data.length>0&&(t.dataSourceList=e.data)})},methods:{nodeClick:function(t){this.onFundClick(t),this.oldId=t.code},filterNode:function(t,e){return!t||-1!==e.text.indexOf(t)},openQuery:function(){this.activeNames=["1"],this.setQueryMsg=!0},showBusinDoneChange:function(t){if(t){this.fundTreeTmp=this.fundTree;for(var e=this.fundTree[0].children,a=[],n="",s=0;s<e.length;s++){for(var i=e[s].children,o={},r="",l=[],c=0;c<i.length;c++){var u=i[c];null!=u.count&&0!=u.count&&(""===r?r+=u.code:r=r+","+u.code,l.push(u))}""===n?n+=r:n=n+","+r,null!=r&&""!=r&&(o.code=r,o.text=e[s].text,o.children=l,a.push(o))}this.fundTree=null==a||""==a?[{text:"暂无数据",code:""}]:[{text:"全部",code:n,children:a}]}else this.fundTree=this.fundTreeTmp},handleConditionQuery:function(t){var e=this;t&&(this.showBusinDone=!1,Object(n.F)(t).then(function(t){if(0==t.data.code){var a=t.data.data;a&&(e.queryConditions.condition_id=a.condition_id,e.queryConditions.name=a.condition_name,e.queryConditions.data_source=a.data_source?a.data_source.toString():"",e.queryConditions.default_flag="1",e.queryConditions.transfer_flag=a.transfer_flag,e.queryConditions.fund_trust_bank=a.fund_trust_bank?a.fund_trust_bank.toString():"",e.queryConditions.fund_id_list=null!=a.fund_id_list&&""!=a.fund_id_list?a.fund_id_list.split(","):[],e.queryConditions.fund_status=null!=a.fund_status_list&&""!=a.fund_status_list?a.fund_status_list.split(","):[],e.queryConditions.fund_type=null!=a.fund_type_list&&""!=a.fund_type_list?a.fund_type_list.split(","):[],e.queryConditions.show_busin_done="1",e.queryConditions.show_today_flag=e.showToday,e.conditionName=a.condition_name);var s={condition_id:e.queryConditions.condition_id,data_source:e.queryConditions.data_source,fund_id_list:e.queryConditions.fund_id_list.join(","),fund_status_list:e.queryConditions.fund_status.join(","),fund_type_list:e.queryConditions.fund_type.join(","),condition_name:e.queryConditions.name,transfer_flag:e.queryConditions.transfer_flag,default_flag:"1",fund_trust_bank:e.queryConditions.fund_trust_bank,show_busin_done:"1",show_today_flag:e.showToday};Object(n.W)(s).then(function(t){}),Object(n.w)(e.queryUrl,e.queryConditions).then(function(t){if(t.data.length>0){if(e.showAll){for(var a="",n=[],s=0;s<t.data.length;s++){var i={};i.text=t.data[s].text,i.code=t.data[s].code;var o="",r=[];if(null!=t.data[s].fundTransferCountList){for(var l=0;l<t.data[s].fundTransferCountList.length;l++){""===o?o+=t.data[s].fundTransferCountList[l].fund_id:o=o+","+t.data[s].fundTransferCountList[l].fund_id;var c={};c.text=t.data[s].fundTransferCountList[l].fund_name,c.code=t.data[s].fundTransferCountList[l].fund_id.toString(),c.count=t.data[s].fundTransferCountList[l].transfer_count,r.push(c)}i.code=o,i.children=r,""===a?a+=o:a=a+","+o}else""===a?a+=t.data[s].code:a=a+","+t.data[s].code;n.push(i)}e.fundTree=[{text:"全部",code:a,children:n}],e.onFundClick({code:a})}else e.fundTree=t.data,e.onFundClick(e.fundTree[0]);e.onFundQuery(e.fundTree),e.filterText=""}else e.fundTree=[{text:"暂无数据",code:""}],e.onFundClick({code:""})}).catch(function(t){console.log(t)})}else e.openMask(),e.$alert(t.data.desc,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})}))},handleOK:function(){var t=this;this.queryConditions.show_today_flag=this.showToday,this.queryConditions.show_busin_done="1",this.showBusinDone=!1,Object(n.w)(this.queryUrl,this.queryConditions).then(function(e){if(e.data.length>0){var a="";if(t.showAll){for(var n=[],s=0;s<e.data.length;s++){var i={};i.text=e.data[s].text,i.code=e.data[s].code;var o="",r=[];if(null!=e.data[s].fundTransferCountList){for(var l=0;l<e.data[s].fundTransferCountList.length;l++){""===o?o+=e.data[s].fundTransferCountList[l].fund_id:o=o+","+e.data[s].fundTransferCountList[l].fund_id;var c={};c.text=e.data[s].fundTransferCountList[l].fund_name,c.code=e.data[s].fundTransferCountList[l].fund_id.toString(),c.count=e.data[s].fundTransferCountList[l].transfer_count,r.push(c)}i.code=o,""===a?a+=o:a=a+","+o,i.children=r}else""===a?a+=e.data[s].code:a=a+","+e.data[s].code;n.push(i)}t.fundTree=[{text:"全部",code:a,children:n}],t.oldId&&a.indexOf(t.oldId)>=0&&t.oldId.indexOf(",")<0?t.onFundClick({code:t.oldId}):t.onFundClick({code:a})}else{var u=e.data.reduce(function(t,e){return{code:t.code+","+e.code}}).code;t.fundTree=e.data,t.oldId&&u.indexOf(t.oldId)>=0&&t.oldId.indexOf(",")<0?t.onFundClick(e.data.filter(function(e){return e.code==t.oldId})[0]):t.onFundClick({code:u})}t.onFundQuery(t.fundTree),t.filterText=""}else t.fundTree=[{text:"暂无数据",code:""}],t.onFundClick({code:""})}).catch(function(t){console.log(t)}),this.setQueryMsg=!1},handleSave:function(){var t=this,e=!0;if(this.$refs.queryConditions.validate(function(t){return e=e&&t}),e){var a={condition_id:this.queryConditions.condition_id,data_source:this.queryConditions.data_source,fund_id_list:this.queryConditions.fund_id_list.join(","),fund_status_list:this.queryConditions.fund_status.join(","),fund_type_list:this.queryConditions.fund_type.join(","),condition_name:this.queryConditions.name,transfer_flag:this.queryConditions.transfer_flag,default_flag:"0",fund_trust_bank:this.queryConditions.fund_trust_bank,show_busin_done:this.queryConditions.show_busin_done,show_today_flag:"0"};a.condition_id&&this.conditionName!=a.condition_name?this.$confirm("检测到当前条件名称已修改，请选择是否保留原条件","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"覆盖到原条件",cancelButtonText:"保存为新条件"}).then(function(){t.saveCondition(a)}).catch(function(e){a.condition_id=null,t.saveCondition(a)}):this.saveCondition(a)}else this.$alert("名称不能为空!","错误",{confirmButtonText:"确定",type:"error"})},saveCondition:function(t){var e=this;Object(n.W)(t).then(function(a){a.data.success?(e.$alert("保存成功","提示",{confirmButtonText:"确定",type:"success"}),e.loadCondition()):"1120003"==a.data.code?e.$confirm("条件名称不能重复，是否覆盖同名条件？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.condition_id=a.data.data,e.saveCondition(t)}):e.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})},handleCancel:function(){this.setQueryMsg=!1},handleDelete:function(){var t=this;this.queryConditions.condition_id?this.$confirm("确定删除所选条件？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.d)(t.queryConditions.condition_id).then(function(e){t.$alert("删除成功","提示",{confirmButtonText:"确定",type:"info"}),t.resetCondition(),t.setQueryMsg=!1,t.loadCondition()})}):this.$alert("未选中查询条件","错误",{confirmButtonText:"确定",type:"error"})},resetCondition:function(){this.queryConditions={name:"",default_flag:"0",condition_id:null,keyword:"",data_source:"",fund_id_list:[],fund_status:["1"],fund_type:[],fund_trust_bank:"",transfer_flag:"1",isSettle:this.isSettle},this.queryConditions.condition_id=null,this.queryConditions.pageType=this.pageType},loadCondition:function(){var t=this;Object(n.M)().then(function(e){if(e.data&&e.data.length>0)t.conditionList=e.data;else{var a={condition_name:"未找到数据"};t.conditionList[0]=a}})},getFundList:function(){return this.fundList},getQueryCondition:function(){return this.queryConditions},clear:function(){this.oldId=null}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fund-tree"},[a("h-row",[a("div",{staticClass:"buttons-ctr2"},[a("h-input",{staticStyle:{width:"70%"},attrs:{placeholder:"输入“关键字”搜索"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),a("div",{staticClass:"buttons-ctr2"},[a("div",{staticClass:"seniorquery-ctr",on:{click:t.openQuery,command:t.handleConditionQuery}},[a("i",{staticClass:"iconfont icon-gaojichaxun"})]),t._v(" "),a("div",[a("el-dropdown",{attrs:{size:"mini"},on:{click:t.openQuery,command:t.handleConditionQuery}},[a("div",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-top":"6px"}})]),t._v(" "),t.conditionList.length>0?a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.conditionList,function(e){return a("el-dropdown-item",{key:e.condition_id,attrs:{command:e.condition_id}},[t._v("\n                            "+t._s(e.condition_name)+"\n                        ")])}),1):a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("\n                            暂无数据\n                        ")])],1)],1)],1)])],1)]),t._v(" "),a("div",{staticClass:"auto-height",staticStyle:{"margin-top":"10px"}},[a("el-scrollbar",{staticClass:"h-scrollbar",staticStyle:{height:"100%"}},[a("el-tree",{ref:"fundTree",attrs:{data:t.fundTree,props:t.treeProps,"node-key":"code","default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.nodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(n.label))]),t._v(" "),"全部"!=n.label&&"暂无数据"!=n.label||!t.showToDo?t._e():a("span",{staticStyle:{position:"relative",left:"25px"}},[a("el-dropdown",{attrs:{size:"mini",placement:"bottom"},on:{click:t.openQuery,command:t.handleConditionQuery}},[a("div",{staticClass:"el-dropdown-link0"},[a("SwitchIcon",{attrs:{names:["icon-shaixuan","icon-morenshaixuan"]}})],1),t._v(" "),a("el-dropdown-menu",{staticClass:"fund-filter-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox",{staticClass:"el-checkbox-str0",on:{change:t.showBusinDoneChange},model:{value:t.showBusinDone,callback:function(e){t.showBusinDone=e},expression:"showBusinDone"}},[t._v("隐藏无待办 ")])],1)],1)],1)])}}])})],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"700","mask-closable":!1},model:{value:t.setQueryMsg,callback:function(e){t.setQueryMsg=e},expression:"setQueryMsg"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("高级查询")])]),t._v(" "),a("h-form",{ref:"queryConditions",attrs:{model:t.queryConditions,"label-width":110,cols:"2"}},[a("h-row",{style:{"margin-top":"5px","margin-bottom":"5px"}},[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"产品",prop:"fund_id_list"}},[a("el-select",{attrs:{size:"mini",filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.queryConditions.fund_id_list,callback:function(e){t.$set(t.queryConditions,"fund_id_list",e)},expression:"queryConditions.fund_id_list"}},t._l(t.fundList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"产品状态",prop:"fund_status"}},[a("el-select",{attrs:{size:"mini",multiple:"",clearable:"","collapse-tags":""},model:{value:t.queryConditions.fund_status,callback:function(e){t.$set(t.queryConditions,"fund_status",e)},expression:"queryConditions.fund_status"}},[a("el-option",{key:"1",attrs:{value:"1",label:"正常"}}),t._v(" "),a("el-option",{key:"2",attrs:{value:"2",label:"注销"}}),t._v(" "),a("el-option",{key:"3",attrs:{value:"3",label:"冻结"}})],1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"是否划款",prop:"transfer_flag"}},[a("el-select",{attrs:{size:"mini",clearable:""},model:{value:t.queryConditions.transfer_flag,callback:function(e){t.$set(t.queryConditions,"transfer_flag",e)},expression:"queryConditions.transfer_flag"}},[a("el-option",{key:"1",attrs:{value:"1",label:"是"}}),t._v(" "),a("el-option",{key:"0",attrs:{value:"0",label:"否"}})],1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"产品类型",prop:"fund_type"}},[a("el-select",{attrs:{size:"mini",filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.queryConditions.fund_type,callback:function(e){t.$set(t.queryConditions,"fund_type",e)},expression:"queryConditions.fund_type"}},t._l(t.fundTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"托管人",prop:"fund_trust_bank"}},[a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},model:{value:t.queryConditions.fund_trust_bank,callback:function(e){t.$set(t.queryConditions,"fund_trust_bank",e)},expression:"queryConditions.fund_trust_bank"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"产品来源",prop:"data_source"}},[a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},model:{value:t.queryConditions.data_source,callback:function(e){t.$set(t.queryConditions,"data_source",e)},expression:"queryConditions.data_source"}},t._l(t.dataSourceList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1)],1),t._v(" "),a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"保存条件",name:"1"}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"名称",prop:"name",required:""}},[a("h-input",{model:{value:t.queryConditions.name,callback:function(e){t.$set(t.queryConditions,"name",e)},expression:"queryConditions.name"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}}),t._v(" "),a("h-col",{attrs:{span:"3"}},[a("h-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"error"},on:{click:t.handleDelete}},[t._v("删除")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.handleOK}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("1BUM"),a("FrfD")},null,null);e.a=d.exports},HoYU:function(t,e){},I5RA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),i=a("QTaZ"),o=a("3dxc"),r=a("IWLE"),l=a("Q5rI"),c={name:"AccBalanceTooltipTable",props:{datas:{type:Array,default:function(){return[]}}},data:function(){return{}},created:function(){},mounted:function(){},activated:function(){},methods:{formatMoney:l.h},components:{}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-tooltip-table"},[a("div",{staticClass:"table",on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._v(" "),t._l(t.datas,function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"cell"},[t._v(t._s(e.accName))]),t._v(" "),a("div",{staticClass:"cell fontWeightBold"},[t._v(t._s(t.formatMoney(e.balance)))])])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row head"},[e("div",{staticClass:"cell"},[this._v("账户名称")]),this._v(" "),e("div",{staticClass:"cell"},[this._v("余额")])])}]};var d=a("VU/8")(c,u,!1,function(t){a("TzAD")},null,null).exports,f=a("mvHQ"),p=a.n(f),h=a("5/bi");var _=a("jV6A"),m=a("lbHh"),b=a.n(m),v=a("+dCm"),g=a("7+uW");g.default.component("AccBalanceTooltipTable",g.default.extend(d));var y={mixins:[v.a],data:function(){var t=this,e=[{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"center"},{title:"产品名称",key:"fund_name",ellipsis:!0,align:"center"},{title:"托管户/自营账户余额",key:"account_cur_balance",width:145,ellipsis:!0,align:"center",render:function(t,e){var a=e.row,n=Object(l.h)(a.account_cur_balance),i=[];if(a.accname_balance_sum){var o=a.accname_balance_sum.split(",");if(o&&o.length>0){var r=!0,c=!1,u=void 0;try{for(var d,f=s()(o);!(r=(d=f.next()).done);r=!0){var p=d.value.split("|");p&&3===p.length&&i.push({accName:p[1],balance:p[2]})}}catch(t){c=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(c)throw u}}}}var h=t("AccBalanceTooltipTable",{props:{datas:i}});return t("div",[t("Tooltip",{class:{"accbalance-tooltip-table":!0},props:{always:!1,delay:400,trigger:"hover",placement:"bottom-start"}},[t("span",{style:{fontWeight:"bold"}},n),t("span",{slot:"content"},[h])])])}},{title:"更新时间",key:"input_time",width:70,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(0,a.input_time))}},{title:"上清DVP余额",key:"sq_dvp_balance",ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(l.h)(a.sq_dvp_balance))}},{title:"更新时间",key:"sq_input_time",width:70,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(0,a.sq_input_time))}},{title:"中债DVP余额",key:"zz_dvp_balance",ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(l.h)(a.zz_dvp_balance))}},{title:"更新时间",key:"zz_input_time",width:70,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(l.R)(0,a.zz_input_time))}}],a=[{title:"交易日期",key:"curr_date",width:100,ellipsis:!0,align:"center"},{title:"银行账户",key:"bank_account_no",width:140,ellipsis:!0,align:"center"},{title:"账户名称",key:"bank_account_name",width:140,ellipsis:!0,align:"center"},{title:"资金方向",key:"cash_direction",width:100,ellipsis:!0,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(l._1)(n.cash_direction,t.cashDirectionList))}},{title:"对方银行账户",key:"rival_account_no",width:140,ellipsis:!0,align:"center"},{title:"对方账户名称",key:"rival_account_name",width:100,ellipsis:!0,align:"center"},{title:"交易金额",key:"trade_balance",width:140,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(l.h)(a.trade_balance))}},{title:"账户余额",key:"bank_remain_balance",width:100,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(l.h)(a.bank_remain_balance))}},{title:"摘要",key:"transfer_remark",width:100,ellipsis:!0,align:"center"},{title:"用途",key:"transfer_purpose",width:100,ellipsis:!0,align:"center"},{title:"附言",key:"transfer_postscript",width:100,ellipsis:!0,align:"center"},{title:"备注",key:"remark",ellipsis:!0,align:"center"}];return{split:.15,accountCashModel:!1,accountCashList:[],dataQuery:{fundId:"-1",queryDate:b.a.get("CurrSysDate")},tradeFlowQuery:{fundId:0,accountId:0,queryDate:b.a.get("CurrSysDate")},pageSizeOpts:[25,50,75,100],columns:e,tradeFlowColumns:a,fundCashInfo:{fund_id:"",fund_code:"",fund_name:"",curr_date:0,sq_dvp_balance:0,sq_input_time:0,sq_account_id:0,zz_dvp_balance:0,zz_input_time:0,zz_account_id:0,account_cur_balance:0,input_time:0,bank_account_id:0,transfer_type:null,fund_cash_list:[]},adjustable:!1,sqadjustable:!1,zzadjustable:!1,cashDirectionList:[{code:"0",text:"不变化"},{code:"1",text:"增加"},{code:"2",text:"减少"}],prodGridWidth:0,cashFlowQueryType:"",cashFlowMsgBoxShow:!1}},watch:{accountCashModel:function(t){t?this.openMask():this.closeMask()}},computed:{queryDate:{get:function(){return this.dataQuery.queryDate?Object(l.R)(this.dataQuery.queryDate):Object(l.R)(b.a.get("CurrSysDate"))},set:function(t){this.dataQuery.queryDate=Object(l.Q)(t),this.tradeFlowQuery.queryDate=Object(l.Q)(t)}}},created:function(){},mounted:function(){this.reLayout()},methods:{reLayout:function(){this.re_layout("full-h-wrapper-on-fundcashreport","inner-on-fundcashreport",220)},fundClick:function(t){t&&(t.code.split(",").length>1?this.dataQuery.fundId=null:this.dataQuery.fundId=t.code,this.cashQuery())},cashQuery:function(){this.$refs.datagrid.dataChange(1),this.$refs.tradeFlowGrid.clearData()},cashExport:function(){this.$refs.datagrid.exportCsv({filename:"产品余额报表",original:!1})},cashModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):this.dataQuery.queryDate<b.a.get("CurrSysDate")?(this.openMask(),void this.$alert("不允许调整小于当日的账户余额","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(this.fundCashInfo=Object(_.a)(e[0]),this.setFundCashList(),"1"!=e[0].transfer_type?this.adjustable=!0:this.adjustable=!1,null!=e[0].sq_account_id?this.sqadjustable=!0:this.sqadjustable=!1,null!=e[0].zz_account_id?this.zzadjustable=!0:this.zzadjustable=!1,void(this.accountCashModel=!0))},ModifyCancle:function(){this.accountCashModel=!1},ModifyOK:function(){var t,e=this;(t=this.fundCashInfo,h.a.post("/cashMgnt/fundCash/submitFundCash.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return p()(t)}})).then(function(t){t&&(1==t.data.success?(e.$alert("资金调整成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.accountCashModel=!1}}).then(function(){e.accountCashModel=!1}),e.cashQuery()):e.$alert("资金调整失败","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){e.accountCashModel=!1}}).then(function(){e.accountCashModel=!1}))})},rowClick:function(t){this.fundCashInfo=Object(_.a)(t[0]),this.setFundCashList(),this.tradeFlowQuery.fundId=this.fundCashInfo.fund_id,this.tradeFlowQuery.accountId=this.fundCashInfo.bank_account_id,this.$refs.tradeFlowGrid.dataChange(1)},onSplitMove:function(){this.$refs.datagrid.handleResize(),this.$refs.tradeFlowGrid.handleResize()},cashMsgOpen:function(){this.cashFlowMsgBoxShow=!0,this.cashFlowQueryType="1",this.$refs.accCashFlowQueryMsg.resetCashFlowQueryForm()},flowMsgOpen:function(){this.cashFlowMsgBoxShow=!0,this.cashFlowQueryType="2",this.$refs.accCashFlowQueryMsg.resetCashFlowQueryForm()},onCashFlowClose:function(){this.cashFlowMsgBoxShow=!1},onCashFlowRefresh:function(){this.cashQuery()},setFundCashList:function(){if(this.fundCashInfo.fund_cash_list=[],this.fundCashInfo.accname_balance_sum){var t=this.fundCashInfo.accname_balance_sum.split(",");if(t&&t.length>0){var e=!0,a=!1,n=void 0;try{for(var i,o=s()(t);!(e=(i=o.next()).done);e=!0){var r=i.value.split("|");if(r&&3===r.length){var l=Object(_.a)(this.fundCashInfo);l.bank_account_id=r[0],l.bank_account_name=r[1],l.account_cur_balance=r[2],this.fundCashInfo.fund_cash_list.push(l)}}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}}}}},name:"Check",components:{HDatagrid:o.a,HOtherFundTree:i.a,accCashFlowQueryMsgBox:r.a}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{showAll:!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{ref:"right",staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-fundcashreport"},slot:"right"},[a("div",[a("h-row",{attrs:{id:"inner-on-fundcashreport"}},[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.dataQuery}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.cashQuery}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashModify}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashMsgOpen}},[t._v("余额查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.flowMsgOpen}},[t._v("流水查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.cashExport}},[t._v("导出")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{"margin-top":"10px"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:t.autoHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.dataQuery,columns:t.columns,onRowClick:t.rowClick,url:"/cashMgnt/fundCash/fundCashReport.json"}}),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"5px"},attrs:{"tab-position":"top"}},[a("el-tab-pane",{attrs:{label:"托管户/自营账户流水"}},[a("h-datagrid",{ref:"tradeFlowGrid",staticStyle:{overflow:"hidden"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:"150",pageSize:100,bindForm:t.tradeFlowQuery,columns:t.tradeFlowColumns,url:"/cashMgnt/fundCash/tradeFlowQuery.json"}})],1)],1)],1)])]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"320",title:"资金调整",inline:""},model:{value:t.accountCashModel,callback:function(e){t.accountCashModel=e},expression:"accountCashModel"}},[a("div",[a("h-form",{attrs:{"label-width":85}},[a("h-form-item",{attrs:{label:"产品名称"}},[a("h-input",{attrs:{readonly:"",type:"text"},model:{value:t.fundCashInfo.fund_name,callback:function(e){t.$set(t.fundCashInfo,"fund_name",e)},expression:"fundCashInfo.fund_name"}})],1),t._v(" "),t._l(t.fundCashInfo.fund_cash_list,function(e){return a("h-form-item",{key:e.bank_account_id,attrs:{label:e.bank_account_name}},[a("h-typefield",{attrs:{integerNum:"15",type:"money",divided:"",placeholder:"请输入",readonly:!t.adjustable&&"readonly"},model:{value:e.account_cur_balance,callback:function(a){t.$set(e,"account_cur_balance",a)},expression:"item.account_cur_balance"}})],1)}),t._v(" "),a("h-form-item",{attrs:{label:"上清DVP余额"}},[a("h-typefield",{attrs:{integerNum:"15",type:"money",divided:"",placeholder:"请输入",readonly:!t.sqadjustable&&"readonly"},model:{value:t.fundCashInfo.sq_dvp_balance,callback:function(e){t.$set(t.fundCashInfo,"sq_dvp_balance",e)},expression:"fundCashInfo.sq_dvp_balance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"中债DVP金额"}},[a("h-typefield",{attrs:{integerNum:"15",type:"money",divided:"",placeholder:"请输入",readonly:!t.zzadjustable&&"readonly"},model:{value:t.fundCashInfo.zz_dvp_balance,callback:function(e){t.$set(t.fundCashInfo,"zz_dvp_balance",e)},expression:"fundCashInfo.zz_dvp_balance"}})],1)],2)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.ModifyCancle}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.ModifyOK}},[t._v("确定")])],1)]),t._v(" "),a("accCashFlowQueryMsgBox",{ref:"accCashFlowQueryMsg",attrs:{msgBoxShow:t.cashFlowMsgBoxShow,queryType:t.cashFlowQueryType,includeSelfRun:!0},on:{onCashFlowClose:t.onCashFlowClose,onOutRefresh:t.onCashFlowRefresh}})],1)},staticRenderFns:[]};var w=a("VU/8")(y,k,!1,function(t){a("s4gM")},null,null);e.default=w.exports},IWLE:function(t,e,a){"use strict";var n=a("Q5rI"),s=a("X8Gq"),i=a("lbHh"),o=a.n(i),r={name:"accCashFlowQueryMsgBox",data:function(){return{fundIdList:[],bankAccountList:[],custodianList:[],loading:!1,cashFlowQueryInfo:{fund_id:"",custodial_no:"",custodial_name:"",bank_account_no:"",bank_account_name:"",queryDate:o.a.get("CurrSysDate"),queryType:""}}},props:{msgBoxShow:{type:Boolean,default:!1},queryType:{type:String,default:""},includeSelfRun:{type:Boolean,default:!1}},watch:{queryType:{handler:function(t){this.cashFlowQueryInfo.queryType=t},immediate:!0}},computed:{msgBoxShowNew:{get:function(){return this.msgBoxShow},set:function(t){!1===t&&this.$emit("onCashFlowClose")}}},activated:function(){var t=this;Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data}),Object(n.j)("1").then(function(e){e.data&&e.data.length>0&&(t.custodianList=e.data)}).catch(function(t){console.log(t)})},methods:{fundIdChange:function(t){var e=this;this.cashFlowQueryInfo.bank_account_no="",this.cashFlowQueryInfo.bank_account_name="",this.cashFlowQueryInfo.custodial_no="",this.cashFlowQueryInfo.custodial_name="",this.bankAccountList=[],Object(s.a)(t,this.includeSelfRun).then(function(t){return e.bankAccountList=t.data})},bankAccNoChange:function(t){if(this.cashFlowQueryInfo.bank_account_name="",this.cashFlowQueryInfo.custodial_no="",this.cashFlowQueryInfo.custodial_name="",t){var e=this.bankAccountList.filter(function(e){return e.bank_account_id===t});e&&e.length>0&&(this.cashFlowQueryInfo.bank_account_name=e[0].bank_account_name,this.cashFlowQueryInfo.custodial_no=e[0].custodial_no,this.cashFlowQueryInfo.custodial_name=Object(n._1)(e[0].custodial_no,this.custodianList),this.cashFlowQueryInfo.bank_account_no=e[0].bank_account_no)}},resetCashFlowQueryForm:function(){this.$refs.cashFlowQueryForm.resetFields(),this.cashFlowQueryInfo.queryDate=o.a.get("CurrSysDate"),this.loading=!1},cancelCashFlowQuery:function(){this.msgBoxShowNew=!1},cashFlowQuery:function(){var t=this,e=!0;this.$refs.cashFlowQueryForm.validate(function(t){return e=e&&t}),e?(this.loading=!0,Object(s.c)(this.cashFlowQueryInfo.fund_id,this.cashFlowQueryInfo.custodial_no,this.cashFlowQueryInfo.bank_account_no,this.cashFlowQueryInfo.queryDate,this.cashFlowQueryInfo.queryType).then(function(e){e&&200==e.status?1==e.data.success?(t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.msgBoxShowNew=!1}}).then(function(){t.msgBoxShowNew=!1}),t.$emit("onOutRefresh")):(t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"}),t.msgBoxShowNew=!1):(t.$alert("余额查询失败","错误",{confirmButtonText:"确定",type:"error"}),t.msgBoxShowNew=!1)})):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.msgBoxShowNew,callback:function(e){t.msgBoxShowNew=e},expression:"msgBoxShowNew"}},[a("p",{attrs:{slot:"header"},slot:"header"},["1"===t.queryType?a("span",[t._v("余额查询")]):"2"===t.queryType?a("span",[t._v("流水查询")]):t._e()]),t._v(" "),a("h-form",{ref:"cashFlowQueryForm",attrs:{model:t.cashFlowQueryInfo,"label-width":80}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.fundIdChange},model:{value:t.cashFlowQueryInfo.fund_id,callback:function(e){t.$set(t.cashFlowQueryInfo,"fund_id",e)},expression:"cashFlowQueryInfo.fund_id"}},t._l(t.fundIdList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_id"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.bankAccNoChange},model:{value:t.cashFlowQueryInfo.bank_account_id,callback:function(e){t.$set(t.cashFlowQueryInfo,"bank_account_id",e)},expression:"cashFlowQueryInfo.bank_account_id"}},t._l(t.bankAccountList,function(t){return a("h-option",{key:t.bank_account_id,attrs:{label:t.bank_account_no,value:t.bank_account_id}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{disabled:!0},model:{value:t.cashFlowQueryInfo.bank_account_name,callback:function(e){t.$set(t.cashFlowQueryInfo,"bank_account_name",e)},expression:"cashFlowQueryInfo.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"托管人名称",prop:"custodial_name"}},[a("h-input",{attrs:{disabled:!0},model:{value:t.cashFlowQueryInfo.custodial_name,callback:function(e){t.$set(t.cashFlowQueryInfo,"custodial_name",e)},expression:"cashFlowQueryInfo.custodial_name"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelCashFlowQuery}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.cashFlowQuery}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("48yI")},"data-v-1d3c94a4",null);e.a=c.exports},IcDW:function(t,e){},IrRI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("voR+"),s={name:"balAccTemple",components:{BalAccFinalTemple:a("ic02").default,BalAccInitTemple:n.default},data:function(){return{tabPosition:"top"}},mounted:function(){this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight-t-190,a=document.getElementById("full-h-wrapper").offsetHeight-t-190;this.$refs.initTemple.resizeTable(e),this.$refs.finalTemple.resizeTable(a)},handleClick:function(t,e){if("日初对账"==t.label){var a=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,n=document.getElementById("full-h-wrapper").offsetHeight-a-190;this.$refs.initTemple.resizeTable(n),this.$refs.initTemple.refresh()}else if("日终对账"==t.label){var s=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,i=document.getElementById("full-h-wrapper").offsetHeight-s-191;this.$refs.finalTemple.resizeTable(i),this.$refs.finalTemple.refresh()}}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[e("el-tabs",{attrs:{"tab-position":this.tabPosition},on:{"tab-click":this.handleClick}},[e("el-tab-pane",{attrs:{label:"日初对账"}},[e("bal-acc-init-temple",{ref:"initTemple"})],1),this._v(" "),e("el-tab-pane",{attrs:{label:"日终对账"}},[e("bal-acc-final-temple",{ref:"finalTemple"})],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("czgE")},"data-v-6a8015b0",null);e.default=o.exports},JO0C:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferRecordEnd",data:function(){return{}},components:{transferRecord:a("f2ye").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("transferRecord",{attrs:{pageType:"2"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},JfAr:function(t,e){},JhDS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("X8Gq"),i=a("lbHh"),o=a.n(i),r=a("eUNJ"),l=a("3dxc"),c=a("IWLE"),u={mixins:[a("+dCm").a],name:"accFlowQuery",components:{BankTree:r.a,HDatagrid:l.a,accCashFlowQueryMsgBox:c.a},data:function(){var t=this;return{loading:!1,split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],showFlowQueryDialog:!1,showMultipleQueryDialog:!1,bankNoList:[],bankAccountNameList:[],bankAccountNoList:[],queryStatusList:[],fundIdList:[],sysDate:o.a.get("CurrSysDate"),accFlowColumns:[{title:"托管人查询序号",key:"query_id",align:"center",hiddenCol:!0},{title:"日期",key:"curr_date",align:"center",sortable:!0,ellipsis:!0},{title:"托管人编号",key:"custodial_no",align:"center",ellipsis:!0,sortable:!0},{title:"托管人名称",key:"custodian_name",align:"center",ellipsis:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"银行账号",key:"bank_account_no",align:"center",ellipsis:!0},{title:"账户名称",key:"bank_account_name",align:"center",ellipsis:!0},{title:"账户编号",key:"bank_account_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"查询状态",key:"query_status",align:"center",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.query_status,t.queryStatusList))}},{title:"备注",key:"remark",align:"center",ellipsis:!0}],tradeFlowColumns:[{title:"交易日期",key:"curr_date",align:"center",ellipsis:!0,sortable:!0},{title:"银行账号",key:"bank_account_no",align:"center",ellipsis:!0},{title:"账户名称",key:"bank_account_name",align:"center",ellipsis:!0},{title:"出入款方向",key:"cash_direction",align:"center",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.cash_direction,t.cashDirectionList))}},{title:"对方银行账户",key:"rival_account_no",align:"center",ellipsis:!0},{title:"对方账户名称",key:"rival_account_name",align:"center",ellipsis:!0},{title:"交易金额",key:"trade_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(n.h)(a.trade_balance))}},{title:"账户余额",key:"bank_remain_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(n.h)(a.bank_remain_balance))}},{title:"摘要",key:"transfer_remark",align:"center",ellipsis:!0},{title:"款项用途",key:"transfer_purpose",align:"center",ellipsis:!0},{title:"附言",key:"transfer_postscript",align:"center",ellipsis:!0},{title:"备注",key:"remark",align:"center",ellipsis:!0}],multipleFlowColumns:[{type:"selection",width:45,align:"left"},{title:"托管人查询序号",key:"query_id",align:"center",hiddenCol:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品代码",key:"fund_code",align:"center",ellipsis:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"托管人编号",key:"custodial_no",align:"center",ellipsis:!0,sortable:!0},{title:"托管人名称",key:"custodian_name",align:"center",ellipsis:!0},{title:"银行账号",key:"bank_account_no",align:"center",ellipsis:!0},{title:"账户名称",key:"bank_account_name",align:"center",ellipsis:!0},{title:"账户编号",key:"bank_account_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"查询状态",key:"query_status",align:"center",ellipsis:!0,render:function(e,a){var s=a.row,i=Object(n._1)(s.query_status,t.queryStatusList);return i||(i="未查询"),e("span",{},i)}}],queryForm:{queryDate:o.a.get("CurrSysDate"),custodialNo:""},flowQueryInfo:{fund_id:"",custodial_no:"",bank_account_name:"",bank_account_no:"",queryDate:"",queryType:"2"},multipleBindForm:{queryDateBatch:"",queryTypeBatch:"2"},accFlowQuery:{queryDate:"",fundId:"",accountId:""},cashDirectionList:[{code:"1",text:"入款"},{code:"2",text:"出款"}],flowQueryType:"",flowMsgBoxShow:!1}},watch:{showFlowQueryDialog:function(t){t?this.openMask():this.closeMask()},showMultipleQueryDialog:function(t){t?this.openMask():this.closeMask()}},computed:{queryDate:{get:function(){return this.queryForm.queryDate?Object(n.R)(this.queryForm.queryDate):Object(n.R)(this.sysDate)},set:function(t){this.queryForm.queryDate=Object(n.Q)(t)}}},mounted:function(){var t=this;this.reLayout(),Object(n.t)(90520).then(function(e){return t.queryStatusList=e.data})},activated:function(){var t=this;Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data})},methods:{reLayout:function(){this.re_layout("full-h-wrapper-on-accflowquery","inner-on-accflowquery",220)},bankClick:function(t){t&&(t.code.split(",").length>1&&(t.code=""),this.queryForm.custodialNo=t.code,this.refresh())},refresh:function(){this.$refs.datagrid.dataChange(1),this.$refs.flowquerydatagrid.clearData()},flowRefresh:function(){this.flowMsgBoxShow=!0,this.flowQueryType="2",this.$refs.accFlowQueryMsg.resetCashFlowQueryForm()},multipleRefresh:function(){this.multipleBindForm.queryDateBatch=Object(n.Q)(this.sysDate),this.multipleBindForm.queryTypeBatch="2",this.$refs.multipleflowdatagrid.dataChange(1),this.showMultipleQueryDialog=!0,this.loading=!1},rowClick:function(t){this.accFlowQuery.queryDate=this.queryForm.queryDate,this.accFlowQuery.fundId=null,this.accFlowQuery.accountId=t[0].bank_account_id,this.$refs.flowquerydatagrid.dataChange(1)},multipleCancel:function(){this.showMultipleQueryDialog=!1},multipleSave:function(){var t=this,e=this.$refs.multipleflowdatagrid.$refs.gridContent.getSelection();if(0!=e.length){for(var a="",n=0;n<e.length;n++)a+=e[n].fund_id+","+e[n].custodial_no+","+e[n].bank_account_no+","+e[n].query_id+"|";a=a.substring(0,a.length-1),this.loading=!0,Object(s.b)(this.multipleBindForm.queryTypeBatch,this.multipleBindForm.queryDateBatch,a).then(function(e){e&&200==e.status?1==e.data.success?(t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showMultipleQueryDialog=!1}}).then(function(){t.showMultipleQueryDialog=!1}),t.refresh()):(t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"}),t.showMultipleQueryDialog=!1):(t.$alert("批量查询失败","错误",{confirmButtonText:"确定",type:"error"}),t.showMultipleQueryDialog=!1)})}else this.$alert("请选择要查询的记录","错误",{confirmButtonText:"确定",type:"error"})},onFlowClose:function(){this.flowMsgBoxShow=!1},onFlowRefresh:function(){this.refresh()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("bank-tree",{ref:"bankTree",attrs:{onBankClick:t.bankClick,showAll:!0,"query-url":"/common/treeElcBank.json"}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",id:"full-h-wrapper-on-accflowquery"},slot:"right"},[a("h-row",{attrs:{id:"inner-on-accflowquery"}},[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px",float:"left"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{clearable:!1,type:"date",placeholder:"选择日期"},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.flowRefresh}},[t._v("流水查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.multipleRefresh}},[t._v("批量查询")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{"margin-top":"10px"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:t.autoHeight,"auto-load":!1,pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.queryForm,columns:t.accFlowColumns,onRowClick:t.rowClick,url:"/reportmgnt/accFlow/accFlowQuery.json"}}),t._v(" "),a("el-tabs",{staticStyle:{"margin-top":"5px"},attrs:{"tab-position":"top"}},[a("el-tab-pane",{attrs:{label:"托管户流水"}},[a("h-datagrid",{ref:"flowquerydatagrid",attrs:{hasPage:"",pageSize:100,"highlight-row":"",stripe:"",height:"150",bindForm:t.accFlowQuery,columns:t.tradeFlowColumns,"auto-load":!1,url:"/reportmgnt/accFlow/accTradeFlow.json"}})],1)],1)],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"800",height:"400","mask-closable":!1},model:{value:t.showMultipleQueryDialog,callback:function(e){t.showMultipleQueryDialog=e},expression:"showMultipleQueryDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("流水批量查询")])]),t._v(" "),a("h-row",[a("h-col",[a("h-datagrid",{ref:"multipleflowdatagrid",attrs:{height:"355",stripe:"",hasPage:"","highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.multipleBindForm,columns:t.multipleFlowColumns,url:"/reportmgnt/accBatchQuery.json"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.multipleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.multipleSave}},[t._v("确定")])],1)],1),t._v(" "),a("accCashFlowQueryMsgBox",{ref:"accFlowQueryMsg",attrs:{msgBoxShow:t.flowMsgBoxShow,queryType:t.flowQueryType,includeSelfRun:!1},on:{onCashFlowClose:t.onFlowClose,onOutRefresh:t.onFlowRefresh}})],1)},staticRenderFns:[]};var f=a("VU/8")(u,d,!1,function(t){a("pPUI")},"data-v-7bd5459c",null);e.default=f.exports},"K+nL":function(t,e,a){"use strict";var n=a("Gu7T"),s=a.n(n),i=a("BO1k"),o=a.n(i),r=a("7+uW"),l={name:"Sortctrl",props:{title:{type:String,default:""},field:{type:String,default:""},sortingField:{type:String,default:"none"},align:{type:String,default:"left"}},data:function(){return{status:"none"}},methods:{sortBy:function(t){this.status=t,this.$emit("sort",t)},switchSort:function(){var t=["none","asc","desc"],e=t.indexOf(this.status)+1;e=e>t.length-1?0:e,this.$emit("sort",t[e]),this.status=t[e]}},computed:{alignStyle:function(){var t="justify-content: flex-start";return"right"===this.align?t="justify-content: flex-end":"center"===this.align&&(t="justify-content: center"),t}},components:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-sortheader",style:t.alignStyle},[a("div",{staticClass:"title",on:{click:t.switchSort}},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"ctrls"},[a("i",{staticClass:"up iconfont icon-android-arrow-dropup",class:{active:"asc"===t.status&&t.field===t.sortingField},on:{click:function(e){return t.sortBy("asc")}}}),t._v(" "),a("i",{staticClass:"down iconfont icon-android-arrow-dropdo",class:{active:"desc"===t.status&&t.field===t.sortingField},on:{click:function(e){return t.sortBy("desc")}}})])])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("/ltC")},null,null).exports,d=a("vNF5"),f=a("woOf"),p=a.n(f),h=a("5/bi"),_=a("jV6A"),m=a("Q5rI"),b={getShowColumn:function(t){return Object(m.H)(t)},getDatas:function(t,e,a,n){var s={pageNo:a,pageSize:n};return p()(s,e),h.a.post(t,s)},makeTreeData:function(t){var e=[],a=!0,n=!1,s=void 0;try{for(var i,r=o()(t);!(a=(i=r.next()).done);a=!0){var l=i.value;if(0===e.length)e.push(l);else{var c=this.findDataById(e,l.transfer_ins_batch_no);c?(c.children||(c.children=[]),c.children.push(l)):e.push(l)}}}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}return e},makeDataHaveId:function(t,e){!function t(a){var n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.id=c[e],c.children&&c.children.length>0&&t(c.children)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}}(t)},makeDataChecked:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function t(a){var n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.checked=e,c.children&&c.children.length>0&&t(c.children)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}}(t),t},makeDataCheckedWithoutExcepts:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function t(n){var s=!0,i=!1,r=void 0;try{for(var l,c=o()(n);!(s=(l=c.next()).done);s=!0){var u=l.value;a.indexOf(u.id)>=0||(u.checked=e,u.children&&u.children.length>0&&t(u.children))}}catch(t){i=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(i)throw r}}}(t),t},makeDataExpand:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function t(a){var n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.expand=e,c.children&&c.children.length>0&&t(c.children)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}}(t),t},getFirstLevelDatas:function(t){var e=Object(_.a)(t),a=[],n=!0,s=!1,i=void 0;try{for(var r,l=o()(e);!(n=(r=l.next()).done);n=!0){var c=r.value;c.children=[],a.push(c)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}return a},getCheckedDatas:function(t){var e=[];return function t(a){var n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;c.checked&&e.push(c),c.children&&c.children.length>0&&t(c.children)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}}(t),e},findNode:function(t,e,a){if(!t||0===t.length)return null;for(var n=0;n<t.length;n++){if(t[n].transfer_ins_id===e){a.obj=t[n];break}t[n].children&&this.findNode(t[n].children,e,a)}},findDataById:function(t,e){var a={};return this.findNode(t,e,a),a.obj?a.obj:null},flatTreeDatas:function(t){var e=[];return function t(a){var n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;e.push(c),c.children&&c.children.length>0&&t(c.children)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}}(t),e},getFlatIndexById:function(t,e){return t.findIndex(function(t){return t.id===e})},sort:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(["asc","desc"].indexOf(a)<0)return t;return t.sort(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(a,s){var i=a[t],o=s[t];return"number"==typeof i&&"number"==typeof o?e?i-o:o-i:n?(i=parseFloat(i),o=parseFloat(o),e?i-o:o-i):(i+="",o+="",e?i.localeCompare(o):o.localeCompare(i))}}(e,"asc"===a))}};r.default.component("Sortheader",r.default.extend(u));var v={props:{headSelection:{type:Boolean,default:!0},checkStrictly:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},isCheckbox:{type:Boolean,default:!0},gridName:{type:String,default:null},noDataText:String,columns:{type:Array,default:function(){return[]}},height:{type:Number,default:0},url:{type:String,default:""},fundData:{type:Object,default:function(){}},onRowClick:{type:Function,default:function(){return""}},onRowDbClick:{type:Function,default:function(){return""}},rowClassName:{type:Function,default:function(){return""}},pageSize:Number,pageSizeOpts:Array,placement:{type:String,default:"top"}},data:function(){return{datas:[],sortedDatas:[],sortingField:"",solvedColumns:[],showColumns:this.getTargetKeys(),showColumnsTmp:"",columndata:this.getMockData(),latestRowData:null,total:0,pageNo:1,loading:!1,gridNameDetail:"",showLayout:!1,gridHeight:0,pageInfo:{pageNo:1,pageSize:100},current:1,selectedDatas:[],stripeHeight:0}},computed:{pageCtrlVisible:function(){return this.total>this.pageSize}},watch:{columns:{handler:function(t){var e=!0,a=!1,n=void 0;try{for(var s,i=o()(t);!(e=(s=i.next()).done);e=!0){var r=s.value;r.render&&(r.hiddenOther=!0)}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}this.solvedColumns=t||[]},immediate:!0},fundData:{handler:function(t){this.pageNo=1,this.getDatas()}},showColumns:{handler:function(t){for(var e=this,a=this.columns||[],n=a.filter(function(t){return"1"===t.fixedLayout}),s=function(e){if("transfer_ins_id"===t[e])return"continue";var s=a.filter(function(a){return a.key===t[e]});s&&s.length>0&&n.push(s[0])},i=0;i<t.length;i++)s(i);var r=!0,l=!1,c=void 0;try{for(var u,d=o()(n);!(r=(u=d.next()).done);r=!0){var f=u.value;f&&!f.width&&"urgent_flag"!==f.key&&(f.width=200),"transfer_ins_id"===f.key&&(f.width=120),"urgent_flag"===f.key&&(f.width=40)}}catch(t){l=!0,c=t}finally{try{!r&&d.return&&d.return()}finally{if(l)throw c}}this.$nextTick(function(t){n.map(function(t){return parseFloat(t.width)}).reduce(function(t,e){return t+e})<e.$el.clientWidth&&delete n[0].width,e.solvedColumns=n})},immediate:!0},datas:{handler:function(t){this.sortedDatas=Object(_.a)(t)}},sortedDatas:{handler:function(t){this.solveRowClassNameBugs(),this.solveHeaderCheckboxBugs()}},pageSize:{handler:function(t){this.pageInfo.pageSize=t}},pageNo:{handler:function(t){this.getDatas()}},selectedDatas:{handler:function(t){this.$emit("selectionChange",t)}}},mounted:function(){this.updateGridHeight()},activated:function(){SSObservable.subscribe("moduleHeightChange",this.updateLayoutWhenWindowResize)},deactivated:function(){SSObservable.unsubscribe("moduleHeightChange",this.updateLayoutWhenWindowResize)},methods:{updateLayoutWhenWindowResize:function(){this.updateStripe(!0),this.updateGridHeight()},updateGridHeight:function(){var t=this;this.$nextTick(function(){var e=t.$el.clientHeight;t.total>t.pageSize?t.gridHeight=e-40:t.gridHeight=e})},getMockData:function(){var t,e=[];t=this.columns.filter(function(t){return!t.fixedLayout||t.fixedLayout.indexOf("1")<0});for(var a=0;a<t.length;a++)e.push({key:t[a].key,label:t[a].title});return e},getTargetKeys:function(){return this.getMockData().filter(function(){return 2*Math.random()>1}).map(function(t){return t.key})},upDownMove:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].key);this.showColumns=e},renderMethod:function(t){return t.label},handleChange:function(t){this.showColumns=t},submitLayout:function(){var t=this;this.showColumnsTmp=this.showColumns.join(","),Object(m.Y)({datagridName:this.gridNameDetail?this.gridNameDetail:this.gridName,showColumnStr:this.showColumnsTmp}).then(function(e){e.data&&"0"===e.data.code?t.showLayout=!1:t.$alert("调整布局失败","错误",{confirmButtonText:"确定",type:"error"})})},handleCancel:function(){this.showLayout=!1},pageSizeChange:function(t){this.pageNo=1,this.pageInfo.pageSize=t,this.pageInfo.pageNo=1,this.current=1,this.getDatas()},clearSelected:function(){var t=this.selectedDatas,e=!0,a=!1,n=void 0;try{for(var s,i=o()(t);!(e=(s=i.next()).done);e=!0){var r=s.value;this.$refs.table.selectRow(r.id,!1)}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}this.$refs.table.clearSelected(),this.selectedDatas=[]},forceClearAllSelected:function(){var t=this.$refs.table.$el.querySelectorAll("tr.not-child"),e=!0,a=!1,n=void 0;try{for(var s,i=o()(t);!(e=(s=i.next()).done);e=!0){var r=s.value;Object(d.c)(r,"h-editgird-row-highlight")}}catch(t){a=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw n}}},getDatas:function(){var t=this;this.loading=!0,b.getDatas(this.url,this.fundData,this.pageNo,this.pageInfo.pageSize).then(function(e){t.loading=!1,e.data.list||(e.data.list=[]);var a=Object(_.a)(e.data.list),n=b.makeTreeData(a);b.makeDataHaveId(n,"transfer_ins_id"),t.datas=n,t.sortedDatas=Object(_.a)(t.datas),t.total=e.data.total,t.updateGridHeight(),t.makeHeaderChecked(!1),t.$nextTick(function(){t.clearSelected()}),t.updateStripe(),t.$refs.table.forceUpdate()})},changeGrid:function(t){var e=this;b.getShowColumn(t).then(function(a){var n=a.data.data;e.showColumns=n?n.split(","):[],e.gridNameDetail=t})},dataChange:function(t){t&&(this.pageNo=t,this.pageInfo.pageNo=t,this.current=t),this.getDatas()},openLayout:function(){this.showLayout=!0},handleRowClick:function(t){var e=!1;this.latestRowData&&this.latestRowData.transfer_ins_id===t.transfer_ins_id&&(e=!0);var a=b.findDataById(this.sortedDatas,t.transfer_ins_id);a.checked=!e||!a.checked,this.makeRowChecked(a,a.checked),this.makeHeaderChecked(!1),this.latestRowData=a,a.checked?(this.onRowClick&&this.onRowClick([t]),this.selectedDatas=[a]):(this.onRowClick&&this.onRowClick(null),this.selectedDatas=[]),this.updateGridHeight(),this.updateSelectionBackground()},handleRowDblClick:function(t){this.makeRowChecked(t,!0),this.onRowClick&&this.onRowClick([t]),this.onRowDbClick&&this.onRowDbClick(t)},handleExpand:function(t,e){var a=t.transfer_ins_id;b.findDataById(this.sortedDatas,a).expand=e;var n=b.getFlatIndexById(this.sortedDatas,a);this.solveIcons(a,n,e);var s=this.$refs.table.$el.querySelectorAll("tr"),i=!0,r=!1,l=void 0;try{for(var c,u=o()(s);!(i=(c=u.next()).done);i=!0){var f=c.value;"block"===Object(d.b)(f,"display")&&Object(d.e)(f,"display","table-row")}}catch(t){r=!0,l=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw l}}this.updateSelectionBackground()},handleSelectChange:function(t,e){var a=!0,n=!1,s=void 0;try{for(var i,r=o()(this.selectedDatas);!(a=(i=r.next()).done);a=!0){var l=i.value;this.$refs.table.selectRow(l.id,!1)}}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}this.selectedDatas=t,this.updateSelectionBackground()},handleSelectAll:function(t){var e=this.getSelection();t?(this.selectedDatas=e,this.updateSelectionBackground()):(this.clearSelected(),this.selectedDatas=[])},updateSelectionBackground:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$nextTick(function(){var a=t.getSelection(),n=!0,s=!1,i=void 0;try{for(var r,l=o()(a);!(n=(r=l.next()).done);n=!0){var c=r.value;t.$refs.table.selectRow(c.id,e)}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}})},makeHeaderChecked:function(t){var e=this.$refs.table.$el.querySelector(".h-editgird-header .h-ui-transfer_ins_id .h-checkbox-wrapper"),a=this.$refs.table.$el.querySelector(".h-editgird-header .h-ui-transfer_ins_id .h-checkbox");t?(Object(d.a)(e,"h-checkbox-wrapper-checked"),Object(d.a)(a,"h-checkbox-checked")):(Object(d.c)(e,"h-checkbox-wrapper-checked"),Object(d.c)(a,"h-checkbox-checked"))},makeRowChecked:function(t,e){this.$refs.table.checkedRow(t.id,e)},makeRowExpanded:function(t,e){this.$refs.table.expandRow(t.id,e)},getSelection:function(){return Object(_.a)(this.$refs.table.getSelection())},solveIcons:function(t,e,a){var n=this.$refs.table.$el.querySelector(".h-editgird-tbody").children,i=(n=[].concat(s()(n)).filter(function(t){return t.className.indexOf("not-child")>=0}))[e].querySelector(".h-ui-transfer_ins_id .h-icon-play_fill");i&&this.$nextTick(function(){a?(Object(d.c)(i,"my-add"),Object(d.a)(i,"my-minus")):(Object(d.c)(i,"my-minus"),Object(d.a)(i,"my-add"))}),this.solveRowClassNameBugs()},sortAtField:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.sortedDatas="none"===t?Object(_.a)(this.datas):b.sort(this.sortedDatas,e,t,a),this.sortingField=e,this.latestRowData=null},updateStripe:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$nextTick(function(){var a=t.$el.querySelector(".tree-grid .h-editgird-wrapper .h-editgird-body .h-editgird-tbody");(0===t.stripeHeight||e)&&(t.datas.length,t.stripeHeight=60),a.style.backgroundSize="100% "+t.stripeHeight+"px"})},handleResize:function(){this.$refs.table.handleResize()},solveRowClassNameBugs:function(){var t=this;this.$nextTick(function(){for(var e=t.$refs.table.$el.querySelectorAll("tr.not-child"),a=0;a<e.length;a++){var n=e[a].querySelector(".h-ui-transfer_ins_id").children[1].innerHTML,s=b.findDataById(t.sortedDatas,n),i=t.rowClassName(s,a),r=!0,l=!1,c=void 0;try{for(var u,f=o()(e[a].children);!(r=(u=f.next()).done);r=!0){var p=u.value;Object(d.a)(p,i)}}catch(t){l=!0,c=t}finally{try{!r&&f.return&&f.return()}finally{if(l)throw c}}}})},solveHeaderCheckboxBugs:function(){var t=this.$el.querySelector(".h-editgird-header .h-ui-transfer_ins_id .h-checkbox-input");t&&(t.disabled=0===this.sortedDatas.length)}},components:{}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-simple-tree-grid"},[a("div",{staticClass:"tree-grid customClass",class:{"fill-scripe":!0}},[a("h-simple-tree-gird",{ref:"table",attrs:{columns:t.solvedColumns,data:t.sortedDatas,height:t.gridHeight,headSelection:t.headSelection,checkStrictly:t.checkStrictly,"highlight-row":!0,"row-class-name":t.rowClassName,loading:t.loading,"no-data-text":t.noDataText,stripe:!1,size:"small",isCheckbox:t.isCheckbox,canDrag:"",rowSelect:""},on:{"on-row-click":t.handleRowClick,"on-row-dblclick":t.handleRowDblClick,"on-expand":t.handleExpand,"on-select-change":t.handleSelectChange,"on-select-all":t.handleSelectAll}})],1),t._v(" "),t.pageCtrlVisible?a("h-page",{staticClass:"page-ctrl",attrs:{total:t.total,"show-elevator":"","show-total":"","show-sizer":"",placement:t.placement,"page-size":t.pageSize,pageSizeOpts:t.pageSizeOpts,current:t.current},on:{"on-page-size-change":t.pageSizeChange,"on-change":t.dataChange}}):t._e(),t._v(" "),t.gridName?a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"490px"},model:{value:t.showLayout,callback:function(e){t.showLayout=e},expression:"showLayout"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("布局")])]),t._v(" "),a("h-transfer",{attrs:{titles:["隐藏列","显示列"],data:t.columndata,"target-keys":t.showColumns,"render-format":t.renderMethod},on:{"on-right-drag":t.upDownMove,"on-change":t.handleChange}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.submitLayout}},[t._v("保存")]),t._v(" "),a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1):t._e()],1)},staticRenderFns:[]};var y=a("VU/8")(v,g,!1,function(t){a("NvTy")},null,null).exports;a.d(e,"a",function(){return y})},K1bj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("8DhI"),o={name:"review",data:function(){return{autoHeight:0,queryCheck:{checkStatus:"1",inputOperator:null,objectType:2},showFund:!1,fundInfo:{fund_id:null,fund_name:"",fund_code:"",fund_mgr_operator:"",fund_status:"",fund_trust_bank:"",fund_type:"",establish_date:"",expire_date:"",interbank_id:"",paper_no:"",stockholder_id:"",object_code:"",sh_ta_account:"",sz_ta_account:"",transfer_flag:"",file_name:"",data_source:"",fund_mail:"",fund_accountant:"",ta_settle_type:"",fund_settle_type:"",trust_flag:""},isScrollBar:{marginTop:"10px",overflow:"auto",maxHeight:""},accountInfo:{},bankList:[],operatorList:[],fundTypeList:[],dataSourceList:[],fundSettleTypes:[],taSettleTypes:[],accountTypeList:[],accountStatusList:[],bankFuturesTypeList:[],brokerList:[],cityTree:[],businFlagList:[],fundList:[],bankInfoList:[],rivalList:[],saleChannelList:[{code:"1",text:"直销"},{code:"2",text:"代销"}],rivalName:null,brokerName:null,taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],issuerName:null,accountClassList:[],agencyList:[]}},created:function(){var t=this;Object(s.t)(610087).then(function(e){return t.fundTypeList=e.data}),Object(s.t)(90531).then(function(e){return t.fundSettleTypes=e.data}),Object(s.t)(90530).then(function(e){return t.taSettleTypes=e.data}),Object(s.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(s.t)(60058).then(function(e){return t.accountTypeList=e.data}),Object(s.t)(200008).then(function(e){return t.accountStatusList=e.data}),Object(s.t)(90532).then(function(e){return t.bankFuturesTypeList=e.data}),Object(s.t)(90525).then(function(e){t.accountClassList=e.data.filter(function(t){return 1!=t.code&&2!=t.code&&3!=t.code&&5!=t.code&&6!=t.code&&8!=t.code})}),Object(s.N)().then(function(e){e.data&&e.data.length>0&&(t.operatorList=e.data)}),Object(s.m)().then(function(e){e.data&&e.data.length>0&&(t.brokerList=e.data)})},computed:{provinceCity:{get:function(){return[this.accountInfo.province_code,this.accountInfo.city_no]},set:function(t){this.accountInfo.province_code=t[0],this.accountInfo.city_no=t[1]}}},mounted:function(){var t=this;Object(s.q)().then(function(e){return t.cityTree=e.data}),this.re_layout()},components:{ReviewTable:a("RCPB").a,HDatagrid:n.a},activated:function(){var t=this;this.$refs.reviewTable.refresh(),Object(s.p)().then(function(e){t.businFlagList=[{code:"-1",text:"全部"}],e.data&&e.data.length>0&&(t.businFlagList=t.businFlagList.concat(e.data))}),Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){t.fundList=[{code:"-1",text:"全部"}],e.data&&e.data.length>0&&(t.fundList=t.fundList.concat(e.data))}),Object(s.j)("1").then(function(e){t.bankInfoList=[{code:"-1",text:"全部"}],e.data&&e.data.length>0&&(t.bankInfoList=t.bankInfoList.concat(e.data))}),Object(s.i)("").then(function(e){return t.agencyList=e.data}),Object(s.j)().then(function(e){return t.bankList=e.data})},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight;t>e/2&&(this.isScrollBar.maxHeight=e/2+"px",t=e/2),this.autoHeight=e-t-70,this.$refs.reviewTable.resizeTable(this.autoHeight)},showTextList:function(t,e){var a="";return t&&(t.split(",").forEach(function(t){return a=a+"，"+Object(s._1)(t,e)}),a=a.substr(1,a.length)),a},showCity:s.Z,showText:s._1,clearData:function(){this.accountInfo={},this.$nextTick(this.re_layout)},rowClick:function(t){var e=this;Object(i.a)(t.check_id,t.object_type).then(function(t){t.data&&"0"==t.data.code?(e.showFund=!1,e.accountInfo=t.data.data,e.accountInfo.issuer_code?Object(s.y)(0,5,e.accountInfo.issuer_code).then(function(t){return e.issuerName=t.data.list[0].text}):e.issuerName="",e.accountInfo.rival_code&&"f"!=e.accountInfo.account_class&&Object(s.G)(0,5,e.accountInfo.rival_code).then(function(t){return e.rivalName=t.data.list[0].text}),e.accountInfo.rival_code&&"f"==e.accountInfo.account_class&&Object(s.O)(1,5,e.accountInfo.rival_code).then(function(t){return e.brokerName=t.data.list[0].text}),e.$nextTick(e.re_layout)):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))}).catch(function(t){})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-review full-h",attrs:{id:"full-h-wrapper"}},[a("review-table",{ref:"reviewTable",attrs:{"on-selection-change":t.rowClick,"clear-data":t.clearData,"query-check":t.queryCheck}}),t._v(" "),t.accountInfo.account_class?a("div",{staticClass:"detail",style:t.isScrollBar,attrs:{id:"wrapper-0"}},[a("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户用途")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.account_class,t.accountClassList)}},[t._v(t._s(t.showText(t.accountInfo.account_class,t.accountClassList)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_account_name}},[t._v(t._s(t.accountInfo.bank_account_name))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_account_no}},[t._v(t._s(t.accountInfo.bank_account_no))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.pay_no}},[t._v(t._s(t.accountInfo.pay_no))])])]),t._v(" "),"a"==t.accountInfo.account_class||"e"==t.accountInfo.account_class||"g"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("业务标志")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showTextList(t.accountInfo.cop_busin_flag_list,t.businFlagList)}},[t._v(t._s(t.showTextList(t.accountInfo.cop_busin_flag_list,t.businFlagList)))])])]):t._e(),t._v(" "),"7"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("交易对手")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.rivalName}},[t._v(t._s(t.rivalName))])])]):t._e(),t._v(" "),"f"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("券商")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.brokerName}},[t._v(t._s(t.brokerName))])])]):t._e(),t._v(" "),"f"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("证券代码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.report_code}},[t._v(t._s(t.accountInfo.report_code))])])]):t._e(),t._v(" "),"f"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("证券名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.stock_name}},[t._v(t._s(t.accountInfo.stock_name))])])]):t._e(),t._v(" "),"d"==t.accountInfo.account_class||"i"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("发行人")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.issuerName}},[t._v(t._s(t.issuerName))])])]):t._e(),t._v(" "),"h"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("销售机构")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.agency_code,t.agencyList)}},[t._v(t._s(t.showText(t.accountInfo.agency_code,t.agencyList)))])])]):t._e(),t._v(" "),"g"==t.accountInfo.account_class||"e"==t.accountInfo.account_class||"4"==t.accountInfo.account_class||"9"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("可使用的产品")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showTextList(t.accountInfo.fund_id_list,t.fundList)}},[t._v(t._s(t.showTextList(t.accountInfo.fund_id_list,t.fundList)))])])]):t._e(),t._v(" "),"9"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("TA类型")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.ta_type,t.taTypeList)}},[t._v(t._s(t.showText(t.accountInfo.ta_type,t.taTypeList)))])])]):t._e(),t._v(" "),"9"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("销售渠道")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.sale_channel,t.saleChannelList)}},[t._v(t._s(t.showText(t.accountInfo.sale_channel,t.saleChannelList)))])])]):t._e(),t._v(" "),"a"==t.accountInfo.account_class||"b"==t.accountInfo.account_class||"c"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("托管人")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showTextList(t.accountInfo.bank_no_list,t.bankInfoList)}},[t._v(t._s(t.showTextList(t.accountInfo.bank_no_list,t.bankInfoList)))])])]):t._e(),t._v(" "),"i"==t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("证券代码列表")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showTextList(t.accountInfo.stock_code_list)}},[t._v(t._s(t.accountInfo.stock_code_list))])])]):t._e(),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.bic_code,t.bankList)}},[t._v(t._s(t.showText(t.accountInfo.bic_code,t.bankList)))])])]),t._v(" "),t.accountInfo.account_class?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户行名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.sub_bank_no}},[t._v(t._s(t.accountInfo.sub_bank_no))])])]):t._e(),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户类型")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.bank_account_type,t.accountTypeList)}},[t._v(t._s(t.showText(t.accountInfo.bank_account_type,t.accountTypeList)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户状态")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.accountInfo.bank_account_status,t.accountStatusList)}},[t._v(t._s(t.showText(t.accountInfo.bank_account_status,t.accountStatusList)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户城市")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showCity(t.provinceCity,t.cityTree)}},[t._v(t._s(t.showCity(t.provinceCity,t.cityTree)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户日期")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.open_date}},[t._v(t._s(t.accountInfo.open_date))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("联系人")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_linkman}},[t._v(t._s(t.accountInfo.bank_linkman))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("联系电话")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_phone}},[t._v(t._s(t.accountInfo.bank_phone))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("传真")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_fax}},[t._v(t._s(t.accountInfo.bank_fax))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("邮箱")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.bank_mail}},[t._v(t._s(t.accountInfo.bank_mail))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.accountInfo.remark}},[t._v(t._s(t.accountInfo.remark))])])])],1),t._v(" "),t.accountInfo.modify_desc?a("header",{staticClass:"headline mt10 pt10 border-dashed-top"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("变更内容")])]):t._e(),t._v(" "),t.accountInfo.modify_desc?a("h-row",t._l(t.accountInfo.modify_desc.split(";"),function(e,n){return a("h-col",{key:n,staticClass:"inner",attrs:{span:"6"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v(t._s(decodeURIComponent(e.split(":")[0])))]),t._v(" "),a("div",{staticClass:"value",attrs:{title:decodeURIComponent(e.split(":")[1])}},[t._v(t._s(decodeURIComponent(e.split(":")[1])))])])])}),1):t._e()],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"headline"},[e("i",{staticClass:"icon-l"}),this._v(" "),e("span",{staticClass:"title"},[this._v("详情")])])}]};var l=a("VU/8")(o,r,!1,function(t){a("Yvb2"),a("Fzko")},null,null);e.default=l.exports},KAd0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("jV6A"),o=a("NYxO"),r=a("Q5rI"),l={props:{accounts:{type:Array,default:function(){return[]}},tableHeight:{type:Number,default:0},fundSettleType:{type:String,default:""}},data:function(){return{columns:this.getColumns(),accounts_:[],selectedAccounts:[]}},watch:{accounts:{handler:function(t){var e=this,a=Object(i.a)(t);this.accounts_=a,this.selectedAccounts=[],this.$nextTick(function(){e.$refs.table.selectAll(!1)})}}},created:function(){},mounted:function(){},activated:function(){},computed:s()({},Object(o.e)({accountClassList:function(t){return t.dict.dict_90525},bankList:function(t){return t.dict.bankList},trustBankList:function(t){return t.dict.trustBankList},accountTypeList:function(t){return t.dict.dict_60058},accountStatusList:function(t){return t.dict.dict_200008}})),methods:{onRowClick:function(t){t[0]},onSelectChange:function(t){this.selectedAccounts=t},onRowDbClick:function(t){this.$emit("accountDetail",t)},deleteAccount:function(){0!==this.selectedAccounts.length?this.$emit("deleteAccount",this.selectedAccounts):this.$hMessage.info("请选择一个或多个账号进行操作")},getSelections:function(){return this.selectedAccounts},getColumns:function(){var t=this;return[{type:"selection",width:40,align:"center",ellipsis:!0},{title:"账户用途",type:"text",width:100,key:"account_class",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},"1"!=t.fundSettleType&&"4"!=t.fundSettleType||"2"!=n.account_class?Object(r._1)(n.account_class,t.accountClassList):"自营账户")}},{title:"账户名称",type:"text",width:160,key:"bank_account_name",ellipsis:!0},{title:"银行账号",type:"text",width:160,key:"bank_account_no",ellipsis:!0},{title:"银行总行",type:"text",width:160,key:"bic_code",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.bic_code,t.bankList))}},{title:"开户行名称",type:"text",width:160,key:"sub_bank_no",ellipsis:!0},{title:"大额支付号",type:"text",width:160,key:"pay_no",ellipsis:!0},{title:"账户类型",type:"text",width:160,key:"bank_account_type",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.bank_account_type,t.accountTypeList))}},{title:"账户状态",type:"text",width:160,key:"bank_account_status",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.bank_account_status,t.accountStatusList))}},{title:"联系人",type:"text",width:160,key:"bank_linkman",ellipsis:!0},{title:"联系电话",type:"text",width:160,key:"bank_phone",ellipsis:!0},{title:"传真",type:"text",width:160,key:"bank_fax",ellipsis:!0},{title:"邮箱",type:"text",width:160,key:"bank_mail",ellipsis:!0},{title:"持有人账号",type:"text",width:160,key:"holder_account",ellipsis:!0},{title:"备注",type:"text",width:160,key:"remark",ellipsis:!0},{title:"期货公司",type:"text",width:160,hiddenCol:!0,key:"broker_id",ellipsis:!0},{title:"银期方式",type:"text",width:160,hiddenCol:!0,key:"bank_futures_type",ellipsis:!0},{title:"期货中间账户",type:"text",width:160,hiddenCol:!0,key:"futures_mid_account",ellipsis:!0}]},rowClassName:function(t){return"1"!=t.bank_account_status?"alert-table-red-row":""}},components:{}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cmp-account-list"},[e("h-table",{ref:"table",attrs:{stripe:"",size:"small",columns:this.columns,data:this.accounts_,height:this.tableHeight,"highlight-row":!0,"row-class-name":this.rowClassName,border:""},on:{"on-row-click":this.onRowClick,"on-selection-change":this.onSelectChange,"on-row-dblclick":this.onRowDbClick}})],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("g6bk")},"data-v-4da90f60",null);e.default=u.exports},KTNp:function(t,e){},"KV+U":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),i=a("Q5rI"),o=a("mvHQ"),r=a.n(o),l=a("5/bi");var c={components:{HDatagrid:a("3dxc").a},data:function(){var t=this;return{queryForm:{cashFlowTypes:"",dealNo:"",fundCodes:"",settleDate:""},pageSizeOpts:[25,50,75,100],cashFlowModifyInfo:[],showChangeCashClearStatusDialog:!1,cashFlowInfo:{cash_flow_detail_clear_status:""},cashFlowReportColumn:[{type:"selection",width:30,align:"left"},{title:"现金流编号",key:"cashFlowDetailId",width:100,ellipsis:!0,sortable:!0,align:"center"},{title:"产品名称",key:"fundName",ellipsis:!0,align:"center"},{title:"指令编号",key:"insId",width:100,ellipsis:!0,align:"center"},{title:"成交编号",key:"dealNo",width:100,ellipsis:!0,align:"center"},{title:"交易对手",key:"traderivalName",ellipsis:!0,align:"center"},{title:"现金流类型编号",key:"cashFlowDetailType",ellipsis:!0,align:"center"},{title:"现金流类型",key:"itemName",ellipsis:!0,align:"center",width:120},{title:"现金流交割日期",key:"settleDate",width:100,ellipsis:!0,align:"center"},{title:"收付方向",key:"cashChangeDirection",width:100,ellipsis:!0,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cashChangeDirection,t.directionList))}},{title:"金额(元)",key:"settleBalance",width:100,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.settleBalance))}},{title:"清算状态",key:"cashFlowDetailClearStatus",width:100,ellipsis:!0,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cashFlowDetailClearStatus,t.statusList))}},{title:"委托方向",key:"entrustDirectionName",ellipsis:!0,align:"center"}],Data_CashFlowReport:{},fundList:[],cashFlowTypeList:[{code:"1",text:"TA申购流入(代销)"},{code:"2",text:"TA申购流入(直销)"},{code:"3",text:"TA赎回流出"},{code:"4",text:"TA现金分红"},{code:"5",text:"TA转换转出"},{code:"6",text:"TA转换转入"},{code:"7",text:"存款存入"},{code:"8",text:"存款到期兑付"},{code:"9",text:"存款付息"},{code:"10",text:"分销买入缴款"},{code:"11",text:"固收大宗债券买入"},{code:"12",text:"固收大宗债券卖出"},{code:"13",text:"交易所债券兑付"},{code:"14",text:"交易所债券付息"},{code:"15",text:"交易所证券清算款"},{code:"16",text:"可转债申购补缴"},{code:"17",text:"可转债申购定金"},{code:"18",text:"可转债申购退款"},{code:"19",text:"买断式回购融券到期"},{code:"20",text:"买断式回购融券首期"},{code:"21",text:"买断式回购融资到期"},{code:"22",text:"买断式回购融资首期"},{code:"23",text:"买断式回购中途收息"},{code:"24",text:"清算备付金补款(上海)"},{code:"25",text:"清算备付金回款(上海)"},{code:"26",text:"同业存单还本付息"},{code:"27",text:"同业存单认购缴款"},{code:"28",text:"银行间债券兑付"},{code:"29",text:"银行间债券付息"},{code:"30",text:"银行间债券卖出"},{code:"31",text:"银行间质押式融券到期"},{code:"32",text:"银行间质押式融券首期"},{code:"33",text:"银行间质押式融资到期"},{code:"34",text:"银行间质押式融资首期"},{code:"35",text:"管理费支付"},{code:"36",text:"佣金支付"},{code:"37",text:"中债费用支付"},{code:"38",text:"上清所费用支付"},{code:"39",text:"托管费支付"},{code:"40",text:"上一日交易所证券清算款"},{code:"41",text:"清算备付金补款(深圳)"},{code:"42",text:"清算备付金回款(深圳)"},{code:"43",text:"银行间债券买入"}],rivalCodeList:[],directionList:[{code:"0",text:"不变化"},{code:"1",text:"资金增加"},{code:"2",text:"资金减少"}],loading_query:!1,autoHeight:0,statusList:[{code:"0",text:"未处理"},{code:"1",text:"清算成功"},{code:"2",text:"清算失败"}]}},computed:{cashSettleDate:{get:function(){return this.queryForm.settleDate?Object(i.R)(this.queryForm.settleDate):""},set:function(t){this.queryForm.settleDate=Object(i.Q)(t)}},businClass:{get:function(){return this.queryForm.businClass?this.queryForm.businClass.split(","):[]},set:function(t){this.queryForm.businClass=t.join(",")}},inputDate:{get:function(){return this.queryForm.inputDate?Object(i.R)(this.queryForm.inputDate):""},set:function(t){this.queryForm.inputDate=Object(i.Q)(t)}}},activated:function(){var t=this;Object(i.w)("/common/fundNamelist.json?type=code").then(function(e){return t.fundList=e.data})},mounted:function(){var t=this;this.re_layout(),Object(i.G)(0,50).then(function(e){return t.rivalCodeList=e.data})},methods:{on_export:function(){this.$refs.Dtgrd_CFR.exportCsv({filename:"现金流报表",original:!1})},on_upload:function(){alert("upload be cliced")},on_form_query:function(){this.$refs.Dtgrd_CFR.dataChange(1)},on_form_refresh:function(){this.queryForm={cashFlowTypes:"",dealNo:"",fundCodes:"",settleDate:""}},cashModify:function(){var t=this,e=this.$refs.Dtgrd_CFR.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});s()(this.cashFlowModifyInfo,e),this.cashFlowInfo.cash_flow_detail_clear_status="1",this.showChangeCashClearStatusDialog=!0},cancel:function(){this.showChangeCashClearStatusDialog=!1},save:function(){var t,e=this;this.cashFlowInfo.cash_flow_detail_clear_status&&(t={cashFlowModifyList:this.cashFlowModifyInfo,clearStatus:this.cashFlowInfo.cash_flow_detail_clear_status},l.a.post("/cashmgnt/cashflow/modify.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return r()(t)}})).then(function(t){t.data&&t.data.success?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success"}),e.showChangeCashClearStatusDialog=!1,e.on_form_query()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-form",{ref:"form",attrs:{model:t.queryForm,cols:"5"}},[a("h-form-item",{attrs:{label:"现金流类型","label-width":80,prop:"cashFlowTypes"}},[a("h-select",{attrs:{filterable:"",isString:"",multiple:""},model:{value:t.queryForm.cashFlowTypes,callback:function(e){t.$set(t.queryForm,"cashFlowTypes",e)},expression:"queryForm.cashFlowTypes"}},t._l(t.cashFlowTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"成交编号","label-width":80,prop:"dealNo"}},[a("h-input",{attrs:{type:"text"},model:{value:t.queryForm.dealNo,callback:function(e){t.$set(t.queryForm,"dealNo",e)},expression:"queryForm.dealNo"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"产品名称","label-width":80,prop:"fundCodes"}},[a("h-select",{attrs:{filterable:"",isString:"",multiple:""},model:{value:t.queryForm.fundCodes,callback:function(e){t.$set(t.queryForm,"fundCodes",e)},expression:"queryForm.fundCodes"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"现金流交割日期","label-width":100,prop:"settleDate"}},[a("h-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd"},model:{value:t.cashSettleDate,callback:function(e){t.cashSettleDate=e},expression:"cashSettleDate"}})],1),t._v(" "),a("h-form-item",{attrs:{"label-width":10}},[a("h-button",{attrs:{type:"primary"},on:{click:t.on_form_query}},[t._v("查询")]),t._v(" "),a("h-button",{attrs:{type:"ghost"},on:{click:t.on_form_refresh}},[t._v("重置")])],1)],1),t._v(" "),a("div",{staticClass:"pb10"},[a("h-button-group",[a("h-button",{on:{click:t.cashModify}},[t._v("修改")])],1),t._v(" "),a("h-datagrid",{ref:"Dtgrd_CFR",attrs:{hasPage:"",stripe:"","highlight-row":"",height:t.autoHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,url:"/cashmgnt/cashflow/query.json",columns:t.cashFlowReportColumn,bindForm:t.queryForm}})],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.showChangeCashClearStatusDialog,callback:function(e){t.showChangeCashClearStatusDialog=e},expression:"showChangeCashClearStatusDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("修改清算状态")])]),t._v(" "),a("h-form",{ref:"cashFlowForm",attrs:{model:t.cashFlowInfo,"label-width":80}},[a("h-form-item",{attrs:{required:"",label:"清算状态",prop:"cash_flow_detail_clear_status"}},[a("h-select",{attrs:{filterable:""},model:{value:t.cashFlowInfo.cash_flow_detail_clear_status,callback:function(e){t.$set(t.cashFlowInfo,"cash_flow_detail_clear_status",e)},expression:"cashFlowInfo.cash_flow_detail_clear_status"}},t._l(t.statusList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var d=a("VU/8")(c,u,!1,function(t){a("YE8r")},null,null);e.default=d.exports},L0om:function(t,e){},"LA/8":function(t,e){},LSxO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("NYxO"),o=a("Q5rI"),r={props:{searchCondition:{type:Object,default:function(){return{fundTrustBanks:"",fundTypes:"",fundStatuses:"",dataSource:"",keyword:""}}},tableHeight:{type:Number,default:0}},data:function(){return{sortingField:"",funds:[],pageNo:0,pageSize:50,current:1,pageSizeOpts:[25,50,75,100],loadingData:!1,totalNo:0,columns:this.getColumns()}},watch:{searchCondition:{handler:function(){this.pageNo=1,this.totalNo=0,this.getFundListBySearch()}}},mounted:function(){},computed:s()({},Object(i.e)({fundTypeList:function(t){return t.dict.dict_610087},fundStatusList:function(t){return t.dict.dict_40002},trustBankList:function(t){return t.dict.trustBankList},fundSettleTypes:function(t){return t.dict.dict_90531},taSettleTypes:function(t){return t.dict.dict_90530},dataSourceList:function(t){return t.dict.dict_90528},isFlagList:function(t){return t.dict.dict_610001},taMatchTypeList:function(t){return t.dict.dict_91386},operatorList:function(t){return t.dict.operatorList}}),{pageCtrlVisible:function(){return!(this.totalNo<=this.pageSize)},tableRealHeight:function(){return this.pageCtrlVisible?this.tableHeight-40:this.tableHeight}}),methods:{onRowClick:function(t){var e=t[0],a=t[1];this.$emit("fundSelected",e,a)},onRowDbClick:function(t){this.$emit("fundDetail",t)},onChangePage:function(t){this.pageNo=t,this.current=t,this.getFundListBySearch()},onPageSizeChange:function(t){this.pageSize=t,this.pageNo=1,this.current=1,this.getFundListBySearch()},getFundListBySearch:function(){var t=this;this.loadingData=!0,Object(o.P)(this.searchCondition.fundTrustBanks,this.searchCondition.fundTypes,this.pageNo,this.pageSize,this.searchCondition.fundStatuses,this.searchCondition.dataSource,this.searchCondition.keyword).then(function(e){t.funds=e.data.list,t.totalNo=e.data.total,t.loadingData=!1})},downloadByFileId:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=fund&fileId="+t)},getColumns:function(){var t=this;return[{title:"序号",key:"fund_id",ellipsis:!0,hiddenCol:!0},{title:"产品代码",key:"fund_code",width:120,align:"left",ellipsis:!0,sortable:!0},{title:"产品名称",key:"fund_name",width:140,align:"left",ellipsis:!0},{title:"实际产品代码",key:"actual_code",width:120,align:"left",ellipsis:!0,sortable:!0},{key:"fund_type",width:100,title:"产品类型",align:"left",sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_type,t.fundTypeList))}},{title:"产品状态",key:"fund_status",align:"left",width:80,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_status,t.fundStatusList))}},{title:"托管人",key:"fund_trust_bank",align:"left",width:140,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_trust_bank,t.trustBankList))}},{title:"托管结算模式",key:"fund_settle_type",ellipsis:!0,width:100,align:"left",sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_settle_type,t.fundSettleTypes))}},{title:"TA金额交收模式",key:"ta_settle_type",ellipsis:!0,align:"left",width:140,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.ta_settle_type,t.taSettleTypes))}},{title:"银行间ID",key:"interbank_id",width:90,ellipsis:!0,align:"left",sortable:!0},{title:"上海股东代码",key:"stockholder_id",width:120,align:"left"},{title:"深圳股东代码",key:"stockholder_id_sz",width:120,ellipsis:!0,align:"left"},{title:"深圳配售对象编码",key:"object_code",width:120,align:"left",ellipsis:!0},{title:"TA上海备付金账号",key:"sh_ta_account",align:"left",width:120,ellipsis:!0},{title:"TA深圳备付金账号",key:"sz_ta_account",align:"left",width:120,ellipsis:!0},{title:"是否划款",width:100,key:"transfer_flag",ellipsis:!0,align:"left",sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.transfer_flag,t.isFlagList))}},{title:"投资经理",key:"fund_mgr_operator",width:120,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_mgr_operator,t.operatorList))}},{title:"主办会计",key:"fund_accountant",width:120,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.fund_accountant,t.operatorList))}},{title:"产品邮箱",key:"fund_mail",width:120,ellipsis:!0,align:"left"},{title:"成立日期",key:"establish_date",width:80,ellipsis:!0,align:"left",sortable:!0,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.establish_date))}},{title:"结束日期",width:80,key:"expire_date",ellipsis:!0,align:"left",sortable:!0,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(a.expire_date))}},{title:"三方存管模式",key:"trust_flag",ellipsis:!0,align:"left",hiddenCol:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.transfer_flag,t.isFlagList))}},{title:"产品来源",key:"data_source",width:80,align:"left",ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.data_source,t.dataSourceList))}},{title:"TA轧差模式",key:"ta_match_type",width:130,align:"left",ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.ta_match_type,t.taMatchTypeList))}},{title:"公司签章",key:"stamp_name",width:130,align:"left",ellipsis:!0,sortable:!0},{title:"文件",key:"file_name",width:80,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return n.file_id&&n.file_name?e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadByFileId(n.file_id)}}},"下载")]):e("span",{},"")}}]},rowClassName:function(t){return"1"!=t.fund_status?"alert-table-red-row":""}},components:{}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-fund-list"},[a("h-table",{ref:"fundContent",attrs:{stripe:"",loading:t.loadingData,size:"small",columns:t.columns,data:t.funds,height:t.tableRealHeight,"row-class-name":t.rowClassName,"highlight-row":!0,border:""},on:{"on-row-click":t.onRowClick,"on-row-dblclick":t.onRowDbClick}}),t._v(" "),t.pageCtrlVisible?a("h-page",{staticClass:"page-ctrl",attrs:{total:t.totalNo,current:t.current,"page-size":t.pageSize,pageSizeOpts:t.pageSizeOpts,"show-elevator":"","show-total":"","show-sizer":""},on:{"on-change":t.onChangePage,"on-page-size-change":t.onPageSizeChange}}):t._e()],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("JfAr")},null,null);e.default=c.exports},MFHu:function(t,e){},"N/wp":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("Hhn/"),o={name:"ImportDialog",components:{HDatagrid:n.a},watch:{show:function(t){t?this.openMask():(this.closeMask(),this.$refs.uploadTA&&this.$refs.uploadTA.clearFiles(),this.$refs.uploadApply&&this.$refs.uploadApply.clearFiles())},showResult:function(t){t||this.uploadData.ignore||(this.$refs.uploadTA&&this.$refs.uploadTA.clearFiles(),this.$refs.uploadApply&&this.$refs.uploadApply.clearFiles()),this.closeMask(),this.successCount>0&&(this.openMask(),this.onImportSuccess())}},props:{onImportSuccess:{type:Function,default:function(){}}},data:function(){var t=this;return{uploadData:{dealFlag:0,subclass:"1",isNextDay:!1,ignore:!1},fileList:[],errorData:[],columns:[],taColumns:[{width:100,key:"fund_code",title:"产品代码",align:"center"},{width:100,key:"ta_biz_type",title:"业务类别编码",align:"center"},{width:100,key:"agency_code",title:"销售机构编码",align:"center"},{width:100,key:"cash_settle_date",title:"交收日期",align:"center"},{key:"error_info",title:"错误原因",align:"center"}],outApplyColumns:[{width:200,key:"fileName",title:"文件名",align:"center"},{width:80,key:"lineNum",title:"行号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}],show:!1,showResult:!1,fileTips:"",uploadUrl:"",fileType:1,resultInfo:"",errorCount:0,successCount:0,footerHide:!1,tabsActive:0,importResultColumns:[{title:"操作类型",key:"import_flag",width:80,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.import_flag,t.importFlagList,{key:"code",value:"text"}))}},{title:"操作结果",key:"load_status",width:80,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.load_state,t.statusList,{key:"code",value:"text"}))}},{title:"TA类型",key:"ta_type",width:80,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.ta_type,t.taTypeList,{key:"code",value:"text"}))}},{title:"文件名称",key:"file_name",width:170,ellipsis:!0,align:"left",render:function(t,e){var a=e.row,n=t("span",{},a.file_name);return t("el-tooltip",{props:{trigger:"hover",effect:"light",placement:"top-start",openDelay:400,content:a.file_name,popperClass:"tooltipclass"}},[n])}},{title:"操作员",key:"operator_no",width:120,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.operator_no,t.operatorNoList))}},{title:"操作时间",key:"input_time",width:150,ellipsis:!0,align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.input_date,a.input_time))}},{title:"备注",key:"remark",width:110,ellipsis:!0,align:"left",render:function(t,e){var a=e.row,n=t("span",{},a.remark);return t("el-tooltip",{props:{trigger:"hover",effect:"light",placement:"top-start",openDelay:400,content:a.remark,popperClass:"tooltipclass"}},[n])}}],importResultHeight:175,tData:{rows:[]},statusList:[{code:"1",text:"成功"},{code:"2",text:"失败"}],importFlagList:[{code:"1",text:"导入"},{code:"0",text:"回溯"}],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登TA"}],operatorNoList:[],showContinueBtn:!1}},computed:{limit:function(){return 1==this.fileType?1:20}},methods:{uploadSuccess:function(t,e,a){var n=this;if(e.status="ready",1==this.fileType){if(t.success){if("操作成功"==t.msg){var s="导入成功";1==this.uploadData.dealFlag&&(s="回溯成功"),this.$alert(s,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.show=!1}}).then(function(){n.show=!1})}else this.$alert(t.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.show=!1}}).then(function(){n.show=!1});this.onImportSuccess()}else if("2"==t.code){this.errorData=t.data;var i=this.errorData.filter(function(t){return-1===t.error_no});i&&i.length===this.errorData.length?this.showContinueBtn=!0:this.showContinueBtn=!1,this.showResult=!0}else this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.show=!1}}).then(function(){n.show=!1});this.showContinueBtn||(this.$refs.uploadTA&&this.$refs.uploadTA.clearFiles(),this.$refs.uploadApply&&this.$refs.uploadApply.clearFiles()),this.uploadData.ignore=!1}else if(t.success?this.successCount++:(this.errorCount++,this.errorData=this.errorData.concat(t.data)),this.successCount===a.length)this.$alert("导入成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.show=!1}}).then(function(){n.show=!1}),this.uploadData.ignore=!1,this.onImportSuccess();else if(this.successCount+this.errorCount===a.length){this.fileList=this.fileList.filter(function(t){return n.errorData.find(function(e){return-1===e.errorNo&&e.fileName===t.name})});var o=this.errorData.find(function(t){return-1===t.errorNo});this.showContinueBtn=!!o,this.uploadData.ignore=!1,this.showResult=!0}},submitUpload:function(){1==this.fileType?(this.uploadData.dealFlag=0,this.columns=this.taColumns,this.$refs.uploadTA.submit()):(this.errorData=[],this.errorCount=0,this.successCount=0,this.columns=this.outApplyColumns,this.$refs.uploadApply.submit()),this.showContinueBtn=!1,this.uploadData.ignore=!1},uploadChange:function(t,e){t.response||(e.slice(0,e.length-1).find(function(e){return e.name===t.name})&&(this.$alert("当前文件已经存在!","错误",{confirmButtonText:"确定",type:"error"}),e.pop()),this.fileList=e)},revokeTA:function(){this.uploadData.dealFlag=1,1==this.fileType?this.$refs.uploadTA.submit():2==this.fileType&&this.$refs.uploadApply.submit()},handleCancel:function(){this.show=!1},showDialog:function(t){1==t?(this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/cashsettle/input/taImport.json",this.fileTips="文件名格式：ASSETCHGYYYYMMDD.txt"):(this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/cashsettle/input/outApplyImport.json",this.fileTips="文件名格式：#证券代码_#证券名称_#日期.xls\n"),this.show=!0,this.fileType=t,this.tabsActive=0,this.importResultHeight=175,this.footerHide=!1},tabsClick:function(t){var e=this;0===t?(this.importResultHeight=175,this.footerHide=!1):1===t&&(this.importResultHeight=227,this.footerHide=!0,Object(s.N)().then(function(t){return e.operatorNoList=t.data}),this.tData={rows:[]},Object(i.v)().then(function(t){t&&200===t.status&&t.data&&!0===t.data.success?e.tData.rows=t.data.data:e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(t){e.$alert(t,"错误",{confirmButtonText:"确定",type:"error"})}))},handleErrorCancel:function(){this.showResult=!1},handleErrorContinue:function(){this.uploadData.ignore=!0,this.showResult=!1,1==this.fileType?this.$refs.uploadTA.submit():2==this.fileType&&this.$refs.uploadApply.submit()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-msg-box",{staticClass:"customMsgBox",attrs:{footerHide:t.footerHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("p",{attrs:{slot:"header"},slot:"header"},[1==t.fileType?a("span",[t._v("TA导入")]):t._e(),t._v(" "),2==t.fileType?a("span",[t._v("中签文件导入")]):t._e()]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("导入")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:1==t.fileType,expression:"fileType==1"}],attrs:{type:"primary"},on:{click:t.revokeTA}},[t._v("回溯")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1),t._v(" "),a("h-tabs",{directives:[{name:"show",rawName:"v-show",value:1==t.fileType,expression:"fileType == 1"}],attrs:{size:"small"},on:{"on-click":t.tabsClick},model:{value:t.tabsActive,callback:function(e){t.tabsActive=e},expression:"tabsActive"}},[a("h-tab-pane",{attrs:{label:"文件导入"}},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:1==t.fileType,expression:"fileType == 1"}],ref:"uploadTA",staticClass:"drag-in-box",staticStyle:{"margin-bottom":"10px"},attrs:{drag:"",action:t.uploadUrl,multiple:1!=t.fileType,"with-credentials":"","on-success":t.uploadSuccess,data:t.uploadData,"auto-upload":!1,"on-change":t.uploadChange,"file-list":t.fileList,limit:t.limit}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",{attrs:{title:t.fileTips}},[t._v("点击选择")])])]),t._v(" "),a("h-form",{attrs:{"label-width":100,cols:"1"}},[1==t.fileType?a("h-form-item",{attrs:{"label-width":80,required:"",label:"导入类型"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.uploadData.subclass,callback:function(e){t.$set(t.uploadData,"subclass",e)},expression:"uploadData.subclass"}},[t._v("自建TA")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.uploadData.subclass,callback:function(e){t.$set(t.uploadData,"subclass",e)},expression:"uploadData.subclass"}},[t._v("中登TA")])],1):t._e()],1)],1),t._v(" "),a("h-tab-pane",{attrs:{label:"导入结果"}},[a("h-datagrid",{ref:"importResultDatagrid",attrs:{stripe:"","highlight-row":"",height:t.importResultHeight,columns:t.importResultColumns,gridData:t.tData}})],1)],1),t._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:2==t.fileType,expression:"fileType == 2"}],ref:"uploadApply",staticClass:"drag-in-box",staticStyle:{"margin-bottom":"10px"},attrs:{drag:"",action:t.uploadUrl,multiple:1!=t.fileType,"with-credentials":"","on-success":t.uploadSuccess,data:t.uploadData,"auto-upload":!1,"on-change":t.uploadChange,"file-list":t.fileList,accept:".xls,.xlsx",limit:t.limit}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",{attrs:{title:t.fileTips}},[t._v("点击选择")])])]),t._v(" "),2==t.fileType?a("div",[a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v("下一日缴款")]),t._v(" "),a("h-checkbox",{model:{value:t.uploadData.isNextDay,callback:function(e){t.$set(t.uploadData,"isNextDay",e)},expression:"uploadData.isNextDay"}})],1):t._e()],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"800px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("导入结果")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.fileType,expression:"fileType==2"}]},[t._v("文件导入成功"+t._s(t.successCount)+"个，失败"+t._s(t.errorCount)+"个")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.fileType&&t.showContinueBtn,expression:"fileType==2&&showContinueBtn"}],staticStyle:{color:"red"}},[t._v("(存在已导入过中签文件，是否作废并重新导入，若是请点击“继续”按钮)")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.fileType&&t.showContinueBtn,expression:"fileType==1&&showContinueBtn"}],staticStyle:{color:"red"}},[t._v("(导入文件包含系统中不存在的产品，是否剔除并导入，若是请点击“继续”按钮)")]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.columns}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.handleErrorCancel}},[t._v("确定")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:t.showContinueBtn,expression:"showContinueBtn"}],staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.handleErrorContinue}},[t._v("继续")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("tmdt"),a("wkhj")},null,null);e.default=l.exports},NvTy:function(t,e){},O5rJ:function(t,e){},OA4p:function(t,e){},PrpQ:function(t,e){},PwFc:function(t,e){},QTaZ:function(t,e,a){"use strict";var n=a("Q5rI"),s=(a("22iY"),a("Yjvf")),i={name:"HOtherFundTree",components:{HFieldset:a("n0lz").a,HPanel:s.a},data:function(){return{activeNames:["1"],fundTree:[{text:"   加载中              ... ",code:""}],filterText:"",queryConditions:{name:"",default_flag:"0",condition_id:null,keyword:"",data_source:"",fund_id_list:[],fund_status:["1"],fund_type:[],fund_trust_bank:"",transfer_flag:"1",isSettle:this.isSettle,show_busin_done:"1"},treeProps:{label:"text",children:"children"},dataQuery:{fundId:""},setQueryMsg:!1,fundTypeList:[],dataSourceList:[],fundList:[],conditionList:[],bankList:[]}},computed:{showDone:{get:function(){return"1"==this.queryConditions.show_busin_done},set:function(t){this.queryConditions.show_busin_done=t?"1":"0"}},isDefault:{get:function(){return"1"==this.queryConditions.default_flag},set:function(t){this.queryConditions.default_flag=t?"1":"0"}}},props:{queryUrl:{type:String,default:"/common/fundName.json"},showAll:{type:Boolean,default:!1},isSettle:{type:Boolean,default:!1},extendButton:{type:Boolean,default:!1},height:[Number,String],onFundClick:{type:Function,default:function(t){}},onFundQuery:{type:Function,default:function(t){}}},watch:{filterText:function(t){this.$refs.fundTree.filter(t)},fundTree:function(t){this.$emit("getFundTree",t)}},activated:function(){var t=this;Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundList=e.data)}),Object(n.j)("1").then(function(e){e.data&&e.data.length>0&&(t.bankList=e.data)})},created:function(){var t=this;this.handleConditionQuery(),Object(n.t)(610087).then(function(e){e.data&&e.data.length>0&&(t.fundTypeList=e.data)}),Object(n.t)(90528).then(function(e){e.data&&e.data.length>0&&(t.dataSourceList=e.data)})},methods:{filterNode:function(t,e){return!t||-1!==e.text.indexOf(t)},openQuery:function(){this.activeNames=["1"],this.setQueryMsg=!0},handleConditionQuery:function(t){var e=this;Object(n.w)(this.queryUrl,this.queryConditions).then(function(t){e.showAll?e.fundTree=[{text:"全部",code:"",children:t.data}]:e.fundTree=t.data,e.onFundClick(e.fundTree[0]),e.onFundQuery(e.fundTree),e.filterText="",e.selectNodeByCode(e.fundTree[0].code)})},handleOK:function(){var t=this;Object(n.w)(this.queryUrl,this.queryConditions).then(function(e){t.showAll?t.fundTree=[{text:"全部",code:"",children:e.data}]:t.fundTree=e.data,t.onFundClick(t.fundTree[0]),t.onFundQuery(t.fundTree),t.filterText="",t.selectNodeByCode(t.fundTree[0].code)}).catch(function(t){}),this.setQueryMsg=!1},handleSave:function(){var t=this;this.$refs.queryConditions.validate(function(e){e||t.$alert("名称不能为空!","错误",{confirmButtonText:"确定",type:"error"})});var e={condition_id:this.queryConditions.condition_id,data_source:this.queryConditions.data_source,fund_id_list:this.queryConditions.fund_id_list.join(","),fund_status_list:this.queryConditions.fund_status.join(","),fund_type_list:this.queryConditions.fund_type.join(","),condition_name:this.queryConditions.name,transfer_flag:this.queryConditions.transfer_flag,default_flag:this.queryConditions.default_flag,fund_trust_bank:this.queryConditions.fund_trust_bank,show_busin_done:this.queryConditions.show_busin_done};Object(n.W)(e).then(function(e){e.data.success?(t.$alert("保存成功","提示",{confirmButtonText:"确定",type:"info"}),t.loadCondition()):"1120003"==e.data.code?t.$confirm("条件名称不能重复，是否覆盖同名条件？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.queryConditions.condition_id=e.data.data,t.handleSave()}):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})},handleCancel:function(){this.setQueryMsg=!1},handleDelete:function(){var t=this;this.queryConditions.condition_id?this.$confirm("确认删除所选条件？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.d)(t.queryConditions.condition_id).then(function(e){t.$alert("删除成功","提示",{confirmButtonText:"确定",type:"info"}),t.resetCondition(),t.setQueryMsg=!1,t.loadCondition()})}):this.$alert("未选中查询条件","错误",{confirmButtonText:"确定",type:"error"})},resetCondition:function(){this.queryConditions={name:"",default_flag:"0",condition_id:null,keyword:"",data_source:"",fund_id_list:[],fund_status:["1"],fund_type:[],fund_trust_bank:"",transfer_flag:"1",isSettle:this.isSettle},this.queryConditions.condition_id=null},loadCondition:function(){var t=this;Object(n.M)().then(function(e){e.data&&e.data.length>0&&(t.conditionList=e.data)})},getFundList:function(){return this.fundList},selectNodeByCode:function(t){var e=this;this.$nextTick(function(){e.$refs.fundTree.setCurrentKey(t)})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",{staticStyle:{"padding-left":"6px","padding-right":"6px"}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"关键字"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1),t._v(" "),a("div",{staticClass:"auto-height",staticStyle:{"margin-top":"10px"}},[a("el-scrollbar",{staticClass:"h-scrollbar",staticStyle:{height:"100%"}},[a("el-tree",{ref:"fundTree",attrs:{data:t.fundTree,props:t.treeProps,"node-key":"code","default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.onFundClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[a("span",[t._v(t._s(n.label))])])}}])})],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"650","mask-closable":!1},model:{value:t.setQueryMsg,callback:function(e){t.setQueryMsg=e},expression:"setQueryMsg"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("高级查询")])]),t._v(" "),a("h-form",{ref:"queryConditions",attrs:{model:t.queryConditions,"label-width":130,cols:"2"}},[a("h-row",{style:{"margin-top":"5px","margin-bottom":"5px"}},[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"产品",prop:"fund_id_list"}},[a("el-select",{attrs:{size:"mini",filterable:"",multiple:"",clearable:""},model:{value:t.queryConditions.fund_id_list,callback:function(e){t.$set(t.queryConditions,"fund_id_list",e)},expression:"queryConditions.fund_id_list"}},t._l(t.fundList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"产品状态",prop:"fund_status"}},[a("el-select",{attrs:{size:"mini",multiple:"",clearable:""},model:{value:t.queryConditions.fund_status,callback:function(e){t.$set(t.queryConditions,"fund_status",e)},expression:"queryConditions.fund_status"}},[a("el-option",{key:"1",attrs:{value:"1",label:"正常"}}),t._v(" "),a("el-option",{key:"2",attrs:{value:"2",label:"注销"}}),t._v(" "),a("el-option",{key:"3",attrs:{value:"3",label:"冻结"}})],1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"是否划款",prop:"transfer_flag"}},[a("el-select",{attrs:{size:"mini",clearable:""},model:{value:t.queryConditions.transfer_flag,callback:function(e){t.$set(t.queryConditions,"transfer_flag",e)},expression:"queryConditions.transfer_flag"}},[a("el-option",{key:"1",attrs:{value:"1",label:"是"}}),t._v(" "),a("el-option",{key:"0",attrs:{value:"0",label:"否"}})],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"显示无待办的产品"}},[a("h-switch",{model:{value:t.showDone,callback:function(e){t.showDone=e},expression:"showDone"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"产品类型",prop:"fund_type"}},[a("el-select",{attrs:{size:"mini",filterable:"",multiple:"",clearable:""},model:{value:t.queryConditions.fund_type,callback:function(e){t.$set(t.queryConditions,"fund_type",e)},expression:"queryConditions.fund_type"}},t._l(t.fundTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"托管人",prop:"fund_trust_bank"}},[a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},model:{value:t.queryConditions.fund_trust_bank,callback:function(e){t.$set(t.queryConditions,"fund_trust_bank",e)},expression:"queryConditions.fund_trust_bank"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"产品来源",prop:"data_source"}},[a("el-select",{attrs:{size:"mini",filterable:"",clearable:""},model:{value:t.queryConditions.data_source,callback:function(e){t.$set(t.queryConditions,"data_source",e)},expression:"queryConditions.data_source"}},t._l(t.dataSourceList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1)],1),t._v(" "),a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"     保存条件",name:"2"}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"名称",prop:"name",required:""}},[a("h-input",{model:{value:t.queryConditions.name,callback:function(e){t.$set(t.queryConditions,"name",e)},expression:"queryConditions.name"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"设为默认"}},[a("h-switch",{model:{value:t.isDefault,callback:function(e){t.isDefault=e},expression:"isDefault"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])])],1)],1),t._v(" "),a("h-col",{attrs:{span:"3"}},[a("h-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"error"},on:{click:t.handleDelete}},[t._v("删除")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.handleOK}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var r=a("VU/8")(i,o,!1,function(t){a("5ZLY"),a("sN4P")},"data-v-01173abc",null);e.a=r.exports},R3Ur:function(t,e){},RCPB:function(t,e,a){"use strict";var n=a("3dxc"),s=a("Q5rI"),i=a("8DhI"),o={name:"ReviewTable",data:function(){var t=this;return{showResult:!1,resultColums:[{width:80,key:"lineNum",title:"复核编号",align:"center"},{key:"errorInfo",title:"失败原因",align:"center"}],autoHeight:0,errorData:[],pageSizeOpts:[25,50,75,100],reviewColumns:[{type:"selection",width:40,align:"center"},{title:"序号",key:"check_id",sortable:!0,width:80,align:"center"},{title:"变更类型",key:"check_type",width:100,sortable:!0,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.check_type,t.checkTypeList))}},{title:"修改人",key:"operator_name",width:150,sortable:!0,align:"center",ellipsis:!0},{title:"变更项",key:"object_name",ellipsis:!0,width:150,align:"center"},{title:"变更时间",key:"input_date",sortable:!0,width:150,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.input_date,a.input_time))}},{title:"复核状态",sortable:!0,key:"check_status",ellipsis:!0,width:100,align:"center",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.check_status,t.checkStatusList))}},{title:"变更内容",key:"modify_desc",align:"center",ellipsis:!0,render:function(t,e){return e.row.modify_desc?t("span",{},decodeURIComponent(e.row.modify_desc)):""}},{title:"复核人",key:"check_operator",width:150,sortable:!0,align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.check_operator,t.operatorList))}},{title:"备注",key:"remark",width:200,align:"center",ellipsis:!0}],checkStatusList:[{code:"1",text:"未复核"},{code:"2",text:"复核通过"},{code:"3",text:"复核拒绝"}],checkTypeList:[],operatorList:[]}},props:{queryCheck:{type:Object,default:function(){return new Object({checkStatus:"1",inputOperator:null})}},onSelectionChange:{type:Function,default:function(t){}},clearData:{type:Function,default:function(t){}}},created:function(){var t=this;Object(s.t)(10054).then(function(e){return t.checkTypeList=e.data}),Object(s.N)().then(function(e){e.data&&e.data.length>0&&(t.operatorList=e.data)}).catch(function(t){console.log(t)})},components:{HDatagrid:n.a},methods:{refresh:function(){this.$refs.datagrid.dataChange(1),this.clearData()},resizeTable:function(t){this.autoHeight=t},handlePass:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a=!0,n="",s=0;s<e.length;s++){if("1"!=e[s].check_status){a=!1;break}n+=e[s].check_id+","}if(!a)return this.openMask(),void this.$alert("存在已经复核的记录,请确认后重新提交！","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});n=n.substring(0,n.length-1);var o=e[0].object_type;Object(i.b)(n,!0,o).then(function(e){e.data&&"0"==e.data.code?(t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):"1120002"==e.data.code?(t.showResult=!0,t.errorData=e.data.data):(t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh())})},handleReject:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a=!0,n="",s=0;s<e.length;s++){if("1"!=e[s].check_status){a=!1;break}n+=e[s].check_id+","}if(!a)return this.openMask(),void this.$alert("存在已经复核的记录,请确认后重新提交！","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});n=n.substring(0,n.length-1);var o=e[0].object_type;this.openMask(),this.$prompt("确定拒绝该申请？请填写原因：","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var a=e.value;Object(i.b)(n,!1,o,a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):"1120002"==e.data.code?(t.showResult=!0,t.errorData=e.data.data):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}).catch(function(t){})}).catch(function(){t.closeMask()})},handleCurrentChange:function(){var t=this.$refs.datagrid.$refs.gridContent.getSelection();1===t.length&&this.onSelectionChange(t[0])},handleUnselect:function(){this.clearData()},confirm:function(){this.showResult=!1,this.refresh()}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review-table"},[a("h-row",{staticStyle:{"margin-bottom":"0px"}},[a("h-col",{attrs:{span:"10"}},[a("h-button",{staticClass:"btn-custom",attrs:{icon:"right"},on:{click:t.handlePass}},[t._v("复核通过")]),t._v(" "),a("h-button",{staticClass:"btn-custom",attrs:{icon:"close"},on:{click:t.handleReject}},[t._v("复核拒绝")])],1),t._v(" "),a("h-col",{attrs:{span:"14"}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px",float:"right"},attrs:{inline:!0,size:"mini",model:t.queryCheck}},[a("el-form-item",{attrs:{label:"修改人"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryCheck.inputOperator,callback:function(e){t.$set(t.queryCheck,"inputOperator",e)},expression:"queryCheck.inputOperator"}},t._l(t.operatorList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"复核状态"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.queryCheck.checkStatus,callback:function(e){t.$set(t.queryCheck,"checkStatus",e)},expression:"queryCheck.checkStatus"}},t._l(t.checkStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticClass:"mt10",staticStyle:{"margin-top":"0px"},attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.reviewColumns,bindForm:t.queryCheck,onCurrentChange:t.handleCurrentChange,onCurrentChangeCancel:t.handleUnselect,url:"/check/checkPage.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("复核结果")])]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.resultColums}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("wsXy")},null,null);e.a=l.exports},RCbw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("ri5M"),o={name:"stampInfo",components:{FundChooseMsgBox:a("tq1/").a,HDatagrid:n.a},data:function(){return{autoHeight:0,pageSizeOpts:[25,50,75,100],actionType:"",fullHeight:"",fileList:[],errorData:[],operatorList:[],imgInfo:{imgUrl:"",imgHeight:""},showResult:!1,showStampDialog:!1,isTransfer:!1,uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",stampInfo:{stamp_id:"",stamp_name:"",stamp_type:"",operator_no:"",operator_list:"",fund_id:"",remark:"",file_id:""},queryForm:{type:this.stampType},uploadData:{fileType:"5",fundId:""},accountColums:[{width:80,key:"lineNum",title:"行号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}]}},watch:{showStampDialog:function(t){t?this.openMask():(this.closeMask(),this.fileList=[]),this.isTransfer=!1},showResult:function(t){t?this.openMask():this.closeMask()},operatorList:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.stampInfo.operator_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.stampInfo.operator_list=t;else{var a=t.split(",");this.stampInfo.operator_list=this.removeArr(a,"-1")}this.operatorList=this.stampInfo.operator_list}},props:{stampType:{type:String,default:""},stampColumns:{type:Array,default:[]},fundIdList:{type:Array,default:[]},operatorNoList:{type:Array,default:[]}},methods:{resizeTable:function(t,e){this.autoHeight=t,this.fullHeight=e},refresh:function(){this.$refs.datagrid.dataChange(1)},stampAdd:function(){this.stampInfo={stamp_id:null,stamp_name:"",operator_no:"",operator_list:"",stamp_type:this.stampType,fund_id:"",remark:"",file_id:""},this.fileList=[],this.actionType="add",this.imgInfo.imgUrl="",this.operatorList=this.stampInfo.operator_list,"1"==this.stampType||"2"==this.stampType?this.imgInfo.imgHeight="300":this.imgInfo.imgHeight="265",this.$refs.stampForm.resetFields(),this.showStampDialog=!0},stampModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e.length>1?(this.openMask(),void this.$alert("只能选择一条记录修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void this.stampDbClick(e[0])},stampDbClick:function(t){var e=this;"1"==this.stampType||"2"==this.stampType?this.imgInfo.imgHeight="300":this.imgInfo.imgHeight="265",this.stampInfo=t,this.stampInfo.operator_no=t.operator_no.toString(),this.stampInfo.fund_id=t.fund_id.toString(),this.operatorList=this.stampInfo.operator_list,this.fileList=[{name:this.stampInfo.stamp_name}],Object(s.L)(this.stampInfo.file_id).then(function(t){var a=t.data.file_path;-1!=a.indexOf("jpg")||-1!=a.indexOf("png")||-1!=a.indexOf("PNG")||-1!=a.indexOf("JPG")?(e.imgInfo.imgUrl=window.LOCAL_CONFIG.API_HOME+"/systemmgnt/stamp/downloadStamp.json?fileId="+t.data.file_id,"1"==e.stampType||"2"==e.stampType?e.imgInfo.imgHeight="335":e.imgInfo.imgHeight="305"):(Object(s._4)(t.data.file_id).then(function(t){e.imgInfo.imgUrl=t.data.stampInfo}),"1"==e.stampType||"2"==e.stampType?e.imgInfo.imgHeight="335":e.imgInfo.imgHeight="305")}),this.showStampDialog=!0,this.actionType="modify"},stampDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a="",n=0;n<e.length;n++)a+=e[n].stamp_id+",";a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认删除这条签章信息？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.d)(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},cancelStamp:function(){this.showStampDialog=!1},saveStamp:function(){var t=this,e=!0;this.$refs.stampForm.validate(function(t){return e=e&&t}),""==this.stampInfo.file_id&&(e=!1),e?"add"==this.actionType?Object(i.b)({stamp:this.stampInfo,isTransfer:this.isTransfer}).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showStampDialog=!1}}).then(function(){t.showStampDialog=!1}),t.refresh()):"1120002"==e.data.code?(t.showResult=!0,t.errorData=e.data.data):t.$alert(e.data.msg,"失败",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&Object(i.g)({stamp:this.stampInfo,isTransfer:this.isTransfer}).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showStampDialog=!1}}).then(function(){t.showStampDialog=!1}),t.refresh()):e.data&&"1120010"==e.data.code?t.showStampDialog=!1:t.$alert(e.data.msg,"失败",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})},fileUploaded:function(t,e,a){var n=this;if("0"!=t.code)return this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error"}),void a.splice(a.length-1,1);1==a.length?(this.stampInfo.file_id=t.data,this.stampInfo.stamp_name=a[0].name):2==a.length?(this.stampInfo.file_id=t.data,this.stampInfo.stamp_name=a[1].name,a.splice(0,1)):(this.stampInfo.file_id="",this.stampInfo.stamp_name=""),Object(s.L)(t.data).then(function(t){var e=t.data.file_path;-1!=e.indexOf("jpg")||-1!=e.indexOf("png")||-1!=e.indexOf("PNG")||-1!=e.indexOf("JPG")?(n.imgInfo.imgUrl=window.LOCAL_CONFIG.API_HOME+"/systemmgnt/stamp/downloadStamp.json?fileId="+t.data.file_id,"1"==n.stampType||"2"==n.stampType?n.imgInfo.imgHeight="335":n.imgInfo.imgHeight="305"):(Object(s._4)(t.data.file_id).then(function(t){n.imgInfo.imgUrl=t.data.stampInfo}),"1"==n.stampType||"2"==n.stampType?n.imgInfo.imgHeight="335":n.imgInfo.imgHeight="305")})},fileRemoved:function(t,e){this.stampInfo.stamp_name="",this.stampInfo.file_id="",this.fileList=[],this.imgInfo.imgUrl="","1"==this.stampType||"2"==this.stampType?this.imgInfo.imgHeight="300":this.imgInfo.imgHeight="265"},choseFundList:function(){this.$refs.stampInfoMsgBox.showMsgBox(this.stampInfo.fund_id,this.fullHeight,"1")},saveFundInfo:function(t){this.stampInfo.fund_id=t},removeArr:function(t,e){for(var a=0;a<t.length;a++)t[a]==e&&t.splice(a,1);return t}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-row",{staticClass:"full-h"},[a("h-col",{staticClass:"full-h"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.stampAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.stampModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.stampDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-sync"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.queryForm,"auto-load":!1,"on-row-db-click":t.stampDbClick,columns:t.stampColumns,url:"/systemmgnt/stamp/signInfo.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"800","mask-closable":!1},model:{value:t.showStampDialog,callback:function(e){t.showStampDialog=e},expression:"showStampDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增签章信息")]):a("span",[t._v("修改签章信息")])]),t._v(" "),a("h-form",{ref:"stampForm",attrs:{model:t.stampInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"12"}},["1"==t.stampType?a("h-form-item",{attrs:{required:"",label:"操作员名称",prop:"operator_no"}},[a("h-select",{attrs:{filterable:""},model:{value:t.stampInfo.operator_no,callback:function(e){t.$set(t.stampInfo,"operator_no",e)},expression:"stampInfo.operator_no"}},t._l(t.operatorNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"2"==t.stampType&&"add"==t.actionType?a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("div",[a("h-select",{staticStyle:{width:"215px"},attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.stampInfo.fund_id,callback:function(e){t.$set(t.stampInfo,"fund_id",e)},expression:"stampInfo.fund_id"}},t._l(t.fundIdList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1),t._v(" "),a("h-button",{staticStyle:{float:"right","margin-top":"3px",height:"28px","line-height":"16px"},attrs:{type:"primary"},on:{click:t.choseFundList}},[t._v("选择")])],1)]):t._e(),t._v(" "),"3"==t.stampType?a("h-form-item",{attrs:{required:"",label:"可使用操作员",prop:"operator_list"}},[a("h-select",{attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.operatorList,callback:function(e){t.operatorList=e},expression:"operatorList"}},t._l(t.operatorNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"2"==t.stampType&&"modify"==t.actionType?a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small",filterable:""},model:{value:t.stampInfo.fund_id,callback:function(e){t.$set(t.stampInfo,"fund_id",e)},expression:"stampInfo.fund_id"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"签章名称",prop:"stamp_name"}},[a("h-input",{attrs:{disabled:""},model:{value:t.stampInfo.stamp_name,callback:function(e){t.$set(t.stampInfo,"stamp_name",e)},expression:"stampInfo.stamp_name"}})],1),t._v(" "),a("h-form-item",[a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{action:t.uploadUrl,drag:"",data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"on-remove":t.fileRemoved,accept:".jpg,.png,.hsel",limit:2,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),t._v(" "),a("h-form-item",{attrs:{label:"自动转换为hsel",prop:"isTransfer"}},[a("h-checkbox",{model:{value:t.isTransfer,callback:function(e){t.isTransfer=e},expression:"isTransfer"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"备注",prop:"remark"}},[a("h-input",{model:{value:t.stampInfo.remark,callback:function(e){t.$set(t.stampInfo,"remark",e)},expression:"stampInfo.remark"}})],1)],1),t._v(" "),a("h-col",{staticStyle:{"margin-left":"10px"},attrs:{span:"11"}},[a("img",{attrs:{src:t.imgInfo.imgUrl,height:t.imgInfo.imgHeight,width:"360",oncontextmenu:"return false;"}})])],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelStamp}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveStamp}},[t._v("确认")])],1)],1)],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增结果")]):a("span",[t._v("修改结果")])]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.accountColums}})],1),t._v(" "),a("fund-choose-msg-box",{ref:"stampInfoMsgBox",on:{saveFundInfo:t.saveFundInfo}})],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("2LNm")},null,null);e.default=l.exports},RJjQ:function(t,e){},Rtwu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l={name:"bankInfo",data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],transferTypeList:[],msgFlagList:[],keys:[],showBankInfoDialog:!1,actionType:"",transferTypeFormList:[],custodialorgList:[],bankInfoColumns:[{title:"托管人编号",key:"custodial_no",width:120,sortable:!0,align:"right",ellipsis:!0},{title:"托管人名称",key:"custodian_name",align:"left",width:120,ellipsis:!0},{title:"托管机构",key:"org_id",align:"left",width:120,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.org_id,t.custodialorgList))}},{title:"托管人余额查询频率",key:"query_interval",align:"right",width:120,ellipsis:!0},{title:"划款模式",key:"transfer_type",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_type,t.transferTypeList))}},{title:"附件发送模式",key:"sendfile_type",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.sendfile_type,t.transferTypeList))}},{title:"附件发送时点",key:"sendfile_time",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.sendfile_time,t.sendFileTimeList))}},{title:"日初对账",key:"init_check_acc_flag",align:"left",width:80,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.init_check_acc_flag,t.checkIsOrNo))}},{title:"日终对账",key:"final_check_acc_flag",align:"left",width:80,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.final_check_acc_flag,t.checkIsOrNo))}},{title:"深证通用户标识",key:"szt_user_id",align:"left",ellipsis:!0},{title:"深证通公司代码",key:"szt_company_code",align:"right",ellipsis:!0},{title:"深证通应用标识",key:"szt_app_id",align:"left",ellipsis:!0},{title:"启用压缩模式",key:"szt_zip_flag",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.szt_zip_flag,t.checkIsOrNo))}},{title:"深证通消息关联模式",key:"szt_msg_flag",align:"left",width:120,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.szt_msg_flag,t.msgFlagList))}},{title:"上海非担保结算账户",key:"sh_fdb_account",align:"left",width:120,ellipsis:!0},{title:"深圳非担保结算账户",key:"sz_fdb_account",align:"left",width:120,ellipsis:!0},{title:"联系电话",key:"bank_phone",align:"left",width:120,ellipsis:!0},{title:"传真",key:"bank_fax",align:"left",width:120,ellipsis:!0},{title:"邮箱",key:"bank_mail",align:"left",width:120,ellipsis:!0}],sendFileTimeList:[{code:"1",text:"手工发送"},{code:"2",text:"提交指令时"},{code:"3",text:"发送指令时"}],checkIsOrNo:[{code:"0",text:"否"},{code:"1",text:"是"}],queryForm:{orgId:"",transferType:""},custodialorg:{org_id:"",bic_code:"",org_name:"",full_name:"",org_type:"",elec_transfer_flag:""},bankInfo:{custodial_no:null,custodian_name:"",org_id:"",szt_company_code:"",szt_user_id:"",szt_app_id:"",szt_key:"",szt_msg_flag:"",szt_zip_flag:"",query_interval:"",transfer_type:"",sendfile_type:"",sendfile_time:"",init_check_acc_flag:"",final_check_acc_flag:"",sh_fdb_account:"",sz_fdb_account:"",bank_phone:"",bank_fax:"",bank_mail:null},multiMailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?([,][\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?)*/,message:"邮箱格式不正确"}]}},watch:{showBankInfoDialog:function(t){t?this.openMask():this.closeMask()}},computed:{},mounted:function(){var t=this;Object(s.t)(90563).then(function(e){return t.msgFlagList=e.data}),Object(s.s)().then(function(e){return t.custodialorgList=e.data}),Object(s.t)(90524).then(function(e){e.data&&(t.transferTypeList=e.data,t.transferTypeFormList=e.data.filter(function(t){return 1!=t.code}))}),Object(s.z)().then(function(e){return t.keys=e.data}),this.re_layout()},methods:{refresh:function(){this.$refs.datagrid.dataChange(1)},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-110},addBankInfo:function(){this.$refs.bankInfoForm.resetFields(),this.bankInfo={custodial_no:null,custodian_name:"",org_id:"",szt_company_code:"",szt_user_id:"",szt_app_id:"",szt_key:"",szt_msg_flag:"",szt_zip_flag:"",query_interval:"30",transfer_type:"2",sendfile_type:"2",sendfile_time:"1",init_check_acc_flag:"0",final_check_acc_flag:"0",sh_fdb_account:"",sz_fdb_account:"",bank_phone:"",bank_fax:"",bank_mail:""},this.custodialorg={org_id:"",bic_code:"",org_name:"",full_name:"",org_type:"",elec_transfer_flag:""},this.showBankInfoDialog=!0,this.actionType="add"},modifyBankInfo:function(){var t=this;this.$refs.bankInfoForm.resetFields();var e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.bankInfoDbClick(e[0])},bankInfoDbClick:function(t){this.bankInfo=t,this.bankInfo.szt_key&&(this.bankInfo.szt_key=Object(s.c)(this.bankInfo.szt_key,this.keys)),this.bankInfo.transfer_type||(this.bankInfo.transfer_type=""),this.bankInfo.sendfile_type||(this.bankInfo.sendfile_type=""),this.bankInfo.bank_mail||(this.bankInfo.bank_mail=""),this.showBankInfoDialog=!0,this.actionType="modify"},deleteBankInfo:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确认删除该托管人信息吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e[0].custodial_no,r.a.post("/systemmgnt/bankInfo/bankInfoDel.json",{custodialNo:a})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.queryForm.org_id="",t.refresh()):t.$alert(e.data.msg.split(","),"提示",{confirmButtonText:"确定",type:"info",multiline:!0,callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},orgIdChange:function(t){var e=this;Object(s.r)(t).then(function(t){t.data.success&&(e.custodialorg.full_name=t.data.data.full_name,e.custodialorg.org_id=t.data.data.org_id,e.custodialorg.bic_code=t.data.data.bic_code,e.custodialorg.org_name=t.data.data.org_name,e.custodialorg.org_type=t.data.data.org_type,e.custodialorg.elec_transfer_flag=t.data.data.elec_transfer_flag,e.bankInfo.custodian_name=t.data.data.org_name,"0"==e.custodialorg.elec_transfer_flag&&(e.bankInfo.szt_company_code="",e.bankInfo.szt_app_id="",e.bankInfo.szt_msg_flag="","4"!=e.bankInfo.transfer_type&&(e.bankInfo.query_interval=""),e.bankInfo.szt_user_id="",e.bankInfo.szt_key="",e.bankInfo.szt_zip_flag=""))})},blurInterval:function(){"4"==this.bankInfo.transfer_type?this.bankInfo.query_interval<5&&(this.$alert("查询频率不能少于5分钟","错误",{confirmButtonText:"确定",type:"error"}),this.bankInfo.query_interval=5):this.bankInfo.query_interval<0&&(this.$alert("查询频率的范围不能小于零","错误",{confirmButtonText:"确定",type:"error"}),this.bankInfo.query_interval=30)},transferTypeChange:function(t){"add"==this.actionType&&(this.bankInfo.query_interval="4"==t?5:30)},cancelBankInfo:function(){this.showBankInfoDialog=!1},saveBankInfo:function(){var t=this,e=!0;if(this.$refs.bankInfoForm.validate(function(t){return e=e&&t}),e){if("4"==this.bankInfo.transfer_type){if(this.bankInfo.query_interval<5)return void this.$alert("查询频率不能少于5分钟","错误",{confirmButtonText:"确定",type:"error"})}else if(0==this.custodialorg.elec_transfer_flag)this.bankInfo.query_interval<30?this.bankInfo.query_interval=30:this.bankInfo.query_interval>120&&(this.bankInfo.query_interval=120);else if(this.bankInfo.query_interval<0)return void this.$alert("查询频率的范围不能小于零","错误",{confirmButtonText:"确定",type:"error"});var a;this.bankInfo.szt_key&&(this.bankInfo.szt_key=Object(s.e)(this.bankInfo.szt_key,this.keys)),"add"==this.actionType?(a=this.bankInfo,r.a.post("/systemmgnt/bankInfo/bankInfoAdd.json",a,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(e){e.data&&e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showBankInfoDialog=!1}}).then(function(){t.showBankInfoDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&function(t){return r.a.post("/systemmgnt/bankInfo/bankInfoModify.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})}(this.bankInfo).then(function(e){e.data&&e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showBankInfoDialog=!1}}).then(function(){t.showBankInfoDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}else this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})}},components:{HDatagrid:n.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"systemmgnt-bankinfo",attrs:{id:"full-h-wrapper"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",[a("h-form",{ref:"queryForm",attrs:{model:t.queryForm}},[a("h-row",[a("h-col",{attrs:{span:"5"}},[a("h-form-item",{attrs:{label:"托管机构","label-width":75}},[a("h-select",{attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.queryForm.orgId,callback:function(e){t.$set(t.queryForm,"orgId",e)},expression:"queryForm.orgId"}},t._l(t.custodialorgList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"5"}},[a("h-form-item",{attrs:{label:"划款模式","label-width":75}},[a("h-select",{attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.queryForm.transferType,callback:function(e){t.$set(t.queryForm,"transferType",e)},expression:"queryForm.transferType"}},t._l(t.transferTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"3"}},[a("h-form-item",{attrs:{"label-width":20}},[a("h-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1)],1)],1)],1),t._v(" "),a("h-button-group",{staticStyle:{"margin-bottom":"4px"}},[a("h-button",{attrs:{icon:"add"},on:{click:t.addBankInfo}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.modifyBankInfo}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.deleteBankInfo}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"",hasPage:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.bankInfoColumns,bindForm:t.queryForm,"on-row-db-click":t.bankInfoDbClick,url:"/systemmgnt/bankInfo/bankInfo.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"700","mask-closeable":!1},model:{value:t.showBankInfoDialog,callback:function(e){t.showBankInfoDialog=e},expression:"showBankInfoDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增托管人信息")]):a("span",[t._v("修改托管人信息")])]),t._v(" "),a("h-form",{ref:"bankInfoForm",attrs:{model:t.bankInfo,"label-width":120}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"托管机构",prop:"org_id"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.orgIdChange},model:{value:t.bankInfo.org_id,callback:function(e){t.$set(t.bankInfo,"org_id",e)},expression:"bankInfo.org_id"}},t._l(t.custodialorgList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"托管人名称",prop:"custodian_name"}},[a("h-input",{model:{value:t.bankInfo.custodian_name,callback:function(e){t.$set(t.bankInfo,"custodian_name",e)},expression:"bankInfo.custodian_name"}})],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{label:"深证通公司代码",prop:"szt_company_code"}},[a("h-input",{model:{value:t.bankInfo.szt_company_code,callback:function(e){t.$set(t.bankInfo,"szt_company_code",e)},expression:"bankInfo.szt_company_code"}})],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{label:"深证通应用标识",prop:"szt_app_id"}},[a("h-input",{model:{value:t.bankInfo.szt_app_id,callback:function(e){t.$set(t.bankInfo,"szt_app_id",e)},expression:"bankInfo.szt_app_id"}})],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{"label-wrap":"",label:"深证通消息关联模式",prop:"szt_msg_flag"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankInfo.szt_msg_flag,callback:function(e){t.$set(t.bankInfo,"szt_msg_flag",e)},expression:"bankInfo.szt_msg_flag"}},t._l(t.msgFlagList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag||"4"==t.bankInfo.transfer_type,expression:"(custodialorg.elec_transfer_flag == '1') || bankInfo.transfer_type == '4'"}],attrs:{required:"1"==t.bankInfo.transfer_type,label:"查询频率",prop:"query_interval"}},[a("h-typefield",{attrs:{integerNum:"3",suffixNum:"0"},on:{"on-blur":t.blurInterval},model:{value:t.bankInfo.query_interval,callback:function(e){t.$set(t.bankInfo,"query_interval",e)},expression:"bankInfo.query_interval"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("分钟")])])],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"是否日初对账",prop:"init_check_acc_flag"}},[a("h-select",{model:{value:t.bankInfo.init_check_acc_flag,callback:function(e){t.$set(t.bankInfo,"init_check_acc_flag",e)},expression:"bankInfo.init_check_acc_flag"}},t._l(t.checkIsOrNo,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"是否日终对账",prop:"final_check_acc_flag"}},[a("h-select",{model:{value:t.bankInfo.final_check_acc_flag,callback:function(e){t.$set(t.bankInfo,"final_check_acc_flag",e)},expression:"bankInfo.final_check_acc_flag"}},t._l(t.checkIsOrNo,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"上海非担保结算账户",prop:"sh_fdb_account"}},[a("h-input",{attrs:{maxlength:128},model:{value:t.bankInfo.sh_fdb_account,callback:function(e){t.$set(t.bankInfo,"sh_fdb_account",e)},expression:"bankInfo.sh_fdb_account"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"深圳非担保结算账户",prop:"sz_fdb_account"}},[a("h-input",{attrs:{maxlength:128},model:{value:t.bankInfo.sz_fdb_account,callback:function(e){t.$set(t.bankInfo,"sz_fdb_account",e)},expression:"bankInfo.sz_fdb_account"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{label:"深证通用户标识",prop:"szt_user_id"}},[a("h-input",{model:{value:t.bankInfo.szt_user_id,callback:function(e){t.$set(t.bankInfo,"szt_user_id",e)},expression:"bankInfo.szt_user_id"}})],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{label:"深证通密钥",prop:"szt_key"}},[a("h-input",{directives:[{name:"attrdel",rawName:"v-attrdel:title",arg:"title"}],attrs:{type:"password",maxlength:20},model:{value:t.bankInfo.szt_key,callback:function(e){t.$set(t.bankInfo,"szt_key",e)},expression:"bankInfo.szt_key"}})],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{label:"启用压缩",prop:"szt_zip_flag"}},[a("h-select",{model:{value:t.bankInfo.szt_zip_flag,callback:function(e){t.$set(t.bankInfo,"szt_zip_flag",e)},expression:"bankInfo.szt_zip_flag"}},t._l(t.checkIsOrNo,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag != '1'"}],attrs:{required:"",label:"划款模式",prop:"transfer_type"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.transferTypeChange},model:{value:t.bankInfo.transfer_type,callback:function(e){t.$set(t.bankInfo,"transfer_type",e)},expression:"bankInfo.transfer_type"}},t._l(t.transferTypeFormList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{required:"",label:"划款模式",prop:"transfer_type"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.transferTypeChange},model:{value:t.bankInfo.transfer_type,callback:function(e){t.$set(t.bankInfo,"transfer_type",e)},expression:"bankInfo.transfer_type"}},t._l(t.transferTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"!=t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag != '1'"}],attrs:{required:"",label:"附件发送模式",prop:"sendfile_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankInfo.sendfile_type,callback:function(e){t.$set(t.bankInfo,"sendfile_type",e)},expression:"bankInfo.sendfile_type"}},t._l(t.transferTypeFormList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==t.custodialorg.elec_transfer_flag,expression:"custodialorg.elec_transfer_flag == '1'"}],attrs:{required:"",label:"附件发送模式",prop:"sendfile_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankInfo.sendfile_type,callback:function(e){t.$set(t.bankInfo,"sendfile_type",e)},expression:"bankInfo.sendfile_type"}},t._l(t.transferTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"附件发送时点",prop:"sendfile_time"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankInfo.sendfile_time,callback:function(e){t.$set(t.bankInfo,"sendfile_time",e)},expression:"bankInfo.sendfile_time"}},t._l(t.sendFileTimeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{maxlength:32},model:{value:t.bankInfo.bank_phone,callback:function(e){t.$set(t.bankInfo,"bank_phone",e)},expression:"bankInfo.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{maxlength:32},model:{value:t.bankInfo.bank_fax,callback:function(e){t.$set(t.bankInfo,"bank_fax",e)},expression:"bankInfo.bank_fax"}})],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"邮箱",prop:"bank_mail",validRules:t.multiMailValidRule}},[a("h-input",{attrs:{placeholder:"多个邮箱请用英文逗号隔开",type:"textarea",size:"small",maxlength:1024,canResize:!1,rows:1,autosize:{minRows:1,maxRows:2}},model:{value:t.bankInfo.bank_mail,callback:function(e){t.$set(t.bankInfo,"bank_mail",e)},expression:"bankInfo.bank_mail"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelBankInfo}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveBankInfo}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var u=a("VU/8")(l,c,!1,function(t){a("hfda")},null,null);e.default=u.exports},Ru6H:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("QTaZ"),i=a("lbHh"),o=a.n(i),r=a("Q5rI"),l={name:"recordQuery",components:{HOtherFundTree:s.a,HDatagrid:n.a},data:function(){var t=this;return{split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],dealTypeList:[],businClassList:[],businFlagList:[],sysDate:o.a.get("CurrSysDate"),recordColumns:[{title:"产品代码",key:"fund_code",width:80,align:"left",ellipsis:!0,sortable:!0},{title:"产品名称",key:"fund_name",align:"left",ellipsis:!0},{title:"勾销状态",key:"liquidate_ins_status",align:"left",width:80,ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.liquidate_ins_status,t.statusList))}},{title:"业务分类",key:"cop_busin_class",align:"left",width:80,ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cop_busin_class,t.businClassList))}},{title:"业务标志",key:"cop_busin_flag",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cop_busin_flag,t.businFlagList))}},{title:"资金方向",key:"cash_direction",align:"left",ellipsis:!0,width:80,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cash_direction,t.directionList))}},{title:"交易金额",key:"trade_balance",align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(r.h)(a.trade_balance))}},{title:"指令金额",key:"settle_balance",align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(r.h)(a.settle_balance))}},{title:"对手方账号",key:"rival_account_no",align:"center",width:120,ellipsis:!0,render:function(t,e){var a=e.row.rival_account_no;return t("span",{attrs:{title:a}},a)}},{title:"对手方账户名",key:"rival_account_name",align:"center",width:120,ellipsis:!0,render:function(t,e){var a=e.row.rival_account_name;return t("span",{attrs:{title:a}},a)}},{title:"交收日期",key:"cash_settle_date",align:"left",ellipsis:!0,width:80,sortable:!0,render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.cash_settle_date))}},{title:"勾销方式",key:"liquidate_ins_deal_type",align:"left",ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.liquidate_ins_deal_type,t.dealTypeList))}}],directionList:[{code:"1",text:"入款"},{code:"2",text:"出款"}],statusList:[{code:"0",text:"未处理"},{code:"1",text:"待匹配"},{code:"2",text:"已匹配"},{code:"4",text:"已主推"}],queryForm:{fund_code:"",status:"",keyword:"",begin_date:o.a.get("CurrSysDate"),end_date:o.a.get("CurrSysDate")}}},computed:{settleDate:{get:function(){return[this.queryForm.begin_date?Object(r.R)(this.queryForm.begin_date):this.sysDate,this.queryForm.end_date?Object(r.R)(this.queryForm.end_date):this.sysDate]},set:function(t){this.queryForm.begin_date=Object(r.Q)(t[0]),this.queryForm.end_date=Object(r.Q)(t[1])}}},mounted:function(){var t=this;Object(r.t)(90523).then(function(e){return t.businClassList=e.data}),Object(r.t)("businFlag").then(function(e){return t.businFlagList=e.data}),Object(r.t)(91192).then(function(e){return t.dealTypeList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-60},fundClick:function(t){t&&(t.text.indexOf(" ")>=0?this.queryForm.fund_code=t.text.split(" ")[0]:this.queryForm.fund_code=null,this.refresh())},refresh:function(){this.$refs.datagrid.dataChange(1)},onSplitMoving:function(){this.$refs.datagrid.handleResize()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"liquidate-recordquery",attrs:{id:"full-h-wrapper"}},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMoving},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{"show-all":!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20"},slot:"right"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"勾销状态"}},[a("el-select",{attrs:{clearable:"","collapse-tags":""},model:{value:t.queryForm.status,callback:function(e){t.$set(t.queryForm,"status",e)},expression:"queryForm.status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"交收时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.settleDate,callback:function(e){t.settleDate=e},expression:"settleDate"}})],1),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",maxlength:32,placeholder:"请输入关键字"},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword",e)},expression:"queryForm.keyword"}}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{overflow:"hidden"},attrs:{hasPage:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.recordColumns,bindForm:t.queryForm,"auto-load":!1,url:"/liquidate/query/record/page.json"}})],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("bgLv")},"data-v-56bd48ed",null);e.default=u.exports},"S+by":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HmOp"),s=a("3dxc"),i=a("Q5rI"),o=a("pMtO"),r=a("lbHh"),l=a.n(r),c={mixins:[a("+dCm").a],data:function(){return{parSetModel:!1,adjustValueModel:!1,dataQuery:{fundIdList:"",queryDate:l.a.get("CurrSysDate")},sysparam10014:0,sysparam10015:0,numberValidRule:[{test:/^[0-9]*$/,message:"只能输入数字"}],pageSizeOpts:[25,50,75,100],fundReservecolumns:[{title:"产品代码",key:"fund_code",width:100,ellipsis:!0,align:"center"},{title:"产品名称",key:"fund_name",ellipsis:!0,align:"center"},{title:"上月已缴备付金",key:"last_reserve_payment",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.last_reserve_payment))}},{title:"债券交易量调整值",key:"bond_trade_adjust_value",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.bond_trade_adjust_value))}},{title:"其他交易量调整值",key:"other_trade_adjust_value",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.other_trade_adjust_value))}},{title:"本月应缴备付金",key:"curr_reserve_payment",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.curr_reserve_payment))}},{title:"本月应备资金",key:"curr_reserve_unpay",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.curr_reserve_unpay))}},{title:"上日银行余额",key:"account_last_balance",width:130,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.account_last_balance))}},{title:"上日银行余额-本月应备资金",key:"diff_balance",width:180,ellipsis:!0,align:"center",render:function(t,e){var a=e.row;return t("span",{},Object(i.h)(a.diff_balance))}}],fundReserveInfo:{fund_id:"",fund_code:"",fund_name:"",curr_date:0,bond_trade_adjust_value:0,other_trade_adjust_value:0,last_reserve_payment:0,curr_reserve_payment:0,curr_reserve_unpay:0,account_last_balance:0,estimate_curr_reserve_payment:0,diff_balance:0}}},watch:{parSetModel:function(t){t?this.openMask():this.closeMask()},adjustValueModel:function(t){t?this.openMask():this.closeMask()}},computed:{queryDate:{get:function(){return this.dataQuery.queryDate?Object(i.R)(this.dataQuery.queryDate):Object(i.R)(l.a.get("CurrSysDate"))},set:function(t){this.dataQuery.queryDate=Object(i.Q)(t)}}},created:function(){},mounted:function(){this.reLayout()},methods:{reLayout:function(){this.re_layout("full-h-wrapper-on-fundreservereport","inner-on-fundreservereport",70)},Query:function(){this.$refs.datagrid.dataChange(1)},Export:function(){this.$refs.datagrid.exportCsv({filename:"备付金报表",original:!1})},Modify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.fundReserveReportDbClick(e[0])},fundReserveReportDbClick:function(t){var e=this,a=t.curr_date;if(a<l.a.get("CurrSysDate"))return this.openMask(),void this.$alert("不允许调整小于当日的交易量调整值","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});Object(o.c)(a).then(function(a){if(0==a.data.success)return e.openMask(),void e.$alert("不是本月前2个交易日或最后2个交易日，不允许调整交易量","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});e.fundReserveInfo=t,e.adjustValueModel=!0}).catch(function(t){e.openMask(),e.$alert("判断是否是本月前2个交易日或最后2个交易日异常","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})})},ModifyOK:function(){var t=this;Object(o.k)(this.fundReserveInfo).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.adjustValueModel=!1}}).then(function(){t.adjustValueModel=!1}),t.Query()):e.data&&"1120010"==e.data.code?t.adjustValueModel=!1:t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"warning"})})},ModifyCancle:function(){this.adjustValueModel=!1},ParSet:function(){var t=this;Object(i.K)(10014).then(function(e){t.sysparam10014=e.data.data}).catch(function(e){t.openMask(),t.$alert("债券备付金比例获取异常","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}),Object(i.K)(10015).then(function(e){t.sysparam10015=e.data.data}).catch(function(e){t.openMask(),t.$alert("其他备付金比例获取异常","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}),this.parSetModel=!0},ParSetCancle:function(){this.parSetModel=!1},ParSetOK:function(){var t=this;Object(o.m)(10014,this.sysparam10014).then(function(e){0!=e.data.success||t.$alert("参数调整失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.parSetModel=!1}}).then(function(){t.parSetModel=!1})}).catch(function(e){t.$alert("参数调整发生异常","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.parSetModel=!1}}).then(function(){t.parSetModel=!1})}),Object(o.m)(10015,this.sysparam10015).then(function(e){0!=e.data.success||t.$alert("参数调整失败","提示",{confirmButtonText:"确定",type:"info",callback:function(e){t.parSetModel=!1}}).then(function(){t.parSetModel=!1})}).catch(function(e){t.$alert("参数调整发生异常","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.parSetModel=!1}}).then(function(){t.parSetModel=!1})}),this.$alert("参数调整成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.parSetModel=!1}}).then(function(){t.parSetModel=!1})},sys10014Changed:function(){return this.sysparam10014>100?(this.$alert("其他备付金比例需要0-100之间","错误",{confirmButtonText:"确定",type:"error"}),void(this.sysparam10014=100)):this.sysparam10014<0?(this.$alert("其他备付金比例需要0-100之间","错误",{confirmButtonText:"确定",type:"error"}),void(this.sysparam10014=0)):void 0},sys10015Changed:function(){return this.sysparam10015>100?(this.$alert("债券备付金比例需要0-100之间","错误",{confirmButtonText:"确定",type:"error"}),void(this.sysparam10015=100)):this.sysparam10015<0?(this.$alert("债券备付金比例需要0-100之间","错误",{confirmButtonText:"确定",type:"error"}),void(this.sysparam10015=0)):void 0}},name:"Check",components:{HDatagrid:s.a,FundTree:n.a}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper-on-fundreservereport"}},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px","padding-left":"5px"},attrs:{inline:!0,size:"mini",model:t.dataQuery}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.Query}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.Modify}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.Export}},[t._v("导出")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.ParSet}},[t._v("参数")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{"margin-left":"5px","margin-top":"10px"},attrs:{hasPage:"","highlight-row":"",stripe:"",height:t.autoHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,bindForm:t.dataQuery,columns:t.fundReservecolumns,"on-row-db-click":t.fundReserveReportDbClick,url:"/cashcheck/fundReserve/fundReserveInfo.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"350",title:"参数调整","mask-closable":!1,inline:""},model:{value:t.parSetModel,callback:function(e){t.parSetModel=e},expression:"parSetModel"}},[a("div",[a("h-form",{attrs:{cols:"1","label-width":120}},[a("h-form-item",{attrs:{label:"债券备付金比例",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"3",suffixNum:"2",setNull:"",type:"money",placeholder:"请输入"},on:{"on-blur":t.sys10015Changed},model:{value:t.sysparam10015,callback:function(e){t.sysparam10015=e},expression:"sysparam10015"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"其他备付金比例",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"3",suffixNum:"2",setNull:"",type:"money",placeholder:"请输入"},on:{"on-blur":t.sys10014Changed},model:{value:t.sysparam10014,callback:function(e){t.sysparam10014=e},expression:"sysparam10014"}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.ParSetCancle}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.ParSetOK}},[t._v("确定")])],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"350",title:"交易量调整","mask-closable":!1,inline:""},model:{value:t.adjustValueModel,callback:function(e){t.adjustValueModel=e},expression:"adjustValueModel"}},[a("div",[a("h-form",{attrs:{cols:"1","label-width":120}},[a("h-form-item",{attrs:{label:"产品名称"}},[a("h-input",{attrs:{disabled:""},model:{value:t.fundReserveInfo.fund_name,callback:function(e){t.$set(t.fundReserveInfo,"fund_name",e)},expression:"fundReserveInfo.fund_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"债券交易量调整值",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"9",type:"money",setNull:"",divided:""},model:{value:t.fundReserveInfo.bond_trade_adjust_value,callback:function(e){t.$set(t.fundReserveInfo,"bond_trade_adjust_value",e)},expression:"fundReserveInfo.bond_trade_adjust_value"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"其他交易量调整值",validRules:t.numberValidRule}},[a("h-typefield",{attrs:{integerNum:"9",type:"money",setNull:"",divided:""},model:{value:t.fundReserveInfo.other_trade_adjust_value,callback:function(e){t.$set(t.fundReserveInfo,"other_trade_adjust_value",e)},expression:"fundReserveInfo.other_trade_adjust_value"}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.ModifyCancle}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.ModifyOK}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("9dja")},"data-v-7bed73f2",null);e.default=d.exports},TAFa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={components:{SendRecord:a("mnOV").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("SendRecord")},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},TF8g:function(t,e){},TdNe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("ri5M"),o={name:"dealStamp",components:{FundChooseMsgBox:a("tq1/").a,HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],actionType:"",fullHeight:"",fundInfoList:[],errorData:[],showDealStampDialog:!1,showResult:!1,columns:[{type:"selection",width:30,align:"center"},{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{key:"fund_id",title:"产品名称",sortable:!0,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.fund_id,t.fundInfoList))}},{key:"stamp_id",title:"公司签章",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.stamp_id,t.stampInfoList))}}],dealStampColums:[{width:80,type:"index",title:"序号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}],dealInfo:{fund_id:"",fund_id_list:"",stamp_id:""}}},watch:{showDealStampDialog:function(t){t?this.openMask():this.closeMask()}},props:{stampInfoList:{type:Array,default:[]}},activated:function(){var t=this;Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundInfoList=e.data)})},methods:{resizeTable:function(t,e){this.autoHeight=t,this.fullHeight=e},dealAdd:function(){this.dealInfo={fund_id:"",fund_id_list:"",stamp_id:""},this.actionType="add",this.$refs.dealForm.resetFields(),this.showDealStampDialog=!0},dealModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e.length>1?(this.openMask(),void this.$alert("只能选择一条记录修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void this.dealStampDbClick(e[0])},dealStampDbClick:function(t){this.dealInfo.fund_id=t.fund_id.toString(),this.dealInfo.stamp_id=t.stamp_id.toString(),this.actionType="modify",this.showDealStampDialog=!0},dealDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a="",n=0;n<e.length;n++)a+=e[n].fund_id+",";a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认删除这条签章信息?","确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})})},refresh:function(){this.$refs.datagrid.dataChange(1)},cancelDeal:function(){this.showDealStampDialog=!1},saveDeal:function(){var t=this,e=!0;this.$refs.dealForm.validate(function(t){return e=e&&t}),e?"add"==this.actionType?Object(i.a)(this.dealInfo.fund_id_list,this.dealInfo.stamp_id).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showDealStampDialog=!1}}).then(function(){t.showDealStampDialog=!1}),t.refresh()):"1120002"==e.data.code?(t.showDealStampDialog=!1,t.showResult=!0,t.errorData=e.data.data,t.errorData.total=t.dealInfo.fund_id_list.split(",").length,t.errorData.fail=e.data.data.length,t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):Object(i.f)(this.dealInfo.fund_id,this.dealInfo.stamp_id).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showDealStampDialog=!1}}).then(function(){t.showDealStampDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确认",type:"error"})},choseFundList:function(){this.$refs.dealStampMsgBox.showMsgBox(this.dealInfo.fund_id_list,this.fullHeight,"1")},saveFundInfo:function(t){this.dealInfo.fund_id_list=t}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[a("h-row",{staticClass:"full-h"},[a("h-col",{staticClass:"full-h"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.dealAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.dealModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.dealDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"refresh"},on:{click:t.refresh}},[t._v("刷新")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"",columns:t.columns,"on-row-db-click":t.dealStampDbClick,"page-size":100,"page-size-opts":t.pageSizeOpts,url:"systemmgnt/dealStamp/page.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showDealStampDialog,callback:function(e){t.showDealStampDialog=e},expression:"showDealStampDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增配置")]):a("span",[t._v("修改配置")])]),t._v(" "),a("h-form",{ref:"dealForm",attrs:{model:t.dealInfo,"label-width":80}},[a("h-row",[a("h-col",["add"==t.actionType?a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id_list"}},[a("div",[a("h-select",{staticStyle:{width:"215px"},attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.dealInfo.fund_id_list,callback:function(e){t.$set(t.dealInfo,"fund_id_list",e)},expression:"dealInfo.fund_id_list"}},t._l(t.fundInfoList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1),t._v(" "),a("h-button",{staticStyle:{float:"right","margin-top":"4px",height:"28px","line-height":"16px"},attrs:{type:"primary"},on:{click:t.choseFundList}},[t._v("选择")])],1)]):t._e(),t._v(" "),"modify"==t.actionType?a("h-form-item",{attrs:{label:"产品名称",prop:"fund_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:""},model:{value:t.dealInfo.fund_id,callback:function(e){t.$set(t.dealInfo,"fund_id",e)},expression:"dealInfo.fund_id"}},t._l(t.fundInfoList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"公司签章",prop:"stamp_id"}},[a("h-select",{attrs:{filterable:""},model:{value:t.dealInfo.stamp_id,callback:function(e){t.$set(t.dealInfo,"stamp_id",e)},expression:"dealInfo.stamp_id"}},t._l(t.stampInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelDeal}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveDeal}},[t._v("确定")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新增结果")])]),t._v(" "),a("div",[t._v("一共新增"+t._s(t.errorData.total)+"条成交单配置，失败了"+t._s(t.errorData.fail)+"条，以下是具体的错误原因：")]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.dealStampColums}})],1),t._v(" "),a("fund-choose-msg-box",{ref:"dealStampMsgBox",on:{saveFundInfo:t.saveFundInfo}})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("pjMD")},"data-v-29c2de78",null);e.default=l.exports},Tsfn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lbHh"),s=a.n(n),i=a("Q5rI"),o=a("ZTu0"),r=a("QTaZ"),l={name:"taRecord",components:{TADetailTable:a("6Vkd").a,HOtherFundTree:r.a},data:function(){return{tableHeight:0,split:.15,queryForm:{settleDate:s.a.get("CurrSysDate"),currDate:"",fundCode:""},businClass:"1",businClassList:[{code:"1",text:"2009年01月09日"}],shData:[],szData:[],zjData:[],tableData:[],tableData1:[]}},computed:{settleDate:{get:function(){return Object(i.R)(this.queryForm.settleDate)},set:function(t){this.queryForm.settleDate=Object(i.Q)(t)}},currDate:{get:function(){return Object(i.R)(this.queryForm.currDate)},set:function(t){this.queryForm.currDate=Object(i.Q)(t)}}},mounted:function(){var t=this;this.$nextTick(function(){t.tableHeight=document.getElementById("full-h-wrapper-on-fundcashreport").offsetHeight-30})},methods:{fundClick:function(t){t&&(t.text.indexOf(" ")>=0?this.queryForm.fundCode=t.text.split(" ")[0]:this.queryForm.fundCode=null,this.refresh())},refresh:function(){var t=this;Object(o.a)(this.queryForm).then(function(e){e.data.success&&t.$refs.detailTable.setData(e.data.data)})},settleDateChange:function(){this.queryForm.currDate&&(this.queryForm.currDate="")},currDateChange:function(){this.queryForm.settleDate&&(this.queryForm.settleDate="")}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("h-other-fund-tree",{attrs:{showAll:!1,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-fundcashreport"},slot:"right"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"交收日期"}},[a("el-date-picker",{attrs:{type:"date",align:"center",clearable:!1},on:{change:t.settleDateChange},model:{value:t.settleDate,callback:function(e){t.settleDate=e},expression:"settleDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认日期"}},[a("el-date-picker",{attrs:{type:"date",align:"center",clearable:!1},on:{change:t.currDateChange},model:{value:t.currDate,callback:function(e){t.currDate=e},expression:"currDate"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1),t._v(" "),a("TADetailTable",{ref:"detailTable",attrs:{height:t.tableHeight}})],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("2i+O")},"data-v-9a414c54",null);e.default=u.exports},TzAD:function(t,e){},Ut7i:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{message:"我是一个双向绑定的变量",formItem:{input:"",select:"",radio:""},list:[{value:"beijing",label:"北京市"},{value:"shanghai",label:"上海市"},{value:"hangzhou",label:"杭州市"}],isShowRadio:!0,isShowButton:!0}},components:{HPanel:a("Yjvf").a},methods:{handleSubmit:function(){}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h-row",[a("h-col",{attrs:{span:"12"}},[a("div",[t._v("简单form")]),t._v(" "),a("h-panel",[a("h-form",{attrs:{model:t.formItem,"label-width":80}},[a("h-form-item",{attrs:{label:"输入框"}},[a("h-input",{style:{width:t.inputWidth+"px",color:"red"},attrs:{placeholder:"请输入"},model:{value:t.formItem.input,callback:function(e){t.$set(t.formItem,"input",e)},expression:"formItem.input"}}),t._v("\n            输入的值为："+t._s(t.formItem.input)+"\n        ")],1),t._v(" "),a("h-form-item",{attrs:{label:"选择器"}},[a("h-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.formItem.select,callback:function(e){t.$set(t.formItem,"select",e)},expression:"formItem.select"}},t._l(t.list,function(e,n){return a("h-option",{key:n,attrs:{value:e.value}},[t._v(" \n               "+t._s(e.label)+"\n            ")])}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowRadio,expression:"isShowRadio"}],attrs:{label:"单选框"}},[a("h-radio-group",{model:{value:t.formItem.radio,callback:function(e){t.$set(t.formItem,"radio",e)},expression:"formItem.radio"}},[a("h-radio",{attrs:{label:"male"}},[t._v("男")]),t._v(" "),a("h-radio",{attrs:{label:"female"}},[t._v("女")])],1)],1),t._v(" "),t.isShowButton?a("h-form-item",[a("h-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"}},[t._v("取消")])],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},"V/Dy":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),i=a("Yjvf"),o=a("3dxc"),r=a("/y5N"),l={data:function(){return{formItem:{dictEntryCode:null,dictEntryName:null,kindCode:"",kindName:""},columnsLeft:[{type:"selection",width:60,align:"center",title:"123",render:function(t,e){return t("a",{style:{display:"inline-block"},on:{click:function(t){t.stopPropagation()}}},code)}},{title:"条目编号123",key:"dictEntryCode",width:150,ellipsis:!0},{title:"条目名称",key:"dictEntryName"},{title:"类别名称",key:"kindName",width:120,ellipsis:!0}],columnsRight:[{type:"selection",width:50,align:"center"},{type:"text",title:"字典项编号",key:"dictItemCode",width:120,ellipsis:!0},{type:"text",title:"字典名称",key:"dictItemName",width:120,ellipsis:!0},{type:"text",title:"排序",key:"dictItemOrder"}],pageSizeOpts:[5,10,15,20],totalNum:0,currentRowIdx:null,currentRowData:null,currentSelectRow:[],rightCurrentId:"",setDictMsg:!1,type:null,setDict:{dictEntryCode:"",dictEntryName:"",kindCode:"",remark:""},setKindCode:"",rightForm:{id:""},kindCodeList:[],rightGridData:[],currentRightSelectRow:[]}},components:{HPanel:i.a,HDatagrid:o.a},methods:{getDictItem:function(t){var e=this;this.rightForm.id=t,Object(r.a)(this.rightForm,"/bizframe/dict/dictItemList.json").then(function(t){t.data&&t.data.length>0?e.rightGridData=t.data:e.rightGridData=[]}).catch(function(t){e.$alert("网络通信失败,服务器异常","错误",{confirmButtonText:"确定",type:"error"})})},handleSearch:function(){this.$refs.datagrid.dataChange(1)},handleReset:function(){this.$refs.formItem.resetFields()},handlelRowClick:function(t){this.currentRowIdx=t[1],this.currentRowData=t[0],this.rightCurrentId=this.currentRowData.dictEntryCode,this.getDictItem(this.rightCurrentId),this.currentRightSelectRow=[]},handleSelectClick:function(t){this.currentSelectRow=t},handleSetDict:function(t){if(this.type=t,"revise"==this.type){if(!this.currentSelectRow||1!=this.currentSelectRow.length)return void this.$alert("请选中一条数据","提示",{confirmButtonText:"确定",type:"info"});this.setKindCode=this.currentSelectRow[0].kindCode,this.setDict.dictEntryCode=this.currentSelectRow[0].dictEntryCode,this.setDict.dictEntryName=this.currentSelectRow[0].dictEntryName,this.setDict.remark=this.currentSelectRow[0].remark}else this.handleResetSetDict("setDict");this.setDictMsg=!0,this.currentSelectRow=[],this.setDictMsgloading=!0},handleDelDict:function(){var t=this;this.currentSelectRow&&this.currentSelectRow.length>0?this.$confirm("确认要删除吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={codes:""};t.currentSelectRow.forEach(function(a,n){e.codes+=a.dictEntryCode,n<t.currentSelectRow.length-1&&(e.codes+="#")}),Object(r.a)(e,"/bizframe/dict/remove.json").then(function(e){e.data&&"0"==e.data[t.LOCAL_CONFIG.SUCCESS_KEY]?(t.$alert("删除成功","提示",{confirmButtonText:"确定",type:"info"}),t.$refs.datagrid.dataChange(1)):t.$alert("删除失败["+e.data.return_info+"]","提示",{confirmButtonText:"确定",type:"info"})}).catch(function(e){t.$alert("网络通信失败,服务器异常","错误",{confirmButtonText:"确定",type:"error"})})}):this.$alert("请选中要删除的数据","提示",{confirmButtonText:"确定",type:"info"})},handleResetSetDict:function(t){this.$refs[t].resetFields(),this.setKindCode=""},handleSetDictItem:function(){var t=this;this.$refs.setDict.validate(function(e){e&&("add"==t.type?Object(r.a)(t.setDict,"/bizframe/dict/doAdd.json").then(function(e){e&&"0"==e.data[t.LOCAL_CONFIG.SUCCESS_KEY]?(t.setDictMsg=!1,t.$alert("新增成功","成功",{confirmButtonText:"确定",type:"success"}),t.$refs.datagrid.dataChange(1)):t.$alert(e.data.return_info,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert("新增出错","错误",{confirmButtonText:"确定",type:"error"})}):"revise"==t.type&&Object(r.a)(t.setDict,"/bizframe/dict/doModify.json").then(function(e){e&&"0"==e.data[t.LOCAL_CONFIG.SUCCESS_KEY]?(t.setDictMsg=!1,t.$refs.datagrid.dataChange(1)):t.$alert(e.data.return_info,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert("修改出错","错误",{confirmButtonText:"确定",type:"error"})}))})},handleSetDictCancle:function(){this.handleResetSetDict("setDict"),this.setDictMsg=!1},addDictItem:function(){this.rightGridData=this.$refs.rightGird.cloneData,this.rightGridData.push({dictItemCode:"",dictItemName:""})},handleSelectRightClick:function(t){this.currentRightSelectRow=t},saveDictItem:function(){var t=this;this.rightGridData=this.$refs.rightGird.cloneData;var e={ids:""};e.dictEntryCode=this.rightCurrentId,e.orderNos="",e.names="",this.rightGridData.forEach(function(a,n){var s=a.dictItemCode?a.dictItemCode:"",i=a.dictItemName?a.dictItemName:"",o=a.dictItemOrder?a.dictItemOrder:"";e.ids+=s,e.names+=i,e.orderNos+=o,n<t.rightGridData.length-1&&(e.ids+=",",e.names+=",",e.orderNos+=",")}),Object(r.a)(e,"bizframe/dict/addDictItem.json").then(function(e){e.data&&"0"==e.data[t.LOCAL_CONFIG.SUCCESS_KEY]?(t.$alert("保存成功","提示",{confirmButtonText:"确定",type:"info"}),t.getDictItem(t.rightCurrentId)):t.$alert("保存失败["+e.data.return_info+"]","提示",{confirmButtonText:"确定",type:"info"})}).catch(function(e){t.$alert("网络通信失败,服务器异常","错误",{confirmButtonText:"确定",type:"error"})})},filterDictItem:function(t){var e=!0,a=!1,n=void 0;try{for(var i,o=s()(this.currentRightSelectRow);!(e=(i=o.next()).done);e=!0){var r=i.value;if(t.dictItemCode==r.dictItemCode)return!1}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}return!0},delDictItem:function(){var t=this;this.currentRightSelectRow.length>0?this.$confirm("确认要删除吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.rightGridData=t.$refs.rightGird.cloneData.filter(t.filterDictItem),t.currentRightSelectRow=[]}):this.$alert("请选择数据","提示",{confirmButtonText:"确定",type:"info"})}},created:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-panel",[a("h-form",{ref:"formItem",attrs:{model:t.formItem,"label-width":80,cols:"3"}},[a("h-form-item",{attrs:{label:"条目编号",prop:"dictEntryCode"}},[a("h-input",{model:{value:t.formItem.dictEntryCode,callback:function(e){t.$set(t.formItem,"dictEntryCode",e)},expression:"formItem.dictEntryCode"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"条目名称",prop:"dictEntryName"}},[a("h-input",{model:{value:t.formItem.dictEntryName,callback:function(e){t.$set(t.formItem,"dictEntryName",e)},expression:"formItem.dictEntryName"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"字典类别",prop:"kindCode"}},[a("h-select-tree",{attrs:{data:t.kindCodeList,"format-value":"id"},model:{value:t.formItem.kindCode,callback:function(e){t.$set(t.formItem,"kindCode",e)},expression:"formItem.kindCode"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"类别名称",prop:"kindName"}},[a("h-input",{model:{value:t.formItem.kindName,callback:function(e){t.$set(t.formItem,"kindName",e)},expression:"formItem.kindName"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"panelFooter"},slot:"panelFooter"},[a("h-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost",icon:"arefresh"},on:{click:t.handleReset}},[t._v("取消")])],1)],1),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"14"}},[a("h-datagrid",{ref:"datagrid",attrs:{title:"字典条目列表",hasPage:"",pageSizeOpts:t.pageSizeOpts,columns:t.columnsLeft,bindForm:t.formItem,url:"/bizframe/dict/list.json",onRowClick:t.handlelRowClick,onSelectChange:t.handleSelectClick}},[a("div",{attrs:{slot:"toolbar"},slot:"toolbar"},[a("h-button",{attrs:{type:"ghost",icon:"addition_fill"},on:{click:function(e){return t.handleSetDict("add")}}},[t._v("增加")]),t._v(" "),a("h-button",{attrs:{type:"ghost",icon:"ios-compose-outline"},on:{click:function(e){return t.handleSetDict("revise")}}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{type:"ghost",icon:"delete_fill"},on:{click:function(e){return t.handleDelDict()}}},[t._v("删除")])],1)])],1),t._v(" "),a("h-col",{staticStyle:{"padding-left":"15px"},attrs:{span:"10"}},[a("div",{staticClass:"h-datagrid"},[a("div",{staticClass:"h-datagrid-title"},[a("h4",[t._v("字典项")])]),t._v(" "),a("div",{staticClass:"h-datagrid-toolbar"},[a("h-button",{attrs:{type:"ghost",icon:"addition"},on:{click:t.addDictItem}},[t._v("增加")]),t._v(" "),a("h-button",{attrs:{type:"ghost",icon:"ios-compose-outline"},on:{click:t.saveDictItem}},[t._v("保存")]),t._v(" "),a("h-button",{attrs:{type:"ghost",icon:"delete"},on:{click:t.delDictItem}},[t._v("删除")])],1),t._v(" "),a("h-edit-gird",{ref:"rightGird",attrs:{data:t.rightGridData,columns:t.columnsRight,size:"small",stripe:"",canDrag:"","show-header":""},on:{"on-selection-change":t.handleSelectRightClick}})],1)])],1),t._v(" "),a("h-msg-box",{attrs:{width:"700"},on:{"on-ok":t.handleSetDictItem,"on-cancel":t.handleSetDictCancle},model:{value:t.setDictMsg,callback:function(e){t.setDictMsg=e},expression:"setDictMsg"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.type?a("span",[t._v("新增字典条目")]):t._e(),t._v(" "),"revise"==t.type?a("span",[t._v("修改字典条目")]):t._e()]),t._v(" "),a("h-form",{ref:"setDict",attrs:{model:t.setDict,"label-width":70,cols:"3"}},[a("h-form-item",{attrs:{label:"条目编号",prop:"dictEntryCode",required:""}},["add"==t.type?a("h-input",{model:{value:t.setDict.dictEntryCode,callback:function(e){t.$set(t.setDict,"dictEntryCode",e)},expression:"setDict.dictEntryCode"}}):"revise"==t.type?a("h-input",{attrs:{readonly:""},model:{value:t.setDict.dictEntryCode,callback:function(e){t.$set(t.setDict,"dictEntryCode",e)},expression:"setDict.dictEntryCode"}}):t._e()],1),t._v(" "),a("h-form-item",{attrs:{label:"条目名称",prop:"dictEntryName",required:""}},[a("h-input",{model:{value:t.setDict.dictEntryName,callback:function(e){t.$set(t.setDict,"dictEntryName",e)},expression:"setDict.dictEntryName"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"字典类别",prop:"kindCode"}},[a("h-select-tree",{attrs:{data:t.kindCodeList,"format-value":"id","first-value":t.setKindCode},model:{value:t.setDict.kindCode,callback:function(e){t.$set(t.setDict,"kindCode",e)},expression:"setDict.kindCode"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"备注",prop:"remark",cols:"3"}},[a("h-input",{attrs:{type:"textarea"},model:{value:t.setDict.remark,callback:function(e){t.$set(t.setDict,"remark",e)},expression:"setDict.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleSetDictItem}},[t._v("确定")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost",icon:"refresh"},on:{click:t.handleSetDictCancle}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},u=a("VU/8")(l,c,!1,null,null,null);e.default=u.exports},"VE+C":function(t,e){},"W/zc":function(t,e){},WilM:function(t,e){},"X/KE":function(t,e){},X8Gq:function(t,e,a){"use strict";e.a=function(t,e){return n.a.post("/reportmgnt/accQueryGetAccInfo.json",{fundId:t,includeSelfRun:e})},e.c=function(t,e,a,s,i){return n.a.post("/reportmgnt/submitAccQuery.json",{fundId:t,custodialNo:e,bankAccountNo:a,queryDate:s,queryType:i})},e.b=function(t,e,a){return n.a.post("/reportmgnt/submitAccBatchQuery.json",{queryTypeBatch:t,queryDateBatch:e,queryData:a})};var n=a("5/bi")},XI5C:function(t,e){},XbB3:function(t,e){},XmPu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("NYxO"),o=a("22iY"),r=a("jV6A"),l={props:{value:{type:Boolean,default:!1},actionType:{type:String,default:"detail"},fundInfo:{type:Object,default:null},accountInfo:{type:Object,default:null}},data:function(){return{codeRule:[{test:/^[0-9a-zA-Z]+$/,message:"只能输入字母和数字"}],numberValidRule:[{test:/^[A-Za-z0-9()-]+$/,message:"账号格式不正确"}],bankPhoneRule:[{test:/^(\d{3,4}-\d{7,8}$)|(1[0-9]{10})$/,message:"电话格式不正确"}],bankFaxRule:[{test:/^\d{3,4}-\d{7,8}$/,message:"传真格式不正确"}],mailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确"}],multiMailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?([,][\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?)*/,message:"邮箱格式不正确"}],showCustodialAccount:!0,accountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"托管账户"},{code:"3",text:"三方存管账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}],selfAccountClassList:[{code:"1",text:"普通账户"},{code:"2",text:"自营账户"},{code:"3",text:"三方存管账户"},{code:"5",text:"上清DVP账户"},{code:"6",text:"中债DVP账户"},{code:"8",text:"期货资金账户"}],visible:!1,newAccountInfo:{}}},computed:s()({},Object(i.e)({fundTypeList:function(t){return t.dict.dict_610087},fundSettleTypes:function(t){return t.dict.dict_90531},taSettleTypes:function(t){return t.dict.dict_90530},dataSourceList:function(t){return t.dict.dict_90528},accountTypeList:function(t){return t.dict.dict_60058},accountStatusList:function(t){return t.dict.dict_200008},bankFuturesTypeList:function(t){return t.dict.dict_90532},currencyNoList:function(t){return t.dict.dict_610406},operatorList:function(t){return t.dict.operatorList},bankList:function(t){return t.dict.bankList},trustBankList:function(t){return t.dict.trustBankList},brokerList:function(t){return t.dict.brokerList},cityTree:function(t){return t.dict.cityTree}}),{provinceCity:{get:function(){return[this.newAccountInfo.province_code,this.newAccountInfo.city_no]},set:function(t){this.newAccountInfo.province_code=t[0],this.newAccountInfo.city_no=t[1]}},title:function(){var t="",e=this.actionType;return"add"===e&&(t="新增账户"),"edit"===e&&(t="修改账户"),"detail"===e&&(t="账户详情"),t},isDisabled:function(){return"detail"===this.actionType}}),watch:{value:{handler:function(t){this.visible=t},immediate:!0},visible:{handler:function(t){this.$emit("input",t),t&&(this.showAccountInfo(),"1"==this.fundInfo.fund_settle_type||"4"==this.fundInfo.fund_settle_type?this.showCustodialAccount=!1:this.showCustodialAccount=!0)}},accountInfo:{handler:function(t){this.showAccountInfo()}}},created:function(){},mounted:function(){},activated:function(){},methods:{showAccountInfo:function(){"edit"!==this.actionType&&"detail"!==this.actionType||(this.newAccountInfo=Object(r.a)(this.accountInfo),this.newAccountInfo.city_no&&(this.provinceCity=[this.newAccountInfo.province_code,this.newAccountInfo.city_no])),"add"===this.actionType&&(this.resetInputAccountInfo(),this.$refs.accountForm.resetFields())},acctClassChanged:function(){"2"==this.newAccountInfo.account_class?"add"===this.actionType?(this.newAccountInfo.custodial_no=this.fundInfo.fund_trust_bank,this.custodialNoChanged(this.fundInfo.fund_trust_bank)):(this.newAccountInfo.custodial_no=this.accountInfo.custodial_no,this.newAccountInfo.bic_code=this.accountInfo.bic_code):"add"==this.actionType&&"5"==this.newAccountInfo.account_class?(this.newAccountInfo.custodial_no="",this.newAccountInfo.bic_code="SHCLEARH"):"add"==this.actionType&&"6"==this.newAccountInfo.account_class&&(this.newAccountInfo.custodial_no="",this.newAccountInfo.bic_code="CHINABOND")},custodialNoChanged:function(t){var e=this;Object(o.g)(t).then(function(t){t.data.data&&(e.newAccountInfo.bic_code=t.data.data.custodialorg.bic_code)})},handleCancel:function(){this.visible=!1},handleOk:function(){var t=this,e=!0;if(this.newAccountInfo.fund_id=this.fundInfo.fund_id,this.$refs.accountForm.validate(function(t){return e=e&&t}),"2"==this.newAccountInfo.account_class&&("1"==this.fundInfo.fund_settle_type||"4"==this.fundInfo.fund_settle_type)){if(!this.newAccountInfo.bic_code)return void this.$alert("银行总行不能为空, 请重新检查!","错误",{confirmButtonText:"确定",type:"error"});if(!(this.provinceCity&&this.provinceCity.length>1&&this.provinceCity[0]&&this.provinceCity[1]))return void this.$alert("开户城市不能为空, 请重新检查!","错误",{confirmButtonText:"确定",type:"error"});this.newAccountInfo.province_code=this.provinceCity[0],this.newAccountInfo.city_no=this.provinceCity[1]}e?Object(o.l)(this.newAccountInfo).then(function(e){e.data&&"0"===e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.visible=!1}}).then(function(){t.visible=!1}),t.$emit("refreshAccount",t.fundInfo.fund_id)):e.data&&"1120010"===e.data.code?t.visible=!1:t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},resetInputAccountInfo:function(){this.newAccountInfo={account_class:"2",bank_account_status:"1",bank_account_type:"1",bank_account_id:null,fund_id:"",custodial_no:this.fundInfo.fund_trust_bank,bic_code:"",bank_account_no:"",bank_account_name:null,pay_no:null,open_date:null,close_date:null,remark:null,holder_account:null,receive_dvp_id:null,sub_bank_no:null,province_code:null,city_no:null,bank_linkman:null,bank_phone:null,bank_fax:null,bank_mail:null,broker_id:null,bank_futures_type:null,futures_mid_account:null,bank_mid_account:null},this.custodialNoChanged(this.fundInfo.fund_trust_bank)}},components:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-manage-account-dialog"},[a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"600","mask-closable":!1},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.title))]),t._v(" "),a("h-form",{ref:"accountForm",attrs:{model:t.newAccountInfo,"label-width":105}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"账户用途",prop:"account_class"}},[t.showCustodialAccount?a("el-select",{attrs:{disabled:t.isDisabled,filterable:""},on:{change:t.acctClassChanged},model:{value:t.newAccountInfo.account_class,callback:function(e){t.$set(t.newAccountInfo,"account_class",e)},expression:"newAccountInfo.account_class"}},t._l(t.accountClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1):t._e(),t._v(" "),t.showCustodialAccount?t._e():a("el-select",{attrs:{disabled:t.isDisabled,filterable:""},on:{change:t.acctClassChanged},model:{value:t.newAccountInfo.account_class,callback:function(e){t.$set(t.newAccountInfo,"account_class",e)},expression:"newAccountInfo.account_class"}},t._l(t.selfAccountClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"2"==t.newAccountInfo.account_class&&"1"!=t.fundInfo.fund_settle_type&&"4"!=t.fundInfo.fund_settle_type?a("h-form-item",{attrs:{required:"2"==t.newAccountInfo.account_class&&"1"!=t.fundInfo.fund_settle_type&&"4"!=t.fundInfo.fund_settle_type,label:"托管人",prop:"custodial_no"}},[a("h-select",{attrs:{disabled:t.isDisabled,filterable:""},on:{"on-change":t.custodialNoChanged},model:{value:t.newAccountInfo.custodial_no,callback:function(e){t.$set(t.newAccountInfo,"custodial_no",e)},expression:"newAccountInfo.custodial_no"}},t._l(t.trustBankList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1):t._e(),t._v(" "),"2"==t.newAccountInfo.account_class?a("h-form-item",{attrs:{required:"",label:"币种",prop:"currency_no"}},[a("h-select",{attrs:{disabled:t.isDisabled,filterable:"",setDefSelect:!0,clearable:!1},model:{value:t.newAccountInfo.currency_no,callback:function(e){t.$set(t.newAccountInfo,"currency_no",e)},expression:"newAccountInfo.currency_no"}},t._l(t.currencyNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.bank_account_name,callback:function(e){t.$set(t.newAccountInfo,"bank_account_name",e)},expression:"newAccountInfo.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no",validRules:t.numberValidRule}},[a("h-input",{attrs:{disabled:t.isDisabled,maxlength:32},model:{value:t.newAccountInfo.bank_account_no,callback:function(e){t.$set(t.newAccountInfo,"bank_account_no",e)},expression:"newAccountInfo.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户状态",prop:"bank_account_status"}},[a("h-select",{attrs:{disabled:t.isDisabled,filterable:""},model:{value:t.newAccountInfo.bank_account_status,callback:function(e){t.$set(t.newAccountInfo,"bank_account_status",e)},expression:"newAccountInfo.bank_account_status"}},t._l(t.accountStatusList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"8"==t.newAccountInfo.account_class?a("div",[a("h-form-item",{attrs:{required:"",label:"期货公司",prop:"broker_id"}},[a("h-select",{attrs:{disabled:t.isDisabled,filterable:""},model:{value:t.newAccountInfo.broker_id,callback:function(e){t.$set(t.newAccountInfo,"broker_id",e)},expression:"newAccountInfo.broker_id"}},t._l(t.brokerList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银期方式",prop:"bank_futures_type"}},[a("h-select",{attrs:{disabled:t.isDisabled,filterable:""},model:{value:t.newAccountInfo.bank_futures_type,callback:function(e){t.$set(t.newAccountInfo,"bank_futures_type",e)},expression:"newAccountInfo.bank_futures_type"}},t._l(t.bankFuturesTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1):t._e(),t._v(" "),"8"==t.newAccountInfo.account_class?a("div",["2"==t.newAccountInfo.bank_futures_type||"4"==t.newAccountInfo.bank_futures_type?a("h-form-item",{attrs:{required:"",label:"期货中间账户",prop:"futures_mid_account"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.futures_mid_account,callback:function(e){t.$set(t.newAccountInfo,"futures_mid_account",e)},expression:"newAccountInfo.futures_mid_account"}})],1):t._e(),t._v(" "),"3"==t.newAccountInfo.bank_futures_type||"4"==t.newAccountInfo.bank_futures_type?a("h-form-item",{attrs:{required:"",label:"托管人中间账户",prop:"bank_mid_account"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.bank_mid_account,callback:function(e){t.$set(t.newAccountInfo,"bank_mid_account",e)},expression:"newAccountInfo.bank_mid_account"}})],1):t._e()],1):t._e(),t._v(" "),"8"!=t.newAccountInfo.account_class||"8"==t.newAccountInfo.account_class&&"4"!=t.newAccountInfo.bank_futures_type?a("div",[a("h-form-item",{attrs:{required:"2"==t.newAccountInfo.account_class&&("1"==t.fundInfo.fund_settle_type||"4"==t.fundInfo.fund_settle_type),label:"银行总行"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:t.isDisabled,filterable:"",clearable:""},model:{value:t.newAccountInfo.bic_code,callback:function(e){t.$set(t.newAccountInfo,"bic_code",e)},expression:"newAccountInfo.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"2"==t.newAccountInfo.account_class&&("1"==t.fundInfo.fund_settle_type||"4"==t.fundInfo.fund_settle_type),label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.sub_bank_no,callback:function(e){t.$set(t.newAccountInfo,"sub_bank_no",e)},expression:"newAccountInfo.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"2"==t.newAccountInfo.account_class&&("1"==t.fundInfo.fund_settle_type||"4"==t.fundInfo.fund_settle_type),label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newAccountInfo.pay_no,callback:function(e){t.$set(t.newAccountInfo,"pay_no",e)},expression:"newAccountInfo.pay_no"}})],1)],1):t._e()],1),t._v(" "),a("h-col",{attrs:{span:"12"}},["5"==t.newAccountInfo.account_class||"6"==t.newAccountInfo.account_class?a("h-form-item",{attrs:{label:"持有人账号",prop:"holder_account"}},[a("h-input",{attrs:{maxlength:32},model:{value:t.newAccountInfo.holder_account,callback:function(e){t.$set(t.newAccountInfo,"holder_account",e)},expression:"newAccountInfo.holder_account"}})],1):t._e(),t._v(" "),"8"==t.newAccountInfo.account_class&&"4"==t.newAccountInfo.bank_futures_type?a("div",[a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:t.isDisabled,filterable:"",clearable:""},model:{value:t.newAccountInfo.bic_code,callback:function(e){t.$set(t.newAccountInfo,"bic_code",e)},expression:"newAccountInfo.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.sub_bank_no,callback:function(e){t.$set(t.newAccountInfo,"sub_bank_no",e)},expression:"newAccountInfo.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newAccountInfo.pay_no,callback:function(e){t.$set(t.newAccountInfo,"pay_no",e)},expression:"newAccountInfo.pay_no"}})],1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"2"==t.newAccountInfo.account_class&&("1"==t.fundInfo.fund_settle_type||"4"==t.fundInfo.fund_settle_type),label:"开户城市"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:t.isDisabled,options:t.cityTree,filterable:"",clearable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系人",prop:"bank_linkman"}},[a("h-input",{attrs:{maxlength:56,disabled:t.isDisabled},model:{value:t.newAccountInfo.bank_linkman,callback:function(e){t.$set(t.newAccountInfo,"bank_linkman",e)},expression:"newAccountInfo.bank_linkman"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newAccountInfo.bank_phone,callback:function(e){t.$set(t.newAccountInfo,"bank_phone",e)},expression:"newAccountInfo.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{maxlength:32,disabled:t.isDisabled},model:{value:t.newAccountInfo.bank_fax,callback:function(e){t.$set(t.newAccountInfo,"bank_fax",e)},expression:"newAccountInfo.bank_fax"}})],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"邮箱",prop:"bank_mail",validRules:t.multiMailValidRule}},[a("h-input",{attrs:{maxlength:128,placeholder:"多个邮箱请用英文逗号隔开"},model:{value:t.newAccountInfo.bank_mail,callback:function(e){t.$set(t.newAccountInfo,"bank_mail",e)},expression:"newAccountInfo.bank_mail"}})],1),t._v(" "),"8"!=t.newAccountInfo.account_class||"4"!=t.newAccountInfo.bank_futures_type?a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"备注",prop:"remark"}},[a("h-input",{attrs:{type:"textarea",disabled:t.isDisabled},model:{value:t.newAccountInfo.remark,callback:function(e){t.$set(t.newAccountInfo,"remark",e)},expression:"newAccountInfo.remark"}})],1):t._e()],1)],1),t._v(" "),"8"==t.newAccountInfo.account_class&&"4"==t.newAccountInfo.bank_futures_type?a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"备注",prop:"remark"}},[a("h-input",{attrs:{type:"textarea",disabled:t.isDisabled},model:{value:t.newAccountInfo.remark,callback:function(e){t.$set(t.newAccountInfo,"remark",e)},expression:"newAccountInfo.remark"}})],1):t._e()],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),"detail"!=t.actionType?a("h-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确认")]):t._e()],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("TF8g")},"data-v-bb612a02",null);e.default=u.exports},XqWy:function(t,e){},Xr6b:function(t,e){},YA3s:function(t,e){},YE8r:function(t,e){},Yf9k:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferSettle",data:function(){return{}},components:{settle:a("FvFU").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("settle",{attrs:{pageType:"4"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},Yjvf:function(t,e,a){"use strict";var n=a("bOdI"),s=a.n(n),i=a("0xDb"),o={name:"HPanel",data:function(){return{prefixCls:"h-panel",isCollapse:!1}},props:{title:String,footerPos:{validator:function(t){return Object(i.a)(t,["left","center","right"])},default:"center"},collapse:{type:Boolean,default:!1},icon:String},computed:{panelCls:function(){return["h-panel",s()({},"h-panel-collapse",this.isCollapse)]},contentCls:function(){return["h-panel-content","clearfix"]},footerCls:function(){var t;return["h-panel-footer",(t={},s()(t,"text-"+this.footerPos,this.footerPos),s()(t,"disNone",!this.$slots.panelFooter),t)]},isHeader:function(){return this.title||this.$slots.header}},methods:{handleCollapse:function(){this.isCollapse=!this.isCollapse}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.panelCls},[t.isHeader?a("div",{class:[t.prefixCls+"-header"]},[t._t("header",[t.icon?a("h-icon",{attrs:{name:t.icon}}):t._e(),t._v(" "),a("h3",[t._v(t._s(t.title))])])],2):t._e(),t._v(" "),a("div",{class:t.contentCls},[t._t("default")],2),t._v(" "),a("div",{class:t.footerCls},[t._t("panelFooter")],2),t._v(" "),t.collapse?a("div",{class:[t.prefixCls+"-collapse-icon"],on:{click:t.handleCollapse}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"unfold"}})],1)]):t._e(),t._v(" "),t.collapse?a("div",{class:[t.prefixCls+"-collapse-icon-line"]}):t._e()])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("L0om")},null,null);e.a=l.exports},YtmT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("bOdI"),s=a.n(n),i=a("Dd8w"),o=a.n(i),r=a("NYxO"),l=(a("lbHh"),a("npUS")),c=(a("N/wp"),a("Q5rI")),u=a("5/bi");var d={name:"marketTradeDay",components:{ImportAccountTransfer:l.a},data:function(){return{vertical:"0",open:!1,date:new Date,spinShow:!1,split:.12,queryForm:{tradeDayType:"0",year:(new Date).getFullYear()},setForm:{tradeDayType:null,setDate:null,dateFlag:null},queryRes:null}},created:function(){this.refresh()},watch:{queryRes:function(t,e){this.spinShow=null==t}},computed:o()({},Object(r.e)({theme:function(t){return t.theme.theme}}),{month:function(){return this.date.getMonth()+1},year:function(){return this.date.getFullYear()}}),methods:{handleMenu:function(t,e){this.date=e},updateyear:function(t){this.queryForm.year=t,this.refresh()},onchange:function(){this.queryForm.tradeDayType=this.vertical,this.refresh()},setDate:function(t){var e,a=this;if(this.setForm.tradeDayType=this.vertical,this.setForm.setDate=Object(c.Q)(this.date.date),this.setForm.dateFlag=t,t==this.date.dateFlag)this.$refs.calendar.hideCtxMenu();else{var n=Object(c.Q)(this.date.date);(e=this.setForm,u.a.post("/fundaccount/setMarketTradeDay.json",e)).then(function(e){if(e.data.success){var s=!0;a.queryRes.forEach(function(e,a){e.db_date==n&&(e.trade_flag=t,s=!1)}),s&&a.refresh()}}),this.$refs.calendar.hideCtxMenu()}},togglePicker:function(){this.open=!this.open},handleChange:function(){this.open=!1},importTradeDay:function(){this.$refs.tradeDayImportDialog.showDialog(6,null)},dateRender:function(t,e){var a=this.theme,n="";if(null!=this.queryRes){var i=void 0,o=!1;null!=e&&(i=Object(c.Q)(e.date),this.queryRes.forEach(function(t,a){t.db_date==i&&(o=!0,e.dateFlag=t.trade_flag)})),null!=e&&o?0==e.dateFlag?n="black"===a?"#9AAEBE":"#DDDDDD":1==e.dateFlag&&(n="black"===a?"#76C5FF":"#e1f0fe"):null==e||o||(n="black"===a?"#3C4655":"white")}else n="black"===a?"#3C4655":"white";return t("div",{class:s()({},"custom-style",!0),style:{background:n,color:"black"===a?"white":"black"}},[null!=e?""+e.date.getDate():""])},refresh:function(){var t,e=this;this.queryRes=null,(t=this.queryForm,u.a.post("/fundaccount/showMarketTradeDay.json",t)).then(function(t){t.data.success&&(e.queryRes=t.data.data)})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-marketTradeDay full-h"},[a("import-account-transfer",{ref:"tradeDayImportDialog",attrs:{"on-import-success":t.refresh}}),t._v(" "),a("h-split",{attrs:{min:"130",max:"800"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"demo-split-pane no-padding",attrs:{slot:"left",span:"4"},slot:"left"},[a("div",{staticStyle:{padding:"5px"}},[t._v("\n          交易日类型\n        ")]),t._v(" "),a("div",{staticStyle:{overflow:"auto",height:"514px"}},[[a("div",[a("h-radio-group",{attrs:{vertical:""},on:{"on-change":t.onchange},model:{value:t.vertical,callback:function(e){t.vertical=e},expression:"vertical"}},[a("h-radio",{attrs:{label:"0"}},[a("span",[t._v("系统交易日")])]),t._v(" "),a("h-radio",{attrs:{label:"1"}},[a("span",[t._v("银行间交易日")])])],1)],1)]],2)]),t._v(" "),a("div",{staticClass:"right-content",staticStyle:{"padding-left":"10px",height:"100%",overflow:"hidden"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-marketTradeDay"},slot:"right"},[a("div",{staticClass:"infomessage"},[a("i",{staticClass:"h-icon iconfont icon-ios-information-outl h-icon-ios-information-outl",staticStyle:{color:"rgb(17, 160, 248)","font-size":"15px"}}),t._v(" "),a("span",[t._v("\n            蓝色背景为正常交易日，灰色背景为非交易日，无背景表示该日期未被定义，单击右键可设置该属性")])]),t._v(" "),a("div",{staticStyle:{padding:"10px"}},[a("h-button-group",[a("h-button",{attrs:{icon:"android-upload",title:"参数JYRFTLX ：0为系统市场交易日 1为银行间市场交易日\n参数RQ：YYYYMMDD格式日期；\n参数SFJYR ：0为非交易接收日 1为交易接收日"},on:{click:t.importTradeDay}},[t._v("导入交易日\n            ")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"100%","padding-bottom":"7%",overflow:"auto"}},[a("h-calendar",{ref:"calendar",attrs:{dateCellRender:t.dateRender,monthViewNum:12},on:{"on-context-menu":t.handleMenu,"on-preBtn-click":t.updateyear,"on-nextBtn-click":t.updateyear}},[a("ul",{staticClass:"calendar-menu",attrs:{slot:"menu"},slot:"menu"},[a("li",{staticClass:"calendar-menu-item",on:{click:function(e){return e.stopPropagation(),t.setDate(1)}}},[t._v("设为交易日")]),t._v(" "),a("li",{staticClass:"calendar-menu-item",on:{click:function(e){return e.stopPropagation(),t.setDate(0)}}},[t._v("设为非交易日")])])]),t._v(" "),t.spinShow?a("h-spin",{attrs:{size:"large",fix:""}}):t._e()],1)])])],1)},staticRenderFns:[]};var p=a("VU/8")(d,f,!1,function(t){a("AV50")},null,null);e.default=p.exports},Yv4f:function(t,e,a){"use strict";var n={render:function(){var t=this.$createElement;return(this._self._c||t)("el-form",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"拼命处理中","element-loading-background":"rgba(0, 0, 0, 0.3)"}})},staticRenderFns:[]};var s=a("VU/8")({name:"FullScreenLoading",data:function(){return{fullscreenLoading:!1}},methods:{open:function(){this.fullscreenLoading=!0},close:function(){this.fullscreenLoading=!1}}},n,!1,function(t){a("X/KE")},"data-v-d8012a88",null);e.a=s.exports},Yvb2:function(t,e){},ZTu0:function(t,e,a){"use strict";e.a=function(t){return n.a.post("/reportmgnt/listTAFlow.json",t)};var n=a("5/bi")},aH3W:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("mvHQ"),i=a.n(s),o=a("5/bi");var r=a("npUS"),l={name:"issuer",data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],actionType:"",showIssuerDialog:!1,issuerTypeList:[],rivalColumn:[{title:"发行人序号",key:"issuer_id",hiddenCol:!0,align:"",ellipsis:!0},{title:"发行人编号",key:"issuer_code",align:"left",ellipsis:!0},{title:"发行人名称",key:"issuer_name",align:"left",ellipsis:!0},{title:"发行人类型",key:"issuer_type",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._2)(s.issuer_type,t.issuerTypeList))}},{title:"联系人",key:"linkman",align:"left",ellipsis:!0},{title:"联系地址",key:"address",align:"left",ellipsis:!0},{title:"联系电话",key:"phone_no",align:"left",ellipsis:!0},{title:"传真号码",key:"fax_no",align:"left",ellipsis:!0}],queryForm:{issuerType:"",keyword:""},issuerInfo:{issuer_id:"",issuer_code:"",issuer_name:"",issuer_type:"",linkman:"",address:"",phone_no:"",fax_no:""}}},mounted:function(){var t=this;Object(n.t)("10090").then(function(e){return t.issuerTypeList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90},refreshIssuer:function(){this.$refs.datagrid.dataChange(1)},addIssuer:function(){this.issuerInfo={issuer_id:"",issuer_code:"",issuer_name:"",issuer_type:"",linkman:"",address:"",phone_no:"",fax_no:""},this.$refs.issuerForm.resetFields(),this.actionType="add",this.showIssuerDialog=!0},modifyIssuer:function(){var t=this.$refs.datagrid.$refs.gridContent.getSelection();0!=t.length?this.issuerDbclick(t[0]):this.$alert("请选择一条发行人信息!","错误",{confirmButtonText:"确定",type:"error"})},issuerDbclick:function(t){this.issuerInfo=t,this.actionType="modify",this.showIssuerDialog=!0},deleteIssuer:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();0!=e.length?this.$confirm("确定要删除该发行人?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e[0].issuer_id,o.a.post("/systemmgnt/issuer/delete.json",{issuerId:a})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success"}),t.refreshIssuer()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}).catch(function(){}):this.$alert("请选择一条发行人信息!","错误",{confirmButtonText:"确定",type:"error"})},uploadIssuer:function(){this.$refs.issuerUploadDialog.showDialog("8",null)},cancelIssuer:function(){this.showIssuerDialog=!1},submitIssuer:function(){var t,e=this,a=!0;(this.$refs.issuerForm.validate(function(t){return a=a&&t}),a)?"add"==this.actionType?(t=this.issuerInfo,o.a.post("/systemmgnt/issuer/insert.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"确定",{confirmButtonText:"确定",type:"success",callback:function(t){e.showIssuerDialog=!1}}).then(function(){e.showIssuerDialog=!1}),e.refreshIssuer()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&function(t){return o.a.post("/systemmgnt/issuer/update.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})}(this.issuerInfo).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"确定",{confirmButtonText:"确定",type:"success",callback:function(t){e.showIssuerDialog=!1}}).then(function(){e.showIssuerDialog=!1}),e.refreshIssuer()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求,请重新检查","错误",{confirmButtonText:"确定",type:"error"})}},components:{HDatagrid:a("3dxc").a,ImportAccountTransfer:r.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-issuer full-h",attrs:{id:"full-h-wrapper"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"发行人类型"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.issuerType,callback:function(e){t.$set(t.queryForm,"issuerType",e)},expression:"queryForm.issuerType"}},t._l(t.issuerTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refreshIssuer}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"full-h",attrs:{slot:"right"},slot:"right"},[a("div",{staticClass:"ctrls"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.addIssuer}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"edit"},on:{click:t.modifyIssuer}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.deleteIssuer}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.uploadIssuer}},[t._v("导入")])],1),t._v(" "),a("h-input",{staticStyle:{width:"215px"},attrs:{maxlength:32,placeholder:"请输入发行人编号或名称"},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword",e)},expression:"queryForm.keyword"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"search"},nativeOn:{click:function(e){return e.stopPropagation(),t.refreshIssuer(e)}}})],1)])])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","on-row-db-click":t.issuerDbclick,pageSize:100,"page-size-opts":t.pageSizeOpts,columns:t.rivalColumn,"bind-form":t.queryForm,url:"/systemmgnt/issuer/page.json"}})],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500","mask-closable":!1},model:{value:t.showIssuerDialog,callback:function(e){t.showIssuerDialog=e},expression:"showIssuerDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增发行人")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改发行人")]):t._e()]),t._v(" "),a("h-row",[a("h-col",[a("h-form",{ref:"issuerForm",attrs:{model:t.issuerInfo,"label-width":100}},[a("h-form-item",{attrs:{required:"",label:"发行人名称",prop:"issuer_name"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.issuerInfo.issuer_name,callback:function(e){t.$set(t.issuerInfo,"issuer_name",e)},expression:"issuerInfo.issuer_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"发行人编号",prop:"issuer_code"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:32},model:{value:t.issuerInfo.issuer_code,callback:function(e){t.$set(t.issuerInfo,"issuer_code",e)},expression:"issuerInfo.issuer_code"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"发行人类型",prop:"issuer_type"}},[a("h-select",{attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.issuerInfo.issuer_type,callback:function(e){t.$set(t.issuerInfo,"issuer_type",e)},expression:"issuerInfo.issuer_type"}},t._l(t.issuerTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"联系人",prop:"linkman"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.issuerInfo.linkman,callback:function(e){t.$set(t.issuerInfo,"linkman",e)},expression:"issuerInfo.linkman"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.issuerInfo.address,callback:function(e){t.$set(t.issuerInfo,"address",e)},expression:"issuerInfo.address"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"phone_no"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:32},model:{value:t.issuerInfo.phone_no,callback:function(e){t.$set(t.issuerInfo,"phone_no",e)},expression:"issuerInfo.phone_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真号码",prop:"fax_no"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.issuerInfo.fax_no,callback:function(e){t.$set(t.issuerInfo,"fax_no",e)},expression:"issuerInfo.fax_no"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelIssuer}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.submitIssuer}},[t._v("确认")])],1)],1),t._v(" "),a("import-account-transfer",{ref:"issuerUploadDialog",attrs:{"on-import-success":t.refreshIssuer}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var u=a("VU/8")(l,c,!1,function(t){a("BAt2")},null,null);e.default=u.exports},bGn4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HmOp"),s=a("3dxc"),i=a("Q5rI"),o={name:"feerecord",data:function(){var t=this;return{split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],feeBusinList:[],bankList:[],queryForm:{prePayDate:"",fundId:"",copBusinFlag:"",beginDate:"",endDate:""},feeRecordColumns:[{type:"selection",width:30,align:"left"},{title:"产品代码",key:"fund_code",hiddenCol:!1,align:"left",width:95,ellipsis:!0},{title:"产品名称",key:"fund_name",align:"left",ellipsis:!0},{title:"托管人",key:"fund_trust_bank",hiddenCol:!1,align:"left",width:105,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.fund_trust_bank,t.bankList))}},{title:"费用类型",key:"cop_busin_flag",align:"left",width:105,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.cop_busin_flag,t.feeBusinList))}},{title:"预计缴款日",key:"cash_settle_date",align:"left",width:105,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(i.R)(a.cash_settle_date,null))}},{title:"实际缴款日",key:"real_cash_settle_date",align:"left",width:105,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(i.R)(a.real_cash_settle_date,null))}},{title:"估值科目",key:"subject_no_list",align:"left",width:140,ellipsis:!0},{title:"结转日",key:"trade_date",align:"left",width:105,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(i.R)(a.trade_date,null))}},{title:"缴款金额",key:"settle_balance",align:"left",width:100,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(i.h)(a.settle_balance))}},{title:"划款指令编号",key:"transfer_ins_id",align:"left",width:90,ellipsis:!0},{title:"序号",key:"serial_no",hiddenCol:!0,align:"left",width:75,ellipsis:!0}]}},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper-on-feerecord").offsetHeight-t-50},fundClick:function(t){t&&(this.queryForm.fundId=t.code,t.code.indexOf(",")<0?this.refreshFeeRecord():(this.queryForm.fundId="",this.refreshFeeRecord()))},refreshFeeRecord:function(){this.$refs.datagrid.dataChange()},getPrePayDate:function(){this.queryForm.prePayDate?(this.queryForm.beginDate=Object(i.Q)(this.queryForm.prePayDate[0]),this.queryForm.endDate=Object(i.Q)(this.queryForm.prePayDate[1])):(this.queryForm.beginDate="",this.queryForm.endDate="")}},mounted:function(){var t=this;Object(i.p)(22).then(function(e){return t.feeBusinList=e.data}),Object(i.j)("1").then(function(e){return t.bankList=e.data})},components:{FundTree:n.a,HDatagrid:s.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("fund-tree",{ref:"treeFund",attrs:{showAll:!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-feerecord"},slot:"right"},[a("h-row",[a("el-form",{staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"预计缴款日"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){return t.getPrePayDate()}},model:{value:t.queryForm.prePayDate,callback:function(e){t.$set(t.queryForm,"prePayDate",e)},expression:"queryForm.prePayDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"费用类型"}},[a("h-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.copBusinFlag,callback:function(e){t.$set(t.queryForm,"copBusinFlag",e)},expression:"queryForm.copBusinFlag"}},t._l(t.feeBusinList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refreshFeeRecord}},[t._v("查询")])],1)],1)],1),t._v(" "),a("h-row",[a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,pageSize:20,pageSizeOpts:t.pageSizeOpts,columns:t.feeRecordColumns,bindForm:t.queryForm,url:"/fee/record/page.json"}})],1)],1)])],1)},staticRenderFns:[]},l=a("VU/8")(o,r,!1,null,null,null);e.default=l.exports},bQmD:function(t,e){},bgLv:function(t,e){},cVO9:function(t,e){},czgE:function(t,e){},"d+lO":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s={props:{from:{type:String,default:"approve"},businClass:{type:String,default:"0"},item:{type:Object,default:function(){}},businFlagList:{type:Array,default:function(){return[]}},trustAcctList:{type:Array,default:function(){return[]}},acctBalanceList:{type:Array,default:function(){return[]}},businCashList:{type:Array,default:function(){return[]}},queryForm:{type:Object,default:function(){}}},data:function(){return{}},watch:{item:{handler:function(t){}}},filters:{removeBrackets:function(t){return t?t.replace(/\(.*\)/g,""):t},getBrackets:function(t){if(!t)return"";var e=t.match(/\((.+?\))/g);return e&&e.length>0?e[0]:""}},mounted:function(){},methods:{showText:n._1,formatMoney:n.h,quickSend:function(t){this.$emit("quickSend",t)},getColoredStyle:function(t){var e="#333";return"black"===store.state.theme.theme&&(e="#fff"),parseFloat(t)>0&&(e="green"),parseFloat(t)<0&&(e="red"),{color:e,fontWeight:"bold"}}},components:{}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-detail-panel"},[""!=t.queryForm.fundIds&&t.queryForm.fundIds.indexOf(",")<0&&"finished"!==t.from?a("div",["1"==t.queryForm.businClass?a("table",{staticClass:"table brief",attrs:{border:"1",cellspacing:"0"}},[a("tbody",[a("tr",{staticClass:"wrap-content"},[null!=t.trustAcctList&&t.trustAcctList.length>0?a("td",[a("div",{attrs:{title:t.trustAcctList[0].BANK_ACCOUNT_NAME}},[t._v(t._s(t._f("removeBrackets")(t.trustAcctList[0].BANK_ACCOUNT_NAME)))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.trustAcctList[0].ACCOUNT_CUR_BALANCE))),a("span",{staticClass:"orange"},[t._v(t._s(t._f("getBrackets")(t.trustAcctList[0].BANK_ACCOUNT_NAME)))])])]):t._e(),t._v(" "),null!=t.acctBalanceList&&t.acctBalanceList.length>0?a("td",[a("div",{attrs:{title:t.acctBalanceList[0].BANK_ACCOUNT_NAME}},[t._v(t._s(t._f("removeBrackets")(t.acctBalanceList[0].BANK_ACCOUNT_NAME)))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.acctBalanceList[0].ACCOUNT_CUR_BALANCE))),a("span",{staticClass:"orange"},[t._v(t._s(t._f("getBrackets")(t.acctBalanceList[0].BANK_ACCOUNT_NAME)))])])]):t._e(),t._v(" "),t.businCashList.length>0?a("td",[a("div",{attrs:{title:t.businCashList[0].CASHTYPE}},[t._v(t._s(t.businCashList[0].CASHTYPE))]),t._v(" "),a("div",[a("span",{style:t.getColoredStyle(t.businCashList[0].AMOUNT)},[t._v(t._s(t.formatMoney(t.businCashList[0].AMOUNT)))]),t._v(" "),"approve"===t.from?a("h-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.quickSend(5)}}},[t._v("划款")]):t._e()],1)]):t._e(),t._v(" "),t.businCashList.length>2?a("td",[a("div",{attrs:{title:t.businCashList[2].CASHTYPE}},[t._v(t._s(t.businCashList[2].CASHTYPE))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.businCashList[2].AMOUNT)))])]):t._e(),t._v(" "),null!=t.acctBalanceList&&t.acctBalanceList.length>1?a("td",[a("div",{attrs:{title:t.acctBalanceList[1].BANK_ACCOUNT_NAME}},[t._v(t._s(t.acctBalanceList[1].BANK_ACCOUNT_NAME))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.acctBalanceList[1].ACCOUNT_CUR_BALANCE)))])]):t._e(),t._v(" "),t.businCashList.length>1?a("td",[a("div",{attrs:{title:t.businCashList[1].CASHTYPE}},[t._v(t._s(t.businCashList[1].CASHTYPE))]),t._v(" "),a("div",[a("span",{style:t.getColoredStyle(t.businCashList[1].AMOUNT)},[t._v(t._s(t.formatMoney(t.businCashList[1].AMOUNT)))]),t._v(" "),"approve"===t.from?a("h-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.quickSend(6)}}},[t._v("划款")]):t._e()],1)]):t._e()])])]):"4,5,6"==t.queryForm.businClass?a("table",{staticClass:"table brief",attrs:{border:"1",cellspacing:"0"}},[a("tr",[t._l(t.trustAcctList,function(e,n){return a("td",{key:n},[a("div",{attrs:{title:e.BANK_ACCOUNT_NAME}},[t._v(t._s(e.BANK_ACCOUNT_NAME))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(e.ACCOUNT_CUR_BALANCE)))])])}),t._v(" "),t.businCashList.length>0?a("td",[a("div",{attrs:{title:t.businCashList[0].CASHTYPE}},[t._v(t._s(t.businCashList[0].CASHTYPE))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.businCashList[0].AMOUNT)))])]):t._e(),t._v(" "),t.businCashList.length>1?a("td",[a("div",{attrs:{title:t.businCashList[1].CASHTYPE}},[t._v(t._s(t.businCashList[1].CASHTYPE))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.businCashList[1].AMOUNT)))])]):t._e()],2)]):a("table",{staticClass:"table brief",attrs:{border:"1",cellspacing:"0"}},[a("tr",[t._l(t.trustAcctList,function(e,n){return a("td",{key:n},[a("div",{attrs:{title:e.BANK_ACCOUNT_NAME}},[t._v(t._s(t._f("removeBrackets")(e.BANK_ACCOUNT_NAME)))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(e.ACCOUNT_CUR_BALANCE))),a("span",{staticClass:"orange"},[t._v(t._s(t._f("getBrackets")(e.BANK_ACCOUNT_NAME)))])])])}),t._v(" "),t._l(t.acctBalanceList,function(e,n){return"1"!=t.queryForm.businClass||5!=e.ACCOUNT_CLASS&&6!=e.ACCOUNT_CLASS?t._e():a("td",{key:n},[a("div",{attrs:{title:e.BANK_ACCOUNT_NAME}},[t._v(t._s(e.BANK_ACCOUNT_NAME))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(e.ACCOUNT_CUR_BALANCE)))])])}),t._v(" "),t._l(t.businCashList,function(e,n){return a("td",{key:n},[a("div",{attrs:{title:e.CASHTYPE}},[t._v(t._s(e.CASHTYPE))]),t._v(" "),a("div",{staticClass:"bold"},[t._v(t._s(t.formatMoney(e.AMOUNT)))])])})],2)])]):t._e(),t._v(" "),t.item.transfer_ins_id?a("table",{staticClass:"table",attrs:{border:"1",cellspacing:"0"}},[a("tbody",[a("tr",[a("td",{staticClass:"collapse-label",attrs:{rowspan:"5"}},[t._v("基本信息")]),t._v(" "),a("td",{staticClass:"label"},[t._v("业务标志")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.showText(t.item.cop_busin_flag,t.businFlagList)}},[t._v(t._s(t.showText(t.item.cop_busin_flag,t.businFlagList)))]),t._v(" "),a("td",{staticClass:"collapse-label",attrs:{rowspan:"5"}},[t._v("出款账户")]),t._v(" "),a("td",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.self_bank}},[t._v(t._s(t.item.self_bank))]),t._v(" "),a("td",{staticClass:"collapse-label",attrs:{rowspan:"5"}},[t._v("入款账户")]),t._v(" "),a("td",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.rival_bank}},[t._v(t._s(t.item.rival_bank))])]),t._v(" "),a("tr",[a("td",{staticClass:"label"},[t._v("交收金额")]),t._v(" "),a("td",{staticClass:"info"},[a("span",{staticClass:"bold"},[t._v(t._s(t.formatMoney(t.item.settle_balance)))])]),t._v(" "),a("td",{staticClass:"label"},[t._v("账户名称")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.self_account_name}},[t._v(t._s(t.item.self_account_name))]),t._v(" "),a("td",{staticClass:"label"},[t._v("账户名称")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.rival_account_name}},[t._v(t._s(t.item.rival_account_name))])]),t._v(" "),a("tr",[a("td",{staticClass:"label"},[t._v("划款事由")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.transfer_purpose}},[t._v(t._s(t.item.transfer_purpose))]),t._v(" "),a("td",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.self_account}},[t._v(t._s(t.item.self_account))]),t._v(" "),a("td",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.rival_account}},[t._v(t._s(t.item.rival_account))])]),t._v(" "),a("tr",[a("td",{staticClass:"label"},[t._v("划款附言")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.transfer_postscript}},[t._v(t._s(t.item.transfer_postscript))]),t._v(" "),a("td",{staticClass:"label"},[t._v("开户行")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.self_open_bank}},[t._v(t._s(t.item.self_open_bank))]),t._v(" "),a("td",{staticClass:"label"},[t._v("开户行")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.rival_open_bank}},[t._v(t._s(t.item.rival_open_bank))])]),t._v(" "),a("tr",[a("td",{staticClass:"label"},[t._v("划款备注")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.transfer_remark}},[t._v(t._s(t.item.transfer_remark))]),t._v(" "),a("td",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.self_pay_no}},[t._v(t._s(t.item.self_pay_no))]),t._v(" "),a("td",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("td",{staticClass:"info",attrs:{title:t.item.rival_pay_no}},[t._v(t._s(t.item.rival_pay_no))])])])]):t._e()])},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("MFHu")},null,null);e.default=o.exports},dhUh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),i=a("3dxc"),o=a("Q5rI"),r={name:"BusinTree",data:function(){return{businTree:[{text:"   加载中              ... ",code:""}],filterText:"",setQueryMsg:!1,treeProps:{label:"text",children:"children"},businQuery:{trust_flag:""}}},props:{trustFlag:{type:Boolean,default:!1},onBusinClick:{type:Function,default:function(t){}},showAll:{type:Boolean,defalut:!1},onBusinQuery:{type:Function,default:function(t){}}},watch:{filterText:function(t){this.$refs.businTree.filter(t)}},mounted:function(){this.querydeal()},activated:function(){this.handleConditionQuery()},methods:{filterNode:function(t,e){return!t||-1!==e.text.indexOf(t)},openQuery:function(){this.setQueryMsg=!0},handleCancel:function(){this.setQueryMsg=!1},querydeal:function(){this.trustFlag&&(this.businQuery.trust_flag="1")},handleConditionQuery:function(){var t=this;Object(o.t)(90523).then(function(e){if(e.data.length>0){if(t.showAll){var a=e.data.reduce(function(t,e){return{code:t.code+","+e.code}}).code;t.businTree=[{text:"全部",code:a,children:e.data}],t.onBusinClick({code:a})}else t.businTree=e.data,t.onBusinClick(t.businTree[0]);t.onBusinQuery(t.businTree),t.filterText=""}else t.businTree=[{text:"暂无数据",code:""}],t.onBusinClick({code:""})}).catch(function(t){console.log(t)}),this.setQueryMsg=!1}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",{staticStyle:{"padding-left":"6px","padding-right":"6px"},attrs:{span:"24"}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"关键字"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1),t._v(" "),a("div",{staticClass:"auto-height",staticStyle:{"margin-top":"10px"}},[a("el-scrollbar",{staticClass:"h-scrollbar",staticStyle:{height:"100%"}},[a("el-tree",{ref:"businTree",attrs:{data:t.businTree,props:t.treeProps,"node-key":"code","default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.onBusinClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[a("span",[t._v(t._s(n.label))])])}}])})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var c=a("VU/8")(r,l,!1,function(t){a("RJjQ"),a("W/zc")},"data-v-114417db",null).exports,u=a("mvHQ"),d=a.n(u),f=a("5/bi");function p(t){return f.a.post("systemmgnt/businFlag/update.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return d()(t)}})}var h={components:{BusinTree:c,HDatagrid:i.a},data:function(){var t=this;return{split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],showDialog:!1,showBusinFlagDialog:!1,actionType:"",useFlagList:[],businClassList:[],businFlagList:[],updateBusinFlagList:[],accountClassList:[],limitAccountClassList:[],businFlag:{require_pay_time:""},businFlagColumns:[],columns:[{type:"selection",width:30,align:"center"},{title:"序号",type:"index",align:"center",width:60},{title:"业务分类",key:"cop_busin_class",align:"left",width:120,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.cop_busin_class,t.businClassList))}},{title:"业务标志",key:"cop_busin_caption",align:"left",ellipsis:!0},{title:"资金方向",key:"cash_direction",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.cash_direction,t.cashDirectionList))}},{title:"出款账户",key:"account_out_class_list",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._2)(n.account_out_class_list,t.accountClassList))}},{title:"入款账户",key:"account_in_class_list",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._2)(n.account_in_class_list,t.accountClassList))}},{businClass:"4,5,6,7,8,9,20,21,22,23",title:"允许手工新增",key:"use_flag",align:"left",width:120,ellipsis:!0,sortable:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.use_flag,t.useFlagList))}},{title:"最迟到账时间",key:"require_pay_time",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(o.U)(a.require_pay_time))}}],queryForm:{businClass:""},otherBusinFlag:{cop_busin_class:"",cop_busin_flag:"",cash_direction:"",account_out_class_list:"",account_in_class_list:"",require_pay_time:""},cashDirectionList:[{code:"0",text:"不变化"},{code:"1",text:"入款"},{code:"2",text:"出款"}]}},watch:{showBusinFlagDialog:function(t){t||(this.updateBusinFlagList=[])},"otherBusinFlag.cop_busin_class":function(t){t&&("1"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,5,6,7,f".indexOf(t.code)}):"4"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,7,b".indexOf(t.code)}):"5"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,7,c".indexOf(t.code)}):"6"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,b".indexOf(t.code)}):"7"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,d,h".indexOf(t.code)}):"9"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,7,a,f".indexOf(t.code)}):"20"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,7,i".indexOf(t.code)}):"22"===t?this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,e".indexOf(t.code)}):"23"===t&&(this.limitAccountClassList=this.accountClassList.filter(function(t){return-1!=="2,3,8,g,7,1".indexOf(t.code)})))}},created:function(){this.businFlagColumns=this.columns.filter(function(t){return!t.businClass})},mounted:function(){var t=this;Object(o.t)(90523).then(function(e){return t.businClassList=e.data}),Object(o.t)(610001).then(function(e){return t.useFlagList=e.data}),this.re_layout(),Object(o.t)(90525).then(function(e){return t.accountClassList=e.data.map(function(t){if("2"==t.code){var e={code:"2",text:"托管账户/自营账户"};return e}return t})})},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-40},businClick:function(t){var e=this;this.queryForm.businClass=t.code,this.businFlagColumns=this.columns.filter(function(t){return!t.businClass||(","+t.businClass+",").indexOf(","+e.queryForm.businClass+",")>=0}),this.refresh()},operate:function(t){var e=this,a=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==a.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});this.openMask(),p({businFlagList:a,useFlag:t,requirePayTime:null}).then(function(t){t.data&&t.data.success?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})})},businSets:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.businFlag.require_pay_time="150000",s()(this.updateBusinFlagList,e),this.showBusinFlagDialog=!0},cancelBusinFlag:function(){this.showBusinFlagDialog=!1},saveBusinFlag:function(){var t=this;this.businFlag.require_pay_time?p({businFlagList:this.updateBusinFlagList,useFlag:null,requirePayTime:parseInt(this.businFlag.require_pay_time.replace(":","").replace(":",""))}).then(function(e){e.data&&e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success"}),t.showBusinFlagDialog=!1,t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):(this.showBusinFlagDialog=!1,this.refresh())},refresh:function(){this.$refs.datagrid.dataChange(1)},businFlagAdd:function(){this.otherBusinFlag={cop_busin_class:this.queryForm.businClass,cop_busin_flag:"",cash_direction:"1",account_out_class_list:"",account_in_class_list:"",use_flag:"1",require_pay_time:"150000"},this.$refs.otherBusinFlag.resetFields(),this.showDialog=!0,this.actionType="add"},businFlagModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.businFlagDbClick(e[0])},businFlagDbClick:function(t){if("8"!==t.cop_busin_class&&"21"!==t.cop_busin_class){if(t.cop_busin_flag<1e5)return void this.$alert("COP基础业务标志不支持修改!","提醒",{confirmButtonText:"确定",type:"warning"});this.otherBusinFlag=t,this.otherBusinFlag.require_pay_time=t.require_pay_time.toString(),this.showDialog=!0,this.actionType="modify"}},cancelOtherBusinFlag:function(){this.showDialog=!1},saveOtherBusinFlag:function(){var t,e=this,a=!0;if(this.$refs.otherBusinFlag.validate(function(t){return a=a&&t}),!a)return this.openMask(),void this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});this.otherBusinFlag.require_pay_time&&(this.otherBusinFlag.require_pay_time=this.otherBusinFlag.require_pay_time.replace(":","").replace(":","")),"add"==this.actionType?(t=this.otherBusinFlag,f.a.post("/systemmgnt/businFlag/insert.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return d()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showDialog=!1}}).then(function(){e.showDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&function(t){return f.a.post("/systemmgnt/businFlag/updateBusin.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return d()(t)}})}(this.otherBusinFlag).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showDialog=!1}}).then(function(){e.showDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})},onSplitMove:function(){this.$refs.datagrid.handleResize()}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("busin-tree",{ref:"businTree",attrs:{"show-all":!0,"on-busin-click":t.businClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-row",[a("h-col",[a("h-button-group",["1,20,21,22,23,4,5,6,7,8,9"!=t.queryForm.businClass&&"8"!=t.queryForm.businClass&&"21"!=t.queryForm.businClass?a("h-button",{on:{click:t.businFlagAdd}},[t._v("新增")]):t._e(),t._v(" "),"1,20,21,22,23,4,5,6,7,8,9"!=t.queryForm.businClass&&"8"!=t.queryForm.businClass&&"21"!=t.queryForm.businClass?a("h-button",{on:{click:t.businFlagModify}},[t._v("修改")]):t._e(),t._v(" "),"1,20,21,22,23,4,5,6,7,8,9"!=t.queryForm.businClass&&"1"!=t.queryForm.businClass&&"4"!=t.queryForm.businClass&&"5"!=t.queryForm.businClass&&"6"!=t.queryForm.businClass?a("h-button",{on:{click:function(e){return t.operate("1")}}},[t._v("允许")]):t._e(),t._v(" "),"1,20,21,22,23,4,5,6,7,8,9"!=t.queryForm.businClass&&"1"!=t.queryForm.businClass&&"4"!=t.queryForm.businClass&&"5"!=t.queryForm.businClass&&"6"!=t.queryForm.businClass?a("h-button",{on:{click:function(e){return t.operate("0")}}},[t._v("不允许")]):t._e(),t._v(" "),a("h-button",{on:{click:t.businSets}},[t._v("设置")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"","has-page":"","highlight-row":"","auto-load":!1,"page-size":100,"page-size-opts":t.pageSizeOpts,columns:t.businFlagColumns,"bind-form":t.queryForm,"on-row-db-click":t.businFlagDbClick,url:"/systemmgnt/businFlag/page.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.showBusinFlagDialog,callback:function(e){t.showBusinFlagDialog=e},expression:"showBusinFlagDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("业务信息配置")])]),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"24"}},[a("h-form",{ref:"businFlagForm",attrs:{model:t.businFlag,"label-width":85}},[a("h-form-item",{attrs:{label:"最迟到账时间",prop:"require_pay_time"}},[a("h-time-picker",{staticStyle:{width:"168px"},attrs:{type:"time",placeholder:"选择时间"},model:{value:t.businFlag.require_pay_time,callback:function(e){t.$set(t.businFlag,"require_pay_time",e)},expression:"businFlag.require_pay_time"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelBusinFlag}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveBusinFlag}},[t._v("确定")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"310","mask-closable":!1},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增业务标志")]):a("span",[t._v("修改业务标志")])]),t._v(" "),a("h-row",[a("h-col",[a("h-form",{ref:"otherBusinFlag",attrs:{model:t.otherBusinFlag,"label-width":100}},[a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_caption"}},[a("h-input",{model:{value:t.otherBusinFlag.cop_busin_caption,callback:function(e){t.$set(t.otherBusinFlag,"cop_busin_caption",e)},expression:"otherBusinFlag.cop_busin_caption"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"资金方向",prop:"cash_direction"}},[a("h-select",{model:{value:t.otherBusinFlag.cash_direction,callback:function(e){t.$set(t.otherBusinFlag,"cash_direction",e)},expression:"otherBusinFlag.cash_direction "}},t._l(t.cashDirectionList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"1"==t.otherBusinFlag.cash_direction||"2"==t.otherBusinFlag.cash_direction,label:"出款账户",prop:"account_out_class_list"}},[a("h-select",{model:{value:t.otherBusinFlag.account_out_class_list,callback:function(e){t.$set(t.otherBusinFlag,"account_out_class_list",e)},expression:"otherBusinFlag.account_out_class_list "}},t._l(t.limitAccountClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"1"==t.otherBusinFlag.cash_direction||"2"==t.otherBusinFlag.cash_direction,label:"入款账户",prop:"account_in_class_list"}},[a("h-select",{model:{value:t.otherBusinFlag.account_in_class_list,callback:function(e){t.$set(t.otherBusinFlag,"account_in_class_list",e)},expression:"otherBusinFlag.account_in_class_list"}},t._l(t.limitAccountClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"最迟到账时间",prop:"require_pay_time"}},[a("h-time-picker",{staticStyle:{width:"100%"},attrs:{type:"time",placeholder:"选择时间"},model:{value:t.otherBusinFlag.require_pay_time,callback:function(e){t.$set(t.otherBusinFlag,"require_pay_time",e)},expression:"otherBusinFlag.require_pay_time"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelOtherBusinFlag}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveOtherBusinFlag}},[t._v("确定")])],1)],1)],1)],1)],1)])],1)},staticRenderFns:[]},m=a("VU/8")(h,_,!1,null,null,null);e.default=m.exports},doqr:function(t,e){},dytG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("Hhn/"),o=a("HmOp"),r=a("jV6A"),l=a("lbHh"),c=a.n(l),u=a("DudF"),d=a("K+nL"),f=a("+dCm"),p=a("d+lO"),h=a("foEa"),_=a("se30"),m={name:"finished",mixins:[f.a],data:function(){var t=this;return{currencyList:[],sortingField:"",split:.15,showRival:"",showAgency:!1,showClearAgent:!1,showReportCode:!1,dataSourceList:[],agencyList:[],clearAgentList:[{code:"1",text:"中登上海"},{code:"2",text:"中登深圳"},{code:"3",text:"中债登"},{code:"4",text:"上清所"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=Object(s.T)(c.a.get("CurrSysDate")),a=Object(s.T)(c.a.get("CurrSysDate"));a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=Object(s.T)(c.a.get("CurrSysDate")),a=Object(s.T)(c.a.get("CurrSysDate"));a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},accountStyle:{borderColor:"#d3d3d3",height:"200px"},trusteeStyle:{height:"200px"},detailForm:{transfer_ins_id:null,transfer_ins_modify:null,includeHistory:!0},activeName:["2","3"],flowColumns:[{width:60,type:"index",title:"序号",align:"center"},{width:100,key:"operator_name",title:"操作员",align:"left"},{title:"审批节点",key:"node_name",width:100,align:"left",ellipsis:!0,render:function(t,e){var a,n=e.row;switch(n.node_name){case"approve":a="经办";break;case"settle":a="交收";break;default:a=n.node_name}return t("span",{},a)}},{width:100,key:"transfer_flow_flag",title:"操作说明",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_flow_flag,t.transferFlagList))}},{width:150,key:"exec_date",title:"操作时间",align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.exec_date,a.exec_time))}},{key:"remark",title:"备注",align:"left"}],transferStatusList:[],transferFlagList:[],businGroup:[{cop_busin_class:"",dic_name:"全部",count:0}],inAcct:{bank_account_no:"",bic_code:null},outAcct:{bank_account_no:"",bic_code:null},transferInfo:{fund_id:null,sq_holder_account:"",zz_holder_account:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,settle_balance:"",rival_code:"",issuer_code:"",rival_name:"",invest_type:"",approve_officer:""},queryForm:{fundIds:"",businClass:"",transferStatus:"",beginDate:null,endDate:null,settleBalanceMin:"",settleBalanceMax:""},uploadData:{fileType:"2"},uploadUrl:window.LOCAL_CONFIG.API_HOME+"/file/upload.json",pageSizeOpts:[25,50,75,100],item:{},businClassTree:[],showDialog:!1,actionType:null,businColumns:[{fixedLayout:"1",title:"序号",key:"transfer_ins_id",align:"left",ellipsis:!0},{title:"指令来源",key:"data_source",width:80,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.data_source,t.dataSourceList))}},{title:"产品名称",key:"fund_name",width:150,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"产品名称",field:"fund_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_name"),t.sortingField="fund_name"}}})}},{title:"外部产品名称",key:"product_name",width:100,align:"left",ellipsis:!0},{title:"划款状态",key:"transfer_fund_status",width:90,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0?e("span",{},"-"):e("span",{},Object(s._1)(n.transfer_fund_status,t.transferFundStatusList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"划款状态",field:"transfer_fund_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"transfer_fund_status"),t.sortingField="transfer_fund_status"}}})}},{title:"合同状态",key:"cash_settle_status",align:"left",width:130,sortable:!0,ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"合同状态",field:"cash_settle_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_status"),t.sortingField="cash_settle_status"}}})}},{title:"清算机构",key:"clear_agent_code_cn",align:"left",width:90,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.clear_agent_code_cn,t.clearAgentList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"清算机构",field:"clear_agent_code_cn",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"clear_agent_code_cn"),t.sortingField="clear_agent_code_cn"}}})}},{key:"market_no",width:95,title:"交易市场",align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.market_no,t.marketList))}},{title:"成交/合同编号",key:"deal_no",width:120,sortable:!0,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"成交/合同编号",field:"deal_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"deal_no"),t.sortingField="deal_no"}}})}},{title:"到期成交编号",key:"deal_no_end",width:120,align:"left",ellipsis:!0},{title:"续做成交编号",key:"deal_no_new",width:120,align:"left",ellipsis:!0},{title:"申请编号",key:"zdsh_apply_no",width:120,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"申请编号",field:"zdsh_apply_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"zdsh_apply_no"),t.sortingField="zdsh_apply_no"}}})}},{title:"结算金额",key:"settle_balance",ellipsis:!0,width:140,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.settle_balance))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"结算金额",field:"settle_balance",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"settle_balance",!0),t.sortingField="settle_balance"}}})}},{title:"币种",key:"currency_no",width:60,sortable:!0,ellipsis:!0,align:"left",render:function(t,e){var a,n=e.row;switch(n.currency_no){case"CNY":a="人民币";break;case"USD":a="美元";break;default:a=n.currency_no}return t("span",{},a)}},{title:"起息日",key:"fee_begin_date",width:100,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.fee_begin_date))}},{title:"到期日",width:100,key:"fee_end_date",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.fee_end_date))}},{title:"证券代码",key:"report_code",width:90,sortable:!0,ellipsis:!0,align:"left"},{title:"证券名称",width:100,key:"stock_name",ellipsis:!0,align:"left"},{title:"资金方向",key:"cash_direction",width:95,sortable:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.cash_direction,t.cashDirectionList))}},{title:"业务标志",key:"cop_busin_caption",width:130,sortable:!0,ellipsis:!0,align:"left",renderHeader:function(e,a){return e("Sortheader",{props:{title:"业务标志",field:"cop_busin_caption",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cop_busin_caption"),t.sortingField="cop_busin_caption"}}})}},{title:"附件",key:"bill_name",width:50,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return"1"===a.transfer_merge_flag?t("span",{},Object(i.o)(a)):a.bill_name?t("Icon",{props:{name:"document"}}):t("span",{},"-")}},{title:"附件发送状态",key:"file_send_status",width:100,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.file_send_status,t.sendStatusList))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"附件发送状态",field:"file_send_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"file_send_status"),t.sortingField="file_send_status"}}})}},{title:"结算方式",key:"settle_ment",align:"left",width:80,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.settle_ment,t.settleMentList))}},{title:"托管人",key:"fund_trust_bank",align:"left",width:100,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.fund_trust_bank,t.bankInfoList))}},{title:"对手方",width:140,key:"rival_name",ellipsis:!0,align:"left"},{title:"交收日期",key:"cash_settle_date",sortable:!0,ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{},Object(s.R)(a.cash_settle_date))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交收日期",field:"cash_settle_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_date"),t.sortingField="cash_settle_date"}}})}},{title:"划款单",key:"file_id",width:130,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;if(n.transfer_ins_batch_no&&parseInt(n.transfer_ins_batch_no)>0)return e("span",{},"-");if(n.file_id)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.previewPDF(n.file_id)}}},"预览"),e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadByFileId(n.file_id)}}},"下载")]);return e("span",{},"-")}},{title:"投资类型",key:"invest_type",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.invest_type,t.investTypeList))}},{title:"原始划款事由",key:"original_transfer_purpose",ellipsis:!0,align:"left"},{title:"外部划款序号",key:"out_transfer_id",ellipsis:!0,align:"left"},{title:"交易员",key:"trade_operator_name",ellipsis:!0,align:"left"},{title:"申购价格（元/股）",key:"apply_price",ellipsis:!0,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.apply_price))}},{title:"交易端备注",key:"transfer_trade_remark",ellipsis:!0,align:"left"},{title:"指令端备注",key:"transfer_instr_remark",ellipsis:!0,align:"left"},{title:"销售机构",key:"agency_code",ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.agency_code,t.agencyList))}}],outAcctList:[],inAcctList:[],cityTree:[],bankList:[],bankInfoList:[],sendStatusList:[{code:"0",text:"无需发送"}],canModifyConf:"",businFlagList:[],businClassList:[],copBusinFlagList:[],transferFundStatusList:[],fileList:[],cashDirectionList:[{code:"0",text:"不变化"},{code:"1",text:"入款"},{code:"2",text:"出款"}],marketList:[],investTypeList:[],fundList:[],rivalList:[],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],operatorList:[],settleMentList:[{code:"1",text:"见款付券"},{code:"2",text:"见券付款"},{code:"3",text:"DVP"}],seatList:[{seatId:"",fee:""}],canSpecialApprove:"",specialApproveWorkerList:[],selectionTipVisible:!1,selections:[]}},watch:{"transferInfo.cop_busin_flag":function(t){switch(this.transferInfo.cop_busin_class){case"1":this.showRival=!1,this.showReportCode=20020==t,20117==t||10071==t||30008==t?this.showClearAgent=!1:10070==t||20116==t||30110==t?this.showClearAgent=!1:this.showReportCode?this.showReportCode&&(this.showClearAgent=!1):this.showClearAgent=!0;break;case"4,5,6":case"4":case"5":case"6":this.transferInfo.clear_agent_code_cn="",this.showRival=10078==t||11010==t,this.showReportCode=!1,this.showClearAgent=!1;break;case"9":this.showRival=10023==t||20018==t||10074==t||10075==t||20130==t||20019==t,this.showReportCode=20017==t||20047==t||20049==t||20126==t||20128==t||20050==t||20051==t||20139==t||20140==t||10053==t||10054==t||10098==t||10099==t,this.showClearAgent=!1;break;case"7":this.showRival=!this.showAgency,this.showReportCode=!1,this.showClearAgent=!1;break;case"20":this.showRival=!0,this.showReportCode=!1,this.showClearAgent=!1;break;default:this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1}},showDialog:function(t){t?(this.openMask(),this.activeName=["2","3"]):(this.closeMask(),this.showRival=!1,this.outAcctList=[],this.inAcctList=[],this.fileList=[],this.transferInfo={require_pay_date:null,fund_id:this.queryForm.fundIds,sq_holder_account:"",zz_holder_account:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,settle_balance:"",rival_code:"",invest_type:"",currency_no:""},this.$refs.transForm0.resetFields(),this.$refs.transForm.resetFields(),this.$refs.outAcctForm.resetFields(),this.$refs.inAcctForm.resetFields(),this.$refs.selfAcctForm.resetFields())}},components:{TransferDetailDialog:_.a,FundTree:o.a,HDatagrid:n.a,CommTreeGrid:u.a,SimpleTreeGrid:d.a,DetailPanel:p.default,SelectionTip:h.default},activated:function(){var t=this;Object(s.K)(10038).then(function(e){e.data.success&&(t.canSpecialApprove=e.data.data)})},mounted:function(){var t=this;Object(s.t)("businFlag").then(function(e){return t.businFlagList=e.data}),Object(s.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(s.t)(90522).then(function(e){return t.transferFlagList=e.data}),Object(s.t)(90537).then(function(e){t.transferStatusList=e.data.filter(function(t){return"2"===t.code||"4"===t.code||"5"===t.code||"6"===t.code||"7"===t.code})}),Object(s.q)().then(function(e){return t.cityTree=e.data}),Object(s.t)(90426).then(function(e){return t.sendStatusList=t.sendStatusList.concat(e.data)}),Object(s.t)(90523).then(function(e){return t.businClassList=e.data}),Object(s.t)(90571).then(function(e){return t.transferFundStatusList=e.data}),Object(s.t)(610400).then(function(e){return t.marketList=e.data}),Object(s.t)(91064).then(function(e){return t.investTypeList=e.data}),Object(s.t)(610406).then(function(e){var a=e.data;a.forEach(function(t){"CNY"==t.code&&(t.text="元")}),t.currencyList=a}),Object(s.j)().then(function(e){return t.bankList=e.data}),Object(s.j)("1").then(function(e){return t.bankInfoList=e.data}),Object(s.n)(!0).then(function(e){return t.businClassTree=e.data}),Object(s.N)().then(function(e){return t.operatorList=e.data}),Object(s.i)("").then(function(e){return t.agencyList=e.data}),Object(i.j)().then(function(e){e.data.rows&&e.data.rows.length>0?(t.specialApproveWorkerList=e.data.rows,t.specialApproveWorkerList.unshift({begin_date:"0",end_date:"0",operator_name:"全部",operator_no:-1,workgroup_id:0})):t.specialApproveWorkerList=[]}),this.re_layout("full-h-wrapper-on-transfer-finished","inner-on-transfer-finished",110)},computed:{showAcctCity:function(){var t=this.inAcct.province_code;return t?(this.accountStyle.height="235px",this.trusteeStyle.height="235px"):(this.accountStyle.height="200px",this.trusteeStyle.height="200px"),t},provinceCity:{get:function(){return[this.inAcct.province_code,this.inAcct.city_no]},set:function(t){this.inAcct.province_code=t[0],this.inAcct.city_no=t[1]}},transferStatus:{get:function(){return this.queryForm.transferStatus?this.queryForm.transferStatus.split(","):[]},set:function(t){this.queryForm.transferStatus=t.join(",")}},businClass:{get:function(){return this.queryForm.businClass?this.queryForm.businClass.split(","):[]},set:function(t){this.queryForm.businClass=t.join(",")}},dateRange:{get:function(){var t=void 0,e=void 0,a=Object(s.T)(c.a.get("CurrSysDate"));return this.queryForm.beginDate?t=Object(s.R)(this.queryForm.beginDate):(t=a,this.queryForm.beginDate=Object(s.Q)(a)),this.queryForm.endDate?e=Object(s.R)(this.queryForm.endDate):(e=a,this.queryForm.endDate=Object(s.Q)(a)),[t,e]},set:function(t){this.queryForm.beginDate=Object(s.Q)(t[0]),this.queryForm.endDate=Object(s.Q)(t[1])}},upBalance:function(){return Object(s._3)(this.transferInfo.settle_balance)},businClassFlag:{get:function(){if(this.showTemplateList)return[this.queryTemp.cop_busin_class,this.transferInfo.cop_busin_flag?this.transferInfo.cop_busin_flag.toString():""];var t=this.transferInfo.cop_busin_class;return"4"!=this.transferInfo.cop_busin_class&&"5"!=this.transferInfo.cop_busin_class&&"6"!=this.transferInfo.cop_busin_class||(t="4,5,6"),[t,this.transferInfo.cop_busin_flag?this.transferInfo.cop_busin_flag.toString():""]},set:function(t){this.showTemplateList?(this.queryTemp.cop_busin_class=t[0],this.queryTemp.cop_busin_flag=t[1]):(this.transferInfo.cop_busin_class=t[0],this.transferInfo.cop_busin_flag=t[1])}},payDate:{get:function(){if(null!=this.transferInfo.require_pay_date){var t=this.transferInfo.require_pay_date.toString().split(" "),e=t[0].replace(new RegExp("-","gm"),""),a=t[1];return a=void 0===a?this.transferInfo.require_pay_time:a.replace(new RegExp(":","gm"),""),Object(s.R)(e,a)}return Object(s.R)(this.transferInfo.require_pay_date)},set:function(t){this.transferInfo.require_pay_date=Object(s.Q)(t,"yyyy-MM-dd hh:mm:ss")}},beginDate:{get:function(){return Object(s.R)(this.transferInfo.fee_begin_date)},set:function(t){this.transferInfo.fee_begin_date=Object(s.Q)(t)}},endDate:{get:function(){return Object(s.R)(this.transferInfo.fee_end_date)},set:function(t){this.transferInfo.fee_end_date=Object(s.Q)(t)}}},methods:{showCity:s.Z,formatMoney:s.h,fundClick:function(t){this.$refs.datagrid.changeGrid("finishedGrid"),this.queryForm.fundIds=t.code,this.fundList=this.$refs.treeFund.getFundList(),this.refreshTable()},rowClick:function(t){0===this.$refs.datagrid.getSelection().length?this.item={}:this.item=Object(r.a)(t[0]),this.re_layout("full-h-wrapper-on-transfer-finished","inner-on-transfer-finished",110)},handleSelectChange:function(t){var e=this.$refs.datagrid.getSelection();1===e.length?this.item=Object(r.a)(e[0]):this.item={},this.re_layout("full-h-wrapper-on-transfer-finished","inner-on-transfer-finished",110)},loadFiles:function(t){var e=this;t&&Object(s.u)(t,"2").then(function(t){t.data.success&&t.data.data.forEach(function(t){return e.fileList.push({name:t.file_name,response:{data:t.file_id}})})})},showText:function(t,e){return Object(s._1)(t,e)},showDetail:function(t){this.$refs.detailDialog.showTransferDetail(t)},refreshTable:function(t){this.$refs.datagrid.changeGrid("finishedGrid"),this.queryForm.settleBalanceMin&&this.queryForm.settleBalanceMax&&parseFloat(this.queryForm.settleBalanceMin)>parseFloat(this.queryForm.settleBalanceMax)?this.$alert("结算金额下限不能大于结算金额上限","错误",{confirmButtonText:"确定",type:"error"}):(t?this.$refs.datagrid.dataChange():this.$refs.datagrid.dataChange(1),this.item={},this.re_layout("full-h-wrapper-on-transfer-finished","inner-on-transfer-finished",110))},handleCancel:function(){this.showDialog=!1},revokeSettle:function(){var t=this,e=this.$refs.datagrid.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if((e=Object(s.g)(e,this)).length<=0)return this.openMask(),void this.$alert("子指令不能单独回溯","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});if("4"!=e[0].transfer_ins_status)return this.openMask(),void this.$alert("只允许回溯交收成功的指令","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$prompt("确定回溯所选指令?请填入原因并确认：","交收回溯",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var n=a.value,s={transferList:e,ignore:!1,param:n};Object(i.q)("/cashsettle/finished/revokeSettle.json",s).then(function(e){e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshTable(!0)):(t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshTable(!0))})}).catch(function(){t.closeMask()})},fileUploaded:function(t,e,a){this.transferInfo.bill_name=a.reduce(function(t,e){return t.response.data+","+e.response.data})},exceedLimit:function(){this.$alert("最多上传5个附件","错误",{confirmButtonText:"确定",type:"error"})},previewPDF:function(t){var e="/cop-web/static/plugins/pdfjs/generic/web/viewer.html?file="+encodeURIComponent(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t);window.open(e)},downloadByFileId:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t)},downloadFile:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=2&fileId="+t.response.data)},openLayout:function(){this.$refs.datagrid.openLayout()},onSelectionChange:function(t){this.selectionTipVisible=t.length>0,this.selections=t,SSObservable.publish("onresize"),SSObservable.publish("re_layout")}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transfer-finished full-h"},[a("h-split",{attrs:{min:"130",max:"600"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("fund-tree",{ref:"treeFund",attrs:{onFundClick:t.fundClick,"show-all":!0}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper-on-transfer-finished"},slot:"right"},[a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",filterable:""},model:{value:t.businClass,callback:function(e){t.businClass=e},expression:"businClass"}},t._l(t.businClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"指令状态"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",filterable:""},model:{value:t.transferStatus,callback:function(e){t.transferStatus=e},expression:"transferStatus"}},t._l(t.transferStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"办理日期"}},[a("el-date-picker",{attrs:{type:"daterange",align:"center","unlink-panels":"",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结算金额"}},[a("div",[a("h-typefield",{staticStyle:{width:"100px","margin-top":"-5px"},attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",min:0,divided:""},model:{value:t.queryForm.settleBalanceMin,callback:function(e){t.$set(t.queryForm,"settleBalanceMin",e)},expression:"queryForm.settleBalanceMin"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),t._v(" "),a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v("-")]),t._v(" "),a("h-typefield",{staticStyle:{width:"100px","margin-top":"-5px"},attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",min:0,divided:""},model:{value:t.queryForm.settleBalanceMax,callback:function(e){t.$set(t.queryForm,"settleBalanceMax",e)},expression:"queryForm.settleBalanceMax"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.refreshTable(!1)}}},[t._v("查询")])],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"share1"},on:{click:t.revokeSettle}},[t._v("交收回溯")])],1),t._v(" "),a("h-button-group",{staticStyle:{float:"right","border-right":"solid 0px",color:"transparent","margin-bottom":"4px"}},[a("h-button",{on:{click:t.openLayout}},[a("h-icon",{staticClass:"iconfont icon-ziduanxuanze1"}),t._v("  布局")],1)],1)],1),t._v(" "),a("SimpleTreeGrid",{ref:"datagrid",attrs:{fundData:t.queryForm,columns:t.businColumns,onRowClick:t.rowClick,onRowDbClick:t.showDetail,pageSize:100,pageSizeOpts:t.pageSizeOpts,"grid-name":"finishedGrid",url:"/cashsettle/finished/finishedTransferList.json"},on:{selectionChange:t.onSelectionChange}}),t._v(" "),t.selectionTipVisible?a("selection-tip",{staticStyle:{height:"30px"},attrs:{selections:t.selections}}):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.item.transfer_ins_id,expression:"item.transfer_ins_id"}],staticClass:"wrapper mt10",attrs:{id:"inner-on-transfer-finished"}},[a("detail-panel",{attrs:{businClass:t.queryForm.businClass,businFlagList:t.businFlagList,queryForm:t.queryForm,item:t.item,from:"finished"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false /* item.transfer_ins_id */"}],staticClass:"wrapper mt10",attrs:{id:"inner-on-transfer-finished"}},[a("h-row",{attrs:{"class-name":"mt10"}},[a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("基本信息")])]),t._v(" "),t.item.cop_busin_flag?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("业务标志")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.showText(t.item.cop_busin_flag,t.businFlagList)}},[t._v(t._s(t.showText(t.item.cop_busin_flag,t.businFlagList)))])]):t._e(),t._v(" "),t.item.settle_balance?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("交收金额")]),t._v(" "),a("div",{staticClass:"value fontWeightBold",attrs:{title:t.formatMoney(t.item.settle_balance)}},[t._v(t._s(t.formatMoney(t.item.settle_balance)))])]):t._e(),t._v(" "),t.item.transfer_purpose&&t.item.transfer_purpose.trim()?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("划款事由")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.transfer_purpose}},[t._v(t._s(t.item.transfer_purpose))])]):t._e(),t._v(" "),t.item.transfer_postscript&&t.item.transfer_postscript.trim()?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("划款附言")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.transfer_postscript}},[t._v(t._s(t.item.transfer_postscript))])]):t._e(),t._v(" "),t.item.transfer_remark&&t.item.transfer_remark.trim()?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("划款备注")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.transfer_remark}},[t._v(t._s(t.item.transfer_remark))])]):t._e()]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("出")])]),t._v(" "),t.item.self_bank?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.self_bank}},[t._v(t._s(t.item.self_bank))])]):t._e(),t._v(" "),t.item.self_account_name?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.self_account_name}},[t._v(t._s(t.item.self_account_name))])]):t._e(),t._v(" "),t.item.self_account?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.self_account}},[t._v(t._s(t.item.self_account))])]):t._e(),t._v(" "),t.item.self_open_bank?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.self_open_bank}},[t._v(t._s(t.item.self_open_bank))])]):t._e(),t._v(" "),t.item.self_pay_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.self_pay_no}},[t._v(t._s(t.item.self_pay_no))])]):t._e()]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("入")])]),t._v(" "),t.item.rival_bank?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行总行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.rival_bank}},[t._v(t._s(t.item.rival_bank))])]):t._e(),t._v(" "),t.item.rival_account_name?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("账户名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.rival_account_name}},[t._v(t._s(t.item.rival_account_name))])]):t._e(),t._v(" "),t.item.rival_account?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("银行账号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.rival_account}},[t._v(t._s(t.item.rival_account))])]):t._e(),t._v(" "),t.item.rival_open_bank?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户行")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.rival_open_bank}},[t._v(t._s(t.item.rival_open_bank))])]):t._e(),t._v(" "),t.item.rival_pay_no?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("大额支付号")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.item.rival_pay_no}},[t._v(t._s(t.item.rival_pay_no))])]):t._e(),t._v(" "),t.item.rival_province_code?a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("开户省市")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.showCity([t.item.rival_province_code,t.item.rival_city_no],t.cityTree)))])]):t._e()])],1)],1)],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"1040",top:"24","mask-closable":!1,footerHide:!0,scrollable:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增指令")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改指令")]):t._e(),t._v(" "),"detail"==t.actionType?a("span",[t._v("指令详情")]):t._e()]),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom",staticStyle:{"border-color":"#d3d3d3"}},[a("header",{staticClass:"headline pl5"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("业务类型")])]),t._v(" "),a("h-form",{ref:"transForm0",attrs:{model:t.transferInfo,"label-width":100,cols:"3"}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.fund_id,callback:function(e){t.$set(t.transferInfo,"fund_id",e)},expression:"transferInfo.fund_id"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务标志"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&t.canModifyConf.indexOf("3")<0,size:"mini",options:t.businClassTree},model:{value:t.businClassFlag,callback:function(e){t.businClassFlag=e},expression:"businClassFlag"}})],1),t._v(" "),t.showClearAgent?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{required:"",label:"清算机构",prop:"clear_agent_code_cn"}},[a("h-select",{attrs:{disabled:""},model:{value:t.transferInfo.clear_agent_code_cn,callback:function(e){t.$set(t.transferInfo,"clear_agent_code_cn",e)},expression:"transferInfo.clear_agent_code_cn"}},t._l(t.agentCodeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"投资类型",prop:"invest_type"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.invest_type,callback:function(e){t.$set(t.transferInfo,"invest_type",e)},expression:"transferInfo.invest_type"}},t._l(t.investTypeList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),t.showAgency?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"销售机构",prop:"agency_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.agency_code,callback:function(e){t.$set(t.transferInfo,"agency_code",e)},expression:"transferInfo.agency_code"}},t._l(t.agencyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),t.showRival?a("h-form-item",{attrs:{label:"对手方",prop:"rival_code"}},["add"!=t.actionType?a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.rival_name,callback:function(e){t.$set(t.transferInfo,"rival_name",e)},expression:"transferInfo.rival_name"}}):t._e()],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用起始日期",prop:"fee_begin_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}})],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用结束日期",prop:"fee_end_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e(),t._v(" "),null!=t.canSpecialApprove&&"1"===t.canSpecialApprove?a("h-form-item",{attrs:{label:"特殊审批人",prop:"approve_officer"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.approve_officer,callback:function(e){t.$set(t.transferInfo,"approve_officer",e)},expression:"transferInfo.approve_officer"}},t._l(t.specialApproveWorkerList,function(t,e){return a("h-option",{key:e,attrs:{label:t.operator_name,value:t.operator_no}})}),1)],1):t._e(),t._v(" "),"detail"==t.actionType&&t.showReportCode?a("h-form-item",{attrs:{label:"证券代码",prop:"report_code"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.report_code,callback:function(e){t.$set(t.transferInfo,"report_code",e)},expression:"transferInfo.report_code"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.stock_name?a("h-form-item",{attrs:{label:"证券名称",prop:"stock_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.stock_name,callback:function(e){t.$set(t.transferInfo,"stock_name",e)},expression:"transferInfo.stock_name"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.market_no?a("h-form-item",{attrs:{label:"交易市场",prop:"market_no"}},[a("h-select",{attrs:{disabled:"",filterable:""},model:{value:t.transferInfo.market_no,callback:function(e){t.$set(t.transferInfo,"market_no",e)},expression:"transferInfo.market_no"}},t._l(t.marketList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e()],1),t._v(" "),t._l(t.seatList,function(e,n){return"22"==t.transferInfo.cop_busin_class&&"20061"==t.transferInfo.cop_busin_flag?a("h-form",{key:n,ref:"seatListForm",refInFor:!0,attrs:{"label-width":100,cols:"3",model:e}},[a("h-row",[a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"席位号"+(n+1),required:"",prop:"seatId"}},[a("h-input",{attrs:{type:"text",maxlength:6,placeholder:"请输入",disabled:"detail"==t.actionType},model:{value:e.seatId,callback:function(a){t.$set(e,"seatId",a)},expression:"item.seatId"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"佣金费"+(n+1),required:"",prop:"fee"}},[a("h-typefield",{attrs:{type:"money",placeholder:"请输入",bigTips:"",divided:"",integerNum:"12",disabled:"detail"==t.actionType},on:{"on-blur":function(t){}},model:{value:e.fee,callback:function(a){t.$set(e,"fee",a)},expression:"item.fee"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),"detail"!=t.actionType?a("h-col",{attrs:{span:"8"}},[a("h-icon",n<=0?{staticClass:"pointer pl10",attrs:{name:"addition",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}}:{staticClass:"pointer pl10",attrs:{name:"offline",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}})],1):t._e()],1)],1):t._e()})],2),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom pt10 pb10",staticStyle:{"border-color":"#d3d3d3"}},[a("h-row",[a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("出")])]),t._v(" "),a("h-form",{ref:"outAcctForm",attrs:{model:t.outAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,size:"small",filterable:"","allow-create":"",title:t.outAcct.bank_account_name},on:{change:function(t){}},model:{value:t.outAcct.bank_account_name,callback:function(e){t.$set(t.outAcct,"bank_account_name",e)},expression:"outAcct.bank_account_name"}},t._l(t.outAcctList,function(t){return a("el-option",{key:t.bank_account_id,attrs:{label:t.bank_account_name,value:t.bank_account_id}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.bank_account_no},model:{value:t.outAcct.bank_account_no,callback:function(e){t.$set(t.outAcct,"bank_account_no",e)},expression:"outAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.outAcct.bic_code,callback:function(e){t.$set(t.outAcct,"bic_code",e)},expression:"outAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.outAcct.sub_bank_no},model:{value:t.outAcct.sub_bank_no,callback:function(e){t.$set(t.outAcct,"sub_bank_no",e)},expression:"outAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.pay_no},model:{value:t.outAcct.pay_no,callback:function(e){t.$set(t.outAcct,"pay_no",e)},expression:"outAcct.pay_no"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("入")])]),t._v(" "),a("h-form",{ref:"inAcctForm",attrs:{model:t.inAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{required:"",label:"账户名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"detail"==t.actionType,size:"small",filterable:"","allow-create":"",title:t.inAcct.bank_account_name},on:{change:function(t){}},model:{value:t.inAcct.bank_account_name,callback:function(e){t.$set(t.inAcct,"bank_account_name",e)},expression:"inAcct.bank_account_name"}},t._l(t.inAcctList,function(t){return a("el-option",{key:t.bank_account_id,attrs:{label:t.bank_account_name,value:t.bank_account_id}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.bank_account_no},model:{value:t.inAcct.bank_account_no,callback:function(e){t.$set(t.inAcct,"bank_account_no",e)},expression:"inAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.inAcct.bic_code,callback:function(e){t.$set(t.inAcct,"bic_code",e)},expression:"inAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.inAcct.sub_bank_no},model:{value:t.inAcct.sub_bank_no,callback:function(e){t.$set(t.inAcct,"sub_bank_no",e)},expression:"inAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.pay_no},model:{value:t.inAcct.pay_no,callback:function(e){t.$set(t.inAcct,"pay_no",e)},expression:"inAcct.pay_no"}})],1),t._v(" "),t.showAcctCity?a("h-form-item",{attrs:{required:"",label:"开户城市",prop:"city_no"}},[a("el-cascader",{attrs:{size:"mini",disabled:"detail"==t.actionType,options:t.cityTree,filterable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1):t._e()],1)],1),t._v(" "),a("h-col",{style:t.trusteeStyle,attrs:{span:"8"}},[a("header",{staticClass:"headline pl10 pr10"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("托管人信息")])]),t._v(" "),a("h-form",{ref:"selfAcctForm",attrs:{model:t.outAcct,"label-width":100}},[a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.outAcct.bank_phone,callback:function(e){t.$set(t.outAcct,"bank_phone",e)},expression:"outAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.outAcct.bank_fax,callback:function(e){t.$set(t.outAcct,"bank_fax",e)},expression:"outAcct.bank_fax"}})],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"邮箱",prop:"bank_mail"}},[a("el-input",{attrs:{size:"small",type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.outAcct.bank_mail},model:{value:t.outAcct.bank_mail,callback:function(e){t.$set(t.outAcct,"bank_mail",e)},expression:"outAcct.bank_mail"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"block-in-box pt10 pb10"},[a("h-row",[a("h-col",{staticStyle:{"border-color":"#d3d3d3"},attrs:{span:"16","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("划款信息")])]),t._v(" "),a("h-form",{ref:"transForm",attrs:{model:t.transferInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"10"}},[a("h-form-item",{attrs:{required:"",label:"划款金额",prop:"settle_balance"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("划款金额")]),t._v(" "),a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:"",disabled:"detail"==t.actionType},model:{value:t.transferInfo.settle_balance,callback:function(e){t.$set(t.transferInfo,"settle_balance",e)},expression:"transferInfo.settle_balance"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"2"}},[a("h-form-item",{attrs:{"label-width":2}},[a("h-select",{staticStyle:{height:"32px"},attrs:{disabled:"detail"==t.actionType,setDefSelect:!0,filterable:""},model:{value:t.transferInfo.currency_no,callback:function(e){t.$set(t.transferInfo,"currency_no",e)},expression:"transferInfo.currency_no"}},t._l(t.currencyList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"付款日期",prop:"require_pay_date"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("付款日期")]),t._v(" "),a("h-date-picker",{attrs:{disabled:"detail"==t.actionType||"modify"==t.actionType&&t.canModifyConf.indexOf("2")<0,type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},on:{change:function(t){}},model:{value:t.payDate,callback:function(e){t.payDate=e},expression:"payDate"}})],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"大写金额"}},[a("h-input",{attrs:{disabled:""},model:{value:t.upBalance,callback:function(e){t.upBalance=e},expression:"upBalance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款事由",prop:"transfer_purpose"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_purpose,callback:function(e){t.$set(t.transferInfo,"transfer_purpose",e)},expression:"transferInfo.transfer_purpose"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_postscript,callback:function(e){t.$set(t.transferInfo,"transfer_postscript",e)},expression:"transferInfo.transfer_postscript"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款备注",prop:"transfer_remark"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_remark,callback:function(e){t.$set(t.transferInfo,"transfer_remark",e)},expression:"transferInfo.transfer_remark"}})],1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"8","class-name":"pl10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("附件")])]),t._v(" "),a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{disabled:"detail"==t.actionType,drag:"",multiple:"",action:t.uploadUrl,data:t.uploadData,"with-credentials":"","on-success":t.fileUploaded,"on-preview":t.downloadFile,limit:5,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType,expression:"actionType=='detail'"}],model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"collapse-icon-l"}),t._v(" "),a("span",{staticClass:"collapse-title"},[t._v("指令操作明细")])]),t._v(" "),a("h-datagrid",{ref:"flowData",attrs:{stripe:"",autoLoad:!1,"highlight-row":"",columns:t.flowColumns,bindForm:t.detailForm,url:"/cashsettle/transferFlow.json"}})],2)],1),t._v(" "),a("div",{staticClass:"flex-row-end"},[a("h-button",{attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"error"}},[t._v("存为模板")]),t._v(" "),a("h-button",{directives:[{name:"show",rawName:"v-show",value:"detail"!=t.actionType,expression:"actionType!='detail'"}],staticClass:"ml10",attrs:{type:"primary"}},[t._v("确认")])],1)],1),t._v(" "),a("TransferDetailDialog",{ref:"detailDialog"})],1)},staticRenderFns:[]};var v=a("VU/8")(m,b,!1,function(t){a("O5rJ"),a("hfdP"),a("+y6H"),a("jWya")},"data-v-77ea3182",null);e.default=v.exports},eUNJ:function(t,e,a){"use strict";var n=a("Q5rI"),s={name:"BankTree",data:function(){return{bankTree:[{text:"   加载中              ... ",code:""}],filterText:"",setQueryMsg:!1,treeProps:{label:"text",children:"children"},bankInfoQuery:{trust_flag:""},trustFlagList:[{code:"",text:"全部"},{code:"0",text:"否"},{code:"1",text:"是"}]}},props:{queryUrl:{type:String,default:"/common/bankInfoList.json"},trustFlag:{type:Boolean,default:!1},onBankClick:{type:Function,default:function(t){}},showAll:{type:Boolean,defalut:!1},onBankQuery:{type:Function,default:function(t){}}},watch:{filterText:function(t){this.$refs.bankTree.filter(t)}},mounted:function(){this.querydeal()},activated:function(){this.handleConditionQuery()},methods:{filterNode:function(t,e){return!t||-1!==e.text.indexOf(t)},openQuery:function(){this.setQueryMsg=!0},handleCancel:function(){this.setQueryMsg=!1},querydeal:function(){this.trustFlag&&(this.bankInfoQuery.trust_flag="1")},handleConditionQuery:function(){var t=this,e="?includeSelfRun=true&trustFlag="+this.bankInfoQuery.trust_flag;Object(n.l)(this.queryUrl+e).then(function(e){if(e.data.length>0){if(t.showAll){var a=e.data.reduce(function(t,e){return{code:t.code+","+e.code}}).code;t.bankTree=[{text:"全部",code:a,children:e.data}],t.onBankClick({code:a})}else t.bankTree=e.data,t.onBankClick(t.bankTree[0]);t.onBankQuery(t.bankTree),t.filterText=t.selectNodeByCode(t.bankTree[0].code)}else t.bankTree=[{text:"暂无数据",code:""}],t.onBankClick({code:""})}).catch(function(t){console.log(t)}),this.setQueryMsg=!1},selectNodeByCode:function(t){var e=this;this.$nextTick(function(){e.$refs.bankTree.setCurrentKey(t)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",{staticStyle:{"padding-left":"6px","padding-right":"6px"},attrs:{span:"24"}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"mini",placeholder:"关键字"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1),t._v(" "),a("div",{staticClass:"auto-height",staticStyle:{"margin-top":"10px"}},[a("el-scrollbar",{staticClass:"h-scrollbar",staticStyle:{height:"100%"}},[a("el-tree",{ref:"bankTree",attrs:{data:t.bankTree,props:t.treeProps,"node-key":"code","default-expand-all":!0,"expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.onBankClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[a("span",[t._v(t._s(n.label))])])}}])})],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var o=a("VU/8")(s,i,!1,function(t){a("WilM"),a("DItW")},"data-v-c8115afc",null);e.a=o.exports},eY2A:function(t,e){},"ehU/":function(t,e,a){var n={"./bizViews/bizMenu/bizSysManager/bizSetDict.vue":"V/Dy","./bizViews/bizMenu/bizSysManager/demo1.vue":"Ut7i","./bizViews/bizMenu/bizSysManager/demo2.vue":"i1+t","./bizViews/cashcheck/daily/balAccFinalTemple.vue":"ic02","./bizViews/cashcheck/daily/balAccInitTemple.vue":"voR+","./bizViews/cashcheck/daily/balAccTemple.vue":"IrRI","./bizViews/cashcheck/daily/fundReserveReport.vue":"S+by","./bizViews/cashcheck/daily/fundReserveReview.vue":"q2SQ","./bizViews/cashcheck/daily/relatedCashReport.vue":"+yq9","./bizViews/cashcheck/query/balAccCheck.vue":"gFPf","./bizViews/cashmgnt/bondSettleMgnt.vue":"4ir4","./bizViews/cashmgnt/bondSettleMgntTab.vue":"7mwo","./bizViews/cashmgnt/cashFlowReport.vue":"KV+U","./bizViews/cashmgnt/fundCashReport.vue":"I5RA","./bizViews/common.vue":"B6iw","./bizViews/feemanage/feerecord.vue":"bGn4","./bizViews/feemanage/feeruleset.vue":"qLvI","./bizViews/file/sendRecord.vue":"TAFa","./bizViews/file/sendRecord/_sendRecord.vue":"mnOV","./bizViews/fundaccount/fundaccount.vue":"nbxv","./bizViews/fundaccount/fundaccount/comps/AccountList/account.vue":"KAd0","./bizViews/fundaccount/fundaccount/comps/FundList/fund.vue":"LSxO","./bizViews/fundaccount/fundaccount/comps/ManageAccountDialog/manageAccount.vue":"XmPu","./bizViews/fundaccount/fundaccount/comps/ManageFundDialog/manageFund.vue":"AJqZ","./bizViews/fundaccount/fundaccount/index.vue":"D1OY","./bizViews/fundaccount/marketTradeDay.vue":"YtmT","./bizViews/fundaccount/review.vue":"CZwq","./bizViews/liquidate/manage.vue":"DzQm","./bizViews/liquidate/recordQuery.vue":"Ru6H","./bizViews/liquidate/ruleConfig.vue":"m2fV","./bizViews/pubaccount/extendRow.vue":"y+aP","./bizViews/pubaccount/maintain.vue":"ia4X","./bizViews/pubaccount/review.vue":"K1bj","./bizViews/reportmgnt/accCashQuery.vue":"C/Gi","./bizViews/reportmgnt/accFlowQuery.vue":"JhDS","./bizViews/reportmgnt/systemLogQuery.vue":"7Gxt","./bizViews/reportmgnt/taRecord.vue":"Tsfn","./bizViews/reportmgnt/transferRecord.vue":"f2ye","./bizViews/reportmgnt/transferRecordEnd.vue":"JO0C","./bizViews/reportmgnt/transferRecordZt.vue":"hb3r","./bizViews/systemmgnt/agency.vue":"t+GI","./bizViews/systemmgnt/approveRule.vue":"yldi","./bizViews/systemmgnt/bankBusinFlag.vue":"mDZY","./bizViews/systemmgnt/bankInfo.vue":"Rtwu","./bizViews/systemmgnt/businFlag.vue":"dhUh","./bizViews/systemmgnt/interfaceFile.vue":"9anW","./bizViews/systemmgnt/issuer.vue":"aH3W","./bizViews/systemmgnt/newtranTask.vue":"iD1e","./bizViews/systemmgnt/stamp/dealStamp.vue":"TdNe","./bizViews/systemmgnt/stamp/review.vue":"ykGC","./bizViews/systemmgnt/stamp/stamp.vue":"jTHF","./bizViews/systemmgnt/stamp/stampInfo.vue":"RCbw","./bizViews/systemmgnt/systemparameter.vue":"6ZZc","./bizViews/systemmgnt/tradeRival.vue":"tBMG","./bizViews/systemmgnt/transferTemplate.vue":"5Na9","./bizViews/systemmgnt/workGroup.vue":"hq40","./bizViews/transfer/ImportDialog.vue":"N/wp","./bizViews/transfer/ImportDialog4BTA.vue":"fb3d","./bizViews/transfer/approve.vue":"71k0","./bizViews/transfer/detailPanel.vue":"d+lO","./bizViews/transfer/finished.vue":"dytG","./bizViews/transfer/selectionTip.vue":"foEa","./bizViews/transfer/settle.vue":"FvFU","./bizViews/transfer/transferApprove.vue":"3VHE","./bizViews/transfer/transferMake.vue":"fTcp","./bizViews/transfer/transferSend.vue":"B3Fx","./bizViews/transfer/transferSettle.vue":"Yf9k"};function s(t){return a(i(t))}function i(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="ehU/"},f2ye:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("Hhn/"),i=a("Q0Ca"),o=a("jV6A"),r=a("3dxc"),l=a("DudF"),c=a("K+nL"),u=a("lbHh"),d=a.n(u),f=a("se30"),p={name:"transferRecord",data:function(){var t=this;return{statisticsData:{transferCount:"",totalRMB:"",totalUSD:""},pageSizeOpts:[25,50,75,100],autoHeight:0,getAgencyList:[],dataSourceList:[],transferColums:[{fixedLayout:"1",title:"序号",key:"transfer_ins_id",sortable:!0,align:"left",ellipsis:!0},{title:"指令来源",key:"data_source",width:80,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.data_source,t.dataSourceList))},exportRender:function(e,a){return Object(n._1)(e,t.dataSourceList)}},{title:"产品代码",key:"fund_code",width:100,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"产品代码",field:"fund_code",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_code"),t.sortingField="fund_code"}}})}},{title:"产品名称",key:"fund_name",width:150,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"产品名称",field:"fund_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_name"),t.sortingField="fund_name"}}})}},{title:"外部产品名称",key:"product_name",width:100,align:"left",ellipsis:!0},{title:"业务分类",key:"cop_busin_class",width:120,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.cop_busin_class,t.businClassList))},exportRender:function(e,a){return Object(n._1)(e,t.businClassList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"业务分类",field:"cop_busin_class",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cop_busin_class"),t.sortingField="cop_busin_class"}}})}},{title:"业务标志",key:"cop_busin_flag",width:150,ellipsis:!0,align:"left",render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.cop_busin_flag,t.businFlagList))},exportRender:function(e,a){return Object(n._1)(e,t.businFlagList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"业务标志",field:"cop_busin_flag",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cop_busin_flag"),t.sortingField="cop_busin_flag"}}})}},{title:"证券代码",key:"report_code",width:100,align:"left",ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"证券代码",field:"report_code",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"report_code"),t.sortingField="report_code"}}})}},{title:"证券名称",key:"stock_name",width:150,align:"left",ellipsis:!0},{title:"交易市场",key:"market_no",width:95,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.market_no,t.marketList))},exportRender:function(e,a){return Object(n._1)(e,t.marketList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交易市场",field:"market_no",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"market_no"),t.sortingField="market_no"}}})}},{title:"清算机构",key:"clear_agent_code_cn",align:"left",width:90,ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.clear_agent_code_cn,t.clearAgentList))},exportRender:function(e,a){return Object(n._1)(e,t.clearAgentList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"清算机构",field:"clear_agent_code_cn",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"clear_agent_code_cn"),t.sortingField="clear_agent_code_cn"}}})}},{title:"投资类型",key:"invest_type",ellipsis:!0,align:"left",render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.invest_type,t.investTypeList))},exportRender:function(e,a){return Object(n._1)(e,t.investTypeList)}},{title:"托管人",key:"fund_trust_bank",align:"left",width:100,ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.fund_trust_bank,t.bankInfoList))},exportRender:function(e,a){return Object(n._1)(e,t.bankInfoList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"托管人",field:"fund_trust_bank",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"fund_trust_bank"),t.sortingField="fund_trust_bank"}}})}},{title:"出款账户名称",key:"self_account_name",ellipsis:!0,align:"left"},{title:"出款银行账号",key:"self_account",ellipsis:!0,align:"left"},{title:"出款银行",key:"self_bank",ellipsis:!0,align:"left"},{title:"出款开户行",key:"self_open_bank",ellipsis:!0,align:"left"},{title:"出款大额支付号",key:"self_pay_no",ellipsis:!0,align:"left"},{title:"入款账户名称",key:"rival_account_name",ellipsis:!0,align:"left"},{title:"入款银行账号",key:"rival_account",ellipsis:!0,align:"left"},{title:"入款银行",key:"rival_bank",ellipsis:!0,align:"left"},{title:"入款开户行",key:"rival_open_bank",ellipsis:!0,align:"left"},{title:"入款大额支付号",key:"rival_pay_no",ellipsis:!0,align:"left"},{title:"经办人",key:"approve_operator",ellipsis:!0,align:"left"},{title:"经办时间",key:"approve_date",ellipsis:!0,align:"left",width:135,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.approve_date,a.approve_time))},exportRender:function(t,e){return Object(n.R)(e.approve_date,e.approve_time)}},{title:"交收人",key:"settle_operator",ellipsis:!0,align:"left"},{title:"交收时间",key:"settle_date",ellipsis:!0,align:"left",width:135,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.settle_date,a.settle_time))},exportRender:function(t,e){return Object(n.R)(e.settle_date,e.settle_time)}},{title:"结算金额",key:"settle_balance",ellipsis:!0,width:140,align:"right",render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(n.h)(a.settle_balance))},renderHeader:function(e,a){return e("Sortheader",{props:{title:"结算金额",field:"settle_balance",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"settle_balance",!0),t.sortingField="settle_balance"}}})}},{title:"审批状态",key:"node_name",width:90,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(i.nodeNameDesc)(a.node_name))},exportRender:function(t,e){return Object(i.nodeNameDesc)(t)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"审批状态",field:"node_name",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"node_name"),t.sortingField="node_name"}}})}},{title:"划款状态",key:"transfer_fund_status",width:90,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return s.transfer_ins_batch_no&&parseInt(s.transfer_ins_batch_no)>0?e("span",{},"-"):e("span",{},Object(n._1)(s.transfer_fund_status,t.transferFundStatusList))},exportRender:function(e,a){return a.transfer_ins_batch_no&&parseInt(a.transfer_ins_batch_no)>0?"-":Object(n._1)(e,t.transferFundStatusList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"划款状态",field:"transfer_fund_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"transfer_fund_status"),t.sortingField="transfer_fund_status"}}})}},{title:"划款单",key:"file_id",width:135,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;if(n.file_id)return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.previewPDF(n.file_id)}}},"预览"),e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadByFileId(n.file_id)}}},"下载")]);return e("span",{},"-")},exportRender:function(t,e){return""}},{title:"合同状态",key:"cash_settle_status",align:"left",width:130,ellipsis:!0,renderHeader:function(e,a){return e("Sortheader",{props:{title:"合同状态",field:"cash_settle_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_status"),t.sortingField="cash_settle_status"}}})}},{title:"附件发送状态",key:"file_send_status",width:100,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.file_send_status,t.sendStatusList))},exportRender:function(e,a){return Object(n._1)(e,t.sendStatusList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"附件发送状态",field:"file_send_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"file_send_status"),t.sortingField="file_send_status"}}})}},{title:"附件",key:"bill_name",width:50,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return"1"===a.transfer_merge_flag?t("span",{},Object(s.o)(a)):a.bill_name?t("Icon",{props:{name:"document"}}):t("span",{},"-")},exportRender:function(t,e){return"1"===e.transfer_merge_flag?Object(s.o)(e):""}},{title:"指令状态",key:"transfer_ins_status",width:100,align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.transfer_ins_status,t.transferInsStatusList))},exportRender:function(e,a){return Object(n._1)(e,t.transferInsStatusList)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"指令状态",field:"transfer_ins_status",sortingField:t.sortingField},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"transfer_ins_status"),t.sortingField="transfer_ins_status"}}})}},{title:"外部划款序号",key:"out_transfer_id",width:100,align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},-1==a.out_transfer_id?"":a.out_transfer_id)},exportRender:function(t,e){return-1==t?"":t}},{title:"申请编号",key:"zdsh_apply_no",width:120,align:"left",ellipsis:!0},{title:"交收日期",key:"cash_settle_date",width:100,align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.cash_settle_date))},exportRender:function(t,e){return Object(n.R)(t)},renderHeader:function(e,a){return e("Sortheader",{props:{title:"交收日期",field:"cash_settle_date",sortingField:t.sortingField,align:"right"},on:{sort:function(e){t.$refs.datagrid.sortAtField(e,"cash_settle_date"),t.sortingField="cash_settle_date"}}})}},{title:"指令下达时间",key:"input_time",align:"left",ellipsis:!0,width:135,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.input_date,a.input_time))},exportRender:function(t,e){return Object(n.R)(e.input_date,e.input_time)}},{title:"划款发送时间",key:"send_time",align:"left",ellipsis:!0,width:135,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.transfer_date,a.transfer_time))},exportRender:function(t,e){return Object(n.R)(e.transfer_date,e.transfer_time)}},{title:"划款成功时间",key:"succ_time",align:"left",ellipsis:!0,width:135,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.transfer_succ_date,a.transfer_succ_time))},exportRender:function(t,e){return Object(n.R)(e.transfer_succ_date,e.transfer_succ_time)}},{title:"业务划款用时",key:"business_cost",width:100,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},t.caculateTimeCost(n.transfer_date,n.transfer_time,n.input_date,n.input_time))},exportRender:function(e,a){return t.caculateTimeCost(a.transfer_date,a.transfer_time,a.input_date,a.input_time)}},{title:"银行划款用时",key:"transfer_cost",width:100,align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},t.caculateTimeCost(n.transfer_succ_date,n.transfer_succ_time,n.transfer_date,n.transfer_time))},exportRender:function(e,a){return t.caculateTimeCost(a.transfer_succ_date,a.transfer_succ_time,a.transfer_date,a.transfer_time)}},{title:"销售机构",key:"agency_code",ellipsis:!0,align:"left",render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.agency_code,t.agencyList))},exportRender:function(e,a){return Object(n._1)(e,t.agencyList)}}],businClassList:[],transferInsStatusList:[],marketList:[],clearAgentList:[{code:"1",text:"中登上海"},{code:"2",text:"中登深圳"},{code:"3",text:"中债登"},{code:"4",text:"上清所"}],fundList:[],businFlagList:[],sysDate:"",transferFundStatusList:[],sendStatusList:[{code:"0",text:"无需发送"}],queryForm:{beginDate:d.a.get("CurrSysDate"),endDate:d.a.get("CurrSysDate"),fundIds:"",businClass:"",transferInsStatus:this.$route.params.insStatus?this.$route.params.insStatus:"",settleBalanceMin:"",settleBalanceMax:"",pageType:this.pageType},bankList:[],bankInfoList:[],investTypeList:[],sheetHeadersColumns:[[]],sheetTableData:[[]]}},props:{pageType:{type:String,default:""}},computed:{settleDate:{get:function(){return[this.queryForm.beginDate?Object(n.R)(this.queryForm.beginDate):this.sysDate,this.queryForm.endDate?Object(n.R)(this.queryForm.endDate):this.sysDate]},set:function(t){this.queryForm.beginDate=Object(n.Q)(t[0]),this.queryForm.endDate=Object(n.Q)(t[1])}},fundIds:{get:function(){return this.queryForm.fundIds?this.queryForm.fundIds.split(","):[]},set:function(t){this.queryForm.fundIds=t.join(",")}},businClass:{get:function(){return this.queryForm.businClass?this.queryForm.businClass.split(","):[]},set:function(t){this.queryForm.businClass=t.join(",")}},transferInsStatus:{get:function(){return this.queryForm.transferInsStatus?this.queryForm.transferInsStatus.split(","):[]},set:function(t){this.queryForm.transferInsStatus=t.join(",")}},gridName:function(){var t="transRecordEndGrid";return"1"===this.pageType?t="transRecordZtGrid":"2"===this.pageType&&(t="transRecordEndGrid"),t}},methods:{moneyFormat:function(t){if(t&&null!=t){var e=(t=String(t)).split(".")[0],a=t.split(".")[1];a=a?a.length>=2?"."+a.substr(0,2):"."+a+"0":".00";var n=e.split("").reverse().join("").match(/(\d{1,3})/g);return(Number(t)<0?"-":"")+n.join(",").split("").reverse().join("")+a}return 0===t?"0.00":""},showDetail:function(t){this.$refs.detailDialog.showTransferDetail(t)},caculateTimeCost:function(t,e,a,s){if(!s||!e||0==e)return"";if(a!=t&&(s=83e3),s>e)return"";var i=t+""+(Array(6).join(0)+s).slice(-6),o=t+""+(Array(6).join(0)+e).slice(-6),r=(Object(n.T)(o).getTime()-Object(n.T)(i).getTime())/1e3,l=(Array(2).join(0)+r%60).slice(-2),c=(Array(2).join(0)+Math.floor(r/60)%60).slice(-2);return(Array(2).join(0)+Math.floor(r/3600)).slice(-2)+":"+c+":"+l},re_layout:function(){},refresh:function(){if((this.$route.params.insStatus&&(this.queryForm.transferInsStatus=this.$route.params.insStatus),this.queryForm.beginDate&&this.queryForm.endDate)&&(Object(n.T)(this.queryForm.endDate)-Object(n.T)(this.queryForm.beginDate))/864e5>30)return void this.$alert("查询日期间隔不能大于30天","错误",{confirmButtonText:"确定",type:"error"});this.queryForm.settleBalanceMin&&this.queryForm.settleBalanceMax&&parseFloat(this.queryForm.settleBalanceMin)>parseFloat(this.queryForm.settleBalanceMax)?this.$alert("结算金额下限不能大于结算金额上限","错误",{confirmButtonText:"确定",type:"error"}):(this.$refs.datagrid.changeGrid(this.gridName),this.$refs.datagrid.dataChange(1),this.getTotalInfo(),this.re_layout())},getTotalInfo:function(){var t=this;Object(s.k)(this.queryForm).then(function(e){e&&200===e.status&&e.data&&(t.statisticsData.transferCount=e.data.data.count,t.statisticsData.totalRMB=e.data.data.totalRMB,t.statisticsData.totalUSD=e.data.data.totalUSD,console.log(t.statisticsData.totalRMB))})},exportData:function(){var t=this,e=this.$loading({lock:!0,text:"处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(s.w)({pageNo:1,pageSize:null,beginDate:this.queryForm.beginDate,endDate:this.queryForm.endDate,fundIds:this.queryForm.fundIds,businClass:this.queryForm.businClass,transferInsStatus:this.queryForm.transferInsStatus,settleBalanceMin:this.queryForm.settleBalanceMin,settleBalanceMax:this.queryForm.settleBalanceMax,pageType:this.queryForm.pageType}).then(function(a){if(e.close(),a&&200===a.status&&a.data){var n=Object(o.a)(t.$refs.datagrid.solvedColumns);n.push({title:"混合指令序号",key:"transfer_ins_batch_no",align:"left",ellipsis:!0}),t.sheetHeadersColumns=[n],t.sheetTableData=[a.data.list?a.data.list:[]],t.$nextTick(function(){t.$refs.recordExportBtn.$el.click()})}else t.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(a){e.close(),t.$alert(a,"错误",{confirmButtonText:"确定",type:"error"})})},openLayout:function(){this.$refs.datagrid.openLayout()},previewPDF:function(t){var e="/cop-web/static/plugins/pdfjs/generic/web/viewer.html?file="+encodeURIComponent(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t);window.open(e)},downloadByFileId:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=1&fileId="+t)}},activated:function(){var t=this;this.refresh(),Object(n.w)("/common/fundName.json",null).then(function(e){return t.fundList=e.data}),Object(n.j)().then(function(e){return t.bankList=e.data}),Object(n.j)("1").then(function(e){return t.bankInfoList=e.data}),Object(n.i)("").then(function(e){return t.agencyList=e.data})},mounted:function(){var t=this;Object(n.t)(90523).then(function(e){return t.businClassList=e.data}),Object(n.t)(90528).then(function(e){return t.dataSourceList=e.data}),Object(n.t)(90537).then(function(e){"1"===t.pageType?t.transferInsStatusList=e.data.filter(function(t){return"3,8,4,5,6".indexOf(t.code)<0}):"2"===t.pageType?t.transferInsStatusList=e.data.filter(function(t){return"3,8,2,7".indexOf(t.code)<0}):t.transferInsStatusList=e.data.filter(function(t){return"3,8".indexOf(t.code)<0})}),Object(n.t)(610400).then(function(e){return t.marketList=e.data}),Object(n.t)("businFlag").then(function(e){return t.businFlagList=e.data}),Object(n.t)(90571).then(function(e){return t.transferFundStatusList=e.data}),Object(n.t)(90426).then(function(e){return t.sendStatusList=t.sendStatusList.concat(e.data)}),Object(n.t)(91064).then(function(e){return t.investTypeList=e.data}),this.re_layout()},components:{TransferDetailDialog:f.a,HDatagrid:r.a,CommTreeGrid:l.a,SimpleTreeGrid:c.a}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-transfer-record full-h",attrs:{id:"full-h-wrapper-on-reportmgnt-transferRecord"}},[a("h-row",{staticStyle:{"margin-bottom":"0px"},attrs:{id:"transferRecordForm"}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.fundIds,callback:function(e){t.fundIds=e},expression:"fundIds"}},t._l(t.fundList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.businClass,callback:function(e){t.businClass=e},expression:"businClass"}},t._l(t.businClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"2"===t.pageType?a("el-form-item",{attrs:{label:"指令状态"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.transferInsStatus,callback:function(e){t.transferInsStatus=e},expression:"transferInsStatus"}},t._l(t.transferInsStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"交收日期"}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.settleDate,callback:function(e){t.settleDate=e},expression:"settleDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结算金额"}},[a("div",[a("h-typefield",{staticStyle:{width:"100px","margin-top":"-5px"},attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",min:0,divided:""},model:{value:t.queryForm.settleBalanceMin,callback:function(e){t.$set(t.queryForm,"settleBalanceMin",e)},expression:"queryForm.settleBalanceMin"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),t._v(" "),a("span",{directives:[{name:"themed",rawName:"v-themed:text",arg:"text"}]},[t._v("-")]),t._v(" "),a("h-typefield",{staticStyle:{width:"100px","margin-top":"-5px"},attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",min:0,divided:""},model:{value:t.queryForm.settleBalanceMax,callback:function(e){t.$set(t.queryForm,"settleBalanceMax",e)},expression:"queryForm.settleBalanceMax"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1),t._v(" "),a("h-button-group",["2"===t.pageType?a("h-button",{staticClass:"record-export",attrs:{icon:"undo"},on:{click:t.exportData}},[t._v("导出")]):t._e()],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("h-file-export",{attrs:{sheetType:"table",fileName:"完结指令查询导出",sheetNames:["完结指令查询"],sheetHeaders:t.sheetHeadersColumns,sheetTableData:t.sheetTableData}},[a("h-button",{ref:"recordExportBtn",attrs:{icon:"undo"}},[t._v("导出")])],1)],1),t._v(" "),a("h-button-group",{staticStyle:{float:"right","border-right":"solid 0",color:"transparent"}},[a("h-button",{on:{click:t.openLayout}},[a("h-icon",{staticClass:"iconfont icon-ziduanxuanze1"}),t._v("  布局")],1)],1)],1)],1),t._v(" "),a("SimpleTreeGrid",{ref:"datagrid",staticClass:"mt10",staticStyle:{"margin-top":"0px"},attrs:{pageSize:100,onRowDbClick:t.showDetail,pageSizeOpts:t.pageSizeOpts,columns:t.transferColums,fundData:t.queryForm,"grid-name":t.gridName,headSelection:!1,isCheckbox:!1,url:"/reportmgnt/transRecord/transRecordList.json"}}),t._v(" "),a("div",{staticClass:"wrapper"},["0"==this.statisticsData.totalUSD?[a("h-row",{attrs:{"class-name":"border-dashed-top pt10 mt10"}},[a("h-col",{staticClass:"inner",attrs:{span:"12"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("指令总数：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:this.statisticsData.transferCount}},[t._v(t._s(this.statisticsData.transferCount))])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"12"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("人民币总额：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:this.statisticsData.totalRMB}},[t._v(t._s(t.moneyFormat(this.statisticsData.totalRMB)))])])])],1)]:[a("h-row",{attrs:{"class-name":"border-dashed-top pt10 mt10"}},[a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("指令总数：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:this.statisticsData.transferCount}},[t._v(t._s(this.statisticsData.transferCount))])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("人民币总额：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:this.statisticsData.totalRMB}},[t._v(t._s(t.moneyFormat(this.statisticsData.totalRMB)))])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("美元总额：")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:this.statisticsData.totalUSD}},[t._v(t._s(t.moneyFormat(this.statisticsData.totalUSD)))])])])],1)]],2),t._v(" "),a("TransferDetailDialog",{ref:"detailDialog"})],1)},staticRenderFns:[]};var _=a("VU/8")(p,h,!1,function(t){a("tsX2")},null,null);e.default=_.exports},f3Tf:function(t,e){},fTcp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferMake",data:function(){return{}},components:{approve:a("71k0").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("approve",{attrs:{pageType:"1"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},fb3d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Yv4f"),i=a("Q5rI"),o=a("Hhn/"),r={name:"ImportDialog4BTA",data:function(){var t=this;return{importColumns:[{title:"文件名称",key:"file_name_chinese",width:150,ellipsis:!0,align:"left"},{title:"状态",key:"load_state",width:100,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(i._1)(n.load_state,t.statusList,{key:"code",value:"text"}))}},{title:"备注",key:"remark",ellipsis:!0,align:"left",render:function(t,e){var a=e.row,n=t("span",{},a.remark);return t("el-tooltip",{props:{trigger:"hover",effect:"light",placement:"top-start",openDelay:400,content:a.remark,popperClass:"tooltipclass"}},[n])}}],tData:{rows:[]},statusList:[{code:"0",text:"未导入"},{code:"1",text:"导入成功"},{code:"2",text:"导入失败"}],msgBoxShowRevoke:!1,queryFormRevoke:{fundId:"",businFlag:"-1"},businFlagList:[{code:"-1",text:"全部"},{code:"30066",text:"自建TA申购"},{code:"30067",text:"自建TA赎回"},{code:"30068",text:"自建TA分红"}]}},components:{HDatagrid:n.a,FullScreenLoading:s.a},props:{msgBoxShow:{type:Boolean,default:!1},fundList:Array},watch:{msgBoxShowNew:function(t){t?this.openMask():this.closeMask()}},mounted:function(){this.btaQueryRefresh()},computed:{msgBoxShowNew:{get:function(){return this.msgBoxShow},set:function(t){!1===t&&this.$emit("onBTAClose")}}},methods:{btaQueryRefresh:function(){var t=this;this.tData={rows:[]},Object(o.b)().then(function(e){e&&200===e.status&&e.data&&!0===e.data.success?t.tData.rows=e.data.data:t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert(e,"错误",{confirmButtonText:"确定",type:"error"})})},onBTAImport:function(){var t=this;this.$refs.screenLoading.open(),Object(o.a)().then(function(e){t.$refs.screenLoading.close(),e&&200===e.status&&e.data&&!0===e.data.success?(t.btaQueryRefresh(),t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){})):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$refs.screenLoading.close(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error"})})},onBTARevokeAndImport:function(){this.queryFormRevoke.fundId="",this.queryFormRevoke.businFlag="-1",this.msgBoxShowRevoke=!0},onBTAResetStatus:function(){var t=this,e=this.$refs.importDatagrid.$refs.gridContent.getSelection();if(!e||0===e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});Object(o.c)({fileName:e[0].file_name}).then(function(e){e&&200===e.status&&e.data&&!0===e.data.success?(t.btaQueryRefresh(),t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){})):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert(e,"错误",{confirmButtonText:"确定",type:"error"})})},onOKRevoke:function(){var t=this;this.queryFormRevoke.fundId?this.queryFormRevoke.businFlag?Object(o.d)({fundId:this.queryFormRevoke.fundId,businFlag:this.queryFormRevoke.businFlag}).then(function(e){e&&200===e.status&&e.data&&!0===e.data.success?(t.msgBoxShowRevoke=!1,t.btaQueryRefresh(),t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){})):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.$alert(e,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("类型不能为空","错误",{confirmButtonText:"确定",type:"error"}):this.$alert("产品不能为空","错误",{confirmButtonText:"确定",type:"error"})},onCancelRevoke:function(){this.msgBoxShowRevoke=!1}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"600","mask-closable":!1},model:{value:t.msgBoxShowNew,callback:function(e){t.msgBoxShowNew=e},expression:"msgBoxShowNew"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("TA导入")])]),t._v(" "),a("h-row",[a("h-datagrid",{ref:"importDatagrid",attrs:{stripe:"","highlight-row":"",canDrag:!1,height:"330",columns:t.importColumns,gridData:t.tData}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.onBTAImport}},[t._v("导入")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.onBTARevokeAndImport}},[t._v("回溯并导入")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.onBTAResetStatus}},[t._v("重置导入状态")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"520",top:"200",title:"回溯并导入","mask-closable":!1},model:{value:t.msgBoxShowRevoke,callback:function(e){t.msgBoxShowRevoke=e},expression:"msgBoxShowRevoke"}},[a("h-form",{ref:"revokeForm",attrs:{"label-width":40,cols:"2",model:t.queryFormRevoke}},[a("h-form-item",{attrs:{label:"产品"}},[a("h-select",{attrs:{filterable:"",clearable:!1},model:{value:t.queryFormRevoke.fundId,callback:function(e){t.$set(t.queryFormRevoke,"fundId",e)},expression:"queryFormRevoke.fundId"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"类型"}},[a("h-select",{attrs:{clearable:!1},model:{value:t.queryFormRevoke.businFlag,callback:function(e){t.$set(t.queryFormRevoke,"businFlag",e)},expression:"queryFormRevoke.businFlag"}},t._l(t.businFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.onOKRevoke}},[t._v("确定")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.onCancelRevoke}},[t._v("取消")])],1)],1),t._v(" "),a("full-screen-loading",{ref:"screenLoading"})],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("naZF")},null,null);e.default=c.exports},foEa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),i=a("yNit"),o={props:{selections:{type:Array,default:function(){return[]}}},data:function(){return{sum:0,sumCNY:0,sumUSD:0}},watch:{selections:{handler:function(t){var e=0,a=0,n=!0,i=!1,o=void 0;try{for(var r,l=s()(t);!(n=(r=l.next()).done);n=!0){var c=r.value,u=parseFloat(c.settle_balance||0);"1"===c.cash_direction?("CNY"===c.currency_no&&(e+=u),"USD"===c.currency_no&&(a+=u)):("CNY"===c.currency_no&&(e-=u),"USD"===c.currency_no&&(a-=u))}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}this.sumCNY=e,this.sumUSD=a},immediate:!0}},computed:{direction:function(){return this.sum>0?"入款":this.sum<0?"出款":"无"}},created:function(){},mounted:function(){},activated:function(){},methods:{color:function(t){return t<0?{color:"#ff8a80"}:{}},parseNumber:function(t){return i.default.formatNumber(t+"",2,",")}},components:{}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-selection-tip"},[0!==t.sumCNY&&0!==t.sumUSD?a("div",{staticClass:"content"},[a("h-icon",{attrs:{name:"ios-information-outl"}}),t._v("已选择: "+t._s(t.selections.length)+" 项，已选金额："),a("span",{style:t.color(t.sumCNY)},[t._v(t._s(t.parseNumber(t.sumCNY)))]),t._v("元，"),a("span",{style:t.color(t.sumUSD)},[t._v(t._s(t.parseNumber(t.sumUSD)))]),t._v("美元\n  ")],1):0===t.sumCNY&&0!==t.sumUSD?a("div",{staticClass:"content"},[a("h-icon",{attrs:{name:"ios-information-outl"}}),t._v("已选择: "+t._s(t.selections.length)+" 项，已选金额："),a("span",{style:t.color(t.sumUSD)},[t._v(t._s(t.parseNumber(t.sumUSD)))]),t._v("美元\n  ")],1):a("div",{staticClass:"content"},[a("h-icon",{attrs:{name:"ios-information-outl"}}),t._v("已选择: "+t._s(t.selections.length)+" 项，已选金额："),a("span",{style:t.color(t.sumCNY)},[t._v(t._s(t.parseNumber(t.sumCNY)))]),t._v("元\n  ")],1)])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("AJAJ")},null,null);e.default=l.exports},g6bk:function(t,e){},gFPf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("pMtO"),o=a("lbHh"),r=a.n(o),l={name:"balAccCheck",components:{HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],showBalAccCheckDialog:!1,fundIdList:[],transferTypeList:[],checkIsOrNo:[],checkAccResultList:[],sysDate:r.a.get("CurrSysDate"),accCheckColumns:[{title:"日期",key:"curr_date",width:100,align:"right",ellipsis:!0},{title:"产品编号",key:"fund_id",align:"right",hiddenCol:!0,ellipsis:!0},{title:"产品代码",key:"fund_code",align:"right",sortable:!0,ellipsis:!0},{title:"产品名称",key:"fund_name",align:"left",ellipsis:!0},{title:"划款模式",key:"transfer_type",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_type,t.transferTypeList))}},{title:"是否需要日初对账",key:"init_check_acc_flag",align:"left",width:120,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.init_check_acc_flag,t.checkIsOrNo))}},{title:"日初对账结果",key:"init_check_acc_result",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.init_check_acc_result,t.checkAccResultList))}},{title:"日终对账结果",key:"final_check_acc_result",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.final_check_acc_result,t.checkAccResultList))}},{title:"T-1日日终账套余额",key:"account_last_balance",align:"right",ellipsis:!0,width:120,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_last_balance))}},{title:"日初账套余额",key:"account_init_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_init_balance))}},{title:"日初证券清算款",key:"stock_clear_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.stock_clear_balance))}},{title:"日初投资系统可用",key:"o32_init_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_init_balance))}},{title:"投资系统当前资金冻结金额",key:"o32_init_frozen_balance",align:"right",ellipsis:!0,width:130,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_init_frozen_balance))}},{title:"日初差额",key:"init_diff_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.init_diff_balance))}},{title:"日初备注",key:"init_check_acc_remark",align:"left",ellipsis:!0},{title:"日终账套余额",key:"account_final_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_final_balance))}},{title:"日终投资系统可用",key:"o32_final_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_final_balance))}},{title:"投资系统日终资金冻结金额",key:"o32_final_frozen_balance",align:"right",ellipsis:!0,width:130,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_final_frozen_balance))}},{title:"日终差额",key:"final_diff_balance",align:"right",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.final_diff_balance))}},{title:"日终备注",key:"final_check_acc_remark",align:"left",ellipsis:!0}],queryForm:{fundIds:"",beginDate:r.a.get("CurrSysDate"),endDate:r.a.get("CurrSysDate")},balAccCheck:{fund_id:"",curr_date:"",fund_code:"",fund_name:"",init_diff_balance:"",init_check_acc_remark:"",final_diff_balance:"",final_check_acc_remark:""}}},watch:{showBalAccCheckDialog:function(t){t?this.openMask():this.closeMask()}},computed:{settleDate:{get:function(){return[this.queryForm.beginDate?Object(s.R)(this.queryForm.beginDate):Object(s.R)(this.sysDate),this.queryForm.endDate?Object(s.R)(this.queryForm.endDate):Object(s.R)(this.sysDate)]},set:function(t){this.queryForm.beginDate=Object(s.Q)(t[0]),this.queryForm.endDate=Object(s.Q)(t[1])}},fundId:{get:function(){return this.queryForm.fundIds?this.queryForm.fundIds.split(","):[]},set:function(t){this.queryForm.fundIds=t.join(",")}}},activated:function(){var t=this;Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data})},mounted:function(){var t=this;Object(s.t)(90529).then(function(e){return t.checkAccResultList=e.data}),Object(s.t)(610001).then(function(e){return t.checkIsOrNo=e.data}),Object(s.t)(90524).then(function(e){return t.transferTypeList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90},refresh:function(){this.$refs.datagrid.dataChange(1)},remarkRemark:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.balAccCheck=e[0],this.$refs.accCheckForm.resetFields(),this.showBalAccCheckDialog=!0},cancelCheck:function(){this.showBalAccCheckDialog=!1},saveRemark:function(){var t=this,e=!0;if(this.$refs.accCheckForm.validate(function(t){return e=e&&t}),e){var a=this.balAccCheck.fund_id+","+this.balAccCheck.curr_date+","+this.balAccCheck.init_check_acc_remark+","+this.balAccCheck.final_check_acc_remark;Object(i.i)(a).then(function(e){e&&200==e.status&&"0"==e.data.errorNo?(t.$alert("修改对账备注成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showBalAccCheckDialog=!1}}).then(function(){t.showBalAccCheckDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}else this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"交收日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},model:{value:t.settleDate,callback:function(e){t.settleDate=e},expression:"settleDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.fundId,callback:function(e){t.fundId=e},expression:"fundId"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.remarkRemark}},[t._v("备注")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"",hasPage:"",height:t.autoHeight,highlightRow:"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.accCheckColumns,bindForm:t.queryForm,url:"/cashcheck/query/allocCheckListInfo.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showBalAccCheckDialog,callback:function(e){t.showBalAccCheckDialog=e},expression:"showBalAccCheckDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("备注")])]),t._v(" "),a("h-form",{ref:"accCheckForm",attrs:{model:t.balAccCheck,"label-width":100}},[a("h-row",[a("h-col",[a("h-form-item",{attrs:{label:"产品名称",prop:"fund_name"}},[a("h-input",{attrs:{disabled:""},model:{value:t.balAccCheck.fund_name,callback:function(e){t.$set(t.balAccCheck,"fund_name",e)},expression:"balAccCheck.fund_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"日初差额",prop:"init_diff_balance"}},[a("h-typefield",{attrs:{disabled:"",type:"money",suffixNum:"2"},model:{value:t.balAccCheck.init_diff_balance,callback:function(e){t.$set(t.balAccCheck,"init_diff_balance",e)},expression:"balAccCheck.init_diff_balance"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"日初备注",prop:"init_check_acc_remark"}},[a("h-input",{model:{value:t.balAccCheck.init_check_acc_remark,callback:function(e){t.$set(t.balAccCheck,"init_check_acc_remark",e)},expression:"balAccCheck.init_check_acc_remark"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"日终差额",prop:"final_diff_balance"}},[a("h-typefield",{attrs:{disabled:"",type:"money",suffixNum:"2"},model:{value:t.balAccCheck.final_diff_balance,callback:function(e){t.$set(t.balAccCheck,"final_diff_balance",e)},expression:"balAccCheck.final_diff_balance"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"日终备注",prop:"final_check_acc_remark"}},[a("h-input",{model:{value:t.balAccCheck.final_check_acc_remark,callback:function(e){t.$set(t.balAccCheck,"final_check_acc_remark",e)},expression:"balAccCheck.final_check_acc_remark"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelCheck}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveRemark}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("doqr")},"data-v-fb9ff276",null);e.default=u.exports},hHP2:function(t,e){},hb3r:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"transferRecordZt",data:function(){return{}},components:{transferRecord:a("f2ye").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("transferRecord",{attrs:{pageType:"1"}})},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},hfdP:function(t,e){},hfda:function(t,e){},hldD:function(t,e){},hq40:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l={name:"workGroup",components:{HDatagrid:n.a},data:function(){var t=this;return{operatorTitle:"操作员",autoHeight:0,pageSize:100,pageSizeOpts:[25,50,75,100],showGroupDialog:!1,showOperatorDialog:!1,workGroupActionType:"",opWorkGroupActionType:"",count:1,operatorList:[],groupColumns:[{title:"工作组序号",key:"workgroup_id",align:"center",ellipsis:!0},{title:"工作组名字",key:"workgroup_name",ellipsis:!0,align:"center"},{title:"工作组状态",key:"use_flag",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.use_flag,t.useFlagList))}}],operatorColumns:[{title:"工作组序号",key:"workgroup_id",hiddenCol:!0,align:"center",ellipsis:!0},{title:"员工号",key:"operator_no",align:"center",ellipsis:!0,sortable:!0},{title:"操作员名称",key:"operator_name",align:"center",ellipsis:!0},{title:"生效日期",key:"begin_date",align:"center",ellipsis:!0,render:function(t,e){var a=e.row.begin_date;return t("span",{},"0"==a?"无限制":a)}},{title:"失效日期",key:"end_date",align:"center",ellipsis:!0,render:function(t,e){var a=e.row.end_date;return t("span",{},"0"==a?"无限制":a)}}],useFlagList:[{code:"1",text:"启用"},{code:"2",text:"不启用"}],workGroup:{workgroup_id:"",workgroup_name:"",use_flag:""},workOperator:{workgroup_id:"",operator_no:"",operator_name:"",begin_date:"",end_date:"",actionType:""},queryForm:{workGroupId:""}}},computed:{beginDate:{get:function(){return this.workOperator.begin_date?Object(s.R)(this.workOperator.begin_date):""},set:function(t){this.workOperator.begin_date=Object(s.Q)(t)}},endDate:{get:function(){return this.workOperator.end_date?Object(s.R)(this.workOperator.end_date):""},set:function(t){this.workOperator.end_date=Object(s.Q)(t)}}},watch:{showGroupDialog:function(t){t?this.openMask():this.closeMask()},showOperatorDialog:function(t){t?this.openMask():this.closeMask()}},mounted:function(){var t=this;Object(s.N)().then(function(e){return t.operatorList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90},workGroupAdd:function(){this.workGroupActionType="add",this.workGroup={workgroup_id:"",workgroup_name:"",use_flag:"1"},this.$refs.workGroupForm.resetFields(),this.showGroupDialog=!0},workGroupModify:function(){var t=this,e=this.$refs.groupdatagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条工作组记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.workGroupDbClick(e[0])},workGroupDbClick:function(t){this.workGroup=t,this.showGroupDialog=!0,this.workGroupActionType="modify"},workGroupDelete:function(){var t=this,e=this.$refs.groupdatagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条工作组记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("是否删除该工作组信息","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e[0].workgroup_id,r.a.post("/systemmgnt/workGroup/deleteWorkGroup.json",{workGroupId:a})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.$refs.groupdatagrid.dataChange(1),t.$refs.operatordatagrid.dataChange(1),t.operatorTitle="操作员"):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},clickWorkGroup:function(){var t=this.$refs.groupdatagrid.$refs.gridContent.getSelection();t.length>0&&(this.queryForm.workGroupId=t[0].workgroup_id,this.operatorTitle=t[0].workgroup_name+" 操作员"),this.$refs.operatordatagrid.dataChange(1)},workgroupCancel:function(){this.showGroupDialog=!1},saveWorkGroup:function(){var t,e=this,a=!0;(this.$refs.workGroupForm.validate(function(t){return a=a&&t}),a)?(t=this.workGroup,r.a.post("/systemmgnt/workGroup/saveWorkGroup.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showGroupDialog=!1}}).then(function(){e.showGroupDialog=!1}),e.$refs.groupdatagrid.dataChange(1),"modify"==e.workGroupActionType&&(e.operatorTitle=e.workGroup.workgroup_name+" 操作员")):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})},opWorkGroupAdd:function(){var t=this;if(!this.queryForm.workGroupId)return this.openMask(),void this.$alert("请选择一条工作组信息","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.opWorkGroupActionType="add",this.workOperator={workgroup_id:this.queryForm.workGroupId,operator_no:"",operator_name:"",begin_date:"",end_date:"",actionType:"add"},this.$refs.workGroupOperatorForm.resetFields(),this.showOperatorDialog=!0},opWorkGroupModify:function(){var t=this,e=this.$refs.operatordatagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条操作员记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.opWorkGroupDbClick(e[0])},opWorkGroupDbClick:function(t){this.workOperator=t,this.workOperator.operator_no&&(this.workOperator.operator_no=this.workOperator.operator_no.toString()),this.workOperator.actionType="modify",this.opWorkGroupActionType="modify",this.showOperatorDialog=!0},opWorkGroupDelete:function(){var t=this,e=this.$refs.operatordatagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条操作员记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确定要删除该操作员信息","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,n;(a=e[0].operator_no,n=e[0].workgroup_id,r.a.post("/systemmgnt/workGroup/deleteOpWorkGroup.json",{operatorNo:a,workGroupId:n})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.$refs.operatordatagrid.dataChange(1)):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},operatorCancel:function(){this.showOperatorDialog=!1},saveOperator:function(){var t,e=this,a=!0;(this.$refs.workGroupOperatorForm.validate(function(t){return a=t&&a}),a)?0!=this.workOperator.begin_date&&0!=this.workOperator.end_date&&this.workOperator.begin_date>this.workOperator.end_date?this.$alert("生效日期不能大于失效日期","错误",{confirmButtonText:"确定",type:"error"}):(t=this.workOperator,r.a.post("/systemmgnt/workGroup/saveOpWorkGroup.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showOperatorDialog=!1}}).then(function(){e.showOperatorDialog=!1}),e.$refs.operatordatagrid.dataChange(1)):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"systemmgnt-workgroup",attrs:{id:"full-h-wrapper"}},[a("div",{staticClass:"contentsome"},[a("div",{staticClass:"content-left"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.workGroupAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.workGroupModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.workGroupDelete}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"groupdatagrid",attrs:{title:"工作组",hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"","page-size":t.pageSize,"page-size-opts":t.pageSizeOpts,"auto-load":!0,columns:t.groupColumns,onRowClick:t.clickWorkGroup,"on-row-db-click":t.workGroupDbClick,url:"/systemmgnt/workGroup/pageWorkGroup.json"}})],1),t._v(" "),a("div",{staticClass:"content-right"},[a("div",[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.opWorkGroupAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.opWorkGroupModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.opWorkGroupDelete}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"operatordatagrid",attrs:{title:t.operatorTitle,hasPage:"",stripe:"",height:t.autoHeight,"highlight-row":"","page-size":t.pageSize,"page-size-opts":t.pageSizeOpts,"auto-load":!1,columns:t.operatorColumns,bindForm:t.queryForm,"on-row-db-click":t.opWorkGroupDbClick,url:"/systemmgnt/workGroup/pageOpWorkGroup.json"}})],1)])]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showGroupDialog,callback:function(e){t.showGroupDialog=e},expression:"showGroupDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.workGroupActionType?a("span",[t._v("新增工作组")]):a("span",[t._v("修改工作组")])]),t._v(" "),a("h-form",{ref:"workGroupForm",attrs:{model:t.workGroup,"label-width":90}},[a("h-row",[a("h-col",{attrs:{span:"24"}},[a("h-form-item",{attrs:{required:"",label:"工作组名称",prop:"workgroup_name"}},[a("h-input",{model:{value:t.workGroup.workgroup_name,callback:function(e){t.$set(t.workGroup,"workgroup_name",e)},expression:"workGroup.workgroup_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"工作组状态",prop:"use_flag"}},[a("h-select",{attrs:{clearable:!1,filterable:""},model:{value:t.workGroup.use_flag,callback:function(e){t.$set(t.workGroup,"use_flag",e)},expression:"workGroup.use_flag"}},t._l(t.useFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.workgroupCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveWorkGroup}},[t._v("确定")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"350","mask-closable":!1},model:{value:t.showOperatorDialog,callback:function(e){t.showOperatorDialog=e},expression:"showOperatorDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.opWorkGroupActionType?a("span",[t._v("新增工作组操作员")]):a("span",[t._v("修改工作组操作员")])]),t._v(" "),a("h-form",{ref:"workGroupOperatorForm",attrs:{model:t.workOperator,"label-width":80}},[a("h-row",[a("h-col",{attrs:{span:"24"}},[a("h-form-item",{attrs:{label:"操作员工",required:"",prop:"operator_no"}},[a("h-select",{attrs:{disabled:"modify"==t.opWorkGroupActionType,filterable:""},model:{value:t.workOperator.operator_no,callback:function(e){t.$set(t.workOperator,"operator_no",e)},expression:"workOperator.operator_no"}},t._l(t.operatorList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"生效日期",prop:"begin_date"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期"},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"失效日期",prop:"end_date"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"date",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"ghost"},on:{click:t.operatorCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveOperator}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("R3Ur")},null,null);e.default=u.exports},"i1+t":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("123")])},staticRenderFns:[]},s=a("VU/8")(null,n,!1,null,null,null);e.default=s.exports},i66D:function(t,e){},iD1e:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),i=a("3dxc"),o=a("Q5rI"),r=a("mvHQ"),l=a.n(r),c=a("5/bi");var u={name:"newTrantask",mixins:[a("+dCm").a],components:{HDatagrid:i.a},data:function(){var t=this;return{pageSizeOpts:[25,50,75,100],actionType:"",operatorNoList:[],useFlagList:[{code:"1",text:"启用"},{code:"0",text:"不启用"}],runOnceList:[{code:"0",text:"是"},{code:"1",text:"否"}],columns:[{title:"序号",type:"index",width:120,align:"right"},{title:"任务编号",key:"trantask_id",align:"right",ellipsis:!0,width:120},{title:"任务名称",key:"trantask_name",align:"left",ellipsis:!0},{title:"操作员",key:"operator_no",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.operator_no,t.operatorNoList))}},{title:"启用状态",key:"use_flag",align:"left",ellipsis:!0,width:90,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.use_flag,t.useFlagList))}},{title:"开始时间",key:"begin_time",align:"left",ellipsis:!0,width:90,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(null,a.begin_time))}},{title:"结束时间",key:"end_time",align:"left",ellipsis:!0,width:90,render:function(t,e){var a=e.row;return t("span",{},Object(o.R)(null,a.end_time))}},{title:"持续性任务",key:"run_once",align:"left",ellipsis:!0,width:100,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.run_once,t.runOnceList))}}],queryForm:{operatorNo:"",taskName:""},showTaskDialog:!1,taskInfo:{operator_no:"",trantask_name:"",trantask_id:"",module_name:"",class_name:"",begin_time:"",end_time:"",sub_type:"",trantask_time_scales:"",lastexec_time:"",lastexec_date:"",priority_level:"",use_flag:"",init_function:"",run_function:"",thread_count:"",run_once:""},configTaskDialog:!1,configDataList:[]}},activated:function(){var t=this;this.refresh(),Object(o.N)().then(function(e){return t.operatorNoList=e.data})},mounted:function(){this.reLayout()},watch:{showTaskDialog:function(t){t?this.openMask():(this.$refs.taskForm.resetFields(),this.closeMask())}},methods:{refresh:function(){this.$refs.datagrid.dataChange(1)},reLayout:function(){this.re_layout("full-h-wrapper-on-newtrantask","inner-on-newtrantask",50)},modifyTask:function(){var t=this.getSelection();t&&this.dbClickTask(t)},dbClickTask:function(t){this.taskInfo=t,this.taskInfo.begin_time=Object(o.R)(null,t.begin_time),this.taskInfo.end_time=Object(o.R)(null,t.end_time),this.actionType="modify",this.showTaskDialog=!0},copyTask:function(){var t=this.getSelection();t&&(this.taskInfo=t,this.taskInfo.begin_time=Object(o.R)(null,this.taskInfo.begin_time),this.taskInfo.end_time=Object(o.R)(null,this.taskInfo.end_time),this.taskInfo.trantask_id=null,this.actionType="copy",this.showTaskDialog=!0)},configTask:function(){var t,e,a=this,n=this.getSelection();if(n)return"DataImportTask.dll"===n.module_name&&"DataImport4InterBankSettleInstr"===n.class_name||"DataImportTask.dll"===n.module_name&&"DataImport4InterBankSettleCont"===n.class_name||"DataImportTask.dll"===n.module_name&&"DataImport4Apply"===n.class_name?void(t=n.module_name,e=n.class_name,c.a.post("/systemmgnt/newtranTask/findTaskConfigList.json",{moduleName:t,className:e})).then(function(t){t.data&&t.data.success?(a.configDataList=t.data.data,a.configTaskDialog=!0):a.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(t){a.openMask(),a.$alert(t,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()})}):(this.openMask(),void this.$alert("当前任务没有提供配置参数","提示",{confirmButtonText:"确定",type:"warning",callback:function(t){a.closeMask()}}).then(function(){a.closeMask()}))},getSelection:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0===e.length?(this.openMask(),this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),null):e[0]},saveTask:function(){var t=this,e=!0;if(this.$refs.taskForm.validate(function(t){return e=e&&t}),e)if(this.taskInfo.end_time<=this.taskInfo.begin_time)this.$alert("结束时间必须大于开始时间","错误",{confirmButtonText:"确定",type:"error"});else{var a,n={};s()(n,this.taskInfo),n.begin_time=n.begin_time.replace(/:/g,""),n.end_time=n.end_time.replace(/:/g,""),"modify"===this.actionType?(a=n,c.a.post("/systemmgnt/newtranTask/newtranTaskModify.json",a,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return l()(t)}})).then(function(e){e.data&&e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){}),t.showTaskDialog=!1,t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.openMask(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})}):"copy"===this.actionType&&function(t){return c.a.post("/systemmgnt/newtranTask/newtranTaskCopy.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return l()(t)}})}(n).then(function(e){e.data&&e.data.success?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){}),t.showTaskDialog=!1,t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(e){t.openMask(),t.$alert(e,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}else this.$alert("输入项不满足要求，请重新检查！","错误",{confirmButtonText:"确定",type:"error"})},cancelTask:function(){this.showTaskDialog=!1},saveConfigTask:function(){var t,e=this;!this.configDataList||this.configDataList.length<=0?this.$alert("当前任务的配置参数不能为空","错误",{confirmButtonText:"确定",type:"error"}):(t={taskConfigList:this.configDataList},c.a.post("/systemmgnt/newtranTask/batchUpdateTaskConfig.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return l()(t)}})).then(function(t){t.data&&t.data.success?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){}}).then(function(){}),e.configTaskDialog=!1,e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}).catch(function(t){e.openMask(),e.$alert(t,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()})})},cancelConfigTask:function(){this.configTaskDialog=!1}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper-on-newtrantask"}},[a("h-row",{attrs:{id:"inner-on-newtrantask"}},[a("h-col",[a("el-form",{staticClass:"demo-form-inline",attrs:{model:t.queryForm,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"操作员",prop:"operatorNo"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.operatorNo,callback:function(e){t.$set(t.queryForm,"operatorNo",e)},expression:"queryForm.operatorNo"}},t._l(t.operatorNoList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"任务名称",prop:"taskName"}},[a("el-input",{attrs:{maxlength:"64"},model:{value:t.queryForm.taskName,callback:function(e){t.$set(t.queryForm,"taskName",e)},expression:"queryForm.taskName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"editor"},on:{click:t.modifyTask}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"add"},on:{click:t.copyTask}},[t._v("复制")]),t._v(" "),a("h-button",{attrs:{icon:"setup"},on:{click:t.configTask}},[t._v("配置任务")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"","highlight-row":"",hasPage:"",height:t.autoHeight,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.columns,bindForm:t.queryForm,"on-row-db-click":t.dbClickTask,url:"/systemmgnt/newtranTask/pageNewtranTaskList.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"580","mask-closable":!1},model:{value:t.showTaskDialog,callback:function(e){t.showTaskDialog=e},expression:"showTaskDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["modify"===t.actionType?a("span",[t._v("修改任务")]):"copy"===t.actionType?a("span",[t._v("复制任务")]):a("span",[t._v("操作任务")])]),t._v(" "),a("h-form",{ref:"taskForm",attrs:{model:t.taskInfo,"label-width":90,cols:"2"}},[a("h-form-item",{attrs:{required:"",label:"任务名称",prop:"trantask_name"}},[a("h-input",{attrs:{maxlength:64},model:{value:t.taskInfo.trantask_name,callback:function(e){t.$set(t.taskInfo,"trantask_name",e)},expression:"taskInfo.trantask_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"操作员",prop:"operator_no"}},[a("h-select",{attrs:{filterable:"",clearable:!1},model:{value:t.taskInfo.operator_no,callback:function(e){t.$set(t.taskInfo,"operator_no",e)},expression:"taskInfo.operator_no"}},t._l(t.operatorNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"开始时间",prop:"begin_time"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss",clearable:!1},model:{value:t.taskInfo.begin_time,callback:function(e){t.$set(t.taskInfo,"begin_time",e)},expression:"taskInfo.begin_time"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"结束时间",prop:"end_time"}},[a("h-time-picker",{attrs:{format:"HH:mm:ss",clearable:!1,minTime:t.taskInfo.begin_time},model:{value:t.taskInfo.end_time,callback:function(e){t.$set(t.taskInfo,"end_time",e)},expression:"taskInfo.end_time"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"启用状态",prop:"use_flag"}},[a("h-select",{attrs:{filterable:"",clearable:!1},model:{value:t.taskInfo.use_flag,callback:function(e){t.$set(t.taskInfo,"use_flag",e)},expression:"taskInfo.use_flag"}},t._l(t.useFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},on:{click:t.cancelTask}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveTask}},[t._v("确定")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"240","mask-closable":!1},model:{value:t.configTaskDialog,callback:function(e){t.configTaskDialog=e},expression:"configTaskDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("配置任务")])]),t._v(" "),t._l(t.configDataList,function(e){return a("div",{staticStyle:{height:"28px"}},[a("h-checkbox",{attrs:{"true-value":"1","false-value":"0"},model:{value:e.config_value,callback:function(a){t.$set(e,"config_value",a)},expression:"item.config_value"}},[t._v(t._s(e.config_key1))])],1)}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},on:{click:t.cancelConfigTask}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveConfigTask}},[t._v("确定")])],1)],2)],1)},staticRenderFns:[]},f=a("VU/8")(u,d,!1,null,null,null);e.default=f.exports},iJ63:function(t,e){},ia4X:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),i=a("3dxc"),o=a("Q5rI"),r=a("22iY"),l=a("y+aP"),c=a("npUS"),u={name:"maintain",data:function(){var t=this;return{split:.18,class_status:"",autoHeight:600,queryForm:{keyword:"",accountClasses:"4,7,9,a,b,c,d,e,f,g,h"},showPage:!1,selectedFundList:"",fundTypeList:[],agencyList:[],saleChannelList:[{code:"1",text:"直销"},{code:"2",text:"代销"}],account_class:"",showAcctDialog:!1,addAcct:!0,numberValidRule:[{test:/^[A-Za-z0-9()-]+$/,message:"账号格式不正确"}],bankPhoneRule:[{test:/^(\d{3,4}-\d{7,8}$)|(1[0-9]{10})$/,message:"电话格式不正确"}],bankFaxRule:[{test:/^\d{3,4}-\d{7,8}$/,message:"传真格式不正确"}],mailValidRule:[{test:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,message:"邮箱格式不正确"}],accountInfo:{account_class:"",bank_account_id:"",bank_account_no:"",bank_account_name:"",sub_bank_no:"",pay_no:"",ta_type:"",sale_channel:"",agency_code:"",bic_code:null,bank_account_status:"1",bank_account_type:"1",rival_code:"",issuer_code:"",open_date:"",cop_busin_flag_list:"",fund_id_list:"",bank_no_list:"",report_code:"",stock_name:"",fa_subject_list:"",bank_linkman:"",bank_phone:"",bank_fax:"",bank_mail:"",transfer_purpose:"",transfer_postscript:"",transfer_remark:"",remark:"",stock_code_list:""},treeProps:{label:"text",children:"children"},pageSizeOpts:[25,50,75,100],accountClasscolumns:[],columns:[{type:"selection",width:30},{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"账户编号",key:"bank_account_id",width:150,align:"left",sortable:!0,hiddenCol:!0,ellipsis:!0},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"账户用途",key:"account_class",width:150,align:"left",sortable:!0,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.account_class,t.accountClassList))}},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"账户名称",key:"bank_account_name",width:200,sortable:!0,ellipsis:!0,align:"left"},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"银行账号",key:"bank_account_no",ellipsis:!0,width:180,align:"left"},{accountClass:"f",title:"证券代码",key:"report_code",width:100,align:"left"},{accountClass:"f",title:"证券名称",key:"stock_name",ellipsis:!0,width:150,align:"left"},{accountClass:"f",title:"券商",key:"broker_name",ellipsis:!0,width:200,align:"left"},{accountClass:"7",title:"交易对手",key:"rival_name",ellipsis:!0,width:200,align:"left"},{accountClass:"9",title:"TA类型",key:"ta_type",ellipsis:!0,width:120,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.ta_type,t.taTypeList))}},{accountClass:"9",title:"销售渠道",key:"sale_channel",ellipsis:!0,width:120,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.sale_channel,t.saleChannelList))}},{accountClass:"e,g",title:"业务标志",key:"cop_busin_caption_list",ellipsis:!0,width:120,align:"left"},{accountClass:"e,4,9,g",title:"可使用产品",key:"fund_name_list",ellipsis:!0,width:120,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._2)(n.fund_id_list,t.fundList))}},{accountClass:"a",title:"托管机构",key:"custodialorg_list",width:150,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._2)(n.custodialorg_list,t.custodialorgList))}},{accountClass:"b,c",title:"托管人",key:"bank_no_list",width:150,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._2)(n.bank_no_list,t.bankInfoList))}},{accountClass:"d,i",title:"发行人",key:"issuer_name",sortable:!0,width:150,ellipsis:!0,align:"left"},{accountClass:"i",title:"证券代码列表",key:"stock_code_list",sortable:!0,width:150,ellipsis:!0,align:"left"},{accountClass:"h",title:"销售机构",key:"agency_code",sortable:!0,width:150,ellipsis:!0,align:"left",render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.agency_code,t.agencyList))}},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"银行总行",key:"bank_name",sortable:!0,width:150,ellipsis:!0,align:"left"},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"开户行名称",key:"sub_bank_no",width:200,sortable:!0,ellipsis:!0,align:"left"},{accountClass:"7,4,9,a,b,c,d,e,f,g,h,i,*",title:"大额支付号",key:"pay_no",width:150,sortable:!0,align:"left",ellipsis:!0},{accountClass:"f",title:"联系人",key:"bank_linkman",ellipsis:!0,align:"left"},{accountClass:"f",title:"联系电话",key:"bank_phone",ellipsis:!0,width:120,align:"left"},{accountClass:"f",title:"邮箱",key:"bank_mail",ellipsis:!0,width:120,align:"left"},{accountClass:"f",title:"传真",key:"bank_fax",ellipsis:!0,width:120,align:"left"},{accountClass:"7,4,9,a,b,c,d,e,g,h,i,*",title:"账户状态",key:"bank_account_status",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(o._1)(n.bank_account_status,t.accountStatusList))}}],cityTree:[],bankList:[],bankInfoList:[],custodialorgList:[],businFlagList:[],fundList:[],rivalList:[],brokerList:[],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],rivalComplete:!1,rivalLoading:!1,issuerComplete:!1,issuerLoading:!1,brokerLoading:!1,brokerComplete:!1,issuerList:[],fundIdList:[],bankNoList:[],orgNoList:[],copBusinFlagList:[],accountTreeList:[{text:"全部",code:"4,7,9,a,b,c,d,e,f,g,h,i",children:[]}],accountClassList:[],accountStatusList:[{code:1,text:"正常"},{code:2,text:"冻结"},{code:3,text:"注销"}]}},created:function(){this.accountClasscolumns=this.columns.filter(function(t){return!t.accountClass||t.accountClass.indexOf("*")>=0})},activated:function(){var t=this;Object(o.j)().then(function(e){return t.bankList=e.data.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})}),Object(o.k)("1").then(function(e){t.bankInfoList=[{code:"-1",text:"全部"}],e.data&&e.data.length>0&&(t.bankInfoList=t.bankInfoList.concat(e.data))}),Object(o.w)("/common/fundName.json",{transfer_flag:1,fund_status:[1]}).then(function(e){t.fundList=[{code:"-1",text:"全部"}],e.data&&e.data.length>0&&(t.fundList=t.fundList.concat(e.data))}),Object(o.i)("").then(function(e){return t.agencyList=e.data}),this.refreshTable()},mounted:function(){var t=this;Object(o.s)().then(function(e){t.custodialorgList=[{code:"-1",text:"全部"},{code:"0",text:"自营"}],e.data&&e.data.length>0&&(t.custodialorgList=t.custodialorgList.concat(e.data))}),Object(o.t)(610087).then(function(e){return t.fundTypeList=e.data}),Object(o.q)().then(function(e){return t.cityTree=e.data}),this.rivalScroll(0),this.issuerScroll(0),this.brokerScroll(0),Object(o.t)(90525).then(function(e){t.accountClassList=e.data.filter(function(t){return 1!=t.code&&2!=t.code&&3!=t.code&&5!=t.code&&6!=t.code&&8!=t.code}),t.accountTreeList[0].children=e.data.filter(function(t){return 1!=t.code&&2!=t.code&&3!=t.code&&5!=t.code&&6!=t.code&&8!=t.code})})},computed:{provinceCity:{get:function(){return[this.accountInfo.province_code,this.accountInfo.city_no]},set:function(t){this.accountInfo.province_code=t[0],this.accountInfo.city_no=t[1]}}},watch:{showAcctDialog:function(t){var e=this;t?("e"==this.queryForm.accountClasses?Object(o.p)("22","e").then(function(t){t.data&&t.data.length>0&&(e.businFlagList=[{code:"-1",text:"全部"}],e.businFlagList=e.businFlagList.concat(t.data))}):"g"==this.queryForm.accountClasses&&Object(o.p)("23","g").then(function(t){t.data&&t.data.length>0&&(e.businFlagList=[{code:"-1",text:"全部"}],e.businFlagList=e.businFlagList.concat(t.data))}),this.openMask()):this.closeMask()},fundIdList:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.accountInfo.fund_id_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.accountInfo.fund_id_list=t;else{var a=t.split(",");this.accountInfo.fund_id_list=this.removeArr(a,"-1")}this.fundIdList=this.accountInfo.fund_id_list},bankNoList:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.accountInfo.bank_no_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.accountInfo.bank_no_list=t;else{var a=t.split(",");this.accountInfo.bank_no_list=this.removeArr(a,"-1")}this.bankNoList=this.accountInfo.bank_no_list},copBusinFlagList:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.accountInfo.cop_busin_flag_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.accountInfo.cop_busin_flag_list=t.join(",");else{var a=t;this.accountInfo.cop_busin_flag_list=this.removeArr(a,"-1")}this.accountInfo.cop_busin_flag_list!=this.copBusinFlagList.join(",")&&(this.copBusinFlagList=this.accountInfo.cop_busin_flag_list.split(","))},orgNoList:function(t,e){if(-1!=t.indexOf("-1")&&-1==e.indexOf("-1")||"-1"==t)this.accountInfo.custodialorg_list="-1";else if(-1==t.indexOf("-1")&&-1!=e.indexOf("-1")||-1==t.indexOf("-1")&&-1==e.indexOf("-1"))this.accountInfo.custodialorg_list=t;else{var a=t.split(",");this.accountInfo.custodialorg_list=this.removeArr(a,"-1")}this.orgNoList=this.accountInfo.custodialorg_list}},methods:{reLayout:function(){var t=this;setTimeout(function(){var e=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;t.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-e-35},10)},classChange:function(t){var e=this;"e"==t?Object(o.p)("22","e").then(function(t){t.data&&t.data.length>0?(e.businFlagList=[{code:"-1",text:"全部"}],e.businFlagList=e.businFlagList.concat(t.data)):e.businFlagList=[{code:"-1",text:"全部"}],Object(o._2)(e.accountInfo.cop_busin_flag_list,e.businFlagList)||(e.accountInfo.cop_busin_flag_list="-1"),e.copBusinFlagList=e.accountInfo.cop_busin_flag_list.split(",")}):"g"==t?Object(o.p)("23","g").then(function(t){t.data&&t.data.length>0?(e.businFlagList=[{code:"-1",text:"全部"}],e.businFlagList=e.businFlagList.concat(t.data)):e.businFlagList=[{code:"-1",text:"全部"}],Object(o._2)(e.accountInfo.cop_busin_flag_list,e.businFlagList)||(e.accountInfo.cop_busin_flag_list="-1"),e.copBusinFlagList=e.accountInfo.cop_busin_flag_list.split(",")}):"a"!=t&&(this.accountInfo.cop_busin_flag_list="",this.copBusinFlagList=[]),"4"!=t&&"9"!=t&&"e"!=t&&"g"!=t||this.accountInfo.fund_id_list||(this.accountInfo.fund_id_list="-1"),"b"!=t&&"c"!=t||this.accountInfo.bank_no_list||(this.accountInfo.bank_no_list="-1"),"a"!=t||this.accountInfo.custodialorg_list||(this.accountInfo.custodialorg_list="-1"),this.$nextTick(function(){e.class_status=t}),this.fundIdList=this.accountInfo.fund_id_list,this.bankNoList=this.accountInfo.bank_no_list,this.orgNoList=this.accountInfo.custodialorg_list,"4"!=t&&"9"!=t&&"e"!=t&&"g"!=t&&(this.accountInfo.fund_id_list=""),"7"!=t&&"i"!=t&&"f"!=t&&(this.accountInfo.rival_code=""),"9"!=t&&(this.accountInfo.ta_type="",this.accountInfo.sale_channel=""),"a"!=t&&(this.accountInfo.custodialorg_list=""),"b"!=t&&"c"!=t&&(this.accountInfo.bank_no_list=""),"d"!=t&&"i"!=t&&(this.accountInfo.issuer_code=""),"f"!=t&&(this.accountInfo.report_code="",this.accountInfo.stock_name=""),"h"!=t&&(this.accountInfo.agency_code=""),"i"!=t&&(this.accountInfo.stock_code_list="")},handleCancel:function(){this.accountInfo.agency_code="",this.showAcctDialog=!1},handleNodeClick:function(t){var e=this;this.queryForm.accountClasses=t.code,this.queryForm.accountClasses.split(",").length>1?this.accountClasscolumns=this.columns.filter(function(t){return!t.accountClass||t.accountClass.indexOf("*")>=0}):this.accountClasscolumns=this.columns.filter(function(t){return!t.accountClass||t.accountClass.indexOf(e.queryForm.accountClasses)>=0}),this.refreshTable()},refreshTable:function(){this.$refs.datagrid.dataChange(1)},handleAdd:function(){this.$refs.accountForm.resetFields(),this.accountInfo={account_class:this.queryForm.accountClasses.split(",")[0],bank_account_status:"1"},"4"==this.accountInfo.account_class||"9"==this.accountInfo.account_class||"e"==this.accountInfo.account_class||"g"==this.accountInfo.account_class?this.accountInfo.fund_id_list="-1":this.accountInfo.fund_id_list="","b"==this.accountInfo.account_class||"c"==this.accountInfo.account_class?this.accountInfo.bank_no_list="-1":this.accountInfo.bank_no_list="","e"==this.accountInfo.account_class||"g"==this.accountInfo.account_class?(this.accountInfo.cop_busin_flag_list="-1",this.copBusinFlagList=this.accountInfo.cop_busin_flag_list.split(",")):(this.accountInfo.cop_busin_flag_list="",this.copBusinFlagList=[]),"a"==this.accountInfo.account_class?this.accountInfo.custodialorg_list="-1":this.accountInfo.custodialorg_list="",this.fundIdList=this.accountInfo.fund_id_list,this.bankNoList=this.accountInfo.bank_no_list,this.orgNoList=this.accountInfo.custodialorg_list,this.provinceCity=[],this.addAcct=!0,this.showAcctDialog=!0},handleModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e.length>1?(this.openMask(),void this.$alert("修改操作只能选择一条数据","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void this.pubDbClick(e[0])},pubDbClick:function(t){this.addAcct=!1,s()(this.accountInfo,t),null==this.accountInfo.bic_code&&(this.accountInfo.bic_code=""),null==this.accountInfo.fund_id_list&&(this.accountInfo.fund_id_list=""),null==this.accountInfo.bank_no_list&&(this.accountInfo.bank_no_list=""),null==this.accountInfo.cop_busin_flag_list&&(this.accountInfo.cop_busin_flag_list="",this.copBusinFlagList=[]),null==this.accountInfo.custodialorg_list&&(this.accountInfo.custodialorg_list=""),this.accountInfo.rival_code||(this.accountInfo.rival_code=""),this.accountInfo.issuer_code||(this.accountInfo.issuer_code=""),this.fundIdList=this.accountInfo.fund_id_list,this.bankNoList=this.accountInfo.bank_no_list,this.copBusinFlagList=this.accountInfo.cop_busin_flag_list.split(","),this.orgNoList=this.accountInfo.custodialorg_list,this.accountInfo.open_date=Object(o.R)(this.accountInfo.open_date),"7"==t.account_class?this.rivalLoad(t.rival_code):"d"==t.account_class||"i"==t.account_class?this.issuerLoad(t.issuer_code):"f"==t.account_class&&this.brokerLoad(t.rival_code),this.showAcctDialog=!0},saveAccount:function(){var t=this,e=!0;this.$refs.accountForm.validate(function(t){return e=e&&t}),"e"!=this.accountInfo.account_class&&"g"!=this.accountInfo.account_class||this.accountInfo.cop_busin_flag_list?e?(this.accountInfo.open_date=Object(o.Q)(this.accountInfo.open_date),Object(r.l)(this.accountInfo).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showAcctDialog=!1}}).then(function(){t.showAcctDialog=!1}),t.refreshTable()):e.data&&"1120010"==e.data.code?t.showAcctDialog=!1:t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})):this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"}):this.$alert("业务标志不能为空，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},handleDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中至少一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}});var a="";e.forEach(function(t){a=a+t.bank_account_id+","}),a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认要删除该账户吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.a)(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshTable()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},rivalScroll:function(t){var e=this;if(t<=1){var a=this.rivalList.length/100;Object(o.G)(a,100).then(function(t){e.rivalList=e.rivalList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})),t.data.hasNextPage||(e.rivalComplete=!0)})}},rivalLoad:function(t){var e=this;this.rivalList.find(function(e){return e.value==t})||Object(o.G)(0,50,"",t).then(function(t){e.rivalList=e.rivalList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}))})},rivalQuery:function(t){var e=this;this.rivalLoading=!0,Object(o.G)(0,50,t).then(function(t){e.rivalList=t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}),e.rivalLoading=!1,t.data.hasNextPage||(e.rivalComplete=!0)})},issuerScroll:function(t){var e=this;if(t<=1){var a=this.issuerList.length/50;Object(o.y)(a,50).then(function(t){e.issuerList=e.issuerList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})),t.data.hasNextPage||(e.issuerComplete=!0)})}},issuerLoad:function(t){var e=this;this.issuerList.find(function(e){return e.value==t})||Object(o.y)(0,50,"",t).then(function(t){e.issuerList=e.issuerList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}))})},issuerQuery:function(t){var e=this;this.issuerLoading=!0,Object(o.y)(0,50,t).then(function(t){e.issuerList=t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}),e.issuerLoading=!1,t.data.hasNextPage||(e.issuerComplete=!0)})},brokerScroll:function(t){var e=this;if(t<=1){var a=this.brokerList.length/100;Object(o.O)(a,100).then(function(t){e.brokerList=e.brokerList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e})),t.data.hasNextPage||(e.brokerComplete=!0)})}},brokerLoad:function(t){var e=this;t&&!this.brokerList.find(function(e){return e.value==t})&&Object(o.O)(0,50,"",t).then(function(t){e.brokerList=e.brokerList.concat(t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}))})},brokerQuery:function(t){var e=this;this.brokerLoading=!0,Object(o.O)(0,50,t).then(function(t){e.brokerList=t.data.list.map(function(t){var e={};return e.value=t.code,e.label=t.text,e}),e.brokerLoading=!1,t.data.hasNextPage||(e.brokerComplete=!0)})},choseFundList:function(){var t=document.getElementById("full-h-wrapper").offsetHeight;this.$refs.maintainFundChooseMsgBox.showMsgBox(this.accountInfo.fund_id_list,t,"2")},uploadExcel:function(){this.$refs.importAccountTransfer.showDialog("2",null)},removeArr:function(t,e){for(var a=0;a<t.length;a++)t[a]==e&&t.splice(a,1);return t},rowClassName:function(t){return"1"!=t.bank_account_status?"alert-table-red-row":""},saveFundInfo:function(t){this.fundIdList=t},onSplitMove:function(){this.$refs.datagrid.handleResize()}},components:{FundChooseMsgBox:a("tq1/").a,extendRow:l.default,HDatagrid:i.a,ImportAccountTransfer:c.a}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-pubaccount full-h"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-split",{attrs:{min:"50",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("el-scrollbar",{staticClass:"h-scrollbar",staticStyle:{height:"100%"}},[a("el-tree",{staticClass:"full-h",attrs:{data:t.accountTreeList,props:t.treeProps,"expand-on-click-node":!1,"default-expand-all":!0},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node;return e.data,a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[a("span",[t._v(t._s(n.label))])])}}])})],1)],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("div",{staticClass:"ctrls"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.handleAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.handleModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.handleDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.uploadExcel}},[t._v("导入")])],1),t._v(" "),a("h-input",{staticStyle:{width:"215px"},attrs:{maxlength:32,placeholder:"请输入账户名或账号或产品"},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword",e)},expression:"queryForm.keyword"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"search"},nativeOn:{click:function(e){return e.stopPropagation(),t.refreshTable(e)}}})],1)])])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"",hasPage:"",height:t.autoHeight,"highlight-row":"","row-class-name":t.rowClassName,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.accountClasscolumns,bindForm:t.queryForm,onRowDbClick:t.pubDbClick,url:"/fundaccount/account/page.json"},on:{getDataForDatagrid:t.reLayout}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox pubaccount-new",attrs:{width:"700","mask-closable":!1},model:{value:t.showAcctDialog,callback:function(e){t.showAcctDialog=e},expression:"showAcctDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t.addAcct?a("span",[t._v("新增账户")]):a("span",[t._v("修改账户")])]),t._v(" "),a("h-form",{ref:"accountForm",attrs:{model:t.accountInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{required:"",label:"账户用途",prop:"account_class"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.classChange},model:{value:t.accountInfo.account_class,callback:function(e){t.$set(t.accountInfo,"account_class",e)},expression:"accountInfo.account_class"}},t._l(t.accountClassList,function(e){return a("h-option",{key:e.code,attrs:{label:e.text,value:e.code}},[t._v(t._s(e.text)+"\n                            ")])}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"e"==t.class_status||"g"==t.class_status,expression:"class_status=='e' || class_status == 'g'"}],attrs:{required:"e"==t.class_status||"g"==t.class_status,label:"业务标志"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:"",filterable:"","collapse-tags":""},model:{value:t.copBusinFlagList,callback:function(e){t.copBusinFlagList=e},expression:"copBusinFlagList"}},t._l(t.businFlagList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{maxlength:56},model:{value:t.accountInfo.bank_account_name,callback:function(e){t.$set(t.accountInfo,"bank_account_name",e)},expression:"accountInfo.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"银行账号",prop:"bank_account_no",validRules:t.numberValidRule}},[a("h-input",{attrs:{maxlength:32},model:{value:t.accountInfo.bank_account_no,callback:function(e){t.$set(t.accountInfo,"bank_account_no",e)},expression:"accountInfo.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"开户行名称",prop:"sub_bank_no"}},[a("h-input",{attrs:{maxlength:56},model:{value:t.accountInfo.sub_bank_no,callback:function(e){t.$set(t.accountInfo,"sub_bank_no",e)},expression:"accountInfo.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{maxlength:32},model:{value:t.accountInfo.pay_no,callback:function(e){t.$set(t.accountInfo,"pay_no",e)},expression:"accountInfo.pay_no"}})],1),t._v(" "),"7"==t.class_status?a("h-form-item",{staticStyle:{"margin-top":"4px"},attrs:{required:"",label:"交易对手",prop:"rival_code"}},[a("h-simple-select",{attrs:{"remote-method":t.rivalQuery,loading:t.rivalLoading,filterable:"",remote:""},model:{value:t.accountInfo.rival_code,callback:function(e){t.$set(t.accountInfo,"rival_code",e)},expression:"accountInfo.rival_code"}},[a("h-select-block",{attrs:{data:t.rivalList}})],1)],1):t._e(),t._v(" "),"d"==t.class_status||"i"==t.class_status?a("h-form-item",{attrs:{required:"",label:"发行人",prop:"issuer_code"}},[a("h-simple-select",{attrs:{"remote-method":t.issuerQuery,loading:t.issuerLoading,remote:"",filterable:""},model:{value:t.accountInfo.issuer_code,callback:function(e){t.$set(t.accountInfo,"issuer_code",e)},expression:"accountInfo.issuer_code"}},[a("h-select-block",{attrs:{data:t.issuerList}})],1)],1):t._e(),t._v(" "),"i"==t.class_status?a("h-form-item",{attrs:{label:"证券代码列表",prop:"stock_code_list"}},[a("h-input",{attrs:{maxlength:56,placeholder:"多个证券代码以英文逗号分割"},model:{value:t.accountInfo.stock_code_list,callback:function(e){t.$set(t.accountInfo,"stock_code_list",e)},expression:"accountInfo.stock_code_list"}})],1):t._e(),t._v(" "),"9"==t.class_status?a("h-form-item",{attrs:{label:"TA类型",prop:"ta_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.accountInfo.ta_type,callback:function(e){t.$set(t.accountInfo,"ta_type",e)},expression:"accountInfo.ta_type"}},t._l(t.taTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"9"==t.class_status?a("h-form-item",{staticStyle:{"margin-top":"2px"},attrs:{label:"销售渠道",prop:"sale_channel"}},[a("h-select",{attrs:{filterable:""},model:{value:t.accountInfo.sale_channel,callback:function(e){t.$set(t.accountInfo,"sale_channel",e)},expression:"accountInfo.sale_channel"}},t._l(t.saleChannelList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"h"==t.class_status?a("h-form-item",{staticStyle:{"margin-top":"2px"},attrs:{required:"h"==t.class_status,label:"销售机构",prop:"agency_code"}},[a("h-select",{attrs:{filterable:""},model:{value:t.accountInfo.agency_code,callback:function(e){t.$set(t.accountInfo,"agency_code",e)},expression:"accountInfo.agency_code"}},t._l(t.agencyList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"a"==t.class_status?a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag_list"}},[a("h-select",{model:{value:t.accountInfo.cop_busin_flag_list,callback:function(e){t.$set(t.accountInfo,"cop_busin_flag_list",e)},expression:"accountInfo.cop_busin_flag_list"}},[a("h-option",{attrs:{label:"网下新股申购上海",value:"20046"}}),t._v(" "),a("h-option",{attrs:{label:"网下新股申购深圳",value:"20045"}})],1)],1):t._e(),t._v(" "),"a"==t.class_status?a("h-form-item",{attrs:{required:"",label:"托管机构",prop:"custodialorg_list"}},[a("h-select",{attrs:{multiple:"",clearable:"",isString:"",filterable:"",showBottom:""},model:{value:t.orgNoList,callback:function(e){t.orgNoList=e},expression:"orgNoList"}},t._l(t.custodialorgList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"b"==t.class_status||"c"==t.class_status?a("h-form-item",{attrs:{required:"",label:"托管人",prop:"bank_no_list"}},[a("h-select",{attrs:{multiple:"",clearable:"",isString:"",filterable:"",showBottom:""},model:{value:t.bankNoList,callback:function(e){t.bankNoList=e},expression:"bankNoList"}},t._l(t.bankInfoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"e"==t.class_status||"4"==t.class_status||"9"==t.class_status||"g"==t.class_status?a("h-form-item",{attrs:{label:"可使用产品",prop:"fund_id_list"}},[a("div",[a("h-select",{staticStyle:{width:"175px"},attrs:{multiple:"",clearable:"",isString:"",filterable:"",showBottom:""},model:{value:t.fundIdList,callback:function(e){t.fundIdList=e},expression:"fundIdList"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1),t._v(" "),a("h-button",{directives:[{name:"themed",rawName:"v-themed:button.primary",arg:"button",modifiers:{primary:!0}}],attrs:{type:"primary",size:"small"},on:{click:t.choseFundList}},[t._v("选择")])],1)]):t._e(),t._v(" "),"f"==t.class_status?a("h-form-item",{attrs:{label:"证券代码",prop:"report_code"}},[a("h-input",{attrs:{type:"text"},model:{value:t.accountInfo.report_code,callback:function(e){t.$set(t.accountInfo,"report_code",e)},expression:"accountInfo.report_code"}})],1):t._e(),t._v(" "),"f"==t.class_status?a("h-form-item",{attrs:{label:"证券名称",prop:"stock_name"}},[a("h-input",{attrs:{type:"text"},model:{value:t.accountInfo.stock_name,callback:function(e){t.$set(t.accountInfo,"stock_name",e)},expression:"accountInfo.stock_name"}})],1):t._e(),t._v(" "),"f"==t.class_status?a("h-form-item",{attrs:{label:"券商",prop:"rival_code"}},[a("h-simple-select",{attrs:{"remote-method":t.brokerQuery,loading:t.brokerLoading,filterable:"",remote:""},model:{value:t.accountInfo.rival_code,callback:function(e){t.$set(t.accountInfo,"rival_code",e)},expression:"accountInfo.rival_code"}},[a("h-select-block",{attrs:{data:t.brokerList}})],1)],1):t._e(),t._v(" "),a("h-form-item",{staticStyle:{height:"32px","margin-top":"4px"},attrs:{label:"银行总行",prop:"bic_code"}},[a("h-simple-select",{attrs:{filterable:""},model:{value:t.accountInfo.bic_code,callback:function(e){t.$set(t.accountInfo,"bic_code",e)},expression:"accountInfo.bic_code"}},[a("h-select-block",{attrs:{data:t.bankList}})],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"账户状态",prop:"bank_account_status"}},[a("h-select",{attrs:{filterable:""},model:{value:t.accountInfo.bank_account_status,callback:function(e){t.$set(t.accountInfo,"bank_account_status",e)},expression:"accountInfo.bank_account_status"}},t._l(t.accountStatusList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code.toString()}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:"e"==t.class_status,expression:"class_status == 'e'"}],attrs:{label:"估值科目",prop:"fa_subject_list"}},[a("h-input",{attrs:{placeholder:"支持多科目累加，英文短号分开"},model:{value:t.accountInfo.fa_subject_list,callback:function(e){t.$set(t.accountInfo,"fa_subject_list",e)},expression:"accountInfo.fa_subject_list"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"开户城市"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",options:t.cityTree,filterable:"",clearable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系人",prop:"bank_linkman"}},[a("h-input",{model:{value:t.accountInfo.bank_linkman,callback:function(e){t.$set(t.accountInfo,"bank_linkman",e)},expression:"accountInfo.bank_linkman"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{model:{value:t.accountInfo.bank_phone,callback:function(e){t.$set(t.accountInfo,"bank_phone",e)},expression:"accountInfo.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{maxlength:32},model:{value:t.accountInfo.bank_fax,callback:function(e){t.$set(t.accountInfo,"bank_fax",e)},expression:"accountInfo.bank_fax"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"邮箱",prop:"bank_mail",validRules:t.mailValidRule}},[a("h-input",{attrs:{maxlength:56},model:{value:t.accountInfo.bank_mail,callback:function(e){t.$set(t.accountInfo,"bank_mail",e)},expression:"accountInfo.bank_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"开户日期",prop:"open_date"}},[a("h-date-picker",{attrs:{format:"yyyyMMdd",type:"date",placeholder:"选择日期"},model:{value:t.accountInfo.open_date,callback:function(e){t.$set(t.accountInfo,"open_date",e)},expression:"accountInfo.open_date"}})],1),t._v(" "),"f"==t.accountInfo.account_class?a("h-form-item",{attrs:{label:"划款事由"}},[a("el-popover",{ref:"popover1",attrs:{width:"100",trigger:"hover",placement:"right",title:"支持的宏定义"}},[a("div",{staticStyle:{border:"1px solid #F7F7F7",margin:"0 0 10px 0"}}),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{上海股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{深圳股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券名称}")]),t._v(" "),a("el-input",{attrs:{slot:"reference",size:"small"},slot:"reference",model:{value:t.accountInfo.transfer_purpose,callback:function(e){t.$set(t.accountInfo,"transfer_purpose",e)},expression:"accountInfo.transfer_purpose"}})],1)],1):t._e(),t._v(" "),"f"==t.accountInfo.account_class?a("h-form-item",{attrs:{label:"划款附言"}},[a("el-popover",{ref:"popover2",attrs:{width:"100",trigger:"hover",placement:"right",title:"支持的宏定义"}},[a("div",{staticStyle:{border:"1px solid #F7F7F7",margin:"0 0 10px 0"}}),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{上海股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{深圳股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券名称}")]),t._v(" "),a("el-input",{attrs:{slot:"reference",size:"small"},slot:"reference",model:{value:t.accountInfo.transfer_postscript,callback:function(e){t.$set(t.accountInfo,"transfer_postscript",e)},expression:"accountInfo.transfer_postscript"}})],1)],1):t._e(),t._v(" "),"f"==t.accountInfo.account_class?a("h-form-item",{attrs:{label:"划款备注"}},[a("el-popover",{ref:"popover3",attrs:{width:"100",trigger:"hover",placement:"right",title:"支持的宏定义"}},[a("div",{staticStyle:{border:"1px solid #F7F7F7",margin:"0 0 10px 0"}}),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{上海股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{深圳股东代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券代码}")]),t._v(" "),a("p",{staticClass:"popover-font"},[t._v("{证券名称}")]),t._v(" "),a("el-input",{attrs:{slot:"reference",size:"small"},slot:"reference",model:{value:t.accountInfo.transfer_remark,callback:function(e){t.$set(t.accountInfo,"transfer_remark",e)},expression:"accountInfo.transfer_remark"}})],1)],1):t._e()],1)],1),t._v(" "),a("h-form-item",{staticStyle:{"margin-top":"5px"},attrs:{label:"备注",prop:"remark"}},[a("h-input",{attrs:{type:"textarea"},model:{value:t.accountInfo.remark,callback:function(e){t.$set(t.accountInfo,"remark",e)},expression:"accountInfo.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveAccount}},[t._v("确认")])],1)],1),t._v(" "),a("fund-choose-msg-box",{ref:"maintainFundChooseMsgBox",on:{saveFundInfo:t.saveFundInfo}}),t._v(" "),a("import-account-transfer",{ref:"importAccountTransfer",attrs:{"on-import-success":t.refreshTable}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var f=a("VU/8")(u,d,!1,function(t){a("oH+m"),a("tCAK"),a("KTNp")},null,null);e.default=f.exports},ic02:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("pMtO"),o=a("lbHh"),r=a.n(o),l={name:"balAccFinalTemple",components:{HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],fundIdList:[],checkIsOrNo:[],transferTypeList:[],checkAccResultList:[],finalTemple:[],sysDate:r.a.get("CurrSysDate"),showAllocFinalDialog:!1,allocFinalColumns:[{title:"交收日期",key:"curr_date",align:"center",ellipsis:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品代码",key:"fund_code",align:"center",ellipsis:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"划款模式",key:"transfer_type",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_type,t.transferTypeList))}},{title:"日终账套余额",key:"account_final_balance",align:"center",ellipsis:!0,width:120,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_final_balance))}},{title:"日终投资系统可用",key:"o32_final_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_final_balance))}},{title:"投资系统当前资金冻结金额",key:"o32_final_frozen_balance",align:"center",ellipsis:!0,width:130,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_final_frozen_balance))}},{title:"差额",key:"final_diff_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.final_diff_balance))}},{title:"对账结果",key:"final_check_acc_result",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.final_check_acc_result,t.checkAccResultList))}},{title:"对账状态",key:"final_check_acc_status",align:"center",ellipsis:!0,render:function(t,e){var a=e.row,n="";return"0"==a.final_check_acc_status?n="未对账":"1"==a.final_check_acc_status&&(n="已对账"),t("span",{},n)}},{title:"未交收笔数",key:"l_unsettle_count",align:"center",ellipsis:!0},{title:"备注",key:"final_check_acc_remark",align:"center",ellipsis:!0}],queryForm:{finalQueryDate:r.a.get("CurrSysDate"),finalCkaccStatus:"",finalFundIds:""},allocFinalInfo:{fund_id:"",curr_date:"",fund_code:"",fund_name:"",final_diff_balance:"",final_check_acc_remark:""},allocProcess:{fundCount:0,unfinishedCount:0,completedCount:0}}},watch:{showAllocFinalDialog:function(t){t?this.openMask():this.closeMask()}},computed:{finalQueryDate:{get:function(){return this.queryForm.finalQueryDate?Object(s.R)(this.queryForm.finalQueryDate):Object(s.R)(this.sysDate)},set:function(t){this.queryForm.finalQueryDate=Object(s.Q)(t)}},finalFundIds:{get:function(){return this.queryForm.finalFundIds?this.queryForm.finalFundIds.split(","):[]},set:function(t){this.queryForm.finalFundIds=t.join(",")}}},activated:function(){var t=this;Object(s.w)("/common/fundNamelist.json?type=id",{}).then(function(e){return t.fundIdList=e.data})},mounted:function(){var t=this;Object(s.t)(90529).then(function(e){return t.checkAccResultList=e.data}),Object(s.t)(610001).then(function(e){return t.checkIsOrNo=e.data}),Object(s.t)(90524).then(function(e){return t.transferTypeList=e.data}),this.refresh()},methods:{refresh:function(){var t=this;Object(i.f)(this.queryForm.finalQueryDate,this.queryForm.finalCkaccStatus,this.queryForm.finalFundIds,this.$refs.datagrid.getPageNo(),this.$refs.datagrid.getPageSize()).then(function(e){t.finalTemple=e.data.list,t.loadSuccess(t.finalTemple),t.$refs.datagrid.dataChange(1)})},loadSuccess:function(t){var e=t;if(e.length>0){for(var a=0,n=0;n<e.length;n++)"1"==e[n].final_check_acc_status&&a++;var s=e.length-a;this.allocProcess={fundCount:e.length,unfinishedCount:s,completedCount:a}}else this.allocProcess={fundCount:0,unfinishedCount:0,completedCount:0}},resizeTable:function(t){this.autoHeight=t},cashInit:function(){var t=this,e=void 0;Object(s.C)().then(function(a){console.log("here"),a&&200==a.status&&a.data.success?0==a.data.data?(t.openMask(),t.$alert("未获取到下一交易日，请先维护交易日历!","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(e=Object(s.R)(a.data.data),t.$confirm("下一交易日为"+e+"，请确认是否进行日初始化?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)().then(function(e){e.data.success?Object(s.b)().then(function(e){e&&200==e.status?e.data.success?(t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(a){r.a.set("CurrSysDate",e.data.data),location.reload(),t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert("日初始化失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))}):t.$confirm(e.data.msg,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)().then(function(e){e&&200==e.status?e.data.success?(t.openMask(),t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(a){r.a.set("CurrSysDate",e.data.data),location.reload(),t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert("日初始化失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))})})})})):(t.openMask(),t.$alert("未获取到下一交易日，请先维护交易日历","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))})},finalPass:function(){var t=this;return 0==this.$refs.datagrid.$refs.gridContent.getSelection().length?(this.openMask(),void this.$alert("当前不存在日终对账数据，不允许日终余额核对","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):this.sysDate!=this.queryForm.finalQueryDate?(this.openMask(),void this.$alert("非系统当日，不允许日终余额核对","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void Object(i.d)().then(function(e){e&&200==e.status?"0"==e.data.errorNo?(t.openMask(),t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):(t.openMask(),t.$alert(e.data.errorInfo,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert("日终余额对账操作失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))})},finalRemark:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e[0].curr_date<Object(s.Q)(this.sysDate)?(this.openMask(),void this.$alert("只能修改当日数据的备注!","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(this.allocFinalInfo=e[0],this.$refs.allocFinalForm.resetFields(),void(this.showAllocFinalDialog=!0))},allocFinalCancel:function(){this.showAllocFinalDialog=!1},saveRemark:function(){var t=this,e=this.allocFinalInfo.fund_id+","+this.allocFinalInfo.curr_date+","+this.allocFinalInfo.final_check_acc_remark;Object(i.j)(e).then(function(e){e.data.success?(t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showAllocFinalDialog=!1}}).then(function(){t.showAllocFinalDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px",display:"flex"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{staticStyle:{"flex-shrink":"0"},attrs:{label:"交收日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.finalQueryDate,callback:function(e){t.finalQueryDate=e},expression:"finalQueryDate"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"flex-shrink":"0"},attrs:{label:"产品名称"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.finalFundIds,callback:function(e){t.finalFundIds=e},expression:"finalFundIds"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"flex-shrink":"0"},attrs:{label:"日终对账"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryForm.finalCkaccStatus,callback:function(e){t.$set(t.queryForm,"finalCkaccStatus",e)},expression:"queryForm.finalCkaccStatus"}},t._l(t.checkIsOrNo,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"flex-shrink":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.finalPass}},[t._v("对账")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.finalRemark}},[t._v("备注")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.cashInit}},[t._v("日初始化")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.allocFinalColumns,bindForm:t.queryForm,url:"/cashcheck/daily/allocFinal.json"},model:{value:t.finalTemple,callback:function(e){t.finalTemple=e},expression:"finalTemple"}}),t._v(" "),a("div",{staticClass:"wrapper mt10",attrs:{id:"inner-on-transfer-approve"}},[a("h-row",{attrs:{"class-name":"border-dashed-top pt10 mt10"}},[a("header",{staticClass:"headline"},[a("h-icon",{attrs:{name:"pause"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("对账进度")])],1),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"14px"}},[t._v("共"+t._s(t.allocProcess.fundCount)+"个产品")])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"16px",color:"#DA0001"}},[t._v(t._s(t.allocProcess.unfinishedCount)+"个未开始")])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"16px",color:"#3BB300"}},[t._v(t._s(t.allocProcess.completedCount)+"个对账完成")])])])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.showAllocFinalDialog,callback:function(e){t.showAllocFinalDialog=e},expression:"showAllocFinalDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("备注")])]),t._v(" "),a("h-form",{ref:"allocFinalForm",attrs:{model:t.allocFinalInfo,"label-width":60}},[a("h-form-item",{attrs:{label:"产品名称",prop:"fund_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.allocFinalInfo.fund_name,callback:function(e){t.$set(t.allocFinalInfo,"fund_name",e)},expression:"allocFinalInfo.fund_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"差额",prop:"final_diff_balance"}},[a("h-typefield",{attrs:{disabled:"",type:"money",suffixNum:"2",divided:""},model:{value:t.allocFinalInfo.final_diff_balance,callback:function(e){t.$set(t.allocFinalInfo,"final_diff_balance",e)},expression:"allocFinalInfo.final_diff_balance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"备注",prop:"final_check_acc_remark"}},[a("h-input",{attrs:{type:"text"},model:{value:t.allocFinalInfo.final_check_acc_remark,callback:function(e){t.$set(t.allocFinalInfo,"final_check_acc_remark",e)},expression:"allocFinalInfo.final_check_acc_remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.allocFinalCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveRemark}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("EyOW")},"data-v-7ad15920",null);e.default=u.exports},jTHF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=(a("ri5M"),a("RCbw")),i={name:"stamp",components:{DealStamp:a("TdNe").default,StampInfo:s.default},data:function(){var t=this;return{tab:"",fundIdList:[],operatorNoList:[],compOperatorNoList:[],stampInfoList:[],operatorStampColumns:[{type:"selection",width:30,align:"center"},{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{title:"签章序号",key:"stamp_id",width:80,hiddenCol:!0,ellipsis:!0,align:"right"},{title:"操作员",key:"operator_no",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.operator_no,t.operatorNoList))}},{title:"签章名称",key:"stamp_name",align:"left",ellipsis:!0},{title:"修改时间",key:"input_date",align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.input_date,null))}},{title:"备注",key:"remark",align:"left",ellipsis:!0},{key:"file_id",align:"left",ellipsis:!0,hiddenCol:!0}],fundStampColumns:[{type:"selection",width:30,align:"center"},{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{title:"签章序号",key:"stamp_id",width:80,hiddenCol:!0,align:"right",ellipsis:!0},{title:"产品",key:"fund_id",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.fund_id,t.fundIdList))}},{title:"签章名称",key:"stamp_name",align:"left",ellipsis:!0},{title:"修改时间",key:"input_date",align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.input_date,null))}},{title:"备注",key:"remark",align:"left",ellipsis:!0},{key:"file_id",align:"left",ellipsis:!0,hiddenCol:!0}],companyStampColumns:[{type:"selection",width:30,align:"center"},{title:"序号",type:"index",sortable:!0,width:80,align:"center"},{title:"签章序号",key:"stamp_id",width:80,hiddenCol:!0,align:"right",ellipsis:!0},{title:"签章名称",key:"stamp_name",align:"left",ellipsis:!0},{title:"可使用操作员",key:"operator_list",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._2)(s.operator_list,t.compOperatorNoList))}},{title:"修改时间",key:"input_date",align:"left",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.input_date,null))}},{title:"备注",key:"remark",align:"left",ellipsis:!0},{key:"file_id",align:"left",ellipsis:!0,hiddenCol:!0}]}},activated:function(){var t=this;Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundIdList=e.data)}),this.tab?"1"==this.tab?this.$refs.operatorStamp.refresh():"2"==this.tab?this.$refs.fundStamp.refresh():"3"==this.tab&&this.$refs.companyStamp.refresh():this.$refs.operatorStamp.refresh()},mounted:function(){var t=this;Object(n.N)().then(function(e){t.operatorNoList=e.data,t.compOperatorNoList=[{code:"-1",text:"全部"}],t.compOperatorNoList=t.compOperatorNoList.concat(e.data)}),this.$refs.operatorStamp.refresh(),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight-t-110;this.$refs.operatorStamp.resizeTable(e)},tabChange:function(t,e){if("人员签章"==t.label){this.tab="1";var a=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,n=document.getElementById("full-h-wrapper").offsetHeight-a-110;this.$refs.operatorStamp.resizeTable(n),this.$refs.operatorStamp.refresh()}else if("产品签章"==t.label){this.tab="2";var s=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,i=document.getElementById("full-h-wrapper").offsetHeight,o=i-s-110;this.$refs.fundStamp.resizeTable(o,i),this.$refs.fundStamp.refresh()}else if("公司签章"==t.label){this.tab="3";var r=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,l=document.getElementById("full-h-wrapper").offsetHeight-r-110;this.$refs.companyStamp.resizeTable(l),this.$refs.companyStamp.refresh()}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"systemmgnt-stamp",attrs:{id:"full-h-wrapper"}},[a("el-tabs",{attrs:{"tab-position":"top"},on:{"tab-click":t.tabChange}},[a("el-tab-pane",{attrs:{label:"人员签章"}},[a("stamp-info",{ref:"operatorStamp",attrs:{"stamp-type":"1","stamp-columns":t.operatorStampColumns,"fund-id-list":t.fundIdList,"operator-no-list":t.operatorNoList}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"产品签章"}},[a("stamp-info",{ref:"fundStamp",attrs:{"stamp-type":"2","stamp-columns":t.fundStampColumns,"fund-id-list":t.fundIdList,"operator-no-list":t.operatorNoList}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"公司签章"}},[a("stamp-info",{ref:"companyStamp",attrs:{"stamp-type":"3","stamp-columns":t.companyStampColumns,"fund-id-list":t.fundIdList,"operator-no-list":t.compOperatorNoList}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("sw22")},null,null);e.default=r.exports},jWya:function(t,e){},jYKc:function(t,e){},jtja:function(t,e){},m2fV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("bOdI"),s=a.n(n),i=a("3dxc"),o=a("Q5rI"),r=a("mvHQ"),l=a.n(r),c=a("5/bi");var u={name:"ruleConfig",components:{BankTree:a("eUNJ").a,HDatagrid:i.a},data:function(){var t,e=this;return{split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],showRuleDialog:!1,actionType:"",operatorNoList:[],dealTypeList:[],copBusinClassList:[],copBusinFlagList:[],businFlagList:[],ruleColumns:[{title:"规则编号",key:"liquidate_rule_id",align:"left",hiddenCol:!0,ellipsis:!0},{title:"规则名称",key:"liquidate_rule_name",align:"left",width:120,ellipsis:!0},{title:"启用标志",key:"use_flag",align:"center",width:80,ellipsis:!0,render:function(t,e){return t("i",0==e.row.use_flag?{class:"iconfont icon-record",style:{color:"#EA3E30","font-size":"20px"}}:{class:"iconfont icon-record",style:{color:"#68F904","font-size":"20px"}})}},{title:"操作类型",key:"liquidate_ins_deal_type",align:"left",width:80,ellipsis:!0,render:function(t,a){var n=a.row;return t("span",{},Object(o._1)(n.liquidate_ins_deal_type,e.dealTypeList))}},{title:"业务分类",key:"cop_busin_class",align:"left",width:80,ellipsis:!0,render:function(t,a){var n=a.row;return t("span",{},Object(o._1)(n.cop_busin_class,e.copBusinClassList))}},(t={title:"业务标志",key:"cop_busin_flag",align:"left",width:100,ellipsis:!0},s()(t,"width",150),s()(t,"render",function(t,a){var n=a.row,s=Object(o._1)(n.cop_busin_flag,e.copBusinFlagList);return t("span",{attrs:{title:s}},s)}),t),{title:"资金方向",key:"cash_direction",align:"left",width:80,ellipsis:!0,render:function(t,a){var n=a.row,s=Object(o._1)(n.cash_direction,e.cashDirectionList);return t("span",{attrs:{title:s}},s)}},{title:"划款摘要",key:"transfer_remark",align:"left",ellipsis:!0,render:function(t,e){var a=e.row.transfer_remark;return t("span",{attrs:{title:a}},a)}},{title:"划款用途",key:"transfer_purpose",align:"left",width:120,ellipsis:!0,render:function(t,e){var a=e.row.transfer_purpose;return t("span",{attrs:{title:a}},a)}},{title:"划款附言",key:"transfer_postscript",align:"left",width:120,ellipsis:!0,render:function(t,e){var a=e.row.transfer_postscript;return t("span",{attrs:{title:a}},a)}},{title:"金额偏差",key:"cash_diff",align:"left",width:100,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(o.h)(a.cash_diff))}},{title:"操作人",key:"operator_no",align:"left",width:100,ellipsis:!0,render:function(t,a){var n=a.row;return t("span",{},Object(o._1)(n.operator_no,e.operatorNoList))}},{title:"规则说明",key:"remark",align:"left",width:120,ellipsis:!0,render:function(t,e){var a=e.row.remark;return t("span",{attrs:{title:a}},a)}}],liquidateRuleInfo:{custodial_no:"",liquidate_rule_id:"",liquidate_rule_name:"",cash_diff:"",rival_account_no:"",rival_account_name:"",cash_direction:"",transfer_remark:"",transfer_purpose:"",transfer_postscript:"",liquidate_ins_deal_type:"",cop_busin_class:"",cop_busin_flag:"",operator_no:"",remark:"",use_flag:"",flag:!0},queryForm:{custodialNo:""},cashDirectionList:[{code:"1",text:"入款"},{code:"2",text:"出款"}]}},watch:{showDialog:function(t){this.closeMask()}},computed:{showMacro:function(){return 1==this.liquidateRuleInfo.liquidate_ins_deal_type||2==this.liquidateRuleInfo.liquidate_ins_deal_type},businClassFlag:{get:function(){var t=this.liquidateRuleInfo.cop_busin_class;return"4"!=this.liquidateRuleInfo.cop_busin_class&&"5"!=this.liquidateRuleInfo.cop_busin_class&&"6"!=this.liquidateRuleInfo.cop_busin_class||(t="4,5,6"),[t,this.liquidateRuleInfo.cop_busin_flag.toString()]},set:function(t){this.liquidateRuleInfo.cop_busin_class=t[0],this.liquidateRuleInfo.cop_busin_flag=t[1]}}},mounted:function(){var t=this;Object(o.t)(91192).then(function(e){return t.dealTypeList=e.data}),Object(o.N)().then(function(e){return t.operatorNoList=e.data}),this.re_layout(),Object(o.t)(90523).then(function(e){return t.copBusinClassList=e.data}),Object(o.t)("businFlag").then(function(e){return t.copBusinFlagList=e.data})},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-40},ruleAdd:function(){var t=this;if(!this.queryForm.custodialNo)return this.openMask(),void this.$alert("请选择需要添加规则的托管人","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.liquidateRuleInfo={custodial_no:this.queryForm.custodialNo,liquidate_rule_id:"",liquidate_rule_name:"",cash_diff:"",rival_account_no:"",rival_account_name:"",cash_direction:"1",transfer_remark:"",transfer_purpose:"",transfer_postscript:"",liquidate_ins_deal_type:"1",cop_busin_class:"",cop_busin_flag:"",operator_no:"",remark:"",use_flag:"",flag:!0},this.$refs.liquidateRuleForm.resetFields(),this.actionType="add",this.showRuleDialog=!0},ruleModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.ruleConfigDbClick(e[0])},ruleConfigDbClick:function(t){this.liquidateRuleInfo=t,this.liquidateRuleInfo.operator_no&&(this.liquidateRuleInfo.operator_no=this.liquidateRuleInfo.operator_no.toString()),this.liquidateRuleInfo.use_flag.toString()&&("0"==this.liquidateRuleInfo.use_flag?this.liquidateRuleInfo.flag=!1:this.liquidateRuleInfo.flag=!0),this.actionType="modify",this.showRuleDialog=!0},ruleDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确认删除该勾销规则吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,n;(a=e[0].custodial_no,n=e[0].liquidate_rule_id,c.a.post("/liquidate/rule/delete.json",{custodialNo:a,liquidateRuleId:n})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},changeRuleFlag:function(){var t,e,a,n=this,s=this.$refs.datagrid.$refs.gridContent.getSelection();0==s.length&&(this.openMask(),this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})),(t=s[0].custodial_no,e=s[0].liquidate_rule_id,a=0,c.a.post("/liquidate/rule/flag/modify.json",{custodialNo:t,liquidateRuleId:e,useFlag:a})).then(function(t){t.data&&"0"==t.data.code?(n.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()}),n.refresh()):n.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.closeMask()}}).then(function(){n.closeMask()})})},cancelLiquidateRule:function(){this.showRuleDialog=!1},saveLiquidateRule:function(){var t,e=this,a=!0;if(this.$refs.liquidateRuleForm.validate(function(t){return a=a&&t}),!a)return this.openMask(),void this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()});0==this.liquidateRuleInfo.flag?this.liquidateRuleInfo.use_flag=0:this.liquidateRuleInfo.use_flag=1,(t=this.liquidateRuleInfo,c.a.post("/liquidate/rule/save.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return l()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showRuleDialog=!1}}).then(function(){return[e.showRuleDialog=!1]}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})},businClassChange:function(t){var e=this;t&&Object(o.p)(t).then(function(t){return e.businFlagList=t.data})},bankClick:function(t){t&&(this.queryForm.custodialNo=t.code,this.refresh())},refresh:function(){this.$refs.datagrid.dataChange(1)},onSplitMoving:function(){this.$refs.datagrid.handleResize()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMoving},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("bank-tree",{ref:"liquidateBankTree",attrs:{onBankClick:t.bankClick,"trust-flag":!0,"show-all":!1}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"4",id:"full-h-wrapper"},slot:"right"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.ruleAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.ruleModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.ruleDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"close"},on:{click:t.changeRuleFlag}},[t._v("停用")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",staticStyle:{overflow:"hidden"},attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.ruleColumns,bindForm:t.queryForm,"on-row-db-click":t.ruleConfigDbClick,url:"/liquidate/rule/page.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"600","mask-closeable":!1},model:{value:t.showRuleDialog,callback:function(e){t.showRuleDialog=e},expression:"showRuleDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增勾销规则")]):a("span",[t._v("修改勾销规则")])]),t._v(" "),a("h-form",{ref:"liquidateRuleForm",attrs:{model:t.liquidateRuleInfo,"label-width":80}},[a("h-row",[a("h-col",{attrs:{span:"18"}},[a("h-form-item",{attrs:{required:"",label:"规则名称",prop:"liquidate_rule_name"}},[a("h-input",{model:{value:t.liquidateRuleInfo.liquidate_rule_name,callback:function(e){t.$set(t.liquidateRuleInfo,"liquidate_rule_name",e)},expression:"liquidateRuleInfo.liquidate_rule_name"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"6"}},[a("h-form-item",{attrs:{required:"",label:"启用标志",prop:"flag"}},[a("h-switch",{attrs:{size:"small"},model:{value:t.liquidateRuleInfo.flag,callback:function(e){t.$set(t.liquidateRuleInfo,"flag",e)},expression:"liquidateRuleInfo.flag"}})],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"操作",prop:"liquidate_ins_deal_type"}},[a("h-radio-group",{attrs:{type:"button"},model:{value:t.liquidateRuleInfo.liquidate_ins_deal_type,callback:function(e){t.$set(t.liquidateRuleInfo,"liquidate_ins_deal_type",e)},expression:"liquidateRuleInfo.liquidate_ins_deal_type"}},t._l(t.dealTypeList,function(e){return a("h-radio",{key:e.code,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:5!=t.liquidateRuleInfo.liquidate_ins_deal_type,expression:"liquidateRuleInfo.liquidate_ins_deal_type != 5"}],attrs:{label:"业务分类",prop:"cop_busin_class",required:"1"==t.liquidateRuleInfo.liquidate_ins_deal_type||"2"==t.liquidateRuleInfo.liquidate_ins_deal_type||"3"==t.liquidateRuleInfo.liquidate_ins_deal_type}},[a("h-select",{on:{"on-change":t.businClassChange},model:{value:t.liquidateRuleInfo.cop_busin_class,callback:function(e){t.$set(t.liquidateRuleInfo,"cop_busin_class",e)},expression:"liquidateRuleInfo.cop_busin_class"}},t._l(t.copBusinClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:5!=t.liquidateRuleInfo.liquidate_ins_deal_type,expression:"liquidateRuleInfo.liquidate_ins_deal_type != 5"}],attrs:{label:"业务标志",prop:"cop_busin_flag",required:"3"==t.liquidateRuleInfo.liquidate_ins_deal_type}},[a("h-select",{attrs:{filterable:""},model:{value:t.liquidateRuleInfo.cop_busin_flag,callback:function(e){t.$set(t.liquidateRuleInfo,"cop_busin_flag",e)},expression:"liquidateRuleInfo.cop_busin_flag"}},t._l(t.businFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:parseInt(t.code)}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"资金方向",prop:"cash_direction"}},[a("h-radio-group",{attrs:{type:"button"},model:{value:t.liquidateRuleInfo.cash_direction,callback:function(e){t.$set(t.liquidateRuleInfo,"cash_direction",e)},expression:"liquidateRuleInfo.cash_direction"}},t._l(t.cashDirectionList,function(e){return a("h-radio",{key:e.code,attrs:{label:e.code}},[a("span",[t._v(t._s(e.text))])])}),1)],1),t._v(" "),a("h-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.liquidateRuleInfo.liquidate_ins_deal_type||2==t.liquidateRuleInfo.liquidate_ins_deal_type,expression:"liquidateRuleInfo.liquidate_ins_deal_type==1||liquidateRuleInfo.liquidate_ins_deal_type==2"}],attrs:{label:"允许误差<",prop:"cash_diff"}},[a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:""},model:{value:t.liquidateRuleInfo.cash_diff,callback:function(e){t.$set(t.liquidateRuleInfo,"cash_diff",e)},expression:"liquidateRuleInfo.cash_diff"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1),t._v(" "),a("h-row",[a("h-col",[a("h-form-item",{attrs:{label:"划款摘要",prop:"transfer_remark"}},[a("h-poptip",{attrs:{trigger:"hover",placement:"right"}},[a("h-input",{staticStyle:{width:"478px"},model:{value:t.liquidateRuleInfo.transfer_remark,callback:function(e){t.$set(t.liquidateRuleInfo,"transfer_remark",e)},expression:"liquidateRuleInfo.transfer_remark"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}]},[t._v("支持以下宏定义或固定内容")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.showMacro,expression:"!showMacro"}]},[t._v("支持固定内容")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}],attrs:{slot:"content"},slot:"content"},[a("p",[t._v("{证券代码}")]),t._v(" "),a("p",[t._v("{证券名称}")]),t._v(" "),a("p",[t._v("{产品代码}")]),t._v(" "),a("p",[t._v("{产品简称}")]),t._v(" "),a("p",[t._v("{产品全称}")])])],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"划款用途",prop:"transfer_purpose"}},[a("h-poptip",{attrs:{trigger:"hover",placement:"right"}},[a("h-input",{staticStyle:{width:"478px"},model:{value:t.liquidateRuleInfo.transfer_purpose,callback:function(e){t.$set(t.liquidateRuleInfo,"transfer_purpose",e)},expression:"liquidateRuleInfo.transfer_purpose"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}]},[t._v(" 支持以下宏定义或固定内容")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.showMacro,expression:"!showMacro"}]},[t._v("支持固定内容")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}],attrs:{slot:"content"},slot:"content"},[a("p",[t._v("{证券代码}")]),t._v(" "),a("p",[t._v("{证券名称}")]),t._v(" "),a("p",[t._v("{产品代码}")]),t._v(" "),a("p",[t._v("{产品简称}")]),t._v(" "),a("p",[t._v("{产品全称}")])])],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-poptip",{attrs:{trigger:"hover",placement:"right"}},[a("h-input",{staticStyle:{width:"478px"},model:{value:t.liquidateRuleInfo.transfer_postscript,callback:function(e){t.$set(t.liquidateRuleInfo,"transfer_postscript",e)},expression:"liquidateRuleInfo.transfer_postscript"}}),t._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[a("p",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}]},[t._v("支持以下宏定义或固定内容")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.showMacro,expression:"!showMacro"}]},[t._v("支持固定内容")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMacro,expression:"showMacro"}],attrs:{slot:"content"},slot:"content"},[a("p",[t._v("{证券代码}")]),t._v(" "),a("p",[t._v("{证券名称}")]),t._v(" "),a("p",[t._v("{产品代码}")]),t._v(" "),a("p",[t._v("{产品简称}")]),t._v(" "),a("p",[t._v("{产品全称}")])])],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"操作员",prop:"operator_no"}},[a("h-select",{attrs:{clearable:!1,filterable:""},model:{value:t.liquidateRuleInfo.operator_no,callback:function(e){t.$set(t.liquidateRuleInfo,"operator_no",e)},expression:"liquidateRuleInfo.operator_no"}},t._l(t.operatorNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"规则说明",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:2,maxRows:3}},model:{value:t.liquidateRuleInfo.remark,callback:function(e){t.$set(t.liquidateRuleInfo,"remark",e)},expression:"liquidateRuleInfo.remark"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticClass:"margin-left:8px",attrs:{type:"ghost"},on:{click:t.cancelLiquidateRule}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveLiquidateRule}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,d,!1,function(t){a("DUoD")},null,null);e.default=f.exports},mDZY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("mvHQ"),i=a.n(s),o=a("5/bi");function r(t){return o.a.post("/systmmgnt/bankBusflag/insertBankBusflag.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})}var l=a("Q5rI"),c=a("npUS"),u=a("eUNJ"),d={name:"bankBusiness",data:function(){var t=this;return{split:.15,autoHeight:0,autoNoteHeight:0,pageSizeOpts:[25,50,75,100],businessClassList:[],bankList:[],bankListWithoutSelf:[],businessFlagList:[],copBusinFlagList:[],businFlagList:[],showBankBusinessDialog:!1,actionType:"",noteMacro:"",focusType:"",updateComponent:!0,custodial_type:"",custodialTypeList:[{code:"1",text:"托管"},{code:"2",text:"自营"}],bankcolumns:[],bankBusinessColumns:[{type:"selection",width:30,align:"left"},{type:"index",title:"序号",width:60,align:"center"},{title:"托管人业务序号",key:"serial_no",hiddenCol:!0,align:"left",ellipsis:!0},{title:"托管人序号",key:"custodial_no",align:"left",hiddenCol:!0,ellipsis:!0},{title:"托管人名称",key:"custodian_name",align:"left",ellipsis:!0},{title:"业务分类",key:"cop_busin_class",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(l._1)(n.cop_busin_class,t.businessClassList))}},{title:"清算机构",key:"clear_agent_code_list",align:"left",ellipsis:!0,render:function(e,a){var n=a.row,s="";if(n.clear_agent_code_list){for(var i=n.clear_agent_code_list.split(","),o=0;o<i.length;o++)s+=Object(l._1)(i[o],t.agenctList)+",";s=s.substring(0,s.length-1)}return e("span",{},s)}},{title:"业务标志",key:"cop_busin_caption",align:"left",width:130,ellipsis:!0},{title:"托管人业务代码",hiddenInCustodialNo:"0",key:"bank_busin_no",align:"left",width:120,ellipsis:!0},{title:"托管人业务名称",hiddenInCustodialNo:"0",key:"bank_busin_name",align:"left",width:120,ellipsis:!0},{title:"划款事由",key:"transfer_purpose",align:"left",ellipsis:!0},{title:"划款附言",key:"transfer_postscript",align:"left",ellipsis:!0},{title:"划款备注",key:"transfer_remark",align:"left",ellipsis:!0},{title:"清算机构",key:"clear_agent_cn_list",align:"left",ellipsis:!0,hiddenCol:!0},{title:"指令处理方式",key:"transfer_flag",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(l._1)(n.transfer_flag,t.transferFlagList))}}],bankNoteMacroColumn:[{title:"宏命令",key:"code",align:"left",width:80,ellipsis:!0},{title:"宏定义",key:"text",align:"left",ellipsis:!0}],agenctList:[{code:"3",text:"中债登"},{code:"4",text:"上清所"}],transferFlagList:[],mergeFlagList:[{code:"0",text:"否"},{code:"1",text:"是"}],errorColumns:[{width:100,key:"bank",title:"托管人名称",align:"center"},{width:80,key:"class",title:"业务标志",align:"center"},{width:307,key:"err",title:"错误信息",align:"left"}],queryForm:{businClass:"",businFlag:"",custodialNo:"",transferFlag:""},bankBusinInfo:{serial_no:"",custodial_no:"",cop_busin_class:"",cop_busin_flag:"",clear_agent_code_list:"",bank_busin_no:"",bank_busin_name:"",transfer_flag:"",transfer_remark:"",transfer_postscript:"",transfer_purpose:"",additional_info_merge_flag:"",ignore:!1}}},watch:{showBankBusinessDialog:function(t){t?(this.updateComponent=!0,this.openMask()):(this.updateComponent=!1,this.closeMask())}},created:function(){this.bankcolumns=this.bankBusinessColumns},activated:function(){var t=this;Object(l.k)("1").then(function(e){t.bankList=e.data,t.bankListWithoutSelf=e.data.filter(function(t){if(0!=t.code)return!0})})},mounted:function(){var t=this;Object(l.t)(90523).then(function(e){return t.businessClassList=e.data}),Object(l.t)(91216).then(function(e){return t.transferFlagList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-85},show_layout:function(){var t=this;this.autoNoteHeight=335,setTimeout(function(){t.autoNoteHeight=t.$refs.bankBusinFlagForm.$el.clientHeight},300)},businClassChange:function(t){var e=this;t&&(Object(l.p)(t).then(function(t){return e.businessFlagList=t.data}),this.showBankBusinessDialog&&"modify"==this.actionType&&(this.bankBusinInfo.cop_busin_flag=""),"1"==t?this.autoNoteHeight=410:"4"==t||"5"==t||"6"==t||"21"==t?(this.autoNoteHeight=370,this.bankBusinInfo.clear_agent_code_list=""):(this.autoNoteHeight=335,this.bankBusinInfo.clear_agent_code_list=""))},queryBusinClassChange:function(t){var e=this;t?(Object(l.p)(t).then(function(t){return e.businFlagList=t.data}),this.queryForm.businFlag=""):(this.queryForm.businFlag="",this.queryForm.businClass="",this.businFlagList=[])},bankBusinAdd:function(){this.bankBusinInfo={serial_no:null,custodial_no:"",cop_busin_class:"",cop_busin_flag:"",clear_agent_code_list:"",bank_busin_no:"",bank_busin_name:"",transfer_flag:"1",transfer_remark:"",transfer_postscript:"",transfer_purpose:"",additional_info_merge_flag:"0",ignore:!1},this.queryForm.custodialNo?this.bankBusinInfo.custodial_no=this.queryForm.custodialNo:this.bankBusinInfo.custodial_no="",this.$refs.bankBusinFlagForm.resetFields(),this.businessFlagList=[],this.noteMacro="",this.showBankBusinessDialog=!0,this.actionType="add",this.show_layout()},bankBusinModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e.length>1?(this.openMask(),void this.$alert("只能选择一条记录修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void this.bankBusinFlagDbClick(e[0])},bankBusinFlagDbClick:function(t){var e=this;this.noteMacro="",this.actionType="modify",this.bankBusinInfo=t,0!=this.bankBusinInfo.custodial_no?this.custodial_type="1":this.custodial_type="2","1"==this.bankBusinInfo.cop_busin_class?this.autoNoteHeight=410:"4"==this.bankBusinInfo.cop_busin_class||"5"==this.bankBusinInfo.cop_busin_class||"6"==this.bankBusinInfo.cop_busin_class||"21"==this.bankBusinInfo.cop_busin_class?this.autoNoteHeight=370:this.autoNoteHeight=335,this.$nextTick(function(){e.showBankBusinessDialog=!0}),this.show_layout()},bankBusinCopy:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.bankBusinInfo=e[0],this.bankBusinInfo.serial_no=null,"1"==this.bankBusinInfo.cop_busin_class?this.autoNoteHeight=410:"4"==this.bankBusinInfo.cop_busin_class||"5"==this.bankBusinInfo.cop_busin_class||"6"==this.bankBusinInfo.cop_busin_class||"21"==this.bankBusinInfo.cop_busin_class?this.autoNoteHeight=370:this.autoNoteHeight=335,this.noteMacro="",this.actionType="copy",this.show_layout(),this.showBankBusinessDialog=!0},bankBusinDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a="",n=0;n<e.length;n++)a+=e[n].serial_no+",";a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认删除该记录吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return o.a.post("/systmmgnt/bankBusflag/delBankBusflag.json",{serialNoList:t})})(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshBankBusinFlag()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},bankBusinCancel:function(){this.showBankBusinessDialog=!1},refreshBankTree:function(){this.$refs.treeBank.handleConditionQuery()},saveBankBusin:function(){var t,e=this,a=!0;(this.$refs.bankBusinFlagForm.validate(function(t){return a=a&&t}),this.bankBusinInfo.cop_busin_flag&&this.bankBusinInfo.cop_busin_class||(a=!1),2==this.custodial_type&&(this.bankBusinInfo.custodial_no=0),a)?"1"!=this.bankBusinInfo.cop_busin_class||-1==this.bankBusinInfo.cop_busin_flag.indexOf(",20020")&&-1==this.bankBusinInfo.cop_busin_flag.indexOf("20020,")?("1"!=this.bankBusinInfo.cop_busin_class&&"4"!=this.bankBusinInfo.cop_busin_class&&"5"!=this.bankBusinInfo.cop_busin_class&&"6"!=this.bankBusinInfo.cop_busin_class&&"21"!=this.bankBusinInfo.cop_busin_class&&(this.bankBusinInfo.additional_info_merge_flag=""),"add"==this.actionType||"copy"==this.actionType?(this.bankBusinInfo.ignore=!1,r(this.bankBusinInfo).then(function(t){if(t.data&&"0"==t.data.code)e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showBankBusinessDialog=!1}}).then(function(){e.showBankBusinessDialog=!1}),e.refreshBankBusinFlag();else if(t.data&&"1120002"==t.data.code){e.bankBusinInfo.ignore=!0;var a=e.$createElement,n=[];t.data.data.errorInfo.split(";").forEach(function(t){t&&t.length>1&&n.push({bank:t.split(":")[0],class:t.split(":")[1],err:t.split(":")[2]})}),e.showBankBusinessDialog=!1;var s=e;setTimeout(function(){s.openMask(),s.$msgbox({title:"注意",message:a("p",null,[a("span",null,"存在"+t.data.data.count+"条重复维护的托管人信息，是否剔除并继续？"),a("h-table",{style:"width: 100%",props:{columns:s.errorColumns,data:n,height:300}})]),showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(t,e,a){"confirm"===t?(r(s.bankBusinInfo).then(function(t){t.data.success?(s.openMask(),s.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){s.closeMask()}}).then(function(){s.closeMask()}),s.refreshBankBusinFlag()):(s.openMask(),s.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){s.closeMask()}}).then(function(){s.closeMask()}))}).catch(function(t){}),a()):a()}}).then(function(t){s.closeMask()}).catch(function(){s.closeMask()})},1)}else e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})):"modify"==this.actionType&&(this.bankBusinInfo.ignore=!0,(t=this.bankBusinInfo,o.a.post("/systmmgnt/bankBusflag/modifyBankbusflag.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showBankBusinessDialog=!1}}).then(function(){e.showBankBusinessDialog=!1}),e.refreshBankBusinFlag()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}))):this.$alert("同业存单为非DVP业务,不能和其他银行间业务一起维护,请单独维护","错误",{confirmButtonText:"确定",type:"error"}):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"})},bankClick:function(t){var e=this;t&&(this.queryForm.custodialNo=t.code,this.bankcolumns=this.bankBusinessColumns.filter(function(t){return!(t.hiddenInCustodialNo&&t.hiddenInCustodialNo.split(",").indexOf(e.queryForm.custodialNo.toString())>-1)}),this.$refs.datagrid.dataChange(1))},uploadExcel:function(){this.$refs.importAccountTransfer.showDialog("4",null)},refreshBankBusinFlag:function(){this.$refs.datagrid.dataChange(1)},remarkFocus:function(){this.focusType="1",null==this.bankBusinInfo.transfer_remark&&(this.bankBusinInfo.transfer_remark=""),this.noteMacro=""},postscriptFocus:function(){this.focusType="2",null==this.bankBusinInfo.transfer_postscript&&(this.bankBusinInfo.transfer_postscript=""),this.noteMacro=""},purposeFocus:function(){this.focusType="3",null==this.bankBusinInfo.transfer_purpose&&(this.bankBusinInfo.transfer_purpose=""),this.noteMacro=""},setNoteMacro:function(t){this.focusType&&"1"==this.focusType?(this.bankBusinInfo.transfer_remark||(this.bankBusinInfo.transfer_remark=""),this.bankBusinInfo.transfer_remark+="#"+t.code):this.focusType&&"2"==this.focusType?(this.bankBusinInfo.transfer_postscript||(this.bankBusinInfo.transfer_postscript=""),this.bankBusinInfo.transfer_postscript+="#"+t.code):this.focusType&&"3"==this.focusType&&(this.bankBusinInfo.transfer_purpose||(this.bankBusinInfo.transfer_purpose=""),this.bankBusinInfo.transfer_purpose+="#"+t.code)},onSplitMove:function(){this.$refs.datagrid.handleResize()}},components:{ImportAccountTransfer:c.a,HDatagrid:n.a,BankTree:u.a}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("bank-tree",{ref:"treeBank",attrs:{onBankClick:t.bankClick,trustFlag:!0}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px",float:"left"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{attrs:{clearable:"",filterable:""},on:{change:t.queryBusinClassChange},model:{value:t.queryForm.businClass,callback:function(e){t.$set(t.queryForm,"businClass",e)},expression:"queryForm.businClass"}},t._l(t.businessClassList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"业务标志"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.queryForm.businFlag,callback:function(e){t.$set(t.queryForm,"businFlag",e)},expression:"queryForm.businFlag"}},t._l(t.businFlagList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"指令处理方式"}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:t.queryForm.transferFlag,callback:function(e){t.$set(t.queryForm,"transferFlag",e)},expression:"queryForm.transferFlag"}},t._l(t.transferFlagList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refreshBankBusinFlag}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.bankBusinAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.bankBusinModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.bankBusinCopy}},[t._v("复制")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.bankBusinDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.uploadExcel}},[t._v("导入")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,"on-row-db-click":t.bankBusinFlagDbClick,pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.bankcolumns,bindForm:t.queryForm,url:"/systmmgnt/bankBusflag/bankbusflag.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"700","mask-closable":!1},model:{value:t.showBankBusinessDialog,callback:function(e){t.showBankBusinessDialog=e},expression:"showBankBusinessDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增划款规则信息")]):"modify"==t.actionType?a("span",[t._v("修改划款规则信息")]):a("span",[t._v("复制划款规则信息")])]),t._v(" "),a("h-row",[a("h-col",{staticStyle:{"margin-right":"5px"},attrs:{span:"12"}},[a("h-form",{ref:"bankBusinFlagForm",attrs:{model:t.bankBusinInfo,"label-width":110,onlyBlurRequir:!0}},[a("h-form-item",{attrs:{required:"",label:"托管方式"}},[a("h-select",{attrs:{filterable:"",clearable:!1},model:{value:t.custodial_type,callback:function(e){t.custodial_type=e},expression:"custodial_type"}},t._l(t.custodialTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"1"==t.custodial_type?a("h-form-item",{attrs:{required:"",label:"托管人名称",prop:"custodial_no"}},[t.updateComponent?a("h-select",{attrs:{filterable:"",multiple:"add"==t.actionType,hideMult:"add"==t.actionType,isString:"add"==t.actionType,showBottom:"add"==t.actionType},model:{value:t.bankBusinInfo.custodial_no,callback:function(e){t.$set(t.bankBusinInfo,"custodial_no",e)},expression:"bankBusinInfo.custodial_no"}},t._l(t.bankListWithoutSelf,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code.toString()}})}),1):t._e()],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务分类",prop:"cop_busin_class"}},[a("h-select",{attrs:{filterable:""},on:{"on-change":t.businClassChange},model:{value:t.bankBusinInfo.cop_busin_class,callback:function(e){t.$set(t.bankBusinInfo,"cop_busin_class",e)},expression:"bankBusinInfo.cop_busin_class"}},t._l(t.businessClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),"add"==t.actionType?a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("h-select",{attrs:{filterable:"",multiple:"add"==t.actionType,hideMult:"add"==t.actionType,isString:"add"==t.actionType,showBottom:"add"==t.actionType},model:{value:t.bankBusinInfo.cop_busin_flag,callback:function(e){t.$set(t.bankBusinInfo,"cop_busin_flag",e)},expression:"bankBusinInfo.cop_busin_flag"}},t._l(t.businessFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"modify"==t.actionType||"copy"==t.actionType?a("h-form-item",{attrs:{required:"",label:"业务标志",prop:"cop_busin_flag"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",size:"mini"},model:{value:t.bankBusinInfo.cop_busin_flag,callback:function(e){t.$set(t.bankBusinInfo,"cop_busin_flag",e)},expression:"bankBusinInfo.cop_busin_flag"}},t._l(t.businessFlagList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"1"==t.bankBusinInfo.cop_busin_class&&20020!=t.bankBusinInfo.cop_busin_flag?a("h-form-item",{attrs:{required:"",label:"清算机构",prop:"clear_agent_code_list"}},[a("h-select",{attrs:{hideMult:"",multiple:"",isString:"",filterable:"",showBottom:""},model:{value:t.bankBusinInfo.clear_agent_code_list,callback:function(e){t.$set(t.bankBusinInfo,"clear_agent_code_list",e)},expression:"bankBusinInfo.clear_agent_code_list"}},t._l(t.agenctList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"1"==t.custodial_type?a("h-form-item",{attrs:{label:"托管人业务代码",prop:"bank_busin_no"}},[a("h-input",{attrs:{type:"text",maxlength:128},model:{value:t.bankBusinInfo.bank_busin_no,callback:function(e){t.$set(t.bankBusinInfo,"bank_busin_no",e)},expression:"bankBusinInfo.bank_busin_no"}})],1):t._e(),t._v(" "),"1"==t.custodial_type?a("h-form-item",{attrs:{label:"托管人业务名称",prop:"bank_busin_name"}},[a("h-input",{attrs:{type:"text",maxlength:128},model:{value:t.bankBusinInfo.bank_busin_name,callback:function(e){t.$set(t.bankBusinInfo,"bank_busin_name",e)},expression:"bankBusinInfo.bank_busin_name"}})],1):t._e(),t._v(" "),a("h-form-item",{attrs:{label:"指令处理方式",prop:"transfer_flag"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankBusinInfo.transfer_flag,callback:function(e){t.$set(t.bankBusinInfo,"transfer_flag",e)},expression:"bankBusinInfo.transfer_flag"}},t._l(t.transferFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"划款事由",prop:"transfer_purpose"}},[a("h-input",{attrs:{type:"text",maxlength:1024},on:{"on-focus":t.purposeFocus},model:{value:t.bankBusinInfo.transfer_purpose,callback:function(e){t.$set(t.bankBusinInfo,"transfer_purpose",e)},expression:"bankBusinInfo.transfer_purpose"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-input",{attrs:{type:"text",maxlength:1024},on:{"on-focus":t.postscriptFocus},model:{value:t.bankBusinInfo.transfer_postscript,callback:function(e){t.$set(t.bankBusinInfo,"transfer_postscript",e)},expression:"bankBusinInfo.transfer_postscript"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款备注",prop:"transfer_remark"}},[a("h-input",{attrs:{type:"text",maxlength:1024},on:{"on-focus":t.remarkFocus},model:{value:t.bankBusinInfo.transfer_remark,callback:function(e){t.$set(t.bankBusinInfo,"transfer_remark",e)},expression:"bankBusinInfo.transfer_remark"}})],1),t._v(" "),"1"==t.bankBusinInfo.cop_busin_class||"4"==t.bankBusinInfo.cop_busin_class||"5"==t.bankBusinInfo.cop_busin_class||"6"==t.bankBusinInfo.cop_busin_class||"21"==t.bankBusinInfo.cop_busin_class?a("h-form-item",{attrs:{label:"附加信息合并",prop:"additional_info_merge_flag"}},[a("h-select",{attrs:{filterable:""},model:{value:t.bankBusinInfo.additional_info_merge_flag,callback:function(e){t.$set(t.bankBusinInfo,"additional_info_merge_flag",e)},expression:"bankBusinInfo.additional_info_merge_flag"}},t._l(t.mergeFlagList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e()],1)],1),t._v(" "),a("h-col",{attrs:{span:"11"}},[a("h-datagrid",{ref:"noteMacroDatagrid",attrs:{height:t.autoNoteHeight,stripe:"",hasPage:"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.bankNoteMacroColumn,onRowDbClick:t.setNoteMacro,url:"/systmmgnt/bankBusflag/getNoteMacro.json"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.bankBusinCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveBankBusin}},[t._v("确认")])],1)],1),t._v(" "),a("import-account-transfer",{ref:"importAccountTransfer",attrs:{"on-import-success":t.refreshBankTree}})],1)},staticRenderFns:[]};var p=a("VU/8")(d,f,!1,function(t){a("9Toe")},"data-v-26b54116",null);e.default=p.exports},mnOV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),s=a.n(n),i=a("lbHh"),o=a.n(i),r=a("NYxO"),l=a("QTaZ"),c=a("3dxc"),u=a("Q5rI"),d=a("BO1k"),f=a.n(d),p={getColumns:function(t){var e=[{title:"产品名称",width:100,sortable:!0,ellipsis:!0,align:"left",key:"fund_id",render:function(e,a){var n=a.row.fund_id+"",s=Object(u._1)(n,t.allFundList),i=s.split(" ");return i.length>1?e("span",{},i[1]):e("span",{},s)}},{title:"业务标志",align:"left",width:100,sortable:!0,key:"cop_busin_caption"},{title:"文件名",align:"left",width:130,key:"file_name"},{title:"对手方",align:"left",width:100,sortable:!0,key:"rival_name"},{title:"发送状态",align:"left",sortable:!0,width:80,key:"file_send_status",render:function(e,a){var n=a.row;return e("span",{},Object(u._1)(n.file_send_status,t.fileSendStatus))}},{title:"操作",align:"left",width:60,key:"file_id ",render:function(e,a){var n=a.row.file_id;return n?e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.downloadFile(n)}}},"下载"):e("span",{},"")}},{title:"发送方式",width:80,align:"left",sortable:!0,key:"sendfile_type",render:function(e,a){var n=a.row;return e("span",{},Object(u._1)(n.sendfile_type,t.sendfileTypeList))}},{title:"邮箱",align:"left",key:"bank_mail",width:180},{title:"传真",align:"left",width:120,key:"bank_fax"},{title:"指令序号",align:"left",sortable:!0,key:"transfer_ins_id"},{title:"外部指令序号",align:"left",sortable:!0,key:"daily_instruction_no"},{title:"划款状态",align:"left",sortable:!0,key:"transfer_fund_status",render:function(e,a){var n=a.row;return e("span",{},Object(u._1)(n.transfer_fund_status,t.transferFundStatus))}},{title:"指令状态",align:"left",sortable:!0,width:80,key:"transfer_ins_status",render:function(e,a){var n=a.row;return e("span",{},Object(u._1)(n.transfer_ins_status,t.transferInsStatus))}},{title:"备注",align:"left",width:180,ellipsis:!0,key:"remark"},{title:"文件序号",width:80,align:"left",key:"file_id",hiddenCol:!0},{title:"发送日期",align:"left",key:"exec_date",render:function(t,e){var a=e.row.exec_date+"";return t("span",{},a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2))},hiddenCol:!0},{title:"发送时间",align:"left",key:"exec_time",render:function(t,e){var a=e.row.exec_time+"";return t("span",{},a.substr(0,2)+":"+a.substr(2,2)+":"+a.substr(4,2))},hiddenCol:!0},{title:"操作员序号",align:"left",sortable:!0,hiddenCol:!0,key:"operator_no"},{title:"接收方账户名",align:"left",hiddenCol:!0,key:"bank_account_name"}],a=!0,n=!1,s=void 0;try{for(var i,o=f()(e);!(a=(i=o.next()).done);a=!0){var r=i.value;r.ellipsis||(r.ellipsis=!0)}}catch(t){n=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}return e}},h={data:function(){return{split:.2,columns:[],contentTableHeight:0,pageSize:50,pageSizeOpts:[50,100,150,200],fundId:null,form:{date:o.a.get("CurrSysDate")},filters:{fundId:null,sendDate:o.a.get("CurrSysDate")},allFundList:[]}},computed:s()({},Object(r.e)({sendfileTypeList:function(t){return t.dict.dict_90524},fileSendStatus:function(t){return t.dict.dict_90426},transferFundStatus:function(t){return t.dict.dict_90571},transferInsStatus:function(t){return t.dict.dict_90537}})),mounted:function(){this.initDatas()},activated:function(){SSObservable.subscribe("onresize",this.handleResize),this.updateLayout()},deactivated:function(){SSObservable.unsubscribe("onresize",this.handleResize)},methods:s()({},Object(r.d)({setDict90524:"DICT_90524",setDict90426:"DICT_90426",setDict90571:"DICT_90571",setDict90537:"DICT_90537"}),{initDatas:function(){var t=this;Object(u.t)(90523).then(function(e){t.setDict90523(e.data)}),Object(u.t)(90524).then(function(e){t.setDict90524(e.data)}),Object(u.t)(90426).then(function(e){t.setDict90426(e.data)}),Object(u.t)(90571).then(function(e){t.setDict90571(e.data)}),Object(u.t)(90537).then(function(e){t.setDict90537(e.data)}),this.columns=p.getColumns(this),this.contentTableHeight=this.$refs.rightContent.clientHeight-this.$refs.topToolbar.clientHeight},getDatas:function(){this.$refs.table.dataChange(1)},onFundClick:function(t){null!==this.filters.fundId||t.code.length>0?(this.filters.fundId=t.code,this.getDatas()):this.filters.fundId=""},handleResize:function(){this.updateLayout()},updateLayout:function(){var t=this;setTimeout(function(){t.contentTableHeight=t.$refs.rightContent.clientHeight-t.$refs.topToolbar.clientHeight,t.$refs.table.handleResize()},50)},onSearch:function(){this.getDatas()},onDateChange:function(t){this.filters.sendDate=t.split("-").join("")},getFundTree:function(t){t&&t.length>0&&(this.allFundList=t[0].children)},onSplitMove:function(){this.$refs.table.handleResize()},downloadFile:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=3&fileId="+t)}}),components:{HOtherFundTree:l.a,HDatagrid:c.a}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page page-file-sendrecord"},[a("h-split",{attrs:{min:"200",max:"200"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"c-left-menu",attrs:{slot:"left"},slot:"left"},[a("h-other-fund-tree",{attrs:{showAll:!0,onFundClick:t.onFundClick},on:{getFundTree:t.getFundTree}})],1),t._v(" "),a("div",{ref:"rightContent",staticClass:"c-right-content",attrs:{slot:"right"},slot:"right"},[a("h-tabs",{attrs:{animated:!1}},[a("h-tab-pane",{attrs:{label:"开基业务划款单"}},[a("div",{ref:"topToolbar",staticClass:"c-content-top-toolbar"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"发送日期"}},[a("h-date-picker",{attrs:{type:"date",clearable:!1,placeholder:"选择日期",format:"yyyy-MM-dd"},on:{"on-change":t.onDateChange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1)],1),t._v(" "),a("div",{staticClass:"c-content"},[a("h-datagrid",{ref:"table",attrs:{hasPage:"",stripe:"",columns:t.columns,pageSize:t.pageSize,"page-size-opts":t.pageSizeOpts,height:t.contentTableHeight,bindForm:t.filters,url:"/file/sendRecord/page.json"}})],1)])],1)],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(h,_,!1,function(t){a("1th5")},null,null);e.default=m.exports},n0lz:function(t,e,a){"use strict";var n=a("bOdI"),s=a.n(n),i={name:"hFieldset",data:function(){return{prefixCls:"h-fieldset",isCollapse:!1}},props:{title:String,collapse:{type:Boolean,default:!1}},computed:{fieldsetCls:function(){return["h-fieldset",s()({},"h-fieldset-collapse",this.isCollapse)]},contentCls:function(){return["h-fieldset-content"]}},methods:{handleCollapse:function(){this.isCollapse=!this.isCollapse}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fieldset",{class:t.fieldsetCls},[a("legend",[t._v(t._s(t.title))]),t._v(" "),a("div",{class:t.contentCls},[t._t("default")],2),t._v(" "),t.collapse?a("div",{class:[t.prefixCls+"-collapse-icon"],on:{click:t.handleCollapse}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"unfold"}})],1)]):t._e()])},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("qoD6")},null,null);e.a=r.exports},nTn7:function(t,e){},nWTj:function(t,e){},naZF:function(t,e){},nbxv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={mounted:function(){this.fixElPopoverBug()},components:{FundAccount:a("D1OY").default}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("FundAccount")},staticRenderFns:[]},i=a("VU/8")(n,s,!1,null,null,null);e.default=i.exports},npUS:function(t,e,a){"use strict";var n={name:"ImportAccountTransfer",props:{onImportSuccess:{type:Function,default:function(){}}},data:function(){return{uploadData:{dealFlag:0,subclass:"1",ignore:!1},fileList:[],errorData:[],accountColums:[{width:80,key:"lineNum",title:"行号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}],errorColumns:[{width:80,key:"lineNum",title:"行号",align:"center"},{width:310,key:"errorInfo",title:"错误原因",align:"center"}],show:!1,showResult:!1,fileTips:"",uploadUrl:"",inputType:1,businessClass:""}},watch:{show:function(t){t?(this.uploadData.ignore=!1,this.openMask()):(this.$refs.upload.clearFiles(),this.closeMask())},showResult:function(t){t?this.openMask():(this.$refs.upload.clearFiles(),this.closeMask())}},computed:{limit:function(){return 2}},methods:{changeUpload:function(t,e){2==e.length&&e.splice(0,1)},uploadSuccess:function(t,e,a){var n=this;if(t.success)"操作成功"==t.msg?this.$alert("导入成功","成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.show=!1}}).then(function(){n.show=!1}):this.$alert(t.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){n.show=!1}}).then(function(){n.show=!1}),this.onImportSuccess(),this.$refs.upload.clearFiles();else if("1120002"==t.code&&"3"==this.inputType){var s=this.$createElement,i=[];t.data.forEach(function(t){i.push({lineNum:t.lineNum,errorInfo:t.errorInfo})}),this.$msgbox({title:"注意",message:s("p",null,[s("span",null,"存在导入异常的指令，是否剔除并继续？"),s("h-table",{style:"width: 100%",props:{columns:this.errorColumns,data:i,height:300}})]),closeOnClickModal:!1,showCancelButton:!0,confirmButtonText:"继续",cancelButtonText:"取消",beforeClose:function(t,a,s){"confirm"===t?(n.uploadData.ignore=!0,e.status="ready",s()):s()}}).then(function(t){n.$refs.upload.submit()}).catch(function(){n.show=!1,n.$refs.upload.clearFiles()})}else"1120002"==t.code&&"3"!=this.type?(this.show=!1,this.showResult=!0,this.errorData=t.data):(this.$alert(t.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){n.show=!1}}).then(function(){n.show=!1}),this.$refs.upload.clearFiles())},confirm:function(){this.showResult=!1,this.onImportSuccess()},submitUpload:function(){this.$refs.upload.submit()},handleCancel:function(){this.show=!1},showDialog:function(t,e){"1"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadAccountExcel.json":"2"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadPubAccountExcel.json":"3"==t?(this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadTransferExcelTemplate.json",this.businessClass=e):"4"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadBankBusinFlagExcelTemplate.json":"5"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadAgencyExcel.json":"6"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadMarketTradeDayExcel.json":"7"==t?this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadTradeRivalExcel.json":"8"==t&&(this.uploadUrl=window.LOCAL_CONFIG.API_HOME+"/uploadIssuerExcel.json"),this.inputType=t,this.show=!0},downLoadSelfExcel:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getFundAccountExcelTemplate.json"},downLoadPubExcel:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getPubAccountExcelTemplate.json"},downLoadTransferExcel:function(t){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getTransferExcelTemplate.json?type="+t+"&businessClass="+this.businessClass},downLoadBankBusinExcel:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getBankBusinExcelTemplate.json"},downLoadAgencyExcel:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getAgencyTemplate.json"},downLoadTradeDayExcel:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getMarketTradeDayTemplate.json"},downLoadTradeRival:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getTradeRivalTemplate.json"},downLoadIssuer:function(){window.location.href=window.LOCAL_CONFIG.API_HOME+"/getIssuerTemplate.json"}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-msg-box",{staticClass:"customMsgBox",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("p",{attrs:{slot:"header"},slot:"header"},[1==t.inputType?a("span",[t._v("产品账户导入")]):2==t.inputType?a("span",[t._v("公共账户导入")]):3==t.inputType?a("span",[t._v("划款指令导入")]):4==t.inputType?a("span",[t._v("划款规则配置导入")]):6==t.inputType?a("span",[t._v("市场交易日导入")]):7==t.inputType?a("span",[t._v("交易对手导入")]):8==t.inputType?a("span",[t._v("发行人导入")]):a("span",[t._v("销售机构导入")])]),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"5"}},[a("label",[t._v("模板下载:")])]),t._v(" "),a("h-col",{staticStyle:{"margin-bottom":"15px"},attrs:{span:"19"}},[1==t.inputType?a("a",{attrs:{id:"selfAccountExcel"},on:{click:t.downLoadSelfExcel}},[t._v("产品账户导入模板.xlsx")]):t._e(),t._v(" "),2==t.inputType?a("a",{attrs:{id:"pubAccountExcel"},on:{click:t.downLoadPubExcel}},[t._v("公共账户导入模板.xlsx")]):t._e(),t._v(" "),3==t.inputType?a("div",[a("div",{staticStyle:{margin:"0 0 8px 0"}},[a("a",{on:{click:function(e){return t.downLoadTransferExcel(2)}}},[t._v("债券分销模板.xlsx")])]),t._v(" "),a("div",[a("a",{on:{click:function(e){return t.downLoadTransferExcel(3)}}},[t._v("费用支付模板.xlsx")])])]):t._e(),t._v(" "),4==t.inputType?a("a",{on:{click:t.downLoadBankBusinExcel}},[t._v("划款规则配置导入模板.xlsx")]):t._e(),t._v(" "),5==t.inputType?a("a",{on:{click:t.downLoadAgencyExcel}},[t._v("销售机构导入模板.xlsx")]):t._e(),t._v(" "),6==t.inputType?a("a",{on:{click:t.downLoadTradeDayExcel}},[t._v("市场交易日导入模板.xlsx")]):t._e(),t._v(" "),7==t.inputType?a("a",{on:{click:t.downLoadTradeRival}},[t._v("交易对手导入模板.xlsx")]):t._e(),t._v(" "),8==t.inputType?a("a",{on:{click:t.downLoadIssuer}},[t._v("发行人导入模板.xlsx")]):t._e()])],1),t._v(" "),7==t.inputType||8==t.inputType?a("h-row",{staticStyle:{"margin-bottom":"5px"},attrs:{"class-name":"full-h"}},[a("h-col",{attrs:{span:"5","class-name":"full-h"}},[a("span",[t._v("模板参数说明:")])]),t._v(" "),7==t.inputType?a("h-col",{attrs:{span:"19","class-name":"full-h"}},[a("span",[t._v("市场类型: 1-银行间一级市场，2-银行间二级市场，3-交易所市场，4-境外OTC市场，5-场外市场，6-非标市场，填写数字，中间不需要逗号隔开")])]):t._e(),t._v(" "),8==t.inputType?a("h-col",{attrs:{span:"19","class-name":"full-h"}},[a("span",[t._v("发行人分类: 1-企业，2-银行，3-基金管理公司，4-其它，5-政府，6-国际金融机构，7-证券公司，8-保险公司，9-中央企业，a-地方国有企业，b-民营企业，c-信托公司，填写数字或字母，中间用逗号隔开")])]):t._e()],1):t._e(),t._v(" "),a("h-row",{attrs:{gutter:10,"class-name":"full-h"}},[a("h-col",{attrs:{span:"5","class-name":"full-h"}},[1==t.inputType||2==t.inputType?a("span",[t._v("账户导入:")]):3==t.inputType?a("span",[t._v("指令导入:")]):4==t.inputType?a("span",[t._v("划款规则配置导入:")]):6==t.inputType?a("span",[t._v("市场交易日导入:")]):7==t.inputType?a("span",[t._v("交易对手导入:")]):8==t.inputType?a("span",[t._v("发行人导入:")]):a("span",[t._v("销售机构导入:")])]),t._v(" "),a("h-col",{attrs:{span:"19","class-name":"full-h"}},[a("el-upload",{ref:"upload",staticClass:"drag-in-box",staticStyle:{"margin-bottom":"10px"},attrs:{drag:"",action:t.uploadUrl,"with-credentials":"","on-success":t.uploadSuccess,"on-change":t.changeUpload,data:t.uploadData,"auto-upload":!1,accept:".xlsx",limit:t.limit,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",{attrs:{title:t.fileTips}},[t._v("点击选择")])])])],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("导入")]),t._v(" "),a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("导入结果")])]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.accountColums}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(t){a("+WlS"),a("nTn7")},null,null);e.a=i.exports},"oH+m":function(t,e){},pMtO:function(t,e,a){"use strict";e.a=function(t,e){return i.a.post("/cashcheck/relatedCash/accountCashQuery.json",{fundId:t,queryDate:e,accountClass:"1,2"})},e.h=function(t){return i.a.post("/cashcheck/relatedCash/updateAccountCash.json",{accountCashList:t},{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.m=function(t,e){return i.a.post("/common/updateSysParam.json",{paramNo:t,paramValue:e})},e.c=function(t){return i.a.post("/cashcheck/fundReserve/checkModifyDay.json",{queryDate:t})},e.k=function(t){return i.a.post("/cashcheck/fundReserve/updateAdjustValue.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.i=function(t){return i.a.post("/cashcheck/query/checkAccRemarkUpdate.json",{queryData:t})},e.e=function(){return i.a.post("/cashcheck/daily/initAccConfirm.json")},e.b=function(){return i.a.post("/cashcheck/daily/checkData.json")},e.l=function(t){return i.a.post("/cashcheck/daily/initAccRemarkUpdate.json",{queryData:t})},e.d=function(){return i.a.post("/cashcheck/daily/finalAccConfirm.json")},e.j=function(t){return i.a.post("/cashcheck/daily/finalAccRemarkUpdate.json",{queryData:t})},e.g=function(t,e,a,n,s){return i.a.post("/cashcheck/daily/allocInit.json",{initQueryDate:t,initCkaccStatus:e,initFundIds:a,pageNo:n,pageSize:s})},e.f=function(t,e,a,n,s){return i.a.post("/cashcheck/daily/allocFinal.json",{finalQueryDate:t,finalCkaccStatus:e,finalFundIds:a,pageNo:n,pageSize:s})};var n=a("mvHQ"),s=a.n(n),i=a("5/bi")},pPUI:function(t,e){},pbAc:function(t,e){},peLM:function(t,e){},pjMD:function(t,e){},q2SQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("8DhI"),o={name:"review",data:function(){return{autoHeight:0,queryCheck:{checkStatus:"1",inputOperator:null,objectType:3},fundReserveInfo:{fund_id:"",fund_code:"",fund_name:"",curr_date:0,bond_trade_adjust_value:0,other_trade_adjust_value:0,last_reserve_payment:0,curr_reserve_payment:0,curr_reserve_unpay:0,account_last_balance:0,estimate_curr_reserve_payment:0,diff_balance:0,modify_desc:""},isScrollBar:{marginTop:"10px",overflow:"auto",maxHeight:""},showDetail:!1}},created:function(){},computed:{},mounted:function(){this.re_layout()},components:{ReviewTable:a("RCPB").a,HDatagrid:n.a},activated:function(){this.$refs.reviewTable.refresh()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight;t>e/2&&(this.isScrollBar.maxHeight=e/2+"px",t=e/2),this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-70,this.$refs.reviewTable.resizeTable(this.autoHeight)},formatMoney:s.h,clearData:function(){this.fundReserveInfo={},this.showDetail=!1,this.$nextTick(this.re_layout)},rowClick:function(t){var e=this;Object(i.a)(t.check_id,t.object_type).then(function(t){e.showDetail=!0,t.data&&"0"==t.data.code?(e.fundReserveInfo=t.data.data,e.$nextTick(e.re_layout)):(e.openMask(),e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))}).catch(function(t){})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-fund-reserve-review full-h",attrs:{id:"full-h-wrapper"}},[a("review-table",{ref:"reviewTable",attrs:{"on-selection-change":t.rowClick,"clear-data":t.clearData,"query-check":t.queryCheck}}),t._v(" "),t.showDetail?a("div",{style:t.isScrollBar,attrs:{id:"wrapper-0"}},[a("div",{staticClass:"detail wrapper"},[t._m(0),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品代码")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundReserveInfo.fund_code}},[t._v(t._s(t.fundReserveInfo.fund_code))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("上月已缴备付金")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.last_reserve_payment)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.last_reserve_payment)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("本月应缴备付金")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.curr_reserve_payment)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.curr_reserve_payment)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("上日银行余额")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.account_last_balance)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.account_last_balance)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundReserveInfo.fund_name}},[t._v(t._s(t.fundReserveInfo.fund_name))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("债券交易量调整值")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.bond_trade_adjust_value)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.bond_trade_adjust_value)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("本月应备资金")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.curr_reserve_unpay)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.curr_reserve_unpay)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("上日银行余额-本月应备资金")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.diff_balance)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.diff_balance)))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("日期")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.fundReserveInfo.curr_date}},[t._v(t._s(t.fundReserveInfo.curr_date))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("其他交易量调整值")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.formatMoney(t.fundReserveInfo.other_trade_adjust_value)}},[t._v(t._s(t.formatMoney(t.fundReserveInfo.other_trade_adjust_value)))])])])],1),t._v(" "),t.fundReserveInfo.modify_desc?a("header",{staticClass:"headline mt10 pt10 border-dashed-top"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("变更内容")])]):t._e(),t._v(" "),t.fundReserveInfo.modify_desc?a("h-row",t._l(t.fundReserveInfo.modify_desc.split(";"),function(e,n){return a("h-col",{key:n,staticClass:"inner",attrs:{span:"6"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v(t._s(decodeURIComponent(e.split(":")[0])))]),t._v(" "),a("div",{staticClass:"value",attrs:{title:decodeURIComponent(e.split(":")[1])}},[t._v(t._s(decodeURIComponent(e.split(":")[1])))])])])}),1):t._e()],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"headline"},[e("i",{staticClass:"icon-l"}),this._v(" "),e("span",{staticClass:"title"},[this._v("详情")])])}]};var l=a("VU/8")(o,r,!1,function(t){a("i66D"),a("IcDW"),a("peLM")},null,null);e.default=l.exports},qLvI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HmOp"),s=a("3dxc"),i=a("lbHh"),o=a.n(i),r=a("Q5rI"),l=a("mvHQ"),c=a.n(l),u=a("5/bi");var d={name:"feeruleset",data:function(){var t=this;return{split:.15,autoHeight:0,pageSizeOpts:[25,50,75,100],showFeeRuleDialog:!1,actionType:"",fundList:[],feeBusinList:[],trade_date_rule:!1,sysDate:o.a.get("CurrSysDate"),queryForm:{fundIds:"",copBusinFlag:""},bankInfo:{trust_flag:"1"},feeCurrentColumns:[{type:"selection",width:30,align:"left"},{title:"产品Id",key:"fund_id_list",hiddenCol:!0,align:"left",width:95,ellipsis:!0},{title:"产品代码",key:"fund_code_list",hiddenCol:!1,align:"left",width:135,ellipsis:!0},{title:"产品名称",key:"fund_name_list",align:"left",ellipsis:!0},{title:"费用标志",key:"cop_busin_flag",align:"left",width:95,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.cop_busin_flag,t.feeBusinList))}},{title:"付费周期",key:"pay_period_type",hiddenCol:!1,align:"left",width:85,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.pay_period_type,t.payPeriodTypeList))}},{title:"缴款日类型",key:"pay_date_type",align:"left",width:95,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.pay_date_type,t.payDateTypeList))}},{title:"缴款日",key:"require_pay_date",align:"left",width:85,ellipsis:!0},{title:"估值科目",key:"subject_no_list",align:"left",ellipsis:!0},{title:"上一个结转日",key:"pre_trade_date",align:"left",width:95,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.pre_trade_date,null))}},{title:"下一个结转日",key:"next_trade_date",align:"left",width:95,ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{},Object(r.R)(a.next_trade_date,null))}},{title:"提前冻结天数",key:"pre_frozen_days",align:"left",width:95,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.pre_frozen_days,t.preFrozenDaysList))}},{title:"状态",key:"fee_rule_flag",hiddenCol:!0,align:"left",width:55,ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(r._1)(n.fee_rule_flag,t.feeRuleFlagList))}},{title:"序列",key:"serial_no",hiddenCol:!0,align:"left",width:95,ellipsis:!0},{title:"下一个结转日规则",key:"trade_date_rule_value",hiddenCol:!0,align:"left",width:95,ellipsis:!0}],feeRuleInfo:{fund_id_list:"",pay_period_type:"",pay_date_type:"",require_pay_date:"",subject_no_list:"",next_trade_date:"",pre_frozen_days:"",serial_no:"",trade_date_rule_value:""},payPeriodTypeList:[],payDateTypeList:[],feeRuleFlagList:[{code:"0",text:"正常"},{code:"1",text:"已作废"}],preFrozenDaysList:[{code:"0",text:"不冻结"},{code:"1",text:"T-1日"},{code:"2",text:"T-2日"}]}},watch:{showFeeRuleDialog:function(t){t?this.openMask():this.closeMask()}},activated:function(){var t=this;Object(r.p)(22).then(function(e){return t.feeBusinList=e.data}),Object(r.w)("/common/fundName.json",null).then(function(e){return t.fundList=e.data})},created:function(){var t=this;Object(r.t)(91182).then(function(e){return t.payDateTypeList=e.data}),Object(r.t)(60074).then(function(e){return t.payPeriodTypeList=e.data})},mounted:function(){this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-100},fundClick:function(t){t&&(this.queryForm.fundIds=t.code,t.code.indexOf(",")<0?this.refreshFeeRule():(this.queryForm.fundIds="",this.refreshFeeRule()))},feeRuleAdd:function(){this.$refs.feeRuleForm.resetFields(),this.feeRuleInfo={serial_no:"",fund_id_list:"",cop_busin_flag:"",pay_period_type:"",pay_date_type:"2",require_pay_date:"",subject_no_list:"",next_trade_date:"",pre_frozen_days:"1",trade_date_rule_value:""},this.showFeeRuleDialog=!0,this.actionType="add"},feeRuleModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.feeRuleSetDbClick(e[0])},feeRuleSetDbClick:function(t){this.showFeeRuleDialog=!0,this.actionType="modify",this.feeRuleInfo=t,"1"==this.feeRuleInfo.trade_date_rule_value&&(this.trade_date_rule=!0),this.feeRuleInfo.fund_id_list=this.feeRuleInfo.fund_id_list.toString(),this.feeRuleInfo.cop_busin_flag=this.feeRuleInfo.cop_busin_flag.toString(),this.feeRuleInfo.next_trade_date=this.feeRuleInfo.next_trade_date.toString()},feeRuleDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a="",n=0;n<e.length;n++)a+=e[n].serial_no+",";a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认删除该记录吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return u.a.post("/fee/rule/delete.json",{serial_nos:t,headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return c()(t)}})})(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refreshFeeRule()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})})},feeRuleDiscard:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0!=e.length){for(var a="",n=0;n<e.length;n++)a+=e[n].serial_no+",";a=a.substring(0,a.length-1),this.$confirm("确认作废该记录吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return u.a.post("/fee/rule/discard.json",{serial_nos:t,headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return c()(t)}})})(a).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success"}),t.refreshFeeRule()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})})}else this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error"})},refreshFeeRule:function(){this.$refs.datagrid.dataChange()},payDateRule:function(){var t=!0;return"2"==this.feeRuleInfo.pay_date_type?this.feeRuleInfo.require_pay_date>=1&&this.feeRuleInfo.require_pay_date<=23||(this.$refs.requirePayDate.blur(),t=!1,this.$alert("输入缴款日有误，请输入1到23之间的数字","错误",{confirmButtonText:"确定",type:"error"})):"1"==this.feeRuleInfo.pay_date_type?this.feeRuleInfo.require_pay_date>=1&&this.feeRuleInfo.require_pay_date<=28||(this.$refs.requirePayDate.blur(),t=!1,this.$alert("输入缴款日有误，请输入1到28之间的数字","错误",{confirmButtonText:"确定",type:"error"})):(this.$refs.requirePayDate.blur(),t=!1,this.$alert("请先选择缴款日类型","错误",{confirmButtonText:"确定",type:"error"}),this.feeRuleInfo.require_pay_date=""),t},feeRuleCancel:function(){this.showFeeRuleDialog=!1},feeRuleBusin:function(){var t,e=this,a=!0;this.payDateRule()&&(this.$refs.feeRuleForm.validate(function(t){return a=a&&t}),a?(this.feeRuleInfo.next_trade_date=Object(r.Q)(this.feeRuleInfo.next_trade_date,"yyyyMMdd"),"add"==this.actionType&&(t=this.feeRuleInfo,u.a.post("/fee/rule/add.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return c()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showFeeRuleDialog=!1}}).then(function(){e.showFeeRuleDialog=!1}),e.refreshFeeRule()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}),"modify"==this.actionType&&function(t){return u.a.post("/fee/rule/modify.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return c()(t)}})}(this.feeRuleInfo).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showFeeRuleDialog=!1}}).then(function(){e.showFeeRuleDialog=!1}),e.refreshFeeRule()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})):this.$alert("输入项不满足要求，请重新检查","错误",{confirmButtonText:"确定",type:"error"}))},tradeDateRuleChange:function(){if(this.trade_date_rule){var t=this.sysDate;this.feeRuleInfo.next_trade_date&&""!=this.feeRuleInfo.next_trade_date&&(t=Object(r.Q)(this.feeRuleInfo.next_trade_date)),this.feeRuleInfo.next_trade_date=Object(r.B)(t),this.feeRuleInfo.trade_date_rule_value="1"}else this.feeRuleInfo.next_trade_date="",this.feeRuleInfo.trade_date_rule_value=""},tradeDateChange:function(){var t=Object(r.Q)(this.feeRuleInfo.next_trade_date);parseInt(t.substring(6,8))<=28||""==t||!t?(this.feeRuleInfo.trade_date_rule_value="",this.trade_date_rule=!1):(this.trade_date_rule=!0,this.feeRuleInfo.trade_date_rule_value="1",this.feeRuleInfo.next_trade_date=Object(r.B)(t))},choseFundList:function(){var t=document.getElementById("full-h-wrapper").offsetHeight;this.$refs.feeRuleFundChooseMsgBox.showMsgBox(this.feeRuleInfo.fund_id_list,t,"1")},saveFundInfo:function(t){this.feeRuleInfo.fund_id_list=t},onSplitMove:function(){this.$refs.datagrid.handleResize()}},components:{FundChooseMsgBox:a("tq1/").a,FundTree:n.a,HDatagrid:s.a}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-split",{attrs:{min:"130",max:"600"},on:{"on-moving":t.onSplitMove},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"full-h",attrs:{slot:"left",span:"4"},slot:"left"},[a("fund-tree",{ref:"treeFund",attrs:{showAll:!0,onFundClick:t.fundClick}})],1),t._v(" "),a("div",{staticClass:"full-h",staticStyle:{"padding-left":"10px"},attrs:{slot:"right",span:"20",id:"full-h-wrapper"},slot:"right"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"费用标志"}},[a("h-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.copBusinFlag,callback:function(e){t.$set(t.queryForm,"copBusinFlag",e)},expression:"queryForm.copBusinFlag"}},t._l(t.feeBusinList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refreshFeeRule}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.feeRuleAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.feeRuleModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.feeRuleDelete}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,"on-row-db-click":t.feeRuleSetDbClick,pageSize:20,pageSizeOpts:t.pageSizeOpts,columns:t.feeCurrentColumns,bindForm:t.queryForm,url:"/fee/rule/page.json"}})],1)]),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500","mask-closable":!1},model:{value:t.showFeeRuleDialog,callback:function(e){t.showFeeRuleDialog=e},expression:"showFeeRuleDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增费用规则")]):"modify"==t.actionType?a("span",[t._v("修改费用规则")]):t._e()]),t._v(" "),a("h-row",{staticClass:"full-h"},[a("h-col",{staticStyle:{"margin-right":"5px"},attrs:{span:"22"}},[a("h-form",{ref:"feeRuleForm",attrs:{model:t.feeRuleInfo,"label-width":110}},[a("h-form-item",{attrs:{required:"",label:"产品",prop:"fund_id_list"}},[a("div",[a("h-select",{staticStyle:{width:"250px"},attrs:{hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.feeRuleInfo.fund_id_list,callback:function(e){t.$set(t.feeRuleInfo,"fund_id_list",e)},expression:"feeRuleInfo.fund_id_list"}},t._l(t.fundList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1),t._v(" "),a("h-button",{staticStyle:{float:"right",height:"30px","margin-top":"3px"},attrs:{type:"primary"},on:{click:t.choseFundList}},[t._v("选择")])],1)]),t._v(" "),a("h-form-item",{attrs:{required:"",label:"费用标志",prop:"cop_busin_flag"}},[a("h-select",{attrs:{filterable:""},model:{value:t.feeRuleInfo.cop_busin_flag,callback:function(e){t.$set(t.feeRuleInfo,"cop_busin_flag",e)},expression:"feeRuleInfo.cop_busin_flag"}},t._l(t.feeBusinList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"付费周期",prop:"pay_period_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.feeRuleInfo.pay_period_type,callback:function(e){t.$set(t.feeRuleInfo,"pay_period_type",e)},expression:"feeRuleInfo.pay_period_type"}},t._l(t.payPeriodTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code.toString()}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"下一个结转日",prop:"next_trade_date"}},[a("h-row",[a("h-col",{staticStyle:{"margin-right":"35px"},attrs:{span:"15"}},[a("h-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"下一次取估值表科目的日期"},on:{"on-change":t.tradeDateChange},model:{value:t.feeRuleInfo.next_trade_date,callback:function(e){t.$set(t.feeRuleInfo,"next_trade_date",e)},expression:"feeRuleInfo.next_trade_date"}})],1),t._v(" "),a("h-col",{attrs:{span:"5"}},[a("h-checkbox",{on:{"on-change":t.tradeDateRuleChange},model:{value:t.trade_date_rule,callback:function(e){t.trade_date_rule=e},expression:"trade_date_rule"}},[a("span",{attrs:{title:"日期选择29，30，31 均表示月底"}},[t._v("月底")])])],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"缴款日类型",prop:"pay_date_type"}},[a("h-select",{attrs:{filterable:""},model:{value:t.feeRuleInfo.pay_date_type,callback:function(e){t.$set(t.feeRuleInfo,"pay_date_type",e)},expression:"feeRuleInfo.pay_date_type"}},t._l(t.payDateTypeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code.toString()}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"缴款日",prop:"require_pay_date"}},[a("h-input",{ref:"requirePayDate",attrs:{placeholder:"每月第几个工作/自然日缴款"},on:{"on-keyup":t.payDateRule},model:{value:t.feeRuleInfo.require_pay_date,callback:function(e){t.$set(t.feeRuleInfo,"require_pay_date",e)},expression:"feeRuleInfo.require_pay_date"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"估值科目",prop:"subject_no_list"}},[a("h-input",{attrs:{type:"text",placeholder:"支持多科目累加，英文短号分开"},model:{value:t.feeRuleInfo.subject_no_list,callback:function(e){t.$set(t.feeRuleInfo,"subject_no_list",e)},expression:"feeRuleInfo.subject_no_list"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"提前冻结天数",prop:"pre_frozen_days"}},[a("h-select",{attrs:{filterable:""},model:{value:t.feeRuleInfo.pre_frozen_days,callback:function(e){t.$set(t.feeRuleInfo,"pre_frozen_days",e)},expression:"feeRuleInfo.pre_frozen_days"}},t._l(t.preFrozenDaysList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code.toString()}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.feeRuleCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.feeRuleBusin}},[t._v("确认")])],1)],1),t._v(" "),a("fund-choose-msg-box",{ref:"feeRuleFundChooseMsgBox",on:{saveFundInfo:t.saveFundInfo}})],1)},staticRenderFns:[]},p=a("VU/8")(d,f,!1,null,null,null);e.default=p.exports},qoD6:function(t,e){},ri5M:function(t,e,a){"use strict";e.b=function(t){return i.a.post("/systemmgnt/stamp/addStamp.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.g=function(t){return i.a.post("/systemmgnt/stamp/updateStamp.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return s()(t)}})},e.d=function(t){return i.a.post("/systemmgnt/stamp/deleteStamp.json",{stampIds:t})},e.a=function(t,e){return i.a.post("systemmgnt/dealStamp/add.json",{fundIdList:t,stampId:e})},e.f=function(t,e){return i.a.post("systemmgnt/dealStamp/modify.json",{fundId:t,stampId:e})},e.c=function(t){return i.a.post("systemmgnt/dealStamp/delete.json",{fundIds:t})},e.e=function(t){return i.a.post("/systemmgnt/stamp/getStampById.json",{stampId:t})};var n=a("mvHQ"),s=a.n(n),i=a("5/bi")},s4gM:function(t,e){},sN4P:function(t,e){},se30:function(t,e,a){"use strict";var n=a("Q5rI"),s=a("Hhn/"),i={name:"TransferDetailDialog",components:{HDatagrid:a("3dxc").a},watch:{"transferInfo.cop_busin_flag":function(t){switch("7"==this.transferInfo.cop_busin_class&&this.rivalContactFlags.indexOf(t.toString())>=0?this.showRivalContact=!0:this.showRivalContact=!1,this.transferInfo.cop_busin_class){case"1":this.showRival=!1,this.showReportCode=20020==t,20117==t||10071==t||30008==t?this.showClearAgent=!1:10070==t||20116==t||30110==t?this.showClearAgent=!1:this.showReportCode?this.showReportCode&&(this.showClearAgent=!1):this.showClearAgent=!0;break;case"4,5,6":case"4":case"5":case"6":this.transferInfo.clear_agent_code_cn="",this.showRival=10078==t||11010==t,this.showReportCode=!1,this.showClearAgent=!1;break;case"9":this.showRival=10023==t||20018==t||10074==t||10075==t||20130==t||20019==t,this.showReportCode=20017==t||20047==t||20049==t||20126==t||20128==t||20050==t||20051==t||20139==t||20140==t||10053==t||10054==t||10098==t||10099==t,this.showClearAgent=!1;break;case"7":this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1;break;case"20":this.showRival=!0,this.showReportCode=!1,this.showClearAgent=!1;break;default:this.showRival=!1,this.showReportCode=!1,this.showClearAgent=!1}}},data:function(){var t=this;return{marketList:[],canSpecialApprove:"",rivalContactFlags:"",activeName:["2"],showRival:!1,showAgency:!1,showDialog:!1,showClearAgent:!1,showReportCode:!1,businClassTree:[],specialApproveWorkerList:[],cityTree:[],transferInfo:{fund_id:null,sq_holder_account:"",zz_holder_account:"",transfer_purpose:"",transfer_remark:"",transfer_postscript:"",clear_agent_code_cn:null,cop_busin_class:null,settle_balance:"",rival_code:"",issuer_code:"",rival_name:"",invest_type:"",approve_officer:"",currency_no:""},inAcct:{bank_account_no:"",bic_code:null},outAcct:{bank_account_no:"",bic_code:null},selfAcct:{bank_fax:"",bank_mail:"",bank_phone:"",sh_fdb_account:"",sz_fdb_account:""},showRivalContact:!1,rivalAcct:{bank_fax:"",bank_mail:"",bank_phone:""},actionType:"detail",detailForm:{transfer_ins_id:null,transfer_ins_modify:null,includeHistory:!0},accountStyle:{borderColor:"#d3d3d3",height:"230px"},trusteeStyle:{height:"230px"},flowColumns:[{width:60,type:"index",title:"序号",align:"center"},{width:100,key:"operator_name",title:"操作员",align:"left"},{title:"审批节点",key:"node_name",width:100,align:"left",ellipsis:!0,render:function(t,e){var a,n=e.row;switch(n.node_name){case"approve":a="经办";break;case"settle":a="交收";break;default:a=n.node_name}return t("span",{},a)}},{width:100,key:"transfer_flow_flag",title:"操作说明",align:"left",render:function(e,a){var s=a.row;return e("span",{},8==s.transfer_flow_flag&&"approve"==s.node_name?"提交":Object(n._1)(s.transfer_flow_flag,t.transferFlagList))}},{width:150,key:"exec_date",title:"操作时间",align:"left",render:function(t,e){var a=e.row;return t("span",{},Object(n.R)(a.exec_date,a.exec_time))}},{key:"remark",title:"备注",align:"left"}],investTypeList:[],currencyList:[],fundList:[],rivalList:[],taTypeList:[{code:"1",text:"自建TA"},{code:"2",text:"中登上海"},{code:"3",text:"中登深圳"}],operatorList:[],settleMentList:[{code:"1",text:"见款付券"},{code:"2",text:"见券付款"},{code:"3",text:"DVP"}],agentCodeList:[{code:"3",text:"中债登"},{code:"4",text:"上清所"}],seatList:[{seatId:"",fee:""}],fileList:[],bankList:[]}},mounted:function(){var t=this;Object(n.t)(90522).then(function(e){return t.transferFlagList=e.data}),Object(n.t)(610400).then(function(e){return t.marketList=e.data}),Object(n.t)(91064).then(function(e){return t.investTypeList=e.data}),Object(n.t)(610406).then(function(e){var a=e.data;a.forEach(function(t){"CNY"==t.code&&(t.text="元")}),t.currencyList=a}),Object(n.j)().then(function(e){return t.bankList=e.data}),Object(n.q)().then(function(e){return t.cityTree=e.data}),Object(n.j)("1").then(function(e){return t.bankInfoList=e.data}),Object(n.n)(!0).then(function(e){return t.businClassTree=e.data}),Object(n.N)().then(function(e){return t.operatorList=e.data}),Object(n.i)("").then(function(e){return t.agencyList=e.data}),Object(s.j)().then(function(e){e.data.rows&&e.data.rows.length>0?(t.specialApproveWorkerList=e.data.rows,t.specialApproveWorkerList.unshift({begin_date:"0",end_date:"0",operator_name:"全部",operator_no:-1,workgroup_id:0})):t.specialApproveWorkerList=[]})},activated:function(){var t=this;Object(n.K)(10066).then(function(e){e.data.success&&(t.rivalContactFlags=e.data.data)}),Object(n.K)(10038).then(function(e){e.data.success&&(t.canSpecialApprove=e.data.data)})},computed:{beginDate:{get:function(){return Object(n.R)(this.transferInfo.fee_begin_date)},set:function(t){this.transferInfo.fee_begin_date=Object(n.Q)(t)}},endDate:{get:function(){return Object(n.R)(this.transferInfo.fee_end_date)},set:function(t){this.transferInfo.fee_end_date=Object(n.Q)(t)}},upBalance:function(){return Object(n._3)(this.transferInfo.settle_balance)},businClassFlag:{get:function(){var t=this.transferInfo.cop_busin_class;return"4"!=this.transferInfo.cop_busin_class&&"5"!=this.transferInfo.cop_busin_class&&"6"!=this.transferInfo.cop_busin_class||(t="4,5,6"),[t,this.transferInfo.cop_busin_flag?this.transferInfo.cop_busin_flag.toString():""]},set:function(t){this.transferInfo.cop_busin_class=t[0],this.transferInfo.cop_busin_flag=t[1]}},payDate:{get:function(){if(null!=this.transferInfo.require_pay_date){var t=this.transferInfo.require_pay_date.toString().split(" "),e=t[0].replace(new RegExp("-","gm"),""),a=t[1];return a=void 0===a?this.transferInfo.require_pay_time:a.replace(new RegExp(":","gm"),""),Object(n.R)(e,a)}return Object(n.R)(this.transferInfo.require_pay_date)},set:function(t){this.transferInfo.require_pay_date=Object(n.Q)(t,"yyyy-MM-dd hh:mm:ss")}},outProvinceCity:{get:function(){return[this.outAcct.province_code,this.outAcct.city_no]},set:function(t){this.outAcct.province_code=t[0],this.outAcct.city_no=t[1]}},provinceCity:{get:function(){return[this.inAcct.province_code,this.inAcct.city_no]},set:function(t){this.inAcct.province_code=t[0],this.inAcct.city_no=t[1]}}},methods:{resetDetail:function(){this.transferInfo={},this.outAcct={},this.inAcct={},this.fileList=[],this.seatList=[]},showTransferDetail:function(t){var e=this;this.resetDetail();var a=t.transfer_ins_id,n=t.transfer_ins_modify;this.showDialog=!0,this.loadFiles(t.bill_name),this.detailForm.transfer_ins_id=a,this.detailForm.transfer_ins_modify=n,this.$refs.flowData.dataChange(),Object(s.m)({transferInsId:a,transferInsModify:n}).then(function(a){if(a.data.success&&(e.transferInfo=a.data.data.transferInfo,e.transferInfo.traderival_name=t.traderival_name,e.transferInfo.fund_name=t.fund_name,a.data.data.outAcct&&(e.outAcct=a.data.data.outAcct,"1"==t.cash_direction?(e.rivalAcct.bank_fax=a.data.data.outAcct.bank_fax,e.rivalAcct.bank_mail=a.data.data.outAcct.bank_mail,e.rivalAcct.bank_phone=a.data.data.outAcct.bank_phone):(e.selfAcct.bank_fax=a.data.data.outAcct.bank_fax,e.selfAcct.bank_mail=a.data.data.outAcct.bank_mail,e.selfAcct.bank_phone=a.data.data.outAcct.bank_phone)),a.data.data.inAcct&&(e.inAcct=a.data.data.inAcct,"1"==t.cash_direction?(e.selfAcct.bank_fax=a.data.data.inAcct.bank_fax,e.selfAcct.bank_mail=a.data.data.inAcct.bank_mail,e.selfAcct.bank_phone=a.data.data.inAcct.bank_phone):(e.rivalAcct.bank_fax=a.data.data.inAcct.bank_fax,e.rivalAcct.bank_mail=a.data.data.inAcct.bank_mail,e.rivalAcct.bank_phone=a.data.data.inAcct.bank_phone)),"22"===e.transferInfo.cop_busin_class&&20061==e.transferInfo.cop_busin_flag&&e.transferInfo.seat_id_list&&e.transferInfo.fee_list)){var n=e.transferInfo.seat_id_list.split(","),s=e.transferInfo.fee_list.split(",");n.forEach(function(t,a){e.seatList.push({seatId:t,fee:s[a]})})}}),t.agency_code&&"7"==t.cop_busin_class?this.showAgency=!0:this.showAgency=!1},loadFiles:function(t){var e=this;t&&Object(n.u)(t,"2").then(function(t){t.data.success&&t.data.data.forEach(function(t){return e.fileList.push({name:t.file_name,response:{data:t.file_id}})})})},downloadFile:function(t){window.open(window.LOCAL_CONFIG.API_HOME+"/file/download.json?fileType=2&fileId="+t.response.data)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"1040",top:"24",footerHide:!0,scrollable:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增指令")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改指令")]):t._e(),t._v(" "),"detail"==t.actionType?a("span",[t._v("指令详情")]):t._e()]),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom",staticStyle:{"border-color":"#d3d3d3"}},[a("header",{staticClass:"headline pl5"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("业务类型")])]),t._v(" "),a("h-form",{ref:"transForm0",attrs:{model:t.transferInfo,"label-width":100,cols:"3"}},[a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},["add"!=t.actionType?a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.fund_name,callback:function(e){t.$set(t.transferInfo,"fund_name",e)},expression:"transferInfo.fund_name"}}):t._e()],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"业务标志"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"mini",options:t.businClassTree},model:{value:t.businClassFlag,callback:function(e){t.businClassFlag=e},expression:"businClassFlag"}})],1),t._v(" "),t.showClearAgent?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{required:"",label:"清算机构",prop:"clear_agent_code_cn"}},[a("h-select",{attrs:{disabled:""},model:{value:t.transferInfo.clear_agent_code_cn,callback:function(e){t.$set(t.transferInfo,"clear_agent_code_cn",e)},expression:"transferInfo.clear_agent_code_cn"}},t._l(t.agentCodeList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"投资类型",prop:"invest_type"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.invest_type,callback:function(e){t.$set(t.transferInfo,"invest_type",e)},expression:"transferInfo.invest_type"}},t._l(t.investTypeList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),t.showRival?a("h-form-item",{attrs:{label:"对手方",prop:"rival_code"}},["add"!=t.actionType?a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.traderival_name,callback:function(e){t.$set(t.transferInfo,"traderival_name",e)},expression:"transferInfo.traderival_name"}}):t._e()],1):t._e(),t._v(" "),t.showAgency?a("h-form-item",{attrs:{label:"销售机构",prop:"agency_code"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.agency_code,callback:function(e){t.$set(t.transferInfo,"agency_code",e)},expression:"transferInfo.agency_code"}},t._l(t.agencyList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用起始日期",prop:"fee_begin_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.beginDate,callback:function(e){t.beginDate=e},expression:"beginDate"}})],1):t._e(),t._v(" "),"22"==t.transferInfo.cop_busin_class?a("h-form-item",{attrs:{label:"费用结束日期",prop:"fee_end_date"}},[a("h-date-picker",{attrs:{disabled:"detail"==t.actionType,type:"date",format:"yyyyMMdd",placeholder:"选择日期"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1):t._e(),t._v(" "),null!=t.canSpecialApprove&&"1"===t.canSpecialApprove?a("h-form-item",{staticStyle:{height:"35.77px"},attrs:{label:"特殊审批人",prop:"approve_officer"}},[a("h-select",{attrs:{disabled:"detail"==t.actionType,filterable:""},model:{value:t.transferInfo.approve_officer,callback:function(e){t.$set(t.transferInfo,"approve_officer",e)},expression:"transferInfo.approve_officer"}},t._l(t.specialApproveWorkerList,function(t,e){return a("h-option",{key:e,attrs:{label:t.operator_name,value:t.operator_no}})}),1)],1):t._e(),t._v(" "),"detail"==t.actionType&&t.showReportCode?a("h-form-item",{attrs:{label:"证券代码",prop:"report_code"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.report_code,callback:function(e){t.$set(t.transferInfo,"report_code",e)},expression:"transferInfo.report_code"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.stock_name?a("h-form-item",{attrs:{label:"证券名称",prop:"stock_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.transferInfo.stock_name,callback:function(e){t.$set(t.transferInfo,"stock_name",e)},expression:"transferInfo.stock_name"}})],1):t._e(),t._v(" "),"detail"==t.actionType&&t.transferInfo.market_no?a("h-form-item",{attrs:{label:"交易市场",prop:"market_no"}},[a("h-select",{attrs:{disabled:"",filterable:""},model:{value:t.transferInfo.market_no,callback:function(e){t.$set(t.transferInfo,"market_no",e)},expression:"transferInfo.market_no"}},t._l(t.marketList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e()],1),t._v(" "),t._l(t.seatList,function(e,n){return"22"==t.transferInfo.cop_busin_class&&"20061"==t.transferInfo.cop_busin_flag?a("h-form",{key:n,ref:"seatListForm",refInFor:!0,attrs:{"label-width":100,cols:"3",model:e}},[a("h-row",[a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"席位号"+(n+1),prop:"seatId"}},[a("h-input",{attrs:{type:"text",maxlength:6,placeholder:"请输入",disabled:"detail"==t.actionType},model:{value:e.seatId,callback:function(a){t.$set(e,"seatId",a)},expression:"item.seatId"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"8"}},[a("h-form-item",{attrs:{label:"佣金费"+(n+1),prop:"fee"}},[a("h-typefield",{attrs:{type:"money",placeholder:"请输入",bigTips:"",divided:"",integerNum:"12",disabled:"detail"==t.actionType},on:{"on-blur":function(t){}},model:{value:e.fee,callback:function(a){t.$set(e,"fee",a)},expression:"item.fee"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1)],1),t._v(" "),"detail"!=t.actionType?a("h-col",{attrs:{span:"8"}},[a("h-icon",n<=0?{staticClass:"pointer pl10",attrs:{name:"addition",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}}:{staticClass:"pointer pl10",attrs:{name:"offline",size:"20",color:"#11a0f8"},on:{"on-click":function(t){}}})],1):t._e()],1)],1):t._e()})],2),t._v(" "),a("div",{staticClass:"block-in-box border-dashed-bottom pt10 pb10",staticStyle:{"border-color":"#d3d3d3"}},[a("h-row",[a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("出")])]),t._v(" "),a("h-form",{ref:"outAcctForm",attrs:{model:t.outAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.bank_account_name},model:{value:t.outAcct.bank_account_name,callback:function(e){t.$set(t.outAcct,"bank_account_name",e)},expression:"outAcct.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.bank_account_no},model:{value:t.outAcct.bank_account_no,callback:function(e){t.$set(t.outAcct,"bank_account_no",e)},expression:"outAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.outAcct.bic_code,callback:function(e){t.$set(t.outAcct,"bic_code",e)},expression:"outAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.outAcct.sub_bank_no},model:{value:t.outAcct.sub_bank_no,callback:function(e){t.$set(t.outAcct,"sub_bank_no",e)},expression:"outAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.outAcct.pay_no},model:{value:t.outAcct.pay_no,callback:function(e){t.$set(t.outAcct,"pay_no",e)},expression:"outAcct.pay_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"开户城市",prop:"city_no"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:"detail"==t.actionType,options:t.cityTree,filterable:""},model:{value:t.outProvinceCity,callback:function(e){t.outProvinceCity=e},expression:"outProvinceCity"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.accountStyle,attrs:{span:"8","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("入")])]),t._v(" "),a("h-form",{ref:"inAcctForm",attrs:{model:t.inAcct,"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{label:"账户名称",prop:"bank_account_name"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.bank_account_name},model:{value:t.inAcct.bank_account_name,callback:function(e){t.$set(t.inAcct,"bank_account_name",e)},expression:"inAcct.bank_account_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行账号",prop:"bank_account_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.bank_account_no},model:{value:t.inAcct.bank_account_no,callback:function(e){t.$set(t.inAcct,"bank_account_no",e)},expression:"inAcct.bank_account_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"银行总行",prop:"bic_code"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:"detail"==t.actionType,placement:"top",showTitle:"",transfer:!0,filterable:""},model:{value:t.inAcct.bic_code,callback:function(e){t.$set(t.inAcct,"bic_code",e)},expression:"inAcct.bic_code"}},t._l(t.bankList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"开户行",prop:"sub_bank_no"}},[a("el-input",{attrs:{type:"textarea",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:2},title:t.inAcct.sub_bank_no},model:{value:t.inAcct.sub_bank_no,callback:function(e){t.$set(t.inAcct,"sub_bank_no",e)},expression:"inAcct.sub_bank_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"大额支付号",prop:"pay_no"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,title:t.inAcct.pay_no},model:{value:t.inAcct.pay_no,callback:function(e){t.$set(t.inAcct,"pay_no",e)},expression:"inAcct.pay_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"开户城市",prop:"city_no"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:"detail"==t.actionType,options:t.cityTree,filterable:""},model:{value:t.provinceCity,callback:function(e){t.provinceCity=e},expression:"provinceCity"}})],1)],1)],1),t._v(" "),a("h-col",{style:t.trusteeStyle,attrs:{span:"8"}},[a("header",{staticClass:"headline pl10 pr10"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("联系信息")])]),t._v(" "),a("h-form",{ref:"selfAcctForm",attrs:{"label-width":100,cols:"1"}},[a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.selfAcct.bank_phone,callback:function(e){t.$set(t.selfAcct,"bank_phone",e)},expression:"selfAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"邮箱",prop:"bank_mail"}},[a("el-input",{attrs:{placeholder:"多个邮箱请用英文逗号隔开",size:"small",type:"textarea",maxlength:"1024",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.selfAcct.bank_mail},model:{value:t.selfAcct.bank_mail,callback:function(e){t.$set(t.selfAcct,"bank_mail",e)},expression:"selfAcct.bank_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.selfAcct.bank_fax,callback:function(e){t.$set(t.selfAcct,"bank_fax",e)},expression:"selfAcct.bank_fax"}})],1),t._v(" "),t.showRivalContact?a("div",[a("h-form-item",{attrs:{label:"基金公司电话"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.rivalAcct.bank_phone,callback:function(e){t.$set(t.rivalAcct,"bank_phone",e)},expression:"rivalAcct.bank_phone"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"基金公司邮箱"}},[a("el-input",{attrs:{placeholder:"多个邮箱请用英文逗号隔开",size:"small",type:"textarea",maxlength:"1024",resize:"none",disabled:"detail"==t.actionType,autosize:{minRows:1,maxRows:5},title:t.rivalAcct.bank_mail},model:{value:t.rivalAcct.bank_mail,callback:function(e){t.$set(t.rivalAcct,"bank_mail",e)},expression:"rivalAcct.bank_mail"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"基金公司传真"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType,maxlength:32},model:{value:t.rivalAcct.bank_fax,callback:function(e){t.$set(t.rivalAcct,"bank_fax",e)},expression:"rivalAcct.bank_fax"}})],1)],1):t._e()],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"block-in-box pt10 pb10"},[a("h-row",[a("h-col",{staticStyle:{"border-color":"#d3d3d3"},attrs:{span:"16","class-name":"border-dashed-right pl10 pr10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("划款信息")])]),t._v(" "),a("h-form",{ref:"transForm",attrs:{model:t.transferInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"10"}},[a("h-form-item",{attrs:{label:"划款金额",prop:"settle_balance"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("划款金额")]),t._v(" "),a("h-typefield",{attrs:{type:"money",placeholder:"",integerNum:"15",suffixNum:"2",divided:"",disabled:"detail"==t.actionType},model:{value:t.transferInfo.settle_balance,callback:function(e){t.$set(t.transferInfo,"settle_balance",e)},expression:"transferInfo.settle_balance"}})],1)],1),t._v(" "),a("h-col",{attrs:{span:"2"}},[a("h-form-item",{attrs:{"label-width":2}},[a("h-select",{staticStyle:{height:"28px"},attrs:{disabled:"detail"==t.actionType,setDefSelect:!0,filterable:""},model:{value:t.transferInfo.currency_no,callback:function(e){t.$set(t.transferInfo,"currency_no",e)},expression:"transferInfo.currency_no"}},t._l(t.currencyList,function(t,e){return a("h-option",{key:e,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"12"}},[a("h-form-item",{attrs:{label:"付款日期",prop:"require_pay_date"}},[a("span",{staticClass:"spcial-label-in-msg-box",attrs:{slot:"label"},slot:"label"},[t._v("付款日期")]),t._v(" "),a("h-date-picker",{attrs:{disabled:"",type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.payDate,callback:function(e){t.payDate=e},expression:"payDate"}})],1)],1)],1),t._v(" "),a("h-form-item",{attrs:{label:"大写金额"}},[a("h-input",{attrs:{disabled:""},model:{value:t.upBalance,callback:function(e){t.upBalance=e},expression:"upBalance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款事由",prop:"transfer_purpose"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_purpose,callback:function(e){t.$set(t.transferInfo,"transfer_purpose",e)},expression:"transferInfo.transfer_purpose"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款附言",prop:"transfer_postscript"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_postscript,callback:function(e){t.$set(t.transferInfo,"transfer_postscript",e)},expression:"transferInfo.transfer_postscript"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"划款备注",prop:"transfer_remark"}},[a("h-input",{attrs:{disabled:"detail"==t.actionType},model:{value:t.transferInfo.transfer_remark,callback:function(e){t.$set(t.transferInfo,"transfer_remark",e)},expression:"transferInfo.transfer_remark"}})],1)],1)],1),t._v(" "),a("h-col",{attrs:{span:"8","class-name":"pl10"}},[a("header",{staticClass:"headline"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("附件")])]),t._v(" "),a("el-upload",{ref:"uploader",staticClass:"drag-in-box",attrs:{disabled:"detail"==t.actionType,drag:"",multiple:"",action:"/","on-preview":t.downloadFile,limit:5,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1)],1)],1),t._v(" "),a("el-collapse",{directives:[{name:"show",rawName:"v-show",value:"detail"==t.actionType,expression:"actionType=='detail'"}],model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"collapse-icon-l"}),t._v(" "),a("span",{staticClass:"collapse-title"},[t._v("指令操作明细")])]),t._v(" "),a("h-datagrid",{ref:"flowData",attrs:{stripe:"",autoLoad:!1,"highlight-row":"",columns:t.flowColumns,bindForm:t.detailForm,url:"/cashsettle/transferFlow.json"}})],2)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("jtja"),a("5jfH")},null,null);e.a=r.exports},sw22:function(t,e){},"t+GI":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l={name:"agency",data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],agencyColumn:[{type:"selection",width:30,align:"center"},{title:"销售机构序号",key:"serial_no",width:150,hiddenCol:!0,align:"right",ellipsis:!0},{title:"销售机构编码",key:"agency_code",align:"left",ellipsis:!0},{title:"销售机构名称",key:"agency_name",align:"left",ellipsis:!0},{title:"销售渠道",key:"sale_channel",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.sale_channel,t.channelList))}},{title:"开户所在地",key:"ta_type",align:"left",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.ta_type,t.taTypeList))}}],taTypeList:[{code:"2",text:"上海"},{code:"3",text:"深圳"}],channelList:[],queryForm:{taType:"",keyword:""},agencyInfo:{agency_code:"",agency_name:"",ta_type:""},showAgencyDialog:!1,addAgency:!1}},watch:{showAgencyDialog:function(t){t?this.openMask():this.closeMask()}},computed:{taType:{get:function(){return this.queryForm.taType?this.queryForm.taType.split(","):[]},set:function(t){this.queryForm.taType=t.join(",")}}},mounted:function(){var t=this;Object(s.t)(90779).then(function(e){return t.channelList=e.data}),this.re_layout()},methods:{refresh:function(){this.$refs.datagrid.dataChange(1)},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-85},agencyAdd:function(){this.addAgency=!0,this.agencyInfo={serial_no:null,agency_code:null,agency_name:"",ta_type:"2",sale_channel:"2"},this.$refs.agencyForm.resetFields(),this.showAgencyDialog=!0},agencyModify:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请先选中一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e.length>1?(this.openMask(),void this.$alert("只能选择一条记录修改","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void this.agencyDbClick(e[0])},agencyDbClick:function(t){this.agencyInfo=t,this.addAgency=!1,this.showAgencyDialog=!0},agencyDelete:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请先选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});for(var a="",n=0;n<e.length;n++)a+=e[n].serial_no+",";a=a.substring(0,a.length-1),this.openMask(),this.$confirm("确认删除该销售机构吗？","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=a,r.a.post("/systemmgnt/agencyInfo/agencyInfoDel.json",{serialNoes:e})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},agencyCancel:function(){this.showAgencyDialog=!1},saveAgency:function(){var t,e=this,a=!0;(this.$refs.agencyForm.validate(function(t){return a=a&&t}),a)?(t=this.agencyInfo,r.a.post("/systemmgnt/agencyInfo/saveAgencyInfo.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showAgencyDialog=!1}}).then(function(){e.showAgencyDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},agencyImport:function(){this.$refs.agencyImportDialog.showDialog(5,null)},refreshAgency:function(){this.$refs.datagrid.dataChange(1)}},components:{ImportAccountTransfer:a("npUS").a,HDatagrid:n.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"开户所在地"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.taType,callback:function(e){t.taType=e},expression:"taType"}},t._l(t.taTypeList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"175px"},attrs:{placeholder:"请输入销售机构编码或名称"},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword",e)},expression:"queryForm.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.agencyAdd}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.agencyModify}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.agencyDelete}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.agencyImport}},[t._v("导入")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"",hasPage:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.agencyColumn,bindForm:t.queryForm,"on-row-db-click":t.agencyDbClick,url:"/systemmgnt/agencyInfo/agencyInfoList.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showAgencyDialog,callback:function(e){t.showAgencyDialog=e},expression:"showAgencyDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t.addAgency?a("span",[t._v("新增销售机构")]):a("span",[t._v("修改销售机构")])]),t._v(" "),a("h-form",{ref:"agencyForm",attrs:{model:t.agencyInfo,"label-width":100}},[a("h-row",[a("h-col",{attrs:{span:"24"}},[a("h-form-item",{attrs:{required:"",label:"销售机构编码",prop:"agency_code"}},[a("h-input",{attrs:{disabled:!t.addAgency,maxlength:8},model:{value:t.agencyInfo.agency_code,callback:function(e){t.$set(t.agencyInfo,"agency_code",e)},expression:"agencyInfo.agency_code"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"销售机构名称",prop:"agency_name"}},[a("h-input",{attrs:{maxlength:128},model:{value:t.agencyInfo.agency_name,callback:function(e){t.$set(t.agencyInfo,"agency_name",e)},expression:"agencyInfo.agency_name"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"开户所在地",prop:"ta_type"}},[a("h-select",{attrs:{isString:"",filterable:""},model:{value:t.agencyInfo.ta_type,callback:function(e){t.$set(t.agencyInfo,"ta_type",e)},expression:"agencyInfo.ta_type"}},t._l(t.taTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"销售渠道",prop:"sale_channel"}},[a("h-select",{attrs:{isString:"",filterable:""},model:{value:t.agencyInfo.sale_channel,callback:function(e){t.$set(t.agencyInfo,"sale_channel",e)},expression:"agencyInfo.sale_channel"}},t._l(t.channelList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.agencyCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveAgency}},[t._v("确认")])],1)],1),t._v(" "),a("import-account-transfer",{ref:"agencyImportDialog",attrs:{"on-import-success":t.refreshAgency}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var u=a("VU/8")(l,c,!1,function(t){a("Xr6b")},null,null);e.default=u.exports},"t0z/":function(t,e){},tBMG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("mvHQ"),i=a.n(s),o=a("5/bi");var r=a("3dxc"),l={name:"tradeRival",data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],actionType:"",showTradeRivalDialog:!1,rivalTypeList:[],rivalMarketTypeList:[],rivalColumn:[{title:"交易对手序号",key:"rival_id",hiddenCol:!0,align:"",ellipsis:!0},{title:"交易对手编号",key:"rival_code",align:"left",ellipsis:!0},{title:"交易对手名称",key:"traderival_name",align:"left",ellipsis:!0},{title:"交易对手类型",key:"rival_type",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._1)(s.rival_type,t.rivalTypeList))}},{title:"市场类型",key:"rival_market_types",align:"left",ellipsis:!0,render:function(e,a){var s=a.row;return e("span",{},Object(n._2)(s.rival_market_types,t.rivalMarketTypeList))}},{title:"联系人",key:"linkman",align:"left",ellipsis:!0},{title:"联系地址",key:"address",align:"left",ellipsis:!0},{title:"联系电话",key:"phone_no",align:"left",ellipsis:!0},{title:"传真号码",key:"fax_no",align:"left",ellipsis:!0}],queryForm:{rivalTypes:"",rivalMarketType:"",keyword:""},rivalInfo:{rival_id:"",rival_code:"",traderival_name:"",rival_type:"",rival_market_types:"",linkman:"",address:"",phone_no:"",fax_no:""}}},computed:{rivalType:{get:function(){return this.queryForm.rivalTypes?this.queryForm.rivalTypes.split(","):[]},set:function(t){this.queryForm.rivalTypes=t.join(",")}}},mounted:function(){var t=this;Object(n.t)(40388).then(function(e){return t.rivalTypeList=e.data}),Object(n.t)(600301).then(function(e){return t.rivalMarketTypeList=e.data}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-90},addRival:function(){this.rivalInfo={rival_id:"",rival_code:"",traderival_name:"",rival_type:"",rival_market_types:"",linkman:"",address:"",phone_no:"",fax_no:""},this.$refs.rivalForm.resetFields(),this.actionType="add",this.showTradeRivalDialog=!0},modifyRival:function(){var t=this.$refs.datagrid.$refs.gridContent.getSelection();0!=t.length?this.rivalDbclick(t[0]):this.$alert("请选择一条交易对手记录!","错误",{confirmButtonText:"确定",type:"error"})},rivalDbclick:function(t){this.rivalInfo=t,this.actionType="modify",this.showTradeRivalDialog=!0},deleteRival:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();0!=e.length?this.$confirm("确定删除该条记录吗","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e[0].rival_id,o.a.post("/systemmgnt/rival/delete.json",{rivalId:a})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"确定",{confirmButtonText:"确定",type:"success"}),t.refreshRival()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}).catch(function(){}):this.$alert("请选择一条交易对手记录!","错误",{confirmButtonText:"确定",type:"error"})},uploadRival:function(){this.$refs.rivalUploadDialog.showDialog("7",null)},cancelRival:function(){this.showTradeRivalDialog=!1},submitRival:function(){var t,e=this,a=!0;(this.$refs.rivalForm.validate(function(t){return a=t&&a}),a)?"add"==this.actionType?(t=this.rivalInfo,o.a.post("/systemmgnt/rival/insert.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"确定",{confirmButtonText:"确定",type:"success",callback:function(t){e.showTradeRivalDialog=!1}}).then(function(){e.showTradeRivalDialog=!1}),e.refreshRival()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&function(t){return o.a.post("/systemmgnt/rival/update.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return i()(t)}})}(this.rivalInfo).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"确定",{confirmButtonText:"确定",type:"success",callback:function(t){e.showTradeRivalDialog=!1}}).then(function(){e.showTradeRivalDialog=!1}),e.refreshRival()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求,请重新检查","错误",{confirmButtonText:"确定",type:"error"})},refreshRival:function(){this.$refs.datagrid.dataChange(1)}},components:{ImportAccountTransfer:a("npUS").a,HDatagrid:r.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-traderival full-h",attrs:{id:"full-h-wrapper"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"交易对手类型"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.rivalType,callback:function(e){t.rivalType=e},expression:"rivalType"}},t._l(t.rivalTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"市场类型"}},[a("el-select",{attrs:{filterable:"",clearable:""},model:{value:t.queryForm.rivalMarketType,callback:function(e){t.$set(t.queryForm,"rivalMarketType",e)},expression:"queryForm.rivalMarketType"}},t._l(t.rivalMarketTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refreshRival}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"full-h",attrs:{slot:"right"},slot:"right"},[a("div",{staticClass:"ctrls"},[a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.addRival}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"edit"},on:{click:t.modifyRival}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.deleteRival}},[t._v("删除")]),t._v(" "),a("h-button",{attrs:{icon:"android-upload"},on:{click:t.uploadRival}},[t._v("导入")])],1),t._v(" "),a("h-input",{staticStyle:{width:"215px"},attrs:{maxlength:32,placeholder:"请输入交易对手编号或名称"},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword",e)},expression:"queryForm.keyword"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("h-icon",{attrs:{name:"search"},nativeOn:{click:function(e){return e.stopPropagation(),t.refreshRival(e)}}})],1)])])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","on-row-db-click":t.rivalDbclick,pageSize:100,"page-size-opts":t.pageSizeOpts,columns:t.rivalColumn,"bind-form":t.queryForm,url:"/systemmgnt/rival/page.json"}})],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500","mask-closable":!1},model:{value:t.showTradeRivalDialog,callback:function(e){t.showTradeRivalDialog=e},expression:"showTradeRivalDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增交易对手")]):t._e(),t._v(" "),"modify"==t.actionType?a("span",[t._v("修改交易对手")]):t._e()]),t._v(" "),a("h-row",[a("h-col",[a("h-form",{ref:"rivalForm",attrs:{model:t.rivalInfo,"label-width":100}},[a("h-form-item",{attrs:{required:"",label:"交易对手编号",prop:"rival_code"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:32},model:{value:t.rivalInfo.rival_code,callback:function(e){t.$set(t.rivalInfo,"rival_code",e)},expression:"rivalInfo.rival_code"}})],1),t._v(" "),a("h-form-item",{attrs:{required:"",label:"交易对手名称",prop:"traderival_name"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.rivalInfo.traderival_name,callback:function(e){t.$set(t.rivalInfo,"traderival_name",e)},expression:"rivalInfo.traderival_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"交易对手类型",prop:"rival_type"}},[a("h-select",{attrs:{clearable:"",filterable:""},model:{value:t.rivalInfo.rival_type,callback:function(e){t.$set(t.rivalInfo,"rival_type",e)},expression:"rivalInfo.rival_type"}},t._l(t.rivalTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"市场类型",prop:"rival_market_types"}},[a("h-select",{attrs:{multiple:"",isString:"",filterable:"",hideMult:"",showBottom:""},model:{value:t.rivalInfo.rival_market_types,callback:function(e){t.$set(t.rivalInfo,"rival_market_types",e)},expression:"rivalInfo.rival_market_types"}},t._l(t.rivalMarketTypeList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("h-form-item",{attrs:{label:"联系人",prop:"linkman"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.rivalInfo.linkman,callback:function(e){t.$set(t.rivalInfo,"linkman",e)},expression:"rivalInfo.linkman"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.rivalInfo.address,callback:function(e){t.$set(t.rivalInfo,"address",e)},expression:"rivalInfo.address"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"联系电话",prop:"phone_no"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:32},model:{value:t.rivalInfo.phone_no,callback:function(e){t.$set(t.rivalInfo,"phone_no",e)},expression:"rivalInfo.phone_no"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"传真号码",prop:"fax_no"}},[a("h-input",{attrs:{lengthByByte:"",maxlength:128},model:{value:t.rivalInfo.fax_no,callback:function(e){t.$set(t.rivalInfo,"fax_no",e)},expression:"rivalInfo.fax_no"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelRival}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.submitRival}},[t._v("确认")])],1)],1),t._v(" "),a("import-account-transfer",{ref:"rivalUploadDialog",attrs:{"on-import-success":t.refreshRival}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"text",name:"hidden1"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticStyle:{display:"none"}},[e("span"),e("input",{attrs:{type:"password",name:"hidden2"}})])}]};var u=a("VU/8")(l,c,!1,function(t){a("cVO9")},null,null);e.default=u.exports},tCAK:function(t,e){},"tHz+":function(t,e){},tmdt:function(t,e){},"tq1/":function(t,e,a){"use strict";var n=a("BO1k"),s=a.n(n),i=a("woOf"),o=a.n(i),r=a("22iY"),l=a("Q5rI"),c={name:"FundChooseMsgBox",data:function(){return{autoHeight:0,showUsedFundDialog:!1,showPage:!1,type:"",selectedFundList:"",gridData:[],fundTypeList:[],custodianInfoList:[],pageSizeOpts:[25,50,75,100],fundColumns:[{type:"selection",width:50},{title:"产品编号",key:"fund_id",ellipsis:!0,align:"left",hiddenCol:!0},{title:"产品代码",key:"fund_code",ellipsis:!0,align:"left"},{title:"产品名称",key:"fund_name",ellipsis:!0,align:"left"}],queryInfo:{fundType:"",fundTrustBank:"",keyword:""},pageInfo:{pageNo:1,pageSize:100,total:0,current:1}}},watch:{showUsedFundDialog:function(t){t||(this.selectedFundList="",this.gridData=[],this.pageInfo.current=1)}},computed:{fund_type:{get:function(){return this.queryInfo.fundType?this.queryInfo.fundType.split(","):[]},set:function(t){this.queryInfo.fundType=t.join(",")}},fund_trust_bank:{get:function(){return this.queryInfo.fundTrustBank?this.queryInfo.fundTrustBank.split(","):[]},set:function(t){this.queryInfo.fundTrustBank=t.join(",")}}},activated:function(){var t=this;Object(l.t)(610087).then(function(e){return t.fundTypeList=e.data}),Object(l.j)("1").then(function(e){e.data&&e.data.length>0&&(t.custodianInfoList=e.data)})},methods:{showMsgBox:function(t,e,a,n){this.selectedFundList=t,this.pageInfo.pageNo=1,this.queryInfo.fundType="",this.queryInfo.fundTrustBank="",this.queryInfo.keyword="",this.queryInfo.trustType=n,this.queryUsedFund(t),this.autoHeight=e-150,this.type=a,this.showUsedFundDialog=!0},query:function(){this.queryUsedFund(this.selectedFundList)},queryUsedFund:function(t){var e=this;Object(r.k)(this.pageInfo.pageNo,this.pageInfo.pageSize,this.queryInfo.fundType,this.queryInfo.fundTrustBank,this.queryInfo.keyword,this.queryInfo.trustType).then(function(a){if(e.pageInfo.total=a.data.total,e.pageInfo.total>e.pageInfo.pageSize?e.showPage=!0:e.showPage=!1,e.gridData=a.data.list.map(function(t){return o()(t,{_checked:!1})}),t&&t.length>0){var n=t.split(","),i=!0,r=!1,l=void 0;try{for(var c,u=s()(e.gridData);!(i=(c=u.next()).done);i=!0){var d=c.value,f=!0,p=!1,h=void 0;try{for(var _,m=s()(n);!(f=(_=m.next()).done);f=!0){var b=_.value;if(d.fund_id==b){d._checked=!0;break}}}catch(t){p=!0,h=t}finally{try{!f&&m.return&&m.return()}finally{if(p)throw h}}}}catch(t){r=!0,l=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw l}}}})},selectedOne:function(t,e){this.selectedFundList?this.selectedFundList+=","+e.fund_id:this.selectedFundList=e.fund_id.toString()},cancelSelected:function(t,e){if(this.selectedFundList){for(var a=this.selectedFundList.split(","),n=0;n<a.length;n++)a[n]==e.fund_id&&a.splice(n,1);this.selectedFundList=a.join(",")}},selectedAll:function(t){if(t.length>0){var e=!0,a=!1,n=void 0;try{for(var i,o=s()(t);!(e=(i=o.next()).done);e=!0){var r=i.value;this.selectedFundList?this.selectedFundList+=","+r.fund_id:this.selectedFundList=r.fund_id}}catch(t){a=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw n}}}else{var l=!0,c=!1,u=void 0;try{for(var d,f=s()(this.gridData);!(l=(d=f.next()).done);l=!0){var p=d.value;if(this.selectedFundList){for(var h=this.selectedFundList.split(","),_=0;_<h.length;_++)h[_]==p.fund_id&&h.splice(_,1);this.selectedFundList=h.join(",")}}}catch(t){c=!0,u=t}finally{try{!l&&f.return&&f.return()}finally{if(c)throw u}}}},dataChange:function(t){t&&(this.pageInfo.pageNo=t,this.pageInfo.current=t),this.queryUsedFund(this.selectedFundList)},pageSizeChange:function(t){this.pageInfo.pageSize=t,this.pageInfo.current=1,this.pageInfo.pageNo=1,this.queryUsedFund(this.selectedFundList)},cancelUsedFund:function(){this.showUsedFundDialog=!1},saveUsedFund:function(){var t=this.selectedFundList.replace(/\s+/g,",");this.showUsedFundDialog=!1,this.$emit("saveFundInfo",t)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"820px","mask-closable":!1,top:"50"},model:{value:t.showUsedFundDialog,callback:function(e){t.showUsedFundDialog=e},expression:"showUsedFundDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["1"==t.type?a("span",[t._v("产品名称")]):t._e(),t._v(" "),"2"==t.type?a("span",[t._v("可使用产品")]):t._e()]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{position:"relative","font-size":"12px","white-space":"nowrap"},attrs:{size:"mini",inline:!0,model:t.queryInfo}},[a("el-form-item",{attrs:{label:"产品类型"}},[a("el-select",{attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":""},model:{value:t.fund_type,callback:function(e){t.fund_type=e},expression:"fund_type"}},t._l(t.fundTypeList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"托管人"}},[a("el-select",{attrs:{filterable:"",clearable:"",multiple:"","collapse-tags":""},model:{value:t.fund_trust_bank,callback:function(e){t.fund_trust_bank=e},expression:"fund_trust_bank"}},t._l(t.custodianInfoList,function(t){return a("el-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1)],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"195px"},attrs:{maxlength:32,placeholder:"请输入产品编码或名称"},model:{value:t.queryInfo.keyword,callback:function(e){t.$set(t.queryInfo,"keyword",e)},expression:"queryInfo.keyword"}})],1),t._v(" "),a("el-form-item",{staticStyle:{position:"absolute",right:"0",top:"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1)],1),t._v(" "),a("h-table",{ref:"gridContent",attrs:{data:t.gridData,bodyAlgin:"right",headAlgin:"left",height:t.autoHeight,columns:t.fundColumns,"highlight-row":"","row-select":""},on:{"on-select":t.selectedOne,"on-select-cancel":t.cancelSelected,"on-select-all":t.selectedAll}}),t._v(" "),a("h-page",{directives:[{name:"show",rawName:"v-show",value:t.showPage,expression:"showPage"}],ref:"gridPage",staticStyle:{padding:"5px 0 0 0"},attrs:{current:t.pageInfo.current,total:t.pageInfo.total,pageSizeOpts:t.pageSizeOpts,"show-total":"","show-elevator":"","show-sizer":"","page-size":t.pageInfo.pageSize},on:{"on-change":t.dataChange,"on-page-size-change":t.pageSizeChange}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.cancelUsedFund}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveUsedFund}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("iJ63")},"data-v-61163bdf",null);e.a=d.exports},tsX2:function(t,e){},uYps:function(t,e){},vbRs:function(t,e){},"voR+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("pMtO"),o=a("lbHh"),r=a.n(o),l={name:"balAccInitTemple",components:{HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],fundIdList:[],checkIsOrNo:[],initTemple:[],transferTypeList:[],checkAccResultList:[],checkAccStatusList:[{code:"0",text:"未对账"},{code:"1",text:"已对账"}],sysDate:r.a.get("CurrSysDate"),showAllocInitDialog:!1,allocInitColumns:[{title:"交收日期",key:"curr_date",align:"center",ellipsis:!0},{title:"产品编号",key:"fund_id",align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品代码",key:"fund_code",align:"center",ellipsis:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"划款模式",key:"transfer_type",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.transfer_type,t.transferTypeList))}},{title:"T-1日日终账套余额",key:"account_last_balance",align:"center",ellipsis:!0,width:120,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_last_balance))}},{title:"日初账套余额",key:"account_init_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.account_init_balance))}},{title:"日初证券清算款",key:"stock_clear_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.stock_clear_balance))}},{title:"日初投资系统可用",key:"o32_init_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_init_balance))}},{title:"投资系统当前资金冻结金额",key:"o32_init_frozen_balance",align:"center",ellipsis:!0,width:130,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.o32_init_frozen_balance))}},{title:"日初差额",key:"init_diff_balance",align:"center",ellipsis:!0,render:function(t,e){var a=e.row;return t("span",{style:{fontWeight:"bold"}},Object(s.h)(a.init_diff_balance))}},{title:"对账结果",key:"init_check_acc_result",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.init_check_acc_result,t.checkAccResultList))}},{title:"对账状态",key:"init_check_acc_status",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.init_check_acc_status,t.checkAccStatusList))}},{title:"日初备注",key:"init_check_acc_remark",align:"center",ellipsis:!0}],queryForm:{initQueryDate:r.a.get("CurrSysDate"),initCkaccStatus:"",initFundIds:""},allocInitInfo:{fund_id:"",curr_date:"",fund_code:"",fund_name:"",init_diff_balance:"",init_check_acc_remark:""},allocProcess:{fundCount:0,unfinishedCount:0,completedCount:0}}},watch:{showAllocInitDialog:function(t){t?this.openMask():this.closeMask()}},computed:{initQueryDate:{get:function(){return this.queryForm.initQueryDate?Object(s.R)(this.queryForm.initQueryDate):Object(s.R)(this.sysDate)},set:function(t){this.queryForm.initQueryDate=Object(s.Q)(t)}},initFundIds:{get:function(){return this.queryForm.initFundIds?this.queryForm.initFundIds.split(","):[]},set:function(t){this.queryForm.initFundIds=t.join(",")}}},activated:function(){var t=this;Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data})},mounted:function(){var t=this;Object(s.t)(90529).then(function(e){return t.checkAccResultList=e.data}),Object(s.t)(610001).then(function(e){return t.checkIsOrNo=e.data}),Object(s.t)(90524).then(function(e){return t.transferTypeList=e.data}),this.refresh()},methods:{refresh:function(){var t=this;Object(i.g)(this.queryForm.initQueryDate,this.queryForm.initCkaccStatus,this.queryForm.initFundIds,this.$refs.datagrid.getPageNo(),this.$refs.datagrid.getPageSize()).then(function(e){t.initTemple=e.data.list,t.loadSuccess(t.initTemple),t.$refs.datagrid.dataChange(1)})},loadSuccess:function(t){var e=t;if(e.length>0){for(var a=0,n=0;n<e.length;n++)"1"==e[n].init_check_acc_status&&a++;var s=e.length-a;this.allocProcess={fundCount:e.length,unfinishedCount:s,completedCount:a}}else this.allocProcess={fundCount:0,unfinishedCount:0,completedCount:0}},resizeTable:function(t){this.autoHeight=t},initPass:function(){var t=this;return 0==this.$refs.datagrid.$refs.gridContent.getSelection().length?(this.openMask(),void this.$alert("当前不存在日初对账数据，不允许日初余额核对","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):this.sysDate!=this.queryForm.initQueryDate?(this.openMask(),void this.$alert("非系统当日，不允许日初余额核对","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):void Object(i.e)().then(function(e){e&&200==e.status?"0"==e.data.errorNo?(t.openMask(),t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):(t.openMask(),t.$alert(e.data.errorInfo,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(t.openMask(),t.$alert("日初余额对账操作失败","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}))})},initRemark:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();return 0==e.length?(this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):e[0].curr_date<Object(s.Q)(this.sysDate)?(this.openMask(),void this.$alert("只能修改当日数据的备注!","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})):(this.allocInitInfo=e[0],this.$refs.allocInitForm.resetFields(),void(this.showAllocInitDialog=!0))},allocInitCancel:function(){this.showAllocInitDialog=!1},saveRemark:function(){var t=this,e=this.allocInitInfo.fund_id+","+this.allocInitInfo.curr_date+","+this.allocInitInfo.init_check_acc_remark;Object(i.l)(e).then(function(e){e.data.success?(t.$alert("操作成功","成功",{confirmButtonText:"确定",type:"success",callback:function(e){t.showAllocInitDialog=!1}}).then(function(){t.showAllocInitDialog=!1}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h"},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},[a("el-form-item",{attrs:{label:"交收日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.initQueryDate,callback:function(e){t.initQueryDate=e},expression:"initQueryDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.initFundIds,callback:function(e){t.initFundIds=e},expression:"initFundIds"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"日初对账"}},[a("el-select",{attrs:{clearable:""},model:{value:t.queryForm.initCkaccStatus,callback:function(e){t.$set(t.queryForm,"initCkaccStatus",e)},expression:"queryForm.initCkaccStatus"}},t._l(t.checkIsOrNo,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.initPass}},[t._v("对账")]),t._v(" "),a("el-button",{attrs:{type:"ghost"},on:{click:t.initRemark}},[t._v("备注")])],1)],1)],1)],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{height:t.autoHeight,stripe:"",hasPage:"","highlight-row":"","auto-load":!1,url:"/cashcheck/daily/allocInit.json",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.allocInitColumns,bindForm:t.queryForm},model:{value:t.initTemple,callback:function(e){t.initTemple=e},expression:"initTemple"}}),t._v(" "),a("div",{staticClass:"wrapper mt10",attrs:{id:"inner-on-transfer-approve"}},[a("h-row",{attrs:{"class-name":"border-dashed-top pt10 mt10"}},[a("header",{staticClass:"headline"},[a("h-icon",{attrs:{name:"pause"}}),t._v(" "),a("span",{staticClass:"title",staticStyle:{"font-size":"14px"}},[t._v("对账进度")])],1),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"16px"}},[t._v("共"+t._s(t.allocProcess.fundCount)+"个产品")])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"16px",color:"#DA0001"}},[t._v(t._s(t.allocProcess.unfinishedCount)+"个未开始")])])]),t._v(" "),a("h-col",{staticClass:"inner",attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label",staticStyle:{"font-size":"16px",color:"#3BB300"}},[t._v(t._s(t.allocProcess.completedCount)+"个对账完成")])])])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"300","mask-closable":!1},model:{value:t.showAllocInitDialog,callback:function(e){t.showAllocInitDialog=e},expression:"showAllocInitDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("备注")])]),t._v(" "),a("h-form",{ref:"allocInitForm",attrs:{model:t.allocInitInfo,"label-width":60}},[a("h-form-item",{attrs:{label:"产品名称",prop:"fund_name"}},[a("h-input",{attrs:{disabled:"",type:"text"},model:{value:t.allocInitInfo.fund_name,callback:function(e){t.$set(t.allocInitInfo,"fund_name",e)},expression:"allocInitInfo.fund_name"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"差额",prop:"init_diff_balance"}},[a("h-typefield",{attrs:{disabled:"",type:"money",suffixNum:"2",divided:""},model:{value:t.allocInitInfo.init_diff_balance,callback:function(e){t.$set(t.allocInitInfo,"init_diff_balance",e)},expression:"allocInitInfo.init_diff_balance"}})],1),t._v(" "),a("h-form-item",{attrs:{label:"备注",prop:"init_check_acc_remark"}},[a("h-input",{attrs:{type:"text"},model:{value:t.allocInitInfo.init_check_acc_remark,callback:function(e){t.$set(t.allocInitInfo,"init_check_acc_remark",e)},expression:"allocInitInfo.init_check_acc_remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.allocInitCancel}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveRemark}},[t._v("确认")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("t0z/")},"data-v-311c6bca",null);e.default=u.exports},wTN1:function(t,e){},wkhj:function(t,e){},wsXy:function(t,e){},"y+aP":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"extendRow",props:{row:Object}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h-form",{staticClass:"expand-row",attrs:{"label-width":100,cols:"4"}},[t.row.rival_name?a("h-form-item",{attrs:{label:"对手方"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.rival_name,callback:function(e){t.$set(t.row,"rival_name",e)},expression:"row.rival_name"}})],1):t._e(),t._v(" "),t.row.issuer_name?a("h-form-item",{attrs:{label:"发行人"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.issuer_name,callback:function(e){t.$set(t.row,"issuer_name",e)},expression:"row.issuer_name"}})],1):t._e(),t._v(" "),t.row.trust_bank_name?a("h-form-item",{attrs:{label:"托管人"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.trust_bank_name,callback:function(e){t.$set(t.row,"trust_bank_name",e)},expression:"row.trust_bank_name"}})],1):t._e(),t._v(" "),t.row.open_date?a("h-form-item",{attrs:{label:"开户日期"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.open_date,callback:function(e){t.$set(t.row,"open_date",e)},expression:"row.open_date"}})],1):t._e(),t._v(" "),t.row.ta_name?a("h-form-item",{attrs:{label:"TA类型"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.ta_name,callback:function(e){t.$set(t.row,"ta_name",e)},expression:"row.ta_name"}},[t._v("}\n            ")])],1):t._e(),t._v(" "),t.row.bank_linkman?a("h-form-item",{attrs:{label:"联系人"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.bank_linkman,callback:function(e){t.$set(t.row,"bank_linkman",e)},expression:"row.bank_linkman"}})],1):t._e(),t._v(" "),t.row.bank_phone?a("h-form-item",{attrs:{label:"联系电话",prop:"bank_phone"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.bank_phone,callback:function(e){t.$set(t.row,"bank_phone",e)},expression:"row.bank_phone"}})],1):t._e(),t._v(" "),t.row.bank_fax?a("h-form-item",{attrs:{label:"传真",prop:"bank_fax"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.bank_fax,callback:function(e){t.$set(t.row,"bank_fax",e)},expression:"row.bank_fax"}})],1):t._e(),t._v(" "),t.row.bank_mail?a("h-form-item",{attrs:{label:"邮箱",prop:"bank_mail"}},[a("h-input",{attrs:{disabled:""},model:{value:t.row.bank_mail,callback:function(e){t.$set(t.row,"bank_mail",e)},expression:"row.bank_mail"}})],1):t._e()],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(t){a("HaNU")},"data-v-77d5713f",null);e.default=i.exports},ykGC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Q5rI"),s=a("8DhI"),i=a("ri5M"),o={name:"review",data:function(){return{autoHeight:0,showDetail:!1,showModify:!1,operatorList:[],fundList:[],stampTypeList:[],stampType:"",checkType:"",queryCheck:{checkStatus:"1",inputOperator:null,objectType:4},stamp:{stamp_id:"",stamp_name:"",stamp_type:"",stampType:"",operator_name:"",operator_list:"",operatorNameList:"",fund_name:"",file_id:"",input_date:"",modify_desc:""},isScrollBar:{marginTop:"10px",overflow:"auto",maxHeight:""},imgInfo:{imgUrl1:"",imgUrl2:""}}},activated:function(){this.$refs.reviewTable.refresh()},mounted:function(){var t=this;Object(n.N)(!1).then(function(e){e.data&&e.data.length>0&&(t.operatorList=[{code:"-1",text:"全部"}],t.operatorList=t.operatorList.concat(e.data))}),Object(n.t)(90538).then(function(e){t.stampTypeList=e.data}),Object(n.w)("/common/fundNamelist.json?type=id").then(function(e){e.data&&e.data.length>0&&(t.fundList=t.fundList.concat(e.data))}),this.re_layout()},methods:{re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0,e=document.getElementById("full-h-wrapper").offsetHeight;t>e/2&&(this.isScrollBar.maxHeight=e/2+"px",t=e/2),this.autoHeight=e-t-70,this.$refs.reviewTable.resizeTable(this.autoHeight)},clearDate:function(){this.stamp={},this.showDetail=!1,this.$nextTick(this.re_layout)},rowCheck:function(t){var e=this;Object(s.a)(t.check_id,t.object_type).then(function(a){a.data&&"0"==a.data.code?(e.showDetail=!0,e.stamp=a.data.data,e.stamp.stampType=Object(n._1)(e.stamp.stamp_type,e.stampTypeList),e.stamp.operatorNameList=Object(n._2)(e.stamp.operator_list,e.operatorList),-1!=t.object_name.indexOf("jpg")||-1!=t.object_name.indexOf("png")||-1!=t.object_name.indexOf("PNG")||-1!=t.object_name.indexOf("JPG")?e.imgInfo.imgUrl2=window.LOCAL_CONFIG.API_HOME+"/systemmgnt/stamp/downloadStamp.json?fileId="+e.stamp.file_id:Object(n._4)(e.stamp.file_id).then(function(t){e.imgInfo.imgUrl2=t.data.stampInfo}),3==t.check_type&&Object(i.e)(e.stamp.stamp_id).then(function(t){t.data&&(-1!=t.data.stamp_name.indexOf("jpg")||-1!=t.data.stamp_name.indexOf("png")||-1!=t.data.stamp_name.indexOf("PNG")||-1!=t.data.stamp_name.indexOf("JPG")?e.imgInfo.imgUrl1=window.LOCAL_CONFIG.API_HOME+"/systemmgnt/stamp/downloadStamp.json?fileId="+t.data.file_id:Object(n._4)(t.data.file_id).then(function(t){e.imgInfo.imgUrl1=t.data.stampInfo})),t.data.file_id==e.stamp.file_id?e.showModify=!1:e.showModify=!0}),e.$nextTick(e.re_layout)):(e.openMask(),e.$alert(a.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(t){e.closeMask()}}).then(function(){e.closeMask()}))}),this.checkType=t.check_type}},components:{ReviewTable:a("RCPB").a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-review full-h",attrs:{id:"full-h-wrapper"}},[a("review-table",{ref:"reviewTable",attrs:{"on-selection-change":t.rowCheck,"clear-data":t.clearDate,"query-check":t.queryCheck}}),t._v(" "),t.showDetail?a("div",{staticClass:"detail",style:t.isScrollBar,attrs:{id:"wrapper-0"}},[a("div",{staticClass:"wrapper"},[t._m(0),t._v(" "),a("h-row",[a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("签章类型")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.stampType}},[t._v(t._s(t.stamp.stampType))])])]),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("签章名称")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.stamp_name}},[t._v(t._s(t.stamp.stamp_name))])])]),t._v(" "),"1"==t.stamp.stamp_type?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("操作员")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.operator_name}},[t._v(t._s(t.stamp.operator_name))])])]):t._e(),t._v(" "),"2"==t.stamp.stamp_type?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("产品")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.fund_name}},[t._v(t._s(t.stamp.fund_name))])])]):t._e(),t._v(" "),"3"==t.stamp.stamp_type?a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("可使用操作员")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.operatorNameList}},[t._v(t._s(t.stamp.operatorNameList))])])]):t._e(),t._v(" "),a("h-col",{attrs:{span:"6","class-name":"inner"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"value",attrs:{title:t.stamp.remark}},[t._v(t._s(t.stamp.remark))])])])],1),t._v(" "),t._m(1),t._v(" "),a("h-row",["1"==t.stamp.stamp_type||"2"==t.stamp.stamp_type?a("h-col",{attrs:{span:"5","class-name":"image-inner"}},[a("div",{staticClass:"image"},[3==this.checkType&&t.showModify?a("img",{attrs:{src:t.imgInfo.imgUrl1,height:"40",width:"80",oncontextmenu:"return false;"}}):t._e(),t._v(" "),3==this.checkType&&t.showModify?a("h-icon",{attrs:{name:"arrow-right-c"}}):t._e(),t._v(" "),a("img",{attrs:{src:t.imgInfo.imgUrl2,height:"40",width:"80",oncontextmenu:"return false;"}})],1)]):t._e(),t._v(" "),"3"==t.stamp.stamp_type?a("h-col",{attrs:{span:"7","class-name":"image-inner"}},[a("div",{staticClass:"image"},[3==this.checkType&&t.showModify?a("img",{attrs:{src:t.imgInfo.imgUrl1,height:"100",width:"120",oncontextmenu:"return false;"}}):t._e(),t._v(" "),3==this.checkType&&t.showModify?a("h-icon",{attrs:{name:"arrow-right-c"}}):t._e(),t._v(" "),a("img",{attrs:{src:t.imgInfo.imgUrl2,height:"100",width:"120",oncontextmenu:"return false;"}})],1)]):t._e()],1),t._v(" "),t.stamp.modify_desc?a("header",{staticClass:"headline mt10 pt10 border-dashed-top"},[a("i",{staticClass:"icon-l"}),t._v(" "),a("span",{staticClass:"title"},[t._v("变更内容")])]):t._e(),t._v(" "),t.stamp.modify_desc?a("h-row",t._l(t.stamp.modify_desc.split(";"),function(e,n){return a("h-col",{key:n,staticClass:"inner",attrs:{span:"6"}},[a("div",{staticClass:"item"},[a("div",{staticClass:"label"},[t._v(t._s(e.split(":")[0]))]),t._v(" "),a("div",{staticClass:"value",attrs:{title:decodeURIComponent(e.split(":")[1])}},[t._v(t._s(decodeURIComponent(e.split(":")[1])))])])])}),1):t._e()],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"headline"},[e("i",{staticClass:"icon-1"}),this._v(" "),e("span",{staticClass:"title"},[this._v("详情")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"headline mt10 pt10 border-dashed-top"},[e("i",{staticClass:"icon-l"}),this._v(" "),e("span",{staticClass:"title"},[this._v("签章")])])}]};var l=a("VU/8")(o,r,!1,function(t){a("F2X7"),a("HUcF")},null,null);e.default=l.exports},yldi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3dxc"),s=a("Q5rI"),i=a("mvHQ"),o=a.n(i),r=a("5/bi");var l={name:"approveRule",components:{FundChooseMsgBox:a("tq1/").a,HDatagrid:n.a},data:function(){var t=this;return{autoHeight:0,pageSizeOpts:[25,50,75,100],fundIdList:[],copBusinClassList:[],businFlowNoList:[],errorData:[],showApproveRuleDialog:!1,showResult:!1,approveRuleColumns:[],actionType:"",rule:"",errorColums:[{width:80,key:"lineNum",title:"行号",align:"center"},{key:"errorInfo",title:"错误原因",align:"center"}],fundColumns:[{title:"审批规则序号",type:"index",align:"center"},{title:"产品编号",key:"fund_id",sortable:!0,align:"center",ellipsis:!0,hiddenCol:!0},{title:"产品名称",key:"fund_name",align:"center",ellipsis:!0},{title:"工作流流程名称",key:"businflow_no",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.businflow_no,t.businFlowNoList))}}],businessColumns:[{title:"审批规则序号",type:"index",align:"center"},{title:"业务编号",key:"cop_busin_id",align:"center",sortable:!0,ellipsis:!0,hiddenCol:!0},{title:"业务名称",key:"cop_busin_class",align:"center",ellipsis:!0},{title:"工作流流程名称",key:"businflow_no",align:"center",ellipsis:!0,render:function(e,a){var n=a.row;return e("span",{},Object(s._1)(n.businflow_no,t.businFlowNoList))}}],queryForm:{fundId:"",businessClass:""},approveRuleInfo:{fund_id:"",cop_busin_class:"",businflow_no:""}}},watch:{showApproveRuleDialog:function(t){t?this.openMask():this.closeMask()},showResult:function(t){t?this.openMask():this.closeMask()}},computed:{fundId:{get:function(){return this.queryForm.fundId?this.queryForm.fundId.split(","):[]},set:function(t){this.queryForm.fundId=t.join(",")}},businessClass:{get:function(){return this.queryForm.businessClass?this.queryForm.businessClass.split(","):[]},set:function(t){this.queryForm.businessClass=t.join(",")}}},activated:function(){var t=this;Object(s.K)(10016).then(function(e){"1"==e.data.data?(t.rule="business",t.approveRuleColumns=t.businessColumns):(t.rule="fund",t.approveRuleColumns=t.fundColumns)}),Object(s.w)("/common/fundNamelist.json?type=id").then(function(e){return t.fundIdList=e.data}),this.refresh()},mounted:function(){var t=this;Object(s.t)(90523).then(function(e){return t.copBusinClassList=e.data}),Object(s.E)().then(function(e){e.data&&e.data.length>0&&(t.businFlowNoList=e.data)}),this.re_layout()},methods:{refresh:function(){this.$refs.datagrid.dataChange(1)},re_layout:function(){var t=document.getElementById("wrapper-0")?document.getElementById("wrapper-0").offsetHeight:0;this.autoHeight=document.getElementById("full-h-wrapper").offsetHeight-t-120},addApproveRule:function(){this.approveRuleInfo={fund_id:"",cop_busin_class:"",businflow_no:""},this.$refs.approveRuleForm.resetFields(),this.actionType="add",this.showApproveRuleDialog=!0},modifyApproveRule:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.approveRuleDbClick(e[0])},approveRuleDbClick:function(t){this.approveRuleInfo=t,t.fund_id&&(this.approveRuleInfo.fund_id=t.fund_id.toString()),t.cop_busin_id&&(this.approveRuleInfo.cop_busin_class=t.cop_busin_id.toString()),this.showApproveRuleDialog=!0,this.actionType="modify"},deleteApproveRule:function(){var t=this,e=this.$refs.datagrid.$refs.gridContent.getSelection();if(0==e.length)return this.openMask(),void this.$alert("请选择一条记录","错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()});this.openMask(),this.$confirm("确认删除这条审批配置规则?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a,n,s;(a=e[0].fund_id,n=e[0].cop_busin_id,s=t.rule,r.a.post("/systemmgnt/approveRule/approveRuleDel.json",{fundId:a,businClass:n,ruleType:s})).then(function(e){e.data&&"0"==e.data.code?(t.$alert(e.data.msg,"确定",{confirmButtonText:"确定",type:"success",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()}),t.refresh()):t.$alert(e.data.msg,"错误",{confirmButtonText:"确定",type:"error",callback:function(e){t.closeMask()}}).then(function(){t.closeMask()})})}).catch(function(){t.closeMask()})},cancelApproveRule:function(){this.showApproveRuleDialog=!1},cancelErrorInfo:function(){this.showResult=!1,this.refresh()},saveApproveRule:function(){var t,e=this,a=!0;(this.$refs.approveRuleForm.validate(function(t){return a=a&&t}),a)?"add"==this.actionType?(t=this.approveRuleInfo,r.a.post("/systemmgnt/approveRule/approveRuleAdd.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showApproveRuleDialog=!1}}).then(function(){e.showApproveRuleDialog=!1}),e.refresh()):t.data&&"1120002"==t.data.code?(e.showApproveRuleDialog=!1,e.showResult=!0,e.errorData=t.data.data):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):"modify"==this.actionType&&function(t){return r.a.post("/systemmgnt/approveRule/approveRuleModify.json",t,{headers:{"Content-Type":"application/json;charset=UTF-8"},transformRequest:function(t){return o()(t)}})}(this.approveRuleInfo).then(function(t){t.data&&"0"==t.data.code?(e.$alert(t.data.msg,"成功",{confirmButtonText:"确定",type:"success",callback:function(t){e.showApproveRuleDialog=!1}}).then(function(){e.showApproveRuleDialog=!1}),e.refresh()):e.$alert(t.data.msg,"错误",{confirmButtonText:"确定",type:"error"})}):this.$alert("输入项不满足要求，请重新检查!","错误",{confirmButtonText:"确定",type:"error"})},choseFundList:function(){var t=document.getElementById("full-h-wrapper").offsetHeight;this.$refs.approveRuleMsgBox.showMsgBox(this.approveRuleInfo.fund_id,t,"1")},saveFundInfo:function(t){this.approveRuleInfo.fund_id=t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-h",attrs:{id:"full-h-wrapper"}},[a("h-row",[a("h-col",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"font-size":"12px"},attrs:{inline:!0,size:"mini",model:t.queryForm}},["fund"==t.rule?a("el-form-item",{attrs:{label:"产品名称"}},[a("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",filterable:""},model:{value:t.fundId,callback:function(e){t.fundId=e},expression:"fundId"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"business"==t.rule?a("el-form-item",{attrs:{label:"业务名称"}},[a("el-select",{attrs:{filterable:"",multiple:"",clearable:"","collapse-tags":""},model:{value:t.businessClass,callback:function(e){t.businessClass=e},expression:"businessClass"}},t._l(t.copBusinClassList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.refresh}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),a("h-button-group",[a("h-button",{attrs:{icon:"add"},on:{click:t.addApproveRule}},[t._v("新增")]),t._v(" "),a("h-button",{attrs:{icon:"editor"},on:{click:t.modifyApproveRule}},[t._v("修改")]),t._v(" "),a("h-button",{attrs:{icon:"delete"},on:{click:t.deleteApproveRule}},[t._v("删除")])],1),t._v(" "),a("h-datagrid",{ref:"datagrid",attrs:{stripe:"",hasPage:"",height:t.autoHeight,"highlight-row":"",pageSize:100,pageSizeOpts:t.pageSizeOpts,columns:t.approveRuleColumns,bindForm:t.queryForm,"on-row-db-click":t.approveRuleDbClick,url:"/systemmgnt/approveRule/approveRuleInfo.json"}}),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"400","mask-closable":!1},model:{value:t.showApproveRuleDialog,callback:function(e){t.showApproveRuleDialog=e},expression:"showApproveRuleDialog"}},[a("p",{attrs:{slot:"header"},slot:"header"},["add"==t.actionType?a("span",[t._v("新增审批规则")]):a("span",[t._v("修改审批规则")])]),t._v(" "),a("h-form",{ref:"approveRuleForm",attrs:{model:t.approveRuleInfo,"label-width":120}},["fund"==t.rule&&"add"==t.actionType?a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("div",[a("h-select",{staticStyle:{width:"175px"},attrs:{showTitle:"",hideMult:"",isString:"",multiple:"",filterable:"",showBottom:""},model:{value:t.approveRuleInfo.fund_id,callback:function(e){t.$set(t.approveRuleInfo,"fund_id",e)},expression:"approveRuleInfo.fund_id"}},t._l(t.fundIdList,function(t){return a("h-option",{key:t.code,attrs:{value:t.code,label:t.text}})}),1),t._v(" "),a("h-button",{staticStyle:{float:"right","margin-top":"3px"},on:{click:t.choseFundList}},[t._v("选择")])],1)]):t._e(),t._v(" "),"fund"==t.rule&&"modify"==t.actionType?a("h-form-item",{attrs:{required:"",label:"产品名称",prop:"fund_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:""},model:{value:t.approveRuleInfo.fund_id,callback:function(e){t.$set(t.approveRuleInfo,"fund_id",e)},expression:"approveRuleInfo.fund_id"}},t._l(t.fundIdList,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),"business"==t.rule?a("h-form-item",{attrs:{required:"",label:"业务名称",prop:"cop_busin_class"}},[a("h-select",{attrs:{showTitle:"",disabled:"modify"==t.actionType,filterable:"",hideMult:"",multiple:"",isString:"",showBottom:""},model:{value:t.approveRuleInfo.cop_busin_class,callback:function(e){t.$set(t.approveRuleInfo,"cop_busin_class",e)},expression:"approveRuleInfo.cop_busin_class"}},t._l(t.copBusinClassList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1):t._e(),t._v(" "),a("h-form-item",{attrs:{required:"",label:"工作流流程名称",prop:"businflow_no"}},[a("h-select",{attrs:{filterable:""},model:{value:t.approveRuleInfo.businflow_no,callback:function(e){t.$set(t.approveRuleInfo,"businflow_no",e)},expression:"approveRuleInfo.businflow_no"}},t._l(t.businFlowNoList,function(t){return a("h-option",{key:t.code,attrs:{label:t.text,value:t.code}})}),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"ghost"},on:{click:t.cancelApproveRule}},[t._v("取消")]),t._v(" "),a("h-button",{attrs:{type:"primary"},on:{click:t.saveApproveRule}},[t._v("确定")])],1)],1),t._v(" "),a("h-msg-box",{staticClass:"customMsgBox",attrs:{width:"500px"},model:{value:t.showResult,callback:function(e){t.showResult=e},expression:"showResult"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("导入结果")])]),t._v(" "),a("h-table",{directives:[{name:"show",rawName:"v-show",value:t.errorData.length>0,expression:"errorData.length>0"}],attrs:{stripe:"",border:"",height:350,data:t.errorData,columns:t.errorColums}}),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("h-button",{attrs:{type:"primary"},on:{click:t.cancelErrorInfo}},[t._v("确定")])],1)],1),t._v(" "),a("fund-choose-msg-box",{ref:"approveRuleMsgBox",on:{saveFundInfo:t.saveFundInfo}})],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("hHP2")},"data-v-4fe1e805",null);e.default=u.exports}});
//# sourceMappingURL=0.0a52309251b1a091507e.js.map